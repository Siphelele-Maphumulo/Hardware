var ub=Object.defineProperty,cb=Object.defineProperties,db=Object.getOwnPropertyDescriptors,LE=Object.getOwnPropertySymbols,hb=Object.prototype.hasOwnProperty,fb=Object.prototype.propertyIsEnumerable,BE=(Xt,ut,P)=>ut in Xt?ub(Xt,ut,{enumerable:!0,configurable:!0,writable:!0,value:P}):Xt[ut]=P,VE=(Xt,ut)=>{for(var P in ut||(ut={}))hb.call(ut,P)&&BE(Xt,P,ut[P]);if(LE)for(var P of LE(ut))fb.call(ut,P)&&BE(Xt,P,ut[P]);return Xt},UE=(Xt,ut)=>cb(Xt,db(ut));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{440:(Xt,ut,P)=>{"use strict";P.d(ut,{nm:()=>re});var c=P(5813);P(5e3),P(5867);var ot=P(5861),Ye=P(9681),We=P(4859),$e=P(2090),Ke=P(1877);const ee=new Map,Qe={activated:!1,tokenObservers:[]},he={initialized:!1,enabled:!1};function me(rt){return ee.get(rt)||Qe}function ge(rt,Ge){ee.set(rt,Ge)}function Ne(){return he}class It{constructor(Ge,Dt,Wt,Zt,pn){if(this.operation=Ge,this.retryPolicy=Dt,this.getWaitDuration=Wt,this.lowerBound=Zt,this.upperBound=pn,this.pending=null,this.nextErrorWaitInterval=Zt,Zt>pn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ge){var Dt=this;return(0,ot.Z)(function*(){Dt.stop();try{Dt.pending=new $e.BH,yield function dt(rt){return new Promise(Ge=>{setTimeout(Ge,rt)})}(Dt.getNextRun(Ge)),Dt.pending.resolve(),yield Dt.pending.promise,Dt.pending=new $e.BH,yield Dt.operation(),Dt.pending.resolve(),yield Dt.pending.promise,Dt.process(!0).catch(()=>{})}catch(Wt){Dt.retryPolicy(Wt)?Dt.process(!1).catch(()=>{}):Dt.stop()}})()}getNextRun(Ge){if(Ge)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Dt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Dt}}}const at=new $e.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Nt(rt){if(!me(rt).activated)throw at.create("use-before-activation",{appName:rt.name})}function Dn(rt,Ge){return mn.apply(this,arguments)}function mn(){return(mn=(0,ot.Z)(function*({url:rt,body:Ge},Dt){const Wt={"Content-Type":"application/json"},Zt=Dt.getImmediate({optional:!0});if(Zt){const Ai=yield Zt.getHeartbeatsHeader();Ai&&(Wt["X-Firebase-Client"]=Ai)}const pn={method:"POST",body:JSON.stringify(Ge),headers:Wt};let cr,bi;try{cr=yield fetch(rt,pn)}catch(Ai){throw at.create("fetch-network-error",{originalErrorMessage:Ai.message})}if(200!==cr.status)throw at.create("fetch-status-error",{httpStatus:cr.status});try{bi=yield cr.json()}catch(Ai){throw at.create("fetch-parse-error",{originalErrorMessage:Ai.message})}const Dr=bi.ttl.match(/^([\d.]+)(s)$/);if(!Dr||!Dr[2]||isNaN(Number(Dr[1])))throw at.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${bi.ttl}`});const is=1e3*Number(Dr[1]),js=Date.now();return{token:bi.token,expireTimeMillis:js+is,issuedAtTimeMillis:js}})).apply(this,arguments)}function lr(rt,Ge){const{projectId:Dt,appId:Wt,apiKey:Zt}=rt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Dt}/apps/${Wt}:exchangeDebugToken?key=${Zt}`,body:{debug_token:Ge}}}const Qn="firebase-app-check-store";let Nn=null;function jr(){return Nn||(Nn=new Promise((rt,Ge)=>{try{const Dt=indexedDB.open("firebase-app-check-database",1);Dt.onsuccess=Wt=>{rt(Wt.target.result)},Dt.onerror=Wt=>{var Zt;Ge(at.create("storage-open",{originalErrorMessage:null===(Zt=Wt.target.error)||void 0===Zt?void 0:Zt.message}))},Dt.onupgradeneeded=Wt=>{0===Wt.oldVersion&&Wt.target.result.createObjectStore(Qn,{keyPath:"compositeKey"})}}catch(Dt){Ge(at.create("storage-open",{originalErrorMessage:Dt.message}))}}),Nn)}function Et(){return(Et=(0,ot.Z)(function*(rt,Ge){const Wt=(yield jr()).transaction(Qn,"readwrite"),pn=Wt.objectStore(Qn).put({compositeKey:rt,value:Ge});return new Promise((cr,bi)=>{pn.onsuccess=Dr=>{cr()},Wt.onerror=Dr=>{var is;bi(at.create("storage-set",{originalErrorMessage:null===(is=Dr.target.error)||void 0===is?void 0:is.message}))}})})).apply(this,arguments)}const Fn=new Ke.Yd("@firebase/app-check");function fr(rt,Ge){return(0,$e.hl)()?function Bt(rt,Ge){return function At(rt,Ge){return Et.apply(this,arguments)}(function Un(rt){return`${rt.options.appId}-${rt.name}`}(rt),Ge)}(rt,Ge).catch(Dt=>{Fn.warn(`Failed to write token to IndexedDB. Error: ${Dt}`)}):Promise.resolve()}function je(){return Ne().enabled}function Ze(){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,ot.Z)(function*(){const rt=Ne();if(rt.enabled&&rt.token)return rt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mt={error:"UNKNOWN_ERROR"};function zt(rt){return $e.US.encodeString(JSON.stringify(rt),!1)}function rn(rt){return yn.apply(this,arguments)}function yn(){return(yn=(0,ot.Z)(function*(rt,Ge=!1){const Dt=rt.app;Nt(Dt);const Wt=me(Dt);let pn,Zt=Wt.token;if(!Zt){const Dr=yield Wt.cachedTokenPromise;Dr&&Fi(Dr)&&(Zt=Dr)}if(!Ge&&Zt&&Fi(Zt))return{token:Zt.token};let bi,cr=!1;if(je()){Wt.exchangeTokenPromise||(Wt.exchangeTokenPromise=Dn(lr(Dt,yield Ze()),rt.heartbeatServiceProvider).then(is=>(Wt.exchangeTokenPromise=void 0,is)),cr=!0);const Dr=yield Wt.exchangeTokenPromise;return yield fr(Dt,Dr),ge(Dt,Object.assign(Object.assign({},Wt),{token:Dr})),{token:Dr.token}}try{Wt.exchangeTokenPromise||(Wt.exchangeTokenPromise=Wt.provider.getToken().then(Dr=>(Wt.exchangeTokenPromise=void 0,Dr)),cr=!0),Zt=yield Wt.exchangeTokenPromise}catch(Dr){"appCheck/throttled"===Dr.code?Fn.warn(Dr.message):Fn.error(Dr),pn=Dr}return Zt?(bi={token:Zt.token},ge(Dt,Object.assign(Object.assign({},Wt),{token:Zt})),yield fr(Dt,Zt)):bi=Gr(pn),cr&&kr(Dt,bi),bi})).apply(this,arguments)}function wr(rt,Ge){const Dt=me(rt),Wt=Dt.tokenObservers.filter(Zt=>Zt.next!==Ge);0===Wt.length&&Dt.tokenRefresher&&Dt.tokenRefresher.isRunning()&&Dt.tokenRefresher.stop(),ge(rt,Object.assign(Object.assign({},Dt),{tokenObservers:Wt}))}function En(rt){const{app:Ge}=rt,Dt=me(Ge);let Wt=Dt.tokenRefresher;Wt||(Wt=function rr(rt){const{app:Ge}=rt;return new It((0,ot.Z)(function*(){let Wt;if(Wt=me(Ge).token?yield rn(rt,!0):yield rn(rt),Wt.error)throw Wt.error}),()=>!0,()=>{const Dt=me(Ge);if(Dt.token){let Wt=Dt.token.issuedAtTimeMillis+.5*(Dt.token.expireTimeMillis-Dt.token.issuedAtTimeMillis)+3e5;return Wt=Math.min(Wt,Dt.token.expireTimeMillis-3e5),Math.max(0,Wt-Date.now())}return 0},3e4,96e4)}(rt),ge(Ge,Object.assign(Object.assign({},Dt),{tokenRefresher:Wt}))),!Wt.isRunning()&&Dt.isTokenAutoRefreshEnabled&&Wt.start()}function kr(rt,Ge){const Dt=me(rt).tokenObservers;for(const Wt of Dt)try{"EXTERNAL"===Wt.type&&null!=Ge.error?Wt.error(Ge.error):Wt.next(Ge)}catch(Zt){}}function Fi(rt){return rt.expireTimeMillis-Date.now()>0}function Gr(rt){return{token:zt(mt),error:rt}}class Bn{constructor(Ge,Dt){this.app=Ge,this.heartbeatServiceProvider=Dt}_delete(){const{tokenObservers:Ge}=me(this.app);for(const Dt of Ge)wr(this.app,Dt.next);return Promise.resolve()}}const li="app-check-internal";!function Cr(){(0,Ye._registerComponent)(new We.wA("app-check",rt=>function wi(rt,Ge){return new Bn(rt,Ge)}(rt.getProvider("app").getImmediate(),rt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((rt,Ge,Dt)=>{rt.getProvider(li).initialize()})),(0,Ye._registerComponent)(new We.wA(li,rt=>function Yr(rt){return{getToken:Ge=>rn(rt,Ge),addTokenListener:Ge=>function vn(rt,Ge,Dt,Wt){const{app:Zt}=rt,pn=me(Zt),cr={next:Dt,error:Wt,type:Ge};if(ge(Zt,Object.assign(Object.assign({},pn),{tokenObservers:[...pn.tokenObservers,cr]})),pn.token&&Fi(pn.token)){const bi=pn.token;Promise.resolve().then(()=>{Dt({token:bi.token}),En(rt)}).catch(()=>{})}pn.cachedTokenPromise.then(()=>En(rt))}(rt,"INTERNAL",Ge),removeTokenListener:Ge=>wr(rt.app,Ge)}}(rt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ye.registerVersion)("@firebase/app-check","0.5.8")}();class re{constructor(){return(0,c.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Xt,ut,P)=>{"use strict";P.d(ut,{zQ:()=>Xe,ww:()=>_t,rT:()=>he,f7:()=>ge,L6:()=>ee,_Q:()=>Qe,lh:()=>me,Qv:()=>Ke,nw:()=>Ne});var c=P(5e3),J=P(7579),q=P(9646),Se=P(8306),Ae=P(8996),Ee=P(6451),be=P(6063);class Re extends J.x{constructor(ct=1/0,lt=1/0,Ve=be.l){super(),this._bufferSize=ct,this._windowTime=lt,this._timestampProvider=Ve,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=lt===1/0,this._bufferSize=Math.max(1,ct),this._windowTime=Math.max(1,lt)}next(ct){const{isStopped:lt,_buffer:Ve,_infiniteTimeWindow:It,_timestampProvider:dt,_windowTime:gt}=this;lt||(Ve.push(ct),!It&&Ve.push(dt.now()+gt)),this._trimBuffer(),super.next(ct)}_subscribe(ct){this._throwIfClosed(),this._trimBuffer();const lt=this._innerSubscribe(ct),{_infiniteTimeWindow:Ve,_buffer:It}=this,dt=It.slice();for(let gt=0;gt<dt.length&&!ct.closed;gt+=Ve?1:2)ct.next(dt[gt]);return this._checkFinalizedStatuses(ct),lt}_trimBuffer(){const{_bufferSize:ct,_timestampProvider:lt,_buffer:Ve,_infiniteTimeWindow:It}=this,dt=(It?1:2)*ct;if(ct<1/0&&dt<Ve.length&&Ve.splice(0,Ve.length-dt),!It){const gt=lt.now();let at=0;for(let Gt=1;Gt<Ve.length&&Ve[Gt]<=gt;Gt+=2)at=Gt;at&&Ve.splice(0,at+1)}}}var ze=P(3099);function pe(xt,ct,lt){let Ve,It=!1;return xt&&"object"==typeof xt?({bufferSize:Ve=1/0,windowTime:ct=1/0,refCount:It=!1,scheduler:lt}=xt):Ve=null!=xt?xt:1/0,(0,ze.B)({connector:()=>new Re(Ve,ct,lt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:It})}var ye=P(3900),Me=P(576);function Oe(xt,ct){return(0,Me.m)(ct)?(0,ye.w)(()=>xt,ct):(0,ye.w)(()=>xt)}var Ue=P(5363),tt=P(4004),Le=P(590),De=P(9468),ke=P(9300),Ce=P(5813),nt=P(2011),ot=P(9808),Ye=P(440),We=P(127);const Ke=new c.OlP("angularfire2.auth.use-emulator"),ee=new c.OlP("angularfire2.auth.settings"),Qe=new c.OlP("angularfire2.auth.tenant-id"),he=new c.OlP("angularfire2.auth.langugage-code"),me=new c.OlP("angularfire2.auth.use-device-language"),ge=new c.OlP("angularfire.auth.persistence"),Ne=(xt,ct,lt,Ve,It,dt,gt,at)=>(0,nt.cc)(`${xt.name}.auth`,"AngularFireAuth",xt.name,()=>{const Gt=ct.runOutsideAngular(()=>xt.auth());if(lt&&Gt.useEmulator(...lt),Ve&&(Gt.tenantId=Ve),Gt.languageCode=It,dt&&Gt.useDeviceLanguage(),gt)for(const[Nt,wt]of Object.entries(gt))Gt.settings[Nt]=wt;return at&&Gt.setPersistence(at),Gt},[lt,Ve,It,dt,gt,at]);let Xe=(()=>{class xt{constructor(lt,Ve,It,dt,gt,at,Gt,Nt,wt,kn,Sn,Dn){const mn=new J.x,jn=(0,q.of)(void 0).pipe((0,Ue.Q)(gt.outsideAngular),(0,ye.w)(()=>dt.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8775)))),(0,tt.U)(()=>(0,nt.on)(lt,dt,Ve)),(0,tt.U)(Yn=>Ne(Yn,dt,at,Nt,wt,kn,Gt,Sn)),pe({bufferSize:1,refCount:!1}));if((0,ot.PM)(It))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,q.of)(null);else{jn.pipe((0,Le.P)()).subscribe();const lr=jn.pipe((0,ye.w)(Qn=>Qn.getRedirectResult().then(On=>On,()=>null)),Ce.iC,pe({bufferSize:1,refCount:!1})),Hn=jn.pipe((0,ye.w)(Qn=>new Se.y(On=>({unsubscribe:dt.runOutsideAngular(()=>Qn.onAuthStateChanged(Nn=>On.next(Nn),Nn=>On.error(Nn),()=>On.complete()))})))),In=jn.pipe((0,ye.w)(Qn=>new Se.y(On=>({unsubscribe:dt.runOutsideAngular(()=>Qn.onIdTokenChanged(Nn=>On.next(Nn),Nn=>On.error(Nn),()=>On.complete()))}))));this.authState=lr.pipe(Oe(Hn),(0,De.R)(gt.outsideAngular),(0,Ue.Q)(gt.insideAngular)),this.user=lr.pipe(Oe(In),(0,De.R)(gt.outsideAngular),(0,Ue.Q)(gt.insideAngular)),this.idToken=this.user.pipe((0,ye.w)(Qn=>Qn?(0,Ae.D)(Qn.getIdToken()):(0,q.of)(null))),this.idTokenResult=this.user.pipe((0,ye.w)(Qn=>Qn?(0,Ae.D)(Qn.getIdTokenResult()):(0,q.of)(null))),this.credential=(0,Ee.T)(lr,mn,this.authState.pipe((0,ke.h)(Qn=>!Qn))).pipe((0,tt.U)(Qn=>(null==Qn?void 0:Qn.user)?Qn:null),(0,De.R)(gt.outsideAngular),(0,Ue.Q)(gt.insideAngular))}return(0,nt.pX)(this,jn,dt,{spy:{apply:(Yn,lr,Hn)=>{(Yn.startsWith("signIn")||Yn.startsWith("createUser"))&&Hn.then(In=>mn.next(In))}}})}}return xt.\u0275fac=function(lt){return new(lt||xt)(c.LFG(nt.Dh),c.LFG(nt.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Ce.HU),c.LFG(Ke,8),c.LFG(ee,8),c.LFG(Qe,8),c.LFG(he,8),c.LFG(me,8),c.LFG(ge,8),c.LFG(Ye.nm,8))},xt.\u0275prov=c.Yz7({token:xt,factory:xt.\u0275fac,providedIn:"any"}),xt})(),_t=(()=>{class xt{constructor(){We.Z.registerVersion("angularfire",Ce.q4.full,"auth-compat")}}return xt.\u0275fac=function(lt){return new(lt||xt)},xt.\u0275mod=c.oAB({type:xt}),xt.\u0275inj=c.cJS({providers:[Xe]}),xt})()},7407:(Xt,ut,P)=>{"use strict";P.d(ut,{ST:()=>ov});var c=P(5e3),J=P(4986),q=P(8306),Se=P(8996),Ae=P(9646),Ee=P(5813),be=P(4482),Re=P(5403);function ze(){return(0,be.e)((i,e)=>{let t,a=!1;i.subscribe((0,Re.x)(e,h=>{const m=t;t=h,a&&e.next([m,h]),a=!0}))})}var ee,pe=P(8675),ye=P(4004),Me=P(5026),Oe=P(1884),Ue=P(9300),tt=P(2011),Le=P(9808),ke=(P(8775),P(3942)),Ce=P(5861),nt=P(9681),ot=P(4859),Ye=P(1877),We=P(2090),$e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ke={},Qe=Qe||{},he=$e||self;function me(){}function ge(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ne(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var _t="closure_uid_"+(1e9*Math.random()>>>0),xt=0;function ct(i,e,t){return i.call.apply(i.bind,arguments)}function lt(i,e,t){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),i.apply(e,h)}}return function(){return i.apply(e,arguments)}}function Ve(i,e,t){return(Ve=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ct:lt).apply(null,arguments)}function It(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function dt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(a,h,m){for(var b=Array(arguments.length-2),O=2;O<arguments.length;O++)b[O-2]=arguments[O];return e.prototype[h].apply(a,b)}}function gt(){this.s=this.s,this.o=this.o}var Gt={};gt.prototype.s=!1,gt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Xe(i){return Object.prototype.hasOwnProperty.call(i,_t)&&i[_t]||(i[_t]=++xt)}(this);delete Gt[i]}},gt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},wt=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const a=i.length,h="string"==typeof i?i.split(""):i;for(let m=0;m<a;m++)m in h&&e.call(t,h[m],m,i)};function Sn(i){return Array.prototype.concat.apply([],arguments)}function Dn(i){const e=i.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=i[a];return t}return[]}function mn(i){return/^[\s\xa0]*$/.test(i)}var Hn,jn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Yn(i,e){return-1!=i.indexOf(e)}function lr(i,e){return i<e?-1:i>e?1:0}e:{var In=he.navigator;if(In){var Qn=In.userAgent;if(Qn){Hn=Qn;break e}}Hn=""}function On(i,e,t){for(const a in i)e.call(t,i[a],a,i)}function Nn(i){const e={};for(const t in i)e[t]=i[t];return e}var jr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fi(i,e){let t,a;for(let h=1;h<arguments.length;h++){for(t in a=arguments[h],a)i[t]=a[t];for(let m=0;m<jr.length;m++)t=jr[m],Object.prototype.hasOwnProperty.call(a,t)&&(i[t]=a[t])}}function Bt(i){return Bt[" "](i),i}Bt[" "]=me;var fn,i,Je=Yn(Hn,"Opera"),At=Yn(Hn,"Trident")||Yn(Hn,"MSIE"),Et=Yn(Hn,"Edge"),Kt=Et||At,bt=Yn(Hn,"Gecko")&&!(Yn(Hn.toLowerCase(),"webkit")&&!Yn(Hn,"Edge"))&&!(Yn(Hn,"Trident")||Yn(Hn,"MSIE"))&&!Yn(Hn,"Edge"),Un=Yn(Hn.toLowerCase(),"webkit")&&!Yn(Hn,"Edge");function Fn(){var i=he.document;return i?i.documentMode:void 0}e:{var ei="",fr=(i=Hn,bt?/rv:([^\);]+)(\)|;)/.exec(i):Et?/Edge\/([\d\.]+)/.exec(i):At?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Un?/WebKit\/(\S+)/.exec(i):Je?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(fr&&(ei=fr?fr[1]:""),At){var xr=Fn();if(null!=xr&&xr>parseFloat(ei)){fn=String(xr);break e}}fn=ei}var we={};var Fe=he.document&&At&&(Fn()||parseInt(fn,10))||void 0,mt=function(){if(!he.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{he.addEventListener("test",me,e),he.removeEventListener("test",me,e)}catch(t){}return i}();function zt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function rn(i,e){if(zt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(bt){e:{try{Bt(e.nodeName);var h=!0;break e}catch(m){}h=!1}h||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:yn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&rn.Z.h.call(this)}}zt.prototype.h=function(){this.defaultPrevented=!0},dt(rn,zt);var yn={2:"touch",3:"pen",4:"mouse"};rn.prototype.h=function(){rn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var vn="closure_listenable_"+(1e6*Math.random()|0),wr=0;function En(i,e,t,a,h){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.ia=h,this.key=++wr,this.ca=this.fa=!1}function rr(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function kr(i){this.src=i,this.g={},this.h=0}function Fi(i,e){var t=e.type;if(t in i.g){var m,a=i.g[t],h=Nt(a,e);(m=0<=h)&&Array.prototype.splice.call(a,h,1),m&&(rr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Gr(i,e,t,a){for(var h=0;h<i.length;++h){var m=i[h];if(!m.ca&&m.listener==e&&m.capture==!!t&&m.ia==a)return h}return-1}kr.prototype.add=function(i,e,t,a,h){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var b=Gr(i,e,a,h);return-1<b?(e=i[b],t||(e.fa=!1)):((e=new En(e,this.src,m,!!a,h)).fa=t,i.push(e)),e};var Bn="closure_lm_"+(1e6*Math.random()|0),wi={};function Yr(i,e,t,a,h){if(a&&a.once)return Nr(i,e,t,a,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Yr(i,e[m],t,a,h);return null}return t=oi(t),i&&i[vn]?i.N(e,t,Ne(a)?!!a.capture:!!a,h):Hr(i,e,t,!1,a,h)}function Hr(i,e,t,a,h,m){if(!e)throw Error("Invalid event type");var b=Ne(h)?!!h.capture:!!h,O=Sr(i);if(O||(i[Bn]=O=new kr(i)),(t=O.add(e,t,a,b,m)).proxy)return t;if(a=function $i(){var e=yi;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=a,a.src=i,a.listener=t,i.addEventListener)mt||(h=b),void 0===h&&(h=!1),i.addEventListener(e.toString(),a,h);else if(i.attachEvent)i.attachEvent(gi(e.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return t}function Nr(i,e,t,a,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)Nr(i,e[m],t,a,h);return null}return t=oi(t),i&&i[vn]?i.O(e,t,Ne(a)?!!a.capture:!!a,h):Hr(i,e,t,!0,a,h)}function pi(i,e,t,a,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)pi(i,e[m],t,a,h);else a=Ne(a)?!!a.capture:!!a,t=oi(t),i&&i[vn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Gr(m=i.g[e],t,a,h))&&(rr(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=Sr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Gr(e,t,a,h)),(t=-1<i?e[i]:null)&&fs(t))}function fs(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[vn])Fi(e.i,i);else{var t=i.type,a=i.proxy;e.removeEventListener?e.removeEventListener(t,a,i.capture):e.detachEvent?e.detachEvent(gi(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=Sr(e))?(Fi(t,i),0==t.h&&(t.src=null,e[Bn]=null)):rr(i)}}}function gi(i){return i in wi?wi[i]:wi[i]="on"+i}function yi(i,e){if(i.ca)i=!0;else{e=new rn(e,this);var t=i.listener,a=i.ia||i.src;i.fa&&fs(i),i=t.call(a,e)}return i}function Sr(i){return(i=i[Bn])instanceof kr?i:null}var Br="__closure_events_fn_"+(1e9*Math.random()>>>0);function oi(i){return"function"==typeof i?i:(i[Br]||(i[Br]=function(e){return i.handleEvent(e)}),i[Br])}function Gn(){gt.call(this),this.i=new kr(this),this.P=this,this.I=null}function te(i,e){var t,a=i.I;if(a)for(t=[];a;a=a.I)t.push(a);if(i=i.P,a=e.type||e,"string"==typeof e)e=new zt(e,i);else if(e instanceof zt)e.target=e.target||i;else{var h=e;fi(e=new zt(a,i),h)}if(h=!0,t)for(var m=t.length-1;0<=m;m--){var b=e.g=t[m];h=cn(b,a,!0,e)&&h}if(h=cn(b=e.g=i,a,!0,e)&&h,h=cn(b,a,!1,e)&&h,t)for(m=0;m<t.length;m++)h=cn(b=e.g=t[m],a,!1,e)&&h}function cn(i,e,t,a){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var b=e[m];if(b&&!b.ca&&b.capture==t){var O=b.listener,X=b.ia||b.src;b.fa&&Fi(i.i,b),h=!1!==O.call(X,a)&&h}}return h&&!a.defaultPrevented}dt(Gn,gt),Gn.prototype[vn]=!0,Gn.prototype.removeEventListener=function(i,e,t,a){pi(this,i,e,t,a)},Gn.prototype.M=function(){if(Gn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],a=0;a<t.length;a++)rr(t[a]);delete i.g[e],i.h--}}this.I=null},Gn.prototype.N=function(i,e,t,a){return this.i.add(String(i),e,!1,t,a)},Gn.prototype.O=function(i,e,t,a){return this.i.add(String(i),e,!0,t,a)};var Zn=he.JSON.stringify;function Zr(){var i=Oi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Mr,ur=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new or,i=>i.reset());class or{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ir(i){he.setTimeout(()=>{throw i},0)}function mi(i,e){Mr||function zn(){var i=he.Promise.resolve(void 0);Mr=function(){i.then(Zi)}}(),Li||(Mr(),Li=!0),Oi.add(i,e)}var Li=!1,Oi=new class ai{constructor(){this.h=this.g=null}add(e,t){const a=ur.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}};function Zi(){for(var i;i=Zr();){try{i.h.call(i.g)}catch(t){Ir(t)}var e=ur;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Li=!1}function li(i,e){Gn.call(this),this.h=i||1,this.g=e||he,this.j=Ve(this.kb,this),this.l=Date.now()}function Cr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function ui(i,e,t){if("function"==typeof i)t&&(i=Ve(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ve(i.handleEvent,i)}return 2147483647<Number(e)?-1:he.setTimeout(i,e||0)}function Si(i){i.g=ui(()=>{i.g=null,i.i&&(i.i=!1,Si(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}dt(li,Gn),(ee=li.prototype).da=!1,ee.S=null,ee.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),te(this,"tick"),this.da&&(Cr(this),this.start()))}},ee.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ee.M=function(){li.Z.M.call(this),Cr(this),delete this.g};class re extends gt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Si(this)}M(){super.M(),this.g&&(he.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(i){gt.call(this),this.h=i,this.g={}}dt(fe,gt);var et=[];function ft(i,e,t,a){Array.isArray(t)||(t&&(et[0]=t.toString()),t=et);for(var h=0;h<t.length;h++){var m=Yr(e,t[h],a||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function _e(i){On(i.g,function(e,t){this.g.hasOwnProperty(t)&&fs(e)},i),i.g={}}function Te(){this.g=!0}function Rt(i,e,t,a){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ln(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var a=t[i];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var b=1;b<h.length;b++)h[b]=""}}}return Zn(t)}catch(O){return e}}(i,t)+(a?" "+a:"")})}fe.prototype.M=function(){fe.Z.M.call(this),_e(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Te.prototype.Aa=function(){this.g=!1},Te.prototype.info=function(){};var An={},Xn=null;function nr(){return Xn=Xn||new Gn}function ci(i){zt.call(this,An.Ma,i)}function Ii(i){const e=nr();te(e,new ci(e,i))}function rt(i,e){zt.call(this,An.STAT_EVENT,i),this.stat=e}function Ge(i){const e=nr();te(e,new rt(e,i))}function Dt(i,e){zt.call(this,An.Na,i),this.size=e}function Wt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return he.setTimeout(function(){i()},e)}An.Ma="serverreachability",dt(ci,zt),An.STAT_EVENT="statevent",dt(rt,zt),An.Na="timingevent",dt(Dt,zt);var Zt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},pn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function cr(){}function Dr(){}cr.prototype.h=null;var na,is={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function js(){zt.call(this,"d")}function Ai(){zt.call(this,"c")}function Es(){}function Qs(i,e,t,a){this.l=i,this.j=e,this.m=t,this.X=a||1,this.V=new fe(this),this.P=Ho,this.W=new li(i=Kt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fo}function fo(){this.i=null,this.g="",this.h=!1}dt(js,zt),dt(Ai,zt),dt(Es,cr),Es.prototype.g=function(){return new XMLHttpRequest},Es.prototype.i=function(){return{}},na=new Es;var Ho=45e3,Pi={},Jr={};function ss(i,e,t){i.K=1,i.v=kt(_r(e)),i.s=t,i.U=!0,ws(i,null)}function ws(i,e){i.F=Date.now(),os(i),i.A=_r(i.v);var t=i.A,a=i.X;Array.isArray(a)||(a=[String(a)]),Po(t.h,"t",a),i.C=0,t=i.l.H,i.h=new fo,i.g=tl(i.l,t?e:null,!i.s),0<i.O&&(i.L=new re(Ve(i.Ia,i,i.g),i.O)),ft(i.V,i.g,"readystatechange",i.gb),e=i.H?Nn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ii(1),function pt(i,e,t,a,h,m){i.info(function(){if(i.g)if(m)for(var b="",O=m.split("&"),X=0;X<O.length;X++){var ne=O[X].split("=");if(1<ne.length){var xe=ne[0];ne=ne[1];var st=xe.split("_");b=2<=st.length&&"type"==st[1]?b+(xe+"=")+ne+"&":b+(xe+"=redacted&")}}else b=null;else b=m;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+t+"\n"+b})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Is(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Go(i,e,t){let h,a=!0;for(;!i.I&&i.C<t.length;){if(h=Hs(i,t),h==Jr){4==e&&(i.o=4,Ge(14),a=!1),Rt(i.j,i.m,null,"[Incomplete Response]");break}if(h==Pi){i.o=4,Ge(15),Rt(i.j,i.m,t,"[Invalid Chunk]"),a=!1;break}Rt(i.j,i.m,h,null),bs(i,h)}Is(i)&&h!=Jr&&h!=Pi&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ge(16),a=!1),i.i=i.i&&a,a?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Eo(e),e.L=!0,Ge(11))):(Rt(i.j,i.m,t,"[Invalid Chunked Response]"),Tr(i),eo(i))}function Hs(i,e){var t=i.C,a=e.indexOf("\n",t);return-1==a?Jr:(t=Number(e.substring(t,a)),isNaN(t)?Pi:(a+=1)+t>e.length?Jr:(e=e.substr(a,t),i.C=a+t,e))}function os(i){i.Y=Date.now()+i.P,Js(i,i.P)}function Js(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Wt(Ve(i.eb,i),e)}function Bi(i){i.B&&(he.clearTimeout(i.B),i.B=null)}function eo(i){0==i.l.G||i.I||jl(i.l,i)}function Tr(i){Bi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Cr(i.W),_e(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function bs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||E(t.i,i)))if(t.I=i.N,!i.J&&E(t.i,i)&&3==t.G){try{var a=t.Ca.g.parse(e)}catch(ne){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0])e:if(t.u)t.ta=h[1],0<t.ta-t.U&&37500>h[2]&&t.N&&0==t.A&&!t.v&&(t.v=Wt(Ve(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;ns(t),No(t)}Oa(t),Ge(18)}if(1>=_n(t.i)&&t.ka){try{t.ka()}catch(ne){}t.ka=void 0}}else po(t,11)}else if((i.J||t.g==i)&&ns(t),!mn(e))for(h=t.Ca.g.parse(e),e=0;e<h.length;e++){let ne=h[e];if(t.U=ne[0],ne=ne[1],2==t.G)if("c"==ne[0]){t.J=ne[1],t.la=ne[2];const xe=ne[3];null!=xe&&(t.ma=xe,t.h.info("VER="+t.ma));const st=ne[4];null!=st&&(t.za=st,t.h.info("SVER="+t.za));const Lt=ne[5];null!=Lt&&"number"==typeof Lt&&0<Lt&&(t.K=a=1.5*Lt,t.h.info("backChannelRequestTimeoutMs_="+a)),a=t;const Jt=i.g;if(Jt){const nn=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nn){var m=a.i;!m.g&&(Yn(nn,"spdy")||Yn(nn,"quic")||Yn(nn,"h2"))&&(m.j=m.l,m.g=new Set,m.h&&(G(m,m.h),m.h=null))}if(a.D){const Ln=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ln&&(a.sa=Ln,Be(a.F,a.D,Ln))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var b=i;if((a=t).oa=Pa(a,a.H?a.la:null,a.W),b.J){w(a.i,b);var O=b,X=a.K;X&&O.setTimeout(X),O.B&&(Bi(O),os(O)),a.g=b}else $l(a);0<t.l.length&&ga(t)}else"stop"!=ne[0]&&"close"!=ne[0]||po(t,7);else 3==t.G&&("stop"==ne[0]||"close"==ne[0]?"stop"==ne[0]?po(t,7):ts(t):"noop"!=ne[0]&&t.j&&t.j.wa(ne),t.A=0)}Ii(4)}catch(ne){}}function Xi(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ge(i)||"string"==typeof i)wt(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(ge(i)||"string"==typeof i){t=[];for(var a=i.length,h=0;h<a;h++)t.push(h)}else for(h in t=[],a=0,i)t[a++]=h;a=function as(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(ge(i)){for(var e=[],t=i.length,a=0;a<t;a++)e.push(i[a]);return e}for(a in e=[],t=0,i)e[t++]=i[a];return e}(i),h=a.length;for(var m=0;m<h;m++)e.call(void 0,a[m],t&&t[m],i)}}function Qi(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var a=0;a<t;a+=2)this.set(arguments[a],arguments[a+1])}else if(i)if(i instanceof Qi)for(t=i.T(),a=0;a<t.length;a++)this.set(t[a],i.get(t[a]));else for(a in i)this.set(a,i[a])}function Oo(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var a=i.g[e];zr(i.h,a)&&(i.g[t++]=a),e++}i.g.length=t}if(i.i!=i.g.length){var h={};for(t=e=0;e<i.g.length;)zr(h,a=i.g[e])||(i.g[t++]=a,h[a]=1),e++;i.g.length=t}}function zr(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(ee=Qs.prototype).setTimeout=function(i){this.P=i},ee.gb=function(i){i=i.target;const e=this.L;e&&3==Wo(i)?e.l():this.Ia(i)},ee.Ia=function(i){try{if(i==this.g)e:{const xe=Wo(this.g);var e=this.g.Da();const st=this.g.ba();if(!(3>xe)&&(3!=xe||Kt||this.g&&(this.h.h||this.g.ga()||pa(this.g)))){this.I||4!=xe||7==e||Ii(8==e||0>=st?3:2),Bi(this);var t=this.g.ba();this.N=t;t:if(Is(this)){var a=pa(this.g);i="";var h=a.length,m=4==Wo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Tr(this),eo(this);var b="";break t}this.h.i=new he.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,i+=this.h.i.decode(a[e],{stream:m&&e==h-1});a.splice(0,h),this.h.g+=i,this.C=0,b=this.h.g}else b=this.g.ga();if(this.i=200==t,function Vt(i,e,t,a,h,m,b){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+m+" "+b})}(this.j,this.u,this.A,this.m,this.X,xe,t),this.i){if(this.$&&!this.J){t:{if(this.g){var O,X=this.g;if((O=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mn(O)){var ne=O;break t}}ne=null}if(!(t=ne)){this.i=!1,this.o=3,Ge(12),Tr(this),eo(this);break e}Rt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bs(this,t)}this.U?(Go(this,xe,b),Kt&&this.i&&3==xe&&(ft(this.V,this.W,"tick",this.fb),this.W.start())):(Rt(this.j,this.m,b,null),bs(this,b)),4==xe&&Tr(this),this.i&&!this.I&&(4==xe?jl(this.l,this):(this.i=!1,os(this)))}else 400==t&&0<b.indexOf("Unknown SID")?(this.o=3,Ge(12)):(this.o=0,Ge(13)),Tr(this),eo(this)}}}catch(xe){}},ee.fb=function(){if(this.g){var i=Wo(this.g),e=this.g.ga();this.C<e.length&&(Bi(this),Go(this,i,e),this.i&&4!=i&&os(this))}},ee.cancel=function(){this.I=!0,Tr(this)},ee.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Ft(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ii(3),Ge(17)),Tr(this),this.o=2,eo(this)):Js(this,this.Y-i)},(ee=Qi.prototype).R=function(){Oo(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},ee.T=function(){return Oo(this),this.g.concat()},ee.get=function(i,e){return zr(this.h,i)?this.h[i]:e},ee.set=function(i,e){zr(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},ee.forEach=function(i,e){for(var t=this.T(),a=0;a<t.length;a++){var h=t[a],m=this.get(h);i.call(e,m,h,this)}};var Ji=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cs(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Cs){this.g=void 0!==e?e:i.g,V(this,i.j),this.s=i.s,se(this,i.i),U(this,i.m),this.l=i.l,e=i.h;var t=new es;t.i=e.i,e.g&&(t.g=new Qi(e.g),t.h=e.h),ue(this,t),this.o=i.o}else i&&(t=String(i).match(Ji))?(this.g=!!e,V(this,t[1]||"",!0),this.s=Pn(t[2]||""),se(this,t[3]||"",!0),U(this,t[4]),this.l=Pn(t[5]||"",!0),ue(this,t[6]||"",!0),this.o=Pn(t[7]||"")):(this.g=!!e,this.h=new es(null,this.g))}function _r(i){return new Cs(i)}function V(i,e,t){i.j=t?Pn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function se(i,e,t){i.i=t?Pn(e,!0):e}function U(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ue(i,e,t){e instanceof es?(i.h=e,function z(i,e){e&&!i.j&&(Tn(i),i.i=null,i.g.forEach(function(t,a){var h=a.toLowerCase();a!=h&&(xs(this,a),Po(this,h,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Jn(e,Ur)),i.h=new es(e,i.g))}function Be(i,e,t){i.h.set(e,t)}function kt(i){return Be(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Pn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Jn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ir),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ir(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Cs.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Jn(e,dr,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Jn(e,dr,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Jn(t,"/"==t.charAt(0)?Vr:di,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Jn(t,Ns)),i.join("")};var dr=/[#\/\?@]/g,di=/[#\?:]/g,Vr=/[#\?]/g,Ur=/[#\?@]/g,Ns=/#/g;function es(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Tn(i){i.g||(i.g=new Qi,i.h=0,i.i&&function ls(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var a=i[t].indexOf("="),h=null;if(0<=a){var m=i[t].substring(0,a);h=i[t].substring(a+1)}else m=i[t];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xs(i,e){Tn(i),e=Gs(i,e),zr(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,zr((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Oo(i)))}function zo(i,e){return Tn(i),e=Gs(i,e),zr(i.g.h,e)}function Po(i,e,t){xs(i,e),0<t.length&&(i.i=null,i.g.set(Gs(i,e),Dn(t)),i.h+=t.length)}function Gs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function N(i){this.l=i||Y,i=he.PerformanceNavigationTiming?0<(i=he.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(he.g&&he.g.Ea&&he.g.Ea()&&he.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ee=es.prototype).add=function(i,e){Tn(this),this.i=null,i=Gs(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ee.forEach=function(i,e){Tn(this),this.g.forEach(function(t,a){wt(t,function(h){i.call(e,h,a,this)},this)},this)},ee.T=function(){Tn(this);for(var i=this.g.R(),e=this.g.T(),t=[],a=0;a<e.length;a++)for(var h=i[a],m=0;m<h.length;m++)t.push(e[a]);return t},ee.R=function(i){Tn(this);var e=[];if("string"==typeof i)zo(this,i)&&(e=Sn(e,this.g.get(Gs(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Sn(e,i[t])}return e},ee.set=function(i,e){return Tn(this),this.i=null,zo(this,i=Gs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ee.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var a=e[t],h=encodeURIComponent(String(a));a=this.R(a);for(var m=0;m<a.length;m++){var b=h;""!==a[m]&&(b+="="+encodeURIComponent(String(a[m]))),i.push(b)}}return this.i=i.join("&")};var Y=10;function Tt(i){return!!i.h||!!i.g&&i.g.size>=i.j}function _n(i){return i.h?1:i.g?i.g.size:0}function E(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function G(i,e){i.g?i.g.add(e):i.h=e}function w(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function B(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Dn(i.i)}function ce(){}function Pt(){this.g=new ce}function an(i,e,t){const a=t||"";try{Xi(i,function(h,m){let b=h;Ne(h)&&(b=Zn(h)),e.push(a+m+"="+encodeURIComponent(b))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function er(i,e,t,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch(m){}}function $r(i){this.l=i.$b||null,this.j=i.ib||!1}function tr(i,e){Gn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=ti,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}N.prototype.cancel=function(){if(this.i=B(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ce.prototype.stringify=function(i){return he.JSON.stringify(i,void 0)},ce.prototype.parse=function(i){return he.JSON.parse(i,void 0)},dt($r,cr),$r.prototype.g=function(){return new tr(this.l,this.j)},$r.prototype.i=function(i){return function(){return i}}({}),dt(tr,Gn);var ti=0;function Ds(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Wi(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ji(i)}function ji(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ee=tr.prototype).open=function(i,e){if(this.readyState!=ti)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ji(this)},ee.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||he).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wi(this)),this.readyState=ti},ee.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==he.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ds(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},ee.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Wi(this):ji(this),3==this.readyState&&Ds(this)}},ee.Ua=function(i){this.g&&(this.response=this.responseText=i,Wi(this))},ee.Ta=function(i){this.g&&(this.response=i,Wi(this))},ee.ha=function(){this.g&&Wi(this)},ee.setRequestHeader=function(i,e){this.v.append(i,e)},ee.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ee.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var to=he.JSON.parse;function ni(i){Gn.call(this),this.headers=new Qi,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xa,this.K=this.L=!1}dt(ni,Gn);var Xa="",Bl=/^https?$/i,Qa=["POST","PUT"];function vu(i){return"content-type"==i.toLowerCase()}function Ma(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Vl(i),ko(i)}function Vl(i){i.D||(i.D=!0,te(i,"complete"),te(i,"error"))}function fa(i){if(i.h&&void 0!==Qe&&(!i.C[1]||4!=Wo(i)||2!=i.ba()))if(i.v&&4==Wo(i))ui(i.Fa,0,i);else if(te(i,"readystatechange"),4==Wo(i)){i.h=!1;try{const O=i.ba();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===O){var h=String(i.H).match(Ji)[1]||null;if(!h&&he.self&&he.self.location){var m=he.self.location.protocol;h=m.substr(0,m.length-1)}a=!Bl.test(h?h.toLowerCase():"")}t=a}if(t)te(i,"complete"),te(i,"success");else{i.m=6;try{var b=2<Wo(i)?i.g.statusText:""}catch(X){b=""}i.j=b+" ["+i.ba()+"]",Vl(i)}}finally{ko(i)}}}function ko(i,e){if(i.g){el(i);const t=i.g,a=i.C[0]?me:null;i.g=null,i.C=null,e||te(i,"ready");try{t.onreadystatechange=a}catch(h){}}}function el(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(he.clearTimeout(i.A),i.A=null)}function Wo(i){return i.g?i.g.readyState:0}function pa(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Xa:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ra(i,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=function Eu(i){let e="";return On(i,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Be(i,e,t))}function Ra(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Ul(i){this.za=0,this.l=[],this.h=new Te,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ra("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ra("baseRetryDelayMs",5e3,i),this.$a=Ra("retryDelaySeedMs",1e4,i),this.Ya=Ra("forwardChannelMaxRetries",2,i),this.ra=Ra("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new N(i&&i.concurrentRequestLimit),this.Ca=new Pt,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function ts(i){if(Ki(i),3==i.G){var e=i.V++,t=_r(i.F);Be(t,"SID",i.J),Be(t,"RID",e),Be(t,"TYPE","terminate"),ma(i,t),(e=new Qs(i,i.h,e,void 0)).K=2,e.v=kt(_r(t)),t=!1,he.navigator&&he.navigator.sendBeacon&&(t=he.navigator.sendBeacon(e.v.toString(),"")),!t&&he.Image&&((new Image).src=e.v,t=!0),t||(e.g=tl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),os(e)}ia(i)}function No(i){i.g&&(Eo(i),i.g.cancel(),i.g=null)}function Ki(i){No(i),i.u&&(he.clearTimeout(i.u),i.u=null),ns(i),i.i.cancel(),i.m&&("number"==typeof i.m&&he.clearTimeout(i.m),i.m=null)}function wu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&ga(i)}function ga(i){Tt(i.i)||i.m||(i.m=!0,mi(i.Ha,i),i.C=0)}function Lc(i,e){var t;t=e?e.m:i.V++;const a=_r(i.F);Be(a,"SID",i.J),Be(a,"RID",t),Be(a,"AID",i.U),ma(i,a),i.o&&i.s&&ra(a,i.o,i.s),t=new Qs(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Md(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),G(i.i,t),ss(t,a,e)}function ma(i,e){i.j&&Xi({},function(t,a){Be(e,a,t)})}function Md(i,e,t){t=Math.min(i.l.length,t);var a=i.j?Ve(i.j.Oa,i.j,i):null;e:{var h=i.l;let m=-1;for(;;){const b=["count="+t];-1==m?0<t?(m=h[0].h,b.push("ofs="+m)):m=0:b.push("ofs="+m);let O=!0;for(let X=0;X<t;X++){let ne=h[X].h;const xe=h[X].g;if(ne-=m,0>ne)m=Math.max(0,h[X].h-100),O=!1;else try{an(xe,b,"req"+ne+"_")}catch(st){a&&a(xe)}}if(O){a=b.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,a}function $l(i){i.g||i.u||(i.Y=1,mi(i.Ga,i),i.A=0)}function Oa(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Wt(Ve(i.Ga,i),wo(i,i.A)),i.A++,0))}function Eo(i){null!=i.B&&(he.clearTimeout(i.B),i.B=null)}function us(i){i.g=new Qs(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=_r(i.oa);Be(e,"RID","rpc"),Be(e,"SID",i.J),Be(e,"CI",i.N?"0":"1"),Be(e,"AID",i.U),ma(i,e),Be(e,"TYPE","xmlhttp"),i.o&&i.s&&ra(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=kt(_r(e)),t.s=null,t.U=!0,ws(t,i)}function ns(i){null!=i.v&&(he.clearTimeout(i.v),i.v=null)}function jl(i,e){var t=null;if(i.g==e){ns(i),Eo(i),i.g=null;var a=2}else{if(!E(i.i,e))return;t=e.D,w(i.i,e),a=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=i.C;te(a=nr(),new Dt(a,t,e,h)),ga(i)}else $l(i);else if(3==(h=e.o)||0==h&&0<i.I||!(1==a&&function xd(i,e){return!(_n(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Wt(Ve(i.Ha,i,e),wo(i,i.C)),i.C++,0)))}(i,e)||2==a&&Oa(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),h){case 1:po(i,5);break;case 4:po(i,10);break;case 3:po(i,6);break;default:po(i,2)}}function wo(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function po(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var a=Ve(i.jb,i);t||(t=new Cs("//www.google.com/images/cleardot.gif"),he.location&&"http"==he.location.protocol||V(t,"https"),kt(t)),function Mn(i,e){const t=new Te;if(he.Image){const a=new Image;a.onload=It(er,t,a,"TestLoadImage: loaded",!0,e),a.onerror=It(er,t,a,"TestLoadImage: error",!1,e),a.onabort=It(er,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=It(er,t,a,"TestLoadImage: timeout",!1,e),he.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else e(!1)}(t.toString(),a)}else Ge(2);i.G=0,i.j&&i.j.va(e),ia(i),Ki(i)}function ia(i){i.G=0,i.I=-1,i.j&&((0!=B(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Dn(i.l),i.l.length=0),i.j.ua())}function Pa(i,e,t){let a=function qt(i){return i instanceof Cs?_r(i):new Cs(i,void 0)}(t);if(""!=a.i)e&&se(a,e+"."+a.i),U(a,a.m);else{const h=he.location;a=function xn(i,e,t,a){var h=new Cs(null,void 0);return i&&V(h,i),e&&se(h,e),t&&U(h,t),a&&(h.l=a),h}(h.protocol,e?e+"."+h.hostname:h.hostname,+h.port,t)}return i.aa&&On(i.aa,function(h,m){Be(a,m,h)}),t=i.sa,(e=i.D)&&t&&Be(a,e,t),Be(a,"VER",i.ma),ma(i,a),a}function tl(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ni(t&&i.Ba&&!i.qa?new $r({ib:!0}):i.qa)).L=i.H,e}function sa(){}function nl(){if(At&&!(10<=Number(Fe)))throw Error("Environmental error: no available transport.")}function go(i,e){Gn.call(this),this.g=new Ul(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!mn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ps(this)}function Bc(i){js.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Iu(){Ai.call(this),this.status=1}function ps(i){this.g=i}(ee=ni.prototype).ea=function(i,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():na.g(),this.C=function bi(i){return i.h||(i.h=i.i())}(this.u?this.u:na),this.g.onreadystatechange=Ve(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void Ma(this,m)}i=t||"";const h=new Qi(this.headers);a&&Xi(a,function(m,b){h.set(b,m)}),a=function kn(i){e:{var e=vu;const t=i.length,a="string"==typeof i?i.split(""):i;for(let h=0;h<t;h++)if(h in a&&e.call(void 0,a[h],h,i)){e=h;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(h.T()),t=he.FormData&&i instanceof he.FormData,!(0<=Nt(Qa,e))||a||t||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(m,b){this.g.setRequestHeader(b,m)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{el(this),0<this.B&&((this.K=function Ja(i){return At&&function je(){return function qe(i){var e=we;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=jn(String(fn)).split("."),t=jn("9").split("."),a=Math.max(e.length,t.length);for(let b=0;0==i&&b<a;b++){var h=e[b]||"",m=t[b]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;i=lr(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||lr(0==h[2].length,0==m[2].length)||lr(h[2],m[2]),h=h[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ve(this.pa,this)):this.A=ui(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){Ma(this,m)}},ee.pa=function(){void 0!==Qe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,te(this,"timeout"),this.abort(8))},ee.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,te(this,"complete"),te(this,"abort"),ko(this))},ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ko(this,!0)),ni.Z.M.call(this)},ee.Fa=function(){this.s||(this.F||this.v||this.l?fa(this):this.cb())},ee.cb=function(){fa(this)},ee.ba=function(){try{return 2<Wo(this)?this.g.status:-1}catch(i){return-1}},ee.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},ee.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),to(e)}},ee.Da=function(){return this.m},ee.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ee=Ul.prototype).ma=8,ee.G=1,ee.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},ee.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const h=new Qs(this,this.h,i,void 0);let m=this.s;if(this.P&&(m?(m=Nn(m),fi(m,this.P)):m=this.P),null===this.o&&(h.H=m),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var a=this.l[t];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Md(this,h,e),Be(t=_r(this.F),"RID",i),Be(t,"CVER",22),this.D&&Be(t,"X-HTTP-Session-Id",this.D),ma(this,t),this.o&&m&&ra(t,this.o,m),G(this.i,h),this.Ra&&Be(t,"TYPE","init"),this.ja?(Be(t,"$req",e),Be(t,"SID","null"),h.$=!0,ss(h,t,null)):ss(h,t,e),this.G=2}}else 3==this.G&&(i?Lc(this,i):0==this.l.length||Tt(this.i)||Lc(this))},ee.Ga=function(){if(this.u=null,us(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Wt(Ve(this.bb,this),i)}},ee.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ge(10),No(this),us(this))},ee.ab=function(){null!=this.v&&(this.v=null,No(this),Oa(this),Ge(19))},ee.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Ge(2)):(this.h.info("Failed to ping google.com"),Ge(1))},(ee=sa.prototype).xa=function(){},ee.wa=function(){},ee.va=function(){},ee.ua=function(){},ee.Oa=function(){},nl.prototype.g=function(i,e){return new go(i,e)},dt(go,Gn),go.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),mi(Ve(i.hb,i,e))),Ge(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Pa(i,null,i.W),ga(i)},go.prototype.close=function(){ts(this.g)},go.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,wu(this.g,e)}else this.v?((e={}).__data__=Zn(i),wu(this.g,e)):wu(this.g,i)},go.prototype.M=function(){this.g.j=null,delete this.j,ts(this.g),delete this.g,go.Z.M.call(this)},dt(Bc,js),dt(Iu,Ai),dt(ps,sa),ps.prototype.xa=function(){te(this.g,"a")},ps.prototype.wa=function(i){te(this.g,new Bc(i))},ps.prototype.va=function(i){te(this.g,new Iu(i))},ps.prototype.ua=function(){te(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,go.prototype.send=go.prototype.u,go.prototype.open=go.prototype.m,go.prototype.close=go.prototype.close,Zt.NO_ERROR=0,Zt.TIMEOUT=8,Zt.HTTP_ERROR=6,pn.COMPLETE="complete",Dr.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",Gn.prototype.listen=Gn.prototype.N,ni.prototype.listenOnce=ni.prototype.O,ni.prototype.getLastError=ni.prototype.La,ni.prototype.getLastErrorCode=ni.prototype.Da,ni.prototype.getStatus=ni.prototype.ba,ni.prototype.getResponseJson=ni.prototype.Qa,ni.prototype.getResponseText=ni.prototype.ga,ni.prototype.send=ni.prototype.ea;var no=Ke.createWebChannelTransport=function(){return new nl},Hl=Ke.getStatEventTarget=function(){return nr()},ro=Ke.ErrorCode=Zt,Fo=Ke.EventType=pn,bu=Ke.Event=An,Io=Ke.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Cu=Ke.FetchXmlHttpFactory=$r,Ci=Ke.WebChannel=Dr,rl=Ke.XhrIo=ni;const ya="@firebase/firestore";class Ts{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ts.UNAUTHENTICATED=new Ts(null),Ts.GOOGLE_CREDENTIALS=new Ts("google-credentials-uid"),Ts.FIRST_PARTY=new Ts("first-party-uid"),Ts.MOCK_USER=new Ts("mock-user");let Ko="9.8.0";const bo=new Ye.Yd("@firebase/firestore");function Du(){return bo.logLevel}function Qt(i,...e){if(bo.logLevel<=Ye.in.DEBUG){const t=e.map(M);bo.debug(`Firestore (${Ko}): ${i}`,...t)}}function ki(i,...e){if(bo.logLevel<=Ye.in.ERROR){const t=e.map(M);bo.error(`Firestore (${Ko}): ${i}`,...t)}}function oa(i,...e){if(bo.logLevel<=Ye.in.WARN){const t=e.map(M);bo.warn(`Firestore (${Ko}): ${i}`,...t)}}function M(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function S(i="Unexpected state"){const e=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+i;throw ki(e),new Error(e)}function D(i,e){i||S()}function j(i,e){return i}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends We.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class He{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ut{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ts.UNAUTHENTICATED))}shutdown(){}}class vr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Vn{constructor(e){this.t=e,this.currentUser=Ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let h=this.i;const m=ne=>this.i!==h?(h=this.i,t(ne)):Promise.resolve();let b=new He;this.o=()=>{this.i++,this.currentUser=this.u(),b.resolve(),b=new He,e.enqueueRetryable(()=>m(this.currentUser))};const O=()=>{const ne=b;e.enqueueRetryable((0,Ce.Z)(function*(){yield ne.promise,yield m(a.currentUser)}))},X=ne=>{Qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ne,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(ne=>X(ne)),setTimeout(()=>{if(!this.auth){const ne=this.t.getImmediate({optional:!0});ne?X(ne):(Qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),b.resolve(),b=new He)}},0),O()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(Qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(D("string"==typeof a.accessToken),new Ut(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return D(null===e||"string"==typeof e),new Ts(e)}}class Wr{constructor(e,t,a){this.type="FirstParty",this.user=Ts.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const h=e.auth.getAuthHeaderValueForFirstParty([]);h&&this.headers.set("Authorization",h),a&&this.headers.set("X-Goog-Iam-Authorization-Token",a)}}class Xr{constructor(e,t,a){this.h=e,this.l=t,this.m=a}getToken(){return Promise.resolve(new Wr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qo{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const a=m=>{null!=m.error&&Qt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const b=m.token!==this.p;return this.p=m.token,Qt("FirebaseAppCheckTokenProvider",`Received ${b?"new":"existing"} token.`),b?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>a(m))};const h=m=>{Qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.g.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.g.getImmediate({optional:!0});m?h(m):Qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(D("string"==typeof t.token),this.p=t.token,new Fs(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.I(a),this.T=a=>t.writeSequenceNumber(a))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Co(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<i;a++)t[a]=Math.floor(256*Math.random());return t}cs.A=-1;class Lo{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=Co(40);for(let m=0;m<h.length;++m)a.length<20&&h[m]<t&&(a+=e.charAt(h[m]%e.length))}return a}}function hr(i,e){return i<e?-1:i>e?1:0}function _a(i,e,t){return i.length===e.length&&i.every((a,h)=>t(a,e[h]))}function Gl(i){return i+"\0"}class Vi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vi.fromMillis(Date.now())}static fromDate(e){return Vi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new Vi(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?hr(this.nanoseconds,e.nanoseconds):hr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ar{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ar(e)}static min(){return new ar(new Vi(0,0))}static max(){return new ar(new Vi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function va(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function _i(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function zl(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Zu{constructor(e,t,a){void 0===t?t=0:t>e.length&&S(),void 0===a?a=e.length-t:a>e.length-t&&S(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===Zu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zu?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let h=0;h<a;h++){const m=e.get(h),b=t.get(h);if(m<b)return-1;if(m>b)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ri extends Zu{construct(e,t,a){return new ri(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(h=>h.length>0))}return new ri(t)}static emptyPath(){return new ri([])}}const Xu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends Zu{construct(e,t,a){return new Hi(e,t,a)}static isValidIdentifier(e){return Xu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hi(["__name__"])}static fromServerFormat(e){const t=[];let a="",h=0;const m=()=>{if(0===a.length)throw new le(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let b=!1;for(;h<e.length;){const O=e[h];if("\\"===O){if(h+1===e.length)throw new le(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const X=e[h+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new le(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=X,h+=2}else"`"===O?(b=!b,h++):"."!==O||b?(a+=O,h++):(m(),h++)}if(m(),b)throw new le(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hi(t)}static emptyPath(){return new Hi([])}}class il{constructor(e){this.fields=e,e.sort(Hi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Fr(t)}static fromUint8Array(e){const t=function(a){let h="";for(let m=0;m<a.length;++m)h+=String.fromCharCode(a[m]);return h}(e);return new Fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const Qu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(i){if(D(!!i),"string"==typeof i){let e=0;const t=Qu.exec(i);if(D(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:ii(i.seconds),nanos:ii(i.nanos)}}function ii(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function xi(i){return"string"==typeof i?Fr.fromBase64String(i):Fr.fromUint8Array(i)}function Ih(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pl(i){const e=i.mapValue.fields.__previous_value__;return Ih(e)?pl(e):e}function io(i){const e=vi(i.mapValue.fields.__local_write_time__.timestampValue);return new Vi(e.seconds,e.nanos)}class gs{constructor(e,t,a,h,m,b,O,X){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=h,this.ssl=m,this.forceLongPolling=b,this.autoDetectLongPolling=O,this.useFetchStreams=X}}class ds{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ds("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ds&&e.projectId===this.projectId&&e.database===this.database}}function so(i){return null==i}function aa(i){return 0===i&&1/i==-1/0}function la(i){return"number"==typeof i&&Number.isInteger(i)&&!aa(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class un{constructor(e){this.path=e}static fromPath(e){return new un(ri.fromString(e))}static fromName(e){return new un(ri.fromString(e).popFirst(5))}static empty(){return new un(ri.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ri.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ri.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new un(new ri(e.slice()))}}const zs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qi={nullValue:"NULL_VALUE"};function ka(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ih(i)?4:Yo(i)?9007199254740991:10:S()}function Bo(i,e){if(i===e)return!0;const t=ka(i);if(t!==ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return io(i).isEqual(io(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const m=vi(a.timestampValue),b=vi(h.timestampValue);return m.seconds===b.seconds&&m.nanos===b.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,xi(i.bytesValue).isEqual(xi(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,h){return ii(a.geoPointValue.latitude)===ii(h.geoPointValue.latitude)&&ii(a.geoPointValue.longitude)===ii(h.geoPointValue.longitude)}(i,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return ii(a.integerValue)===ii(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const m=ii(a.doubleValue),b=ii(h.doubleValue);return m===b?aa(m)===aa(b):isNaN(m)&&isNaN(b)}return!1}(i,e);case 9:return _a(i.arrayValue.values||[],e.arrayValue.values||[],Bo);case 10:return function(a,h){const m=a.mapValue.fields||{},b=h.mapValue.fields||{};if(va(m)!==va(b))return!1;for(const O in m)if(m.hasOwnProperty(O)&&(void 0===b[O]||!Bo(m[O],b[O])))return!1;return!0}(i,e);default:return S()}var h}function oo(i,e){return void 0!==(i.values||[]).find(t=>Bo(t,e))}function ua(i,e){if(i===e)return 0;const t=ka(i),a=ka(e);if(t!==a)return hr(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return hr(i.booleanValue,e.booleanValue);case 2:return function(h,m){const b=ii(h.integerValue||h.doubleValue),O=ii(m.integerValue||m.doubleValue);return b<O?-1:b>O?1:b===O?0:isNaN(b)?isNaN(O)?0:-1:1}(i,e);case 3:return gl(i.timestampValue,e.timestampValue);case 4:return gl(io(i),io(e));case 5:return hr(i.stringValue,e.stringValue);case 6:return function(h,m){const b=xi(h),O=xi(m);return b.compareTo(O)}(i.bytesValue,e.bytesValue);case 7:return function(h,m){const b=h.split("/"),O=m.split("/");for(let X=0;X<b.length&&X<O.length;X++){const ne=hr(b[X],O[X]);if(0!==ne)return ne}return hr(b.length,O.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,m){const b=hr(ii(h.latitude),ii(m.latitude));return 0!==b?b:hr(ii(h.longitude),ii(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,m){const b=h.values||[],O=m.values||[];for(let X=0;X<b.length&&X<O.length;++X){const ne=ua(b[X],O[X]);if(ne)return ne}return hr(b.length,O.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===zs.mapValue&&m===zs.mapValue)return 0;if(h===zs.mapValue)return 1;if(m===zs.mapValue)return-1;const b=h.fields||{},O=Object.keys(b),X=m.fields||{},ne=Object.keys(X);O.sort(),ne.sort();for(let xe=0;xe<O.length&&xe<ne.length;++xe){const st=hr(O[xe],ne[xe]);if(0!==st)return st;const Lt=ua(b[O[xe]],X[ne[xe]]);if(0!==Lt)return Lt}return hr(O.length,ne.length)}(i.mapValue,e.mapValue);default:throw S()}}function gl(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return hr(i,e);const t=vi(i),a=vi(e),h=hr(t.seconds,a.seconds);return 0!==h?h:hr(t.nanos,a.nanos)}function Wl(i){return Kl(i)}function Kl(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const h=vi(a);return`time(${h.seconds},${h.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?xi(i.bytesValue).toBase64():"referenceValue"in i?un.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(a){let h="[",m=!0;for(const b of a.values||[])m?m=!1:h+=",",h+=Kl(b);return h+"]"}(i.arrayValue):"mapValue"in i?function(a){const h=Object.keys(a.fields||{}).sort();let m="{",b=!0;for(const O of h)b?b=!1:m+=",",m+=`${O}:${Kl(a.fields[O])}`;return m+"}"}(i.mapValue):S();var e}function Ws(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Na(i){return!!i&&"integerValue"in i}function ml(i){return!!i&&"arrayValue"in i}function ql(i){return!!i&&"nullValue"in i}function Ea(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function yl(i){return!!i&&"mapValue"in i}function Ks(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return _i(i.mapValue.fields,(t,a)=>e.mapValue.fields[t]=Ks(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ks(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Yo(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Pf(i){return"nullValue"in i?qi:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ws(ds.empty(),un.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:S()}function _l(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ws(ds.empty(),un.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?zs:S()}function vl(i,e){const t=ua(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function sl(i,e){const t=ua(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ls{constructor(e){this.value=e}static empty(){return new Ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!yl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ks(t)}setAll(e){let t=Hi.emptyPath(),a={},h=[];e.forEach((b,O)=>{if(!t.isImmediateParentOf(O)){const X=this.getFieldsMap(t);this.applyChanges(X,a,h),a={},h=[],t=O.popLast()}b?a[O.lastSegment()]=Ks(b):h.push(O.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,a,h)}delete(e){const t=this.field(e.popLast());yl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=t.mapValue.fields[e.get(a)];yl(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,a){_i(t,(h,m)=>e[h]=m);for(const h of a)delete e[h]}clone(){return new Ls(Ks(this.value))}}function F(i){const e=[];return _i(i.fields,(t,a)=>{const h=new Hi([t]);if(yl(a)){const m=F(a.mapValue).fields;if(0===m.length)e.push(h);else for(const b of m)e.push(h.child(b))}else e.push(h)}),new il(e)}class H{constructor(e,t,a,h,m,b){this.key=e,this.documentType=t,this.version=a,this.readTime=h,this.data=m,this.documentState=b}static newInvalidDocument(e){return new H(e,0,ar.min(),ar.min(),Ls.empty(),0)}static newFoundDocument(e,t,a){return new H(e,1,t,ar.min(),a,0)}static newNoDocument(e,t){return new H(e,2,t,ar.min(),Ls.empty(),0)}static newUnknownDocument(e,t){return new H(e,3,t,ar.min(),Ls.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof H&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new H(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ae{constructor(e,t,a,h){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=h}}function Pe(i){return i.fields.find(e=>2===e.kind)}function yt(i){return i.fields.filter(e=>2!==e.kind)}ae.UNKNOWN_ID=-1;class Ot{constructor(e,t){this.fieldPath=e,this.kind=t}}class tn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tn(0,$n.min())}}function dn(i,e){const t=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,h=ar.fromTimestamp(1e9===a?new Vi(t+1,0):new Vi(t,a));return new $n(h,un.empty(),e)}function mr(i){return new $n(i.readTime,i.key,-1)}class $n{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new $n(ar.min(),un.empty(),-1)}static max(){return new $n(ar.max(),un.empty(),-1)}}function Kr(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=un.comparator(i.documentKey,e.documentKey),0!==t?t:hr(i.largestBatchId,e.largestBatchId))}class Rn{constructor(e,t){this.comparator=e,this.root=t||si.EMPTY}insert(e,t){return new Rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new Rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return t+a.left.size;h<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qs(this.root,e,this.comparator,!1)}getReverseIterator(){return new qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qs(this.root,e,this.comparator,!0)}}class qs{constructor(e,t,a,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?a(e.key,t):1,t&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class si{constructor(e,t,a,h,m){this.key=e,this.value=t,this.color=null!=a?a:si.RED,this.left=null!=h?h:si.EMPTY,this.right=null!=m?m:si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,h,m){return new si(null!=e?e:this.key,null!=t?t:this.value,null!=a?a:this.color,null!=h?h:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let h=this;const m=a(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,t,a),null):0===m?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return si.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();const e=this.left.check();if(e!==this.right.check())throw S();return e+(this.isRed()?0:1)}}si.EMPTY=null,si.RED=!0,si.BLACK=!1,si.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(i,e,t,a,h){return this}insert(i,e,t){return new si(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hi{constructor(e){this.comparator=e,this.data=new Rn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wa(this.data.getIterator())}getIteratorFrom(e){return new wa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof hi)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=a.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hi(this.comparator);return t.data=e,t}}class wa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ao(i){return i.hasNext()?i.getNext():void 0}class Fa{constructor(e,t=null,a=[],h=[],m=null,b=null,O=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=h,this.limit=m,this.startAt=b,this.endAt=O,this.P=null}}function Do(i,e=null,t=[],a=[],h=null,m=null,b=null){return new Fa(i,e,t,a,h,m,b)}function La(i){const e=j(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>{return(h=a).field.canonicalString()+h.op.toString()+Wl(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),so(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Wl(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Wl(a)).join(",")),e.P=t}return e.P}function Yl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<i.orderBy.length;h++)if(!kd(i.orderBy[h],e.orderBy[h]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let h=0;h<i.filters.length;h++)if((t=i.filters[h]).op!==(a=e.filters[h]).op||!t.field.isEqual(a.field)||!Bo(t.value,a.value))return!1;var t,a;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Nf(i.startAt,e.startAt)&&Nf(i.endAt,e.endAt)}function Zl(i){return un.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Vc(i,e){return i.filters.filter(t=>t instanceof ms&&t.field.isEqual(e))}function bh(i,e,t){let a=qi,h=!0;for(const m of Vc(i,e)){let b=qi,O=!0;switch(m.op){case"<":case"<=":b=Pf(m.value);break;case"==":case"in":case">=":b=m.value;break;case">":b=m.value,O=!1;break;case"!=":case"not-in":b=qi}vl({value:a,inclusive:h},{value:b,inclusive:O})<0&&(a=b,h=O)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const b=t.position[m];vl({value:a,inclusive:h},{value:b,inclusive:t.inclusive})<0&&(a=b,h=t.inclusive);break}return{value:a,inclusive:h}}function Od(i,e,t){let a=zs,h=!0;for(const m of Vc(i,e)){let b=zs,O=!0;switch(m.op){case">=":case">":b=_l(m.value),O=!1;break;case"==":case"in":case"<=":b=m.value;break;case"<":b=m.value,O=!1;break;case"!=":case"not-in":b=zs}sl({value:a,inclusive:h},{value:b,inclusive:O})>0&&(a=b,h=O)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const b=t.position[m];sl({value:a,inclusive:h},{value:b,inclusive:t.inclusive})>0&&(a=b,h=t.inclusive);break}return{value:a,inclusive:h}}class ms extends class{}{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,a):new Ju(e,t,a):"array-contains"===t?new Xl(e,a):"in"===t?new Dh(e,a):"not-in"===t?new Rp(e,a):"array-contains-any"===t?new Pd(e,a):new ms(e,t,a)}static V(e,t,a){return"in"===t?new Mp(e,a):new kf(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ua(t,this.value)):null!==t&&ka(this.value)===ka(t)&&this.v(ua(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return S()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ju extends ms{constructor(e,t,a){super(e,t,a),this.key=un.fromName(a.referenceValue)}matches(e){const t=un.comparator(e.key,this.key);return this.v(t)}}class Mp extends ms{constructor(e,t){super(e,"in",t),this.keys=Ch(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kf extends ms{constructor(e,t){super(e,"not-in",t),this.keys=Ch(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ch(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>un.fromName(a.referenceValue))}class Xl extends ms{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ml(t)&&oo(t.arrayValue,this.value)}}class Dh extends ms{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oo(this.value.arrayValue,t)}}class Rp extends ms{constructor(e,t){super(e,"not-in",t)}matches(e){if(oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!oo(this.value.arrayValue,t)}}class Pd extends ms{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ml(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>oo(this.value.arrayValue,a))}}class Ba{constructor(e,t){this.position=e,this.inclusive=t}}class Zo{constructor(e,t="asc"){this.field=e,this.dir=t}}function kd(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Su(i,e,t){let a=0;for(let h=0;h<i.position.length;h++){const m=e[h],b=i.position[h];if(a=m.field.isKeyField()?un.comparator(un.fromName(b.referenceValue),t.key):ua(b,t.data.field(m.field)),"desc"===m.dir&&(a*=-1),0!==a)break}return a}function Nf(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Bo(i.position[t],e.position[t]))return!1;return!0}class El{constructor(e,t=null,a=[],h=[],m=null,b="F",O=null,X=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=h,this.limit=m,this.limitType=b,this.startAt=O,this.endAt=X,this.D=null,this.C=null}}function Op(i,e,t,a,h,m,b,O){return new El(i,e,t,a,h,m,b,O)}function Va(i){return new El(i)}function Nd(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Uc(i){for(const e of i.filters)if(e.S())return e.field;return null}function Fd(i){return null!==i.collectionGroup}function Ql(i){const e=j(i);if(null===e.D){e.D=[];const t=Uc(e),a=Nd(e);if(null!==t&&null===a)t.isKeyField()||e.D.push(new Zo(t)),e.D.push(new Zo(Hi.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e.D.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Zo(Hi.keyField(),m))}}}return e.D}function ca(i){const e=j(i);if(!e.C)if("F"===e.limitType)e.C=Do(e.path,e.collectionGroup,Ql(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of Ql(e))t.push(new Zo(m.field,"desc"===m.dir?"asc":"desc"));const a=e.endAt?new Ba(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new Ba(e.startAt.position,e.startAt.inclusive):null;e.C=Do(e.path,e.collectionGroup,t,e.filters,e.limit,a,h)}return e.C}function Ld(i,e,t){return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function tc(i,e){return Yl(ca(i),ca(e))&&i.limitType===e.limitType}function Ff(i){return`${La(ca(i))}|lt:${i.limitType}`}function Bd(i){return`Query(target=${function Rd(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(a=t).field.canonicalString()} ${a.op} ${Wl(a.value)}`;var a}).join(", ")}]`),so(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(a=t).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Wl(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Wl(t)).join(",")),`Target(${e})`}(ca(i))}; limitType=${i.limitType})`}function Ua(i,e){return e.isFoundDocument()&&function(t,a){const h=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):un.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(i,e)&&function(t,a){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(i,e)&&function(t,a){for(const h of t.filters)if(!h.matches(a))return!1;return!0}(i,e)&&(a=e,!((t=i).startAt&&!function(h,m,b){const O=Su(h,m,b);return h.inclusive?O<=0:O<0}(t.startAt,Ql(t),a)||t.endAt&&!function(h,m,b){const O=Su(h,m,b);return h.inclusive?O>=0:O>0}(t.endAt,Ql(t),a)));var t,a}function wl(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function $c(i){return(e,t)=>{let a=!1;for(const h of Ql(i)){const m=Th(h,e,t);if(0!==m)return m;a=a||h.field.isKeyField()}return 0}}function Th(i,e,t){const a=i.field.isKeyField()?un.comparator(e.key,t.key):function(h,m,b){const O=m.data.field(h),X=b.data.field(h);return null!==O&&null!==X?ua(O,X):S()}(i.field,e,t);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return S()}}function Lf(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aa(e)?"-0":e}}function Di(i){return{integerValue:""+i}}function Ei(i,e){return la(e)?Di(e):Lf(i,e)}class Rr{constructor(){this._=void 0}}function Il(i,e,t){return i instanceof nc?function(a,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(t,e):i instanceof $a?Bf(i,e):i instanceof Ni?pr(i,e):function(a,h){const m=jc(a,h),b=ja(m)+ja(a.k);return Na(m)&&Na(a.k)?Di(b):Lf(a.M,b)}(i,e)}function Ui(i,e,t){return i instanceof $a?Bf(i,e):i instanceof Ni?pr(i,e):t}function jc(i,e){return i instanceof Ms?Na(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class nc extends Rr{}class $a extends Rr{constructor(e){super(),this.elements=e}}function Bf(i,e){const t=ol(e);for(const a of i.elements)t.some(h=>Bo(h,a))||t.push(a);return{arrayValue:{values:t}}}class Ni extends Rr{constructor(e){super(),this.elements=e}}function pr(i,e){let t=ol(e);for(const a of i.elements)t=t.filter(h=>!Bo(h,a));return{arrayValue:{values:t}}}class Ms extends Rr{constructor(e,t){super(),this.M=e,this.k=t}}function ja(i){return ii(i.integerValue||i.doubleValue)}function ol(i){return ml(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class mo{constructor(e,t){this.field=e,this.transform=t}}class Vf{constructor(e,t){this.version=e,this.transformResults=t}}class Ys{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ys}static exists(e){return new Ys(void 0,e)}static updateTime(e){return new Ys(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class bl{}function Hc(i,e,t){i instanceof ic?function(a,h,m){const b=a.value.clone(),O=Gc(a.fieldTransforms,h,m.transformResults);b.setAll(O),h.convertToFoundDocument(m.version,b).setHasCommittedMutations()}(i,e,t):i instanceof Au?function(a,h,m){if(!rc(a.precondition,h))return void h.convertToUnknownDocument(m.version);const b=Gc(a.fieldTransforms,h,m.transformResults),O=h.data;O.setAll(Ah(a)),O.setAll(b),h.convertToFoundDocument(m.version,O).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ha(i,e,t){var h;i instanceof ic?function(a,h,m){if(!rc(a.precondition,h))return;const b=a.value.clone(),O=Jl(a.fieldTransforms,m,h);b.setAll(O),h.convertToFoundDocument(Uf(h),b).setHasLocalMutations()}(i,e,t):i instanceof Au?function(a,h,m){if(!rc(a.precondition,h))return;const b=Jl(a.fieldTransforms,m,h),O=h.data;O.setAll(Ah(a)),O.setAll(b),h.convertToFoundDocument(Uf(h),O).setHasLocalMutations()}(i,e,t):rc(i.precondition,h=e)&&h.convertToNoDocument(ar.min())}function Sh(i,e){let t=null;for(const a of i.fieldTransforms){const h=e.data.field(a.field),m=jc(a.transform,h||null);null!=m&&(null==t&&(t=Ls.empty()),t.set(a.field,m))}return t||null}function Pp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===a||t&&a&&_a(t,a,(h,m)=>function Vd(i,e){return i.field.isEqual(e.field)&&(a=e.transform,(t=i.transform)instanceof $a&&a instanceof $a||t instanceof Ni&&a instanceof Ni?_a(t.elements,a.elements,Bo):t instanceof Ms&&a instanceof Ms?Bo(t.k,a.k):t instanceof nc&&a instanceof nc);var t,a}(h,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,a}function Uf(i){return i.isFoundDocument()?i.version:ar.min()}class ic extends bl{constructor(e,t,a,h=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=h,this.type=0}}class Au extends bl{constructor(e,t,a,h,m=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=h,this.fieldTransforms=m,this.type=1}}function Ah(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=i.data.field(t);e.set(t,a)}}),e}function Gc(i,e,t){const a=new Map;D(i.length===t.length);for(let h=0;h<t.length;h++){const m=i[h],b=m.transform,O=e.data.field(m.field);a.set(m.field,Ui(b,O,t[h]))}return a}function Jl(i,e,t){const a=new Map;for(const h of i){const m=h.transform,b=t.data.field(h.field);a.set(h.field,Il(m,b,e))}return a}class Or extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Ga extends bl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class sc{constructor(e){this.count=e}}var ys,Pr;function Gi(i){switch(i){default:return S();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function Ia(i){if(void 0===i)return ki("GRPC error has no .code"),W.UNKNOWN;switch(i){case ys.OK:return W.OK;case ys.CANCELLED:return W.CANCELLED;case ys.UNKNOWN:return W.UNKNOWN;case ys.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case ys.INTERNAL:return W.INTERNAL;case ys.UNAVAILABLE:return W.UNAVAILABLE;case ys.UNAUTHENTICATED:return W.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case ys.NOT_FOUND:return W.NOT_FOUND;case ys.ALREADY_EXISTS:return W.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return W.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case ys.ABORTED:return W.ABORTED;case ys.OUT_OF_RANGE:return W.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return W.UNIMPLEMENTED;case ys.DATA_LOSS:return W.DATA_LOSS;default:return S()}}(Pr=ys||(ys={}))[Pr.OK=0]="OK",Pr[Pr.CANCELLED=1]="CANCELLED",Pr[Pr.UNKNOWN=2]="UNKNOWN",Pr[Pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pr[Pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pr[Pr.NOT_FOUND=5]="NOT_FOUND",Pr[Pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pr[Pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pr[Pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pr[Pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pr[Pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pr[Pr.ABORTED=10]="ABORTED",Pr[Pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pr[Pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pr[Pr.INTERNAL=13]="INTERNAL",Pr[Pr.UNAVAILABLE=14]="UNAVAILABLE",Pr[Pr.DATA_LOSS=15]="DATA_LOSS";class eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[h,m]of a)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0===h)return this.inner[a]=[[e,t]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[t]:a.splice(h,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(t,a)=>{for(const[h,m]of a)e(h,m)})}isEmpty(){return zl(this.inner)}size(){return this.innerSize}}const To=new Rn(un.comparator);function Xo(){return To}const xh=new Rn(un.comparator);function zc(...i){let e=xh;for(const t of i)e=e.insert(t.key,t);return e}function Wc(){return new eu(i=>i.toString(),(i,e)=>i.isEqual(e))}const $f=new Rn(un.comparator),oc=new hi(un.comparator);function Mi(...i){let e=oc;for(const t of i)e=e.add(t);return e}const ac=new hi(hr);function Cl(){return ac}class Bs{constructor(e,t,a,h,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t){const a=new Map;return a.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,t)),new Bs(ar.min(),a,Cl(),Xo(),Mi())}}class xu{constructor(e,t,a,h,m){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t){return new xu(Fr.EMPTY_BYTE_STRING,t,Mi(),Mi(),Mi())}}class Kc{constructor(e,t,a,h){this.O=e,this.removedTargetIds=t,this.key=a,this.F=h}}class Ud{constructor(e,t){this.targetId=e,this.$=t}}class Ar{constructor(e,t,a=Fr.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=h}}class tu{constructor(){this.B=0,this.L=lc(),this.U=Fr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Mi(),t=Mi(),a=Mi();return this.L.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:a=a.add(h);break;default:S()}}),new xu(this.U,this.q,e,t,a)}J(){this.K=!1,this.L=lc()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class $d{constructor(e){this.nt=e,this.st=new Map,this.it=Xo(),this.rt=qc(),this.ot=new hi(hr)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const a=this.lt(t);switch(e.state){case 0:this.ft(t)&&a.W(e.resumeToken);break;case 1:a.tt(),a.G||a.J(),a.W(e.resumeToken);break;case 2:a.tt(),a.G||this.removeTarget(t);break;case 3:this.ft(t)&&(a.et(),a.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),a.W(e.resumeToken));break;default:S()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((a,h)=>{this.ft(h)&&t(h)})}_t(e){const t=e.targetId,a=e.$.count,h=this.wt(t);if(h){const m=h.target;if(Zl(m))if(0===a){const b=new un(m.path);this.ct(t,b,H.newNoDocument(b,ar.min()))}else D(1===a);else this.gt(t)!==a&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((m,b)=>{const O=this.wt(b);if(O){if(m.current&&Zl(O.target)){const X=new un(O.target.path);null!==this.it.get(X)||this.It(b,X)||this.ct(b,X,H.newNoDocument(X,e))}m.j&&(t.set(b,m.H()),m.J())}});let a=Mi();this.rt.forEach((m,b)=>{let O=!0;b.forEachWhile(X=>{const ne=this.wt(X);return!ne||2===ne.purpose||(O=!1,!1)}),O&&(a=a.add(m))}),this.it.forEach((m,b)=>b.setReadTime(e));const h=new Bs(e,t,this.ot,this.it,a);return this.it=Xo(),this.rt=qc(),this.ot=new hi(hr),h}at(e,t){if(!this.ft(e))return;const a=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,a),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,a){if(!this.ft(e))return;const h=this.lt(e);this.It(e,t)?h.Y(t,1):h.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),a&&(this.it=this.it.insert(t,a))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new tu,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new hi(hr),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Qt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new tu),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function qc(){return new Rn(un.comparator)}function lc(){return new Rn(un.comparator)}const Mu={asc:"ASCENDING",desc:"DESCENDING"},Rs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class al{constructor(e,t){this.databaseId=e,this.N=t}}function yr(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mh(i,e){return i.N?e.toBase64():e.toUint8Array()}function Ru(i,e){return yr(i,e.toTimestamp())}function Vs(i){return D(!!i),ar.fromTimestamp(function(e){const t=vi(e);return new Vi(t.seconds,t.nanos)}(i))}function zi(i,e){return(t=i,new ri(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Yc(i){const e=ri.fromString(i);return D(K(e)),e}function Zc(i,e){return zi(i.databaseId,e.path)}function Os(i,e){const t=Yc(e);if(t.get(1)!==i.databaseId.projectId)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new un(Rh(t))}function Dl(i,e){return zi(i.databaseId,e)}function jd(i){const e=Yc(i);return 4===e.length?ri.emptyPath():Rh(e)}function Tl(i){return new ri(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Rh(i){return D(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Oh(i,e,t){return{name:Zc(i,e),fields:t.value.mapValue.fields}}function So(i,e,t){const a=Os(i,e.name),h=Vs(e.updateTime),m=new Ls({mapValue:{fields:e.fields}}),b=H.newFoundDocument(a,h,m);return t&&b.setHasCommittedMutations(),t?b.setHasCommittedMutations():b}function za(i,e){let t;if(e instanceof ic)t={update:Oh(i,e.key,e.value)};else if(e instanceof Or)t={delete:Zc(i,e.key)};else if(e instanceof Au)t={update:Oh(i,e.key,e.data),updateMask:A(e.fieldMask)};else{if(!(e instanceof Ga))return S();t={verify:Zc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(h,m){const b=m.transform;if(b instanceof nc)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof $a)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof Ni)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof Ms)return{fieldPath:m.field.canonicalString(),increment:b.k};throw S()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Ru(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:S()),t;var h}function Vo(i,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Ys.updateTime(Vs(h.updateTime)):void 0!==h.exists?Ys.exists(h.exists):Ys.none():Ys.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(m,b){let O=null;"setToServerValue"in b?(D("REQUEST_TIME"===b.setToServerValue),O=new nc):"appendMissingElements"in b?O=new $a(b.appendMissingElements.values||[]):"removeAllFromArray"in b?O=new Ni(b.removeAllFromArray.values||[]):"increment"in b?O=new Ms(m,b.increment):S();const X=Hi.fromServerFormat(b.fieldPath);return new mo(X,O)}(i,h)):[];var h;if(e.update){const h=Os(i,e.update.name),m=new Ls({mapValue:{fields:e.update.fields}});if(e.updateMask){const b=new il((e.updateMask.fieldPaths||[]).map(ne=>Hi.fromServerFormat(ne)));return new Au(h,m,b,t,a)}return new ic(h,m,t,a)}if(e.delete){const h=Os(i,e.delete);return new Or(h,t)}if(e.verify){const h=Os(i,e.verify);return new Ga(h,t)}return S()}function Ph(i,e){return{documents:[Dl(i,e.path)]}}function Xc(i,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=Dl(i,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Dl(i,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(X){if(0===X.length)return;const ne=X.map(xe=>function(st){if("=="===st.op){if(Ea(st.value))return{unaryFilter:{field:Uo(st.field),op:"IS_NAN"}};if(ql(st.value))return{unaryFilter:{field:Uo(st.field),op:"IS_NULL"}}}else if("!="===st.op){if(Ea(st.value))return{unaryFilter:{field:Uo(st.field),op:"IS_NOT_NAN"}};if(ql(st.value))return{unaryFilter:{field:Uo(st.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(st.field),op:cc(st.op),value:st.value}}}(xe));return 1===ne.length?ne[0]:{compositeFilter:{op:"AND",filters:ne}}}(e.filters);h&&(t.structuredQuery.where=h);const m=function(X){if(0!==X.length)return X.map(ne=>{return{field:Uo((xe=ne).field),direction:kp(xe.dir)};var xe})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const b=(ne=e.limit,i.N||so(ne)?ne:{value:ne});var ne,O,X;return null!==b&&(t.structuredQuery.limit=b),e.startAt&&(t.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(t.structuredQuery.endAt={before:!(X=e.endAt).inclusive,values:X.position}),t}function uc(i){let e=jd(i.parent);const t=i.structuredQuery,a=t.from?t.from.length:0;let h=null;if(a>0){D(1===a);const xe=t.from[0];xe.allDescendants?h=xe.collectionId:e=e.child(xe.collectionId)}let m=[];t.where&&(m=Qc(t.where));let b=[];t.orderBy&&(b=t.orderBy.map(xe=>{return new Zo(I((st=xe).field),function(Lt){switch(Lt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(st.direction));var st}));let O=null;t.limit&&(O=function(xe){let st;return st="object"==typeof xe?xe.value:xe,so(st)?null:st}(t.limit));let X=null;var xe;t.startAt&&(X=new Ba((xe=t.startAt).values||[],!!xe.before));let ne=null;return t.endAt&&(ne=function(xe){return new Ba(xe.values||[],!xe.before)}(t.endAt)),Op(e,h,b,m,O,"F",X,ne)}function Qc(i){return i?void 0!==i.unaryFilter?[_(i)]:void 0!==i.fieldFilter?[g(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Qc(e)).reduce((e,t)=>e.concat(t)):S():[]}function kp(i){return Mu[i]}function cc(i){return Rs[i]}function Uo(i){return{fieldPath:i.canonicalString()}}function I(i){return Hi.fromServerFormat(i.fieldPath)}function g(i){return ms.create(I(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(i.fieldFilter.op),i.fieldFilter.value)}function _(i){switch(i.unaryFilter.op){case"IS_NAN":const e=I(i.unaryFilter.field);return ms.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=I(i.unaryFilter.field);return ms.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=I(i.unaryFilter.field);return ms.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=I(i.unaryFilter.field);return ms.create(h,"!=",{nullValue:"NULL_VALUE"});default:return S()}}function A(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function K(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function de(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Ht(e)),e=ht(i.get(t),e);return Ht(e)}function ht(i,e){let t=e;const a=i.length;for(let h=0;h<a;h++){const m=i.charAt(h);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function Ht(i){return i+"\x01\x01"}function sn(i){const e=i.length;if(D(e>=2),2===e)return D("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ri.emptyPath();const t=e-2,a=[];let h="";for(let m=0;m<e;){const b=i.indexOf("\x01",m);switch((b<0||b>t)&&S(),i.charAt(b+1)){case"\x01":const O=i.substring(m,b);let X;0===h.length?X=O:(h+=O,X=h,h=""),a.push(X);break;case"\x10":h+=i.substring(m,b),h+="\0";break;case"\x11":h+=i.substring(m,b+1);break;default:S()}m=b+2}return new ri(a)}const wn=["userId","batchId"];function Wn(i,e){return[i,de(e)]}function qn(i,e,t){return[i,de(e),t]}const _s={},da=["prefixPath","collectionGroup","readTime","documentId"],Jc=["prefixPath","collectionGroup","documentId"],jf=["collectionGroup","readTime","prefixPath","documentId"],nu=["canonicalId","targetId"],zd=["targetId","path"],Nh=["path","targetId"],Qo=["collectionId","parent"],dc=["indexId","uid"],Wd=["uid","sequenceNumber"],ed=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],td=["indexId","uid","orderedDocumentKey"],nd=["userId","collectionPath","documentId"],Al=["userId","collectionPath","largestBatchId"],hc=["userId","collectionGroup","largestBatchId"],ru=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Np=[...ru,"documentOverlays"],Fp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rd=[...Fp,"indexConfiguration","indexState","indexEntries"],nm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class $t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $t((a,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(a,h)},this.catchCallback=m=>{this.wrapFailure(t,m).next(a,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $t?t:$t.resolve(t)}catch(t){return $t.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$t.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$t.reject(t)}static resolve(e){return new $t((t,a)=>{t(e)})}static reject(e){return new $t((t,a)=>{a(e)})}static waitFor(e){return new $t((t,a)=>{let h=0,m=0,b=!1;e.forEach(O=>{++h,O.next(()=>{++m,b&&m===h&&t()},X=>a(X))}),b=!0,m===h&&t()})}static or(e){let t=$t.resolve(!1);for(const a of e)t=t.next(h=>h?$t.resolve(h):a());return t}static forEach(e,t){const a=[];return e.forEach((h,m)=>{a.push(t.call(this,h,m))}),this.waitFor(a)}}class Ou{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new He,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new ll(e,t.error)):this.At.resolve()},this.transaction.onerror=a=>{const h=fc(a.target.error);this.At.reject(new ll(e,h))}}static open(e,t,a,h){try{return new Ou(t,e.transaction(h,a))}catch(m){throw new ll(t,m)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Qt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Hf(t)}}class Ao{constructor(e,t,a){this.name=e,this.version=t,this.Pt=a,12.2===Ao.Vt((0,We.z$)())&&ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Qt("SimpleDb","Removing database:",e),Ri(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,We.hl)())return!1;if(Ao.St())return!0;const e=(0,We.z$)(),t=Ao.Vt(e),a=0<t&&t<10,h=Ao.Dt(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||m)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}Nt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Qt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,h)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=b=>{a(b.target.result)},m.onblocked=()=>{h(new ll(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=b=>{const O=b.target.error;h("VersionError"===O.name?new le(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new le(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new ll(e,O))},m.onupgradeneeded=b=>{Qt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',b.oldVersion),t.Pt.kt(b.target.result,m.transaction,b.oldVersion,t.version).next(()=>{Qt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=a=>t.Mt(a)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,h){var m=this;return(0,Ce.Z)(function*(){const b="readonly"===t;let O=0;for(;;){++O;try{m.db=yield m.Nt(e);const X=Ou.open(m.db,e,b?"readonly":"readwrite",a),ne=h(X).next(xe=>(X.bt(),xe)).catch(xe=>(X.abort(xe),$t.reject(xe))).toPromise();return ne.catch(()=>{}),yield X.Rt,ne}catch(X){const ne="FirebaseError"!==X.name&&O<3;if(Qt("SimpleDb","Transaction failed with error:",X.message,"Retrying:",ne),m.close(),!ne)return Promise.reject(X)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Fh{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ri(this.Ft.delete())}}class ll extends le{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pu(i){return"IndexedDbTransactionError"===i.name}class Hf{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(Qt("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(Qt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),Ri(a)}add(e){return Qt("SimpleDb","ADD",this.store.name,e,e),Ri(this.store.add(e))}get(e){return Ri(this.store.get(e)).next(t=>(void 0===t&&(t=null),Qt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Qt("SimpleDb","DELETE",this.store.name,e),Ri(this.store.delete(e))}count(){return Qt("SimpleDb","COUNT",this.store.name),Ri(this.store.count())}qt(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const h=this.cursor(a),m=[];return this.Kt(h,(b,O)=>{m.push(O)}).next(()=>m)}{const h=this.store.getAll(a.range);return new $t((m,b)=>{h.onerror=O=>{b(O.target.error)},h.onsuccess=O=>{m(O.target.result)}})}}Gt(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new $t((h,m)=>{a.onerror=b=>{m(b.target.error)},a.onsuccess=b=>{h(b.target.result)}})}Qt(e,t){Qt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.jt=!1;const h=this.cursor(a);return this.Kt(h,(m,b,O)=>O.delete())}Wt(e,t){let a;t?a=e:(a={},t=e);const h=this.cursor(a);return this.Kt(h,t)}zt(e){const t=this.cursor({});return new $t((a,h)=>{t.onerror=m=>{const b=fc(m.target.error);h(b)},t.onsuccess=m=>{const b=m.target.result;b?e(b.primaryKey,b.value).next(O=>{O?b.continue():a()}):a()}})}Kt(e,t){const a=[];return new $t((h,m)=>{e.onerror=b=>{m(b.target.error)},e.onsuccess=b=>{const O=b.target.result;if(!O)return void h();const X=new Fh(O),ne=t(O.primaryKey,O.value,X);if(ne instanceof $t){const xe=ne.catch(st=>(X.done(),$t.reject(st)));a.push(xe)}X.isDone?h():null===X.Lt?O.continue():O.continue(X.Lt)}}).next(()=>$t.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.jt?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ri(i){return new $t((e,t)=>{i.onsuccess=a=>{e(a.target.result)},i.onerror=a=>{const h=fc(a.target.error);t(h)}})}let Wa=!1;function fc(i){const e=Ao.Vt((0,We.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const a=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wa||(Wa=!0,setTimeout(()=>{throw a},0)),a}}return i}class Lh extends rm{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Zs(i,e){const t=j(i);return Ao.xt(t.Ht,e)}class Kd{constructor(e,t,a,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&Hc(m,e,a[h])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ha(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ha(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const a=e.get(t.key),h=a;this.applyToLocalView(h),a.isValidDocument()||h.convertToNoDocument(ar.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mi())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(t,a)=>Pp(t,a))&&_a(this.baseMutations,e.baseMutations,(t,a)=>Pp(t,a))}}class ul{constructor(e,t,a,h){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=h}static from(e,t,a){D(e.mutations.length===a.length);let h=$f;const m=e.mutations;for(let b=0;b<m.length;b++)h=h.insert(m[b].key,a[b].version);return new ul(e,t,a,h)}}class id{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jo{constructor(e,t,a,h,m=ar.min(),b=ar.min(),O=Fr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=b,this.resumeToken=O}withSequenceNumber(e){return new Jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class qd{constructor(e){this.Jt=e}}function Bh(i,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Zc(h=i.Jt,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:yr(h,m.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:od(e.version)};else{if(!e.isUnknownDocument())return S();a.unknownDocument={path:t.path.toArray(),version:od(e.version)}}var h,m;return a}function xl(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function od(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pc(i){const e=new Vi(i.seconds,i.nanoseconds);return ar.fromTimestamp(e)}function Yd(i,e){const t=(e.baseMutations||[]).map(m=>Vo(i.Jt,m));for(let m=0;m<e.mutations.length-1;++m){const b=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(b.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const a=e.mutations.map(m=>Vo(i.Jt,m)),h=Vi.fromMillis(e.localWriteTimeMs);return new Kd(e.batchId,h,t,a)}function Vh(i){const e=pc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?pc(i.lastLimboFreeSnapshotVersion):ar.min();let a;var h;return void 0!==i.query.documents?(D(1===(h=i.query).documents.length),a=ca(Va(jd(h.documents[0])))):a=ca(uc(i.query)),new Jo(a,i.targetId,0,i.lastListenSequenceNumber,e,t,Fr.fromBase64String(i.resumeToken))}function Lp(i,e){const t=od(e.snapshotVersion),a=od(e.lastLimboFreeSnapshotVersion);let h;h=Zl(e.target)?Ph(i.Jt,e.target):Xc(i.Jt,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:La(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:h}}function Uh(i){const e=uc({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Ld(e,e.limit,"L"):e}function Gf(i,e){return new id(e.largestBatchId,Vo(i.Jt,e.overlayMutation))}function im(i,e){const t=e.path.lastSegment();return[i,de(e.path.popLast()),t]}class Bp{getBundleMetadata(e,t){return sm(e).get(t).next(a=>{if(a)return{id:(h=a).bundleId,createTime:pc(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return sm(e).put({bundleId:(a=t).id,createTime:od(Vs(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return Vp(e).get(t).next(a=>{if(a)return{name:(h=a).name,query:Uh(h.bundledQuery),readTime:pc(h.readTime)};var h})}saveNamedQuery(e,t){return Vp(e).put({name:(a=t).name,readTime:od(Vs(a.readTime)),bundledQuery:a.bundledQuery});var a}}function sm(i){return Zs(i,"bundles")}function Vp(i){return Zs(i,"namedQueries")}class Up{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Up(e,t.uid||"")}getOverlay(e,t){return $h(e).get(im(this.userId,t)).next(a=>a?Gf(this.M,a):null)}saveOverlays(e,t,a){const h=[];return a.forEach((m,b)=>{const O=new id(t,b);h.push(this.Xt(e,O))}),$t.waitFor(h)}removeOverlaysForBatchId(e,t,a){const h=new Set;t.forEach(b=>h.add(de(b.getCollectionPath())));const m=[];return h.forEach(b=>{const O=IDBKeyRange.bound([this.userId,b,a],[this.userId,b,a+1],!1,!0);m.push($h(e).Qt("collectionPathOverlayIndex",O))}),$t.waitFor(m)}getOverlaysForCollection(e,t,a){const h=Wc(),m=de(t),b=IDBKeyRange.bound([this.userId,m,a],[this.userId,m,Number.POSITIVE_INFINITY],!0);return $h(e).qt("collectionPathOverlayIndex",b).next(O=>{for(const X of O){const ne=Gf(this.M,X);h.set(ne.getKey(),ne)}return h})}getOverlaysForCollectionGroup(e,t,a,h){const m=Wc();let b;const O=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $h(e).Wt({index:"collectionGroupOverlayIndex",range:O},(X,ne,xe)=>{const st=Gf(this.M,ne);m.size()<h||st.largestBatchId===b?(m.set(st.getKey(),st),b=st.largestBatchId):xe.done()}).next(()=>m)}Xt(e,t){return $h(e).put(function(a,h,m){const[b,O,X]=im(h,m.mutation.key);return{userId:h,collectionPath:O,documentId:X,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:za(a.Jt,m.mutation)}}(this.M,this.userId,t))}}function $h(i){return Zs(i,"documentOverlays")}class $o{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(ii(e.integerValue));else if("doubleValue"in e){const a=ii(e.doubleValue);isNaN(a)?this.ne(t,13):(this.ne(t,15),aa(a)?t.se(0):t.se(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ne(t,20),"string"==typeof a?t.ie(a):(t.ie(`${a.seconds||""}`),t.se(a.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(xi(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.ne(t,45),t.se(a.latitude||0),t.se(a.longitude||0)}else"mapValue"in e?Yo(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):S()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const a=e.fields||{};this.ne(t,55);for(const h of Object.keys(a))this.re(h,t),this.te(a[h],t)}he(e,t){const a=e.values||[];this.ne(t,50);for(const h of a)this.te(h,t)}ae(e,t){this.ne(t,37),un.fromName(e).path.forEach(a=>{this.ne(t,60),this.le(a,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Jm(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Zd(i){const e=64-function(t){let a=0;for(let h=0;h<8;++h){const m=Jm(255&t[h]);if(a+=m,8!==m)break}return a}(i);return Math.ceil(e/8)}$o.fe=new $o;class $p{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this._e(a.value),a=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.ge(a.value),a=t.next();this.ye()}pe(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this._e(a);else if(a<2048)this._e(960|a>>>6),this._e(128|63&a);else if(t<"\ud800"||"\udbff"<t)this._e(480|a>>>12),this._e(128|63&a>>>6),this._e(128|63&a);else{const h=t.codePointAt(0);this._e(240|h>>>18),this._e(128|63&h>>>12),this._e(128|63&h>>>6),this._e(128|63&h)}}this.we()}Ie(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.ge(a);else if(a<2048)this.ge(960|a>>>6),this.ge(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.ge(480|a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a);else{const h=t.codePointAt(0);this.ge(240|h>>>18),this.ge(128|63&h>>>12),this.ge(128|63&h>>>6),this.ge(128|63&h)}}this.ye()}Te(e){const t=this.Ee(e),a=Zd(t);this.Ae(1+a),this.buffer[this.position++]=255&a;for(let h=t.length-a;h<t.length;++h)this.buffer[this.position++]=255&t[h]}Re(e){const t=this.Ee(e),a=Zd(t);this.Ae(1+a),this.buffer[this.position++]=~(255&a);for(let h=t.length-a;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let h=1;h<t.length;++h)t[h]^=a?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const h=new Uint8Array(a);h.set(this.buffer),this.buffer=h}}class om{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class zf{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class jh{constructor(){this.De=new $p,this.Ce=new om(this.De),this.xe=new zf(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class iu{constructor(e,t,a,h){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=h}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new iu(this.indexId,this.documentKey,this.arrayValue,a)}}function gc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=jp(i.arrayValue,e.arrayValue),0!==t?t:(t=jp(i.directionalValue,e.directionalValue),0!==t?t:un.comparator(i.documentKey,e.documentKey)))}function jp(i,e){for(let t=0;t<i.length&&t<e.length;++t){const a=i[t]-e[t];if(0!==a)return a}return i.length-e.length}class ey{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const a=t;a.S()?this.Fe=a:this.Oe.push(a)}}$e(e){const t=Pe(e);if(void 0!==t&&!this.Be(t))return!1;const a=yt(e);let h=0,m=0;for(;h<a.length&&this.Be(a[h]);++h);if(h===a.length)return!0;if(void 0!==this.Fe){const b=a[h];if(!this.Le(this.Fe,b)||!this.Ue(this.Me[m++],b))return!1;++h}for(;h<a.length;++h){const b=a[h];if(m>=this.Me.length||!this.Ue(this.Me[m++],b))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Lr{constructor(){this.qe=new Hh}addToCollectionParentIndex(e,t){return this.qe.add(t),$t.resolve()}getCollectionParents(e,t){return $t.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return $t.resolve()}deleteFieldIndex(e,t){return $t.resolve()}getDocumentsMatchingTarget(e,t){return $t.resolve(null)}getIndexType(e,t){return $t.resolve(0)}getFieldIndexes(e,t){return $t.resolve([])}getNextCollectionGroupToUpdate(e){return $t.resolve(null)}getMinOffset(e,t){return $t.resolve($n.min())}updateCollectionGroup(e,t,a){return $t.resolve()}updateIndexEntries(e,t){return $t.resolve()}}class Hh{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),h=this.index[t]||new hi(ri.comparator),m=!h.has(a);return this.index[t]=h.add(a),m}has(e){const t=e.lastSegment(),a=e.popLast(),h=this.index[t];return h&&h.has(a)}getEntries(e){return(this.index[e]||new hi(ri.comparator)).toArray()}}const ad=new Uint8Array(0);class am{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Hh,this.Ge=new eu(a=>La(a),(a,h)=>Yl(a,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const a=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const m={collectionId:a,parent:de(h)};return Gh(e).put(m)}return $t.resolve()}getCollectionParents(e,t){const a=[],h=IDBKeyRange.bound([t,""],[Gl(t),""],!1,!0);return Gh(e).qt(h).next(m=>{for(const b of m){if(b.collectionId!==t)break;a.push(sn(b.parent))}return a})}addFieldIndex(e,t){const a=zh(e),h={indexId:(m=t).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(b=>[b.fieldPath.canonicalString(),b.kind])};var m;return delete h.indexId,a.add(h).next()}deleteFieldIndex(e,t){const a=zh(e),h=Wh(e),m=ha(e);return a.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=ha(e);let h=!0;const m=new Map;return $t.forEach(this.Qe(t),b=>this.je(e,b).next(O=>{h&&(h=!!O),m.set(b,O)})).next(()=>{if(h){let b=Mi();const O=[];return $t.forEach(m,(X,ne)=>{var xe;Qt("IndexedDbIndexManager",`Using index ${xe=X,`id=${xe.indexId}|cg=${xe.collectionGroup}|f=${xe.fields.map(rs=>`${rs.fieldPath}:${rs.kind}`).join(",")}`} to execute ${La(t)}`);const st=function(rs,$s){const ks=Pe($s);if(void 0===ks)return null;for(const Xs of Vc(rs,ks.fieldPath))switch(Xs.op){case"array-contains-any":return Xs.value.arrayValue.values||[];case"array-contains":return[Xs.value]}return null}(ne,X),Lt=function(rs,$s){const ks=new Map;for(const Xs of yt($s))for(const xa of Vc(rs,Xs.fieldPath))switch(xa.op){case"==":case"in":ks.set(Xs.fieldPath.canonicalString(),xa.value);break;case"not-in":case"!=":return ks.set(Xs.fieldPath.canonicalString(),xa.value),Array.from(ks.values())}return null}(ne,X),Jt=function(rs,$s){const ks=[];let Xs=!0;for(const xa of yt($s)){const Jg=0===xa.kind?bh(rs,xa.fieldPath,rs.startAt):Od(rs,xa.fieldPath,rs.startAt);ks.push(Jg.value),Xs&&(Xs=Jg.inclusive)}return new Ba(ks,Xs)}(ne,X),nn=function(rs,$s){const ks=[];let Xs=!0;for(const xa of yt($s)){const Jg=0===xa.kind?Od(rs,xa.fieldPath,rs.endAt):bh(rs,xa.fieldPath,rs.endAt);ks.push(Jg.value),Xs&&(Xs=Jg.inclusive)}return new Ba(ks,Xs)}(ne,X),Ln=this.We(X,ne,Jt),Er=this.We(X,ne,nn),Ps=this.ze(X,ne,Lt),vo=this.He(X.indexId,st,Ln,Jt.inclusive,Er,nn.inclusive,Ps);return $t.forEach(vo,rs=>a.Gt(rs,t.limit).next($s=>{$s.forEach(ks=>{const Xs=un.fromSegments(ks.documentKey);b.has(Xs)||(b=b.add(Xs),O.push(Xs))})}))}).next(()=>O)}return $t.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,a,h,m,b,O){const X=(null!=t?t.length:1)*Math.max(a.length,m.length),ne=X/(null!=t?t.length:1),xe=[];for(let st=0;st<X;++st){const Lt=t?this.Je(t[st/ne]):ad,Jt=this.Ye(e,Lt,a[st%ne],h),nn=this.Xe(e,Lt,m[st%ne],b),Ln=O.map(Er=>this.Ye(e,Lt,Er,!0));xe.push(...this.createRange(Jt,nn,Ln))}return xe}Ye(e,t,a,h){const m=new iu(e,un.empty(),t,a);return h?m:m.ke()}Xe(e,t,a,h){const m=new iu(e,un.empty(),t,a);return h?m.ke():m}je(e,t){const a=new ey(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let b=null;for(const O of m)a.$e(O)&&(!b||O.fields.length>b.fields.length)&&(b=O);return b})}getIndexType(e,t){let a=2;return $t.forEach(this.Qe(t),h=>this.je(e,h).next(m=>{m?0!==a&&m.fields.length<function(b){let O=new hi(Hi.comparator),X=!1;for(const ne of b.filters){const xe=ne;xe.field.isKeyField()||("array-contains"===xe.op||"array-contains-any"===xe.op?X=!0:O=O.add(xe.field))}for(const ne of b.orderBy)ne.field.isKeyField()||(O=O.add(ne.field));return O.size+(X?1:0)}(h)&&(a=1):a=0})).next(()=>a)}Ze(e,t){const a=new jh;for(const h of yt(e)){const m=t.data.field(h.fieldPath);if(null==m)return null;const b=a.Ne(h.kind);$o.fe.Zt(m,b)}return a.Se()}Je(e){const t=new jh;return $o.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const a=new jh;return $o.fe.Zt(Ws(this.databaseId,t),a.Ne(function(h){const m=yt(h);return 0===m.length?0:m[m.length-1].kind}(e))),a.Se()}ze(e,t,a){if(null===a)return[];let h=[];h.push(new jh);let m=0;for(const b of yt(e)){const O=a[m++];for(const X of h)if(this.en(t,b.fieldPath)&&ml(O))h=this.nn(h,b,O);else{const ne=X.Ne(b.kind);$o.fe.Zt(O,ne)}}return this.sn(h)}We(e,t,a){return this.ze(e,t,a.position)}sn(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].Se();return t}nn(e,t,a){const h=[...e],m=[];for(const b of a.arrayValue.values||[])for(const O of h){const X=new jh;X.seed(O.Se()),$o.fe.Zt(b,X.Ne(t.kind)),m.push(X)}return m}en(e,t){return!!e.filters.find(a=>a instanceof ms&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=zh(e),h=Wh(e);return(t?a.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.qt()).next(m=>{const b=[];return $t.forEach(m,O=>h.get([O.indexId,this.uid]).next(X=>{b.push(function(ne,xe){const st=xe?new tn(xe.sequenceNumber,new $n(pc(xe.readTime),new un(sn(xe.documentKey)),xe.largestBatchId)):tn.empty(),Lt=ne.fields.map(([Jt,nn])=>new Ot(Hi.fromServerFormat(Jt),nn));return new ae(ne.indexId,ne.collectionGroup,Lt,st)}(O,X))})).next(()=>b)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,h)=>{const m=a.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:hr(a.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const h=zh(e),m=Wh(e);return this.rn(e).next(b=>h.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(O=>$t.forEach(O,X=>{return m.put({indexId:X.indexId,uid:this.user.uid||"",sequenceNumber:b,readTime:od((Lt=a).readTime),documentKey:de(Lt.documentKey.path),largestBatchId:Lt.largestBatchId});var Lt})))}updateIndexEntries(e,t){const a=new Map;return $t.forEach(t,(h,m)=>{const b=a.get(h.collectionGroup);return(b?$t.resolve(b):this.getFieldIndexes(e,h.collectionGroup)).next(O=>(a.set(h.collectionGroup,O),$t.forEach(O,X=>this.on(e,h,X).next(ne=>{const xe=this.un(m,X);return ne.isEqual(xe)?$t.resolve():this.an(e,m,X,ne,xe)}))))})}cn(e,t,a,h){return ha(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.tn(a,t.key),documentKey:t.key.path.toArray()})}hn(e,t,a,h){return ha(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.tn(a,t.key),t.key.path.toArray()])}on(e,t,a){const h=ha(e);let m=new hi(gc);return h.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.tn(a,t)])},(b,O)=>{m=m.add(new iu(a.indexId,t,O.arrayValue,O.directionalValue))}).next(()=>m)}un(e,t){let a=new hi(gc);const h=this.Ze(t,e);if(null==h)return a;const m=Pe(t);if(null!=m){const b=e.data.field(m.fieldPath);if(ml(b))for(const O of b.arrayValue.values||[])a=a.add(new iu(t.indexId,e.key,this.Je(O),h))}else a=a.add(new iu(t.indexId,e.key,ad,h));return a}an(e,t,a,h,m){Qt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const b=[];return function(O,X,ne,xe,st){const Lt=O.getIterator(),Jt=X.getIterator();let nn=ao(Lt),Ln=ao(Jt);for(;nn||Ln;){let Er=!1,Ps=!1;if(nn&&Ln){const vo=ne(nn,Ln);vo<0?Ps=!0:vo>0&&(Er=!0)}else null!=nn?Ps=!0:Er=!0;Er?(xe(Ln),Ln=ao(Jt)):Ps?(st(nn),nn=ao(Lt)):(nn=ao(Lt),Ln=ao(Jt))}}(h,m,gc,O=>{b.push(this.cn(e,t,a,O))},O=>{b.push(this.hn(e,t,a,O))}),$t.waitFor(b)}rn(e){let t=1;return Wh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,h,m)=>{m.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((b,O)=>gc(b,O)).filter((b,O,X)=>!O||0!==gc(b,X[O-1]));const h=[];h.push(e);for(const b of a){const O=gc(b,e),X=gc(b,t);if(0===O)h[0]=e.ke();else if(O>0&&X<0)h.push(b),h.push(b.ke());else if(X>0)break}h.push(t);const m=[];for(let b=0;b<h.length;b+=2)m.push(IDBKeyRange.bound([h[b].indexId,this.uid,h[b].arrayValue,h[b].directionalValue,ad,[]],[h[b+1].indexId,this.uid,h[b+1].arrayValue,h[b+1].directionalValue,ad,[]]));return m}getMinOffset(e,t){let a;return $t.forEach(this.Qe(t),h=>this.je(e,h).next(m=>{m?(!a||Kr(m.indexState.offset,a)<0)&&(a=m.indexState.offset):a=$n.min()})).next(()=>a)}}function Gh(i){return Zs(i,"collectionParents")}function ha(i){return Zs(i,"indexEntries")}function zh(i){return Zs(i,"indexConfiguration")}function Wh(i){return Zs(i,"indexState")}const ld={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ss{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Ss(e,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Kh(i,e,t){const a=i.store("mutations"),h=i.store("documentMutations"),m=[],b=IDBKeyRange.only(t.batchId);let O=0;const X=a.Wt({range:b},(xe,st,Lt)=>(O++,Lt.delete()));m.push(X.next(()=>{D(1===O)}));const ne=[];for(const xe of t.mutations){const st=qn(e,xe.key.path,t.batchId);m.push(h.delete(st)),ne.push(xe.key)}return $t.waitFor(m).next(()=>ne)}function qh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw S();e=i.noDocument}return JSON.stringify(e).length}Ss.DEFAULT_COLLECTION_PERCENTILE=10,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ss.DEFAULT=new Ss(41943040,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ss.DISABLED=new Ss(-1,0,0);class Xd{constructor(e,t,a,h){this.userId=e,this.M=t,this.indexManager=a,this.referenceDelegate=h,this.ln={}}static Yt(e,t,a,h){D(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new Xd(m,t,a,h)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ku(e).Wt({index:"userMutationsIndex",range:a},(h,m,b)=>{t=!1,b.done()}).next(()=>t)}addMutationBatch(e,t,a,h){const m=Yh(e),b=ku(e);return b.add({}).next(O=>{D("number"==typeof O);const X=new Kd(O,t,a,h),ne=function(Lt,Jt,nn){const Ln=nn.baseMutations.map(Ps=>za(Lt.Jt,Ps)),Er=nn.mutations.map(Ps=>za(Lt.Jt,Ps));return{userId:Jt,batchId:nn.batchId,localWriteTimeMs:nn.localWriteTime.toMillis(),baseMutations:Ln,mutations:Er}}(this.M,this.userId,X),xe=[];let st=new hi((Lt,Jt)=>hr(Lt.canonicalString(),Jt.canonicalString()));for(const Lt of h){const Jt=qn(this.userId,Lt.key.path,O);st=st.add(Lt.key.path.popLast()),xe.push(b.put(ne)),xe.push(m.put(Jt,_s))}return st.forEach(Lt=>{xe.push(this.indexManager.addToCollectionParentIndex(e,Lt))}),e.addOnCommittedListener(()=>{this.ln[O]=X.keys()}),$t.waitFor(xe).next(()=>X)})}lookupMutationBatch(e,t){return ku(e).get(t).next(a=>a?(D(a.userId===this.userId),Yd(this.M,a)):null)}fn(e,t){return this.ln[t]?$t.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const h=a.keys();return this.ln[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,h=IDBKeyRange.lowerBound([this.userId,a]);let m=null;return ku(e).Wt({index:"userMutationsIndex",range:h},(b,O,X)=>{O.userId===this.userId&&(D(O.batchId>=a),m=Yd(this.M,O)),X.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return ku(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(h,m,b)=>{a=m.batchId,b.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ku(e).qt("userMutationsIndex",t).next(a=>a.map(h=>Yd(this.M,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=Wn(this.userId,t.path),h=IDBKeyRange.lowerBound(a),m=[];return Yh(e).Wt({range:h},(b,O,X)=>{const[ne,xe,st]=b,Lt=sn(xe);if(ne===this.userId&&t.path.isEqual(Lt))return ku(e).get(st).next(Jt=>{if(!Jt)throw S();D(Jt.userId===this.userId),m.push(Yd(this.M,Jt))});X.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new hi(hr);const h=[];return t.forEach(m=>{const b=Wn(this.userId,m.path),O=IDBKeyRange.lowerBound(b),X=Yh(e).Wt({range:O},(ne,xe,st)=>{const[Lt,Jt,nn]=ne,Ln=sn(Jt);Lt===this.userId&&m.path.isEqual(Ln)?a=a.add(nn):st.done()});h.push(X)}),$t.waitFor(h).next(()=>this.dn(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,h=a.length+1,m=Wn(this.userId,a),b=IDBKeyRange.lowerBound(m);let O=new hi(hr);return Yh(e).Wt({range:b},(X,ne,xe)=>{const[st,Lt,Jt]=X,nn=sn(Lt);st===this.userId&&a.isPrefixOf(nn)?nn.length===h&&(O=O.add(Jt)):xe.done()}).next(()=>this.dn(e,O))}dn(e,t){const a=[],h=[];return t.forEach(m=>{h.push(ku(e).get(m).next(b=>{if(null===b)throw S();D(b.userId===this.userId),a.push(Yd(this.M,b))}))}),$t.waitFor(h).next(()=>a)}removeMutationBatch(e,t){return Kh(e.Ht,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),$t.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $t.resolve();const a=IDBKeyRange.lowerBound([this.userId]),h=[];return Yh(e).Wt({range:a},(m,b,O)=>{if(m[0]===this.userId){const X=sn(m[1]);h.push(X)}else O.done()}).next(()=>{D(0===h.length)})})}containsKey(e,t){return Hp(e,this.userId,t)}wn(e){return Zh(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Hp(i,e,t){const a=Wn(e,t.path),h=a[1],m=IDBKeyRange.lowerBound(a);let b=!1;return Yh(i).Wt({range:m,jt:!0},(O,X,ne)=>{const[xe,st,Lt]=O;xe===e&&st===h&&(b=!0),ne.done()}).next(()=>b)}function ku(i){return Zs(i,"mutations")}function Yh(i){return Zs(i,"documentMutations")}function Zh(i){return Zs(i,"mutationQueues")}class su{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new su(0)}static yn(){return new su(-1)}}class Gp{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const a=new su(t.highestTargetId);return t.highestTargetId=a.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>ar.fromTimestamp(new Vi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.pn(e).next(h=>(h.highestListenSequenceNumber=t,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.In(e,h)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(a=>(a.targetCount+=1,this.En(t,a),this.In(e,a))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>mc(e).delete(t.targetId)).next(()=>this.pn(e)).next(a=>(D(a.targetCount>0),a.targetCount-=1,this.In(e,a)))}removeTargets(e,t,a){let h=0;const m=[];return mc(e).Wt((b,O)=>{const X=Vh(O);X.sequenceNumber<=t&&null===a.get(X.targetId)&&(h++,m.push(this.removeTargetData(e,X)))}).next(()=>$t.waitFor(m)).next(()=>h)}forEachTarget(e,t){return mc(e).Wt((a,h)=>{const m=Vh(h);t(m)})}pn(e){return Wf(e).get("targetGlobalKey").next(t=>(D(null!==t),t))}In(e,t){return Wf(e).put("targetGlobalKey",t)}Tn(e,t){return mc(e).put(Lp(this.M,t))}En(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const a=La(t),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let m=null;return mc(e).Wt({range:h,index:"queryTargetsIndex"},(b,O,X)=>{const ne=Vh(O);Yl(t,ne.target)&&(m=ne,X.done())}).next(()=>m)}addMatchingKeys(e,t,a){const h=[],m=yc(e);return t.forEach(b=>{const O=de(b.path);h.push(m.put({targetId:a,path:O})),h.push(this.referenceDelegate.addReference(e,a,b))}),$t.waitFor(h)}removeMatchingKeys(e,t,a){const h=yc(e);return $t.forEach(t,m=>{const b=de(m.path);return $t.waitFor([h.delete([a,b]),this.referenceDelegate.removeReference(e,a,m)])})}removeMatchingKeysForTargetId(e,t){const a=yc(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),h=yc(e);let m=Mi();return h.Wt({range:a,jt:!0},(b,O,X)=>{const ne=sn(b[1]),xe=new un(ne);m=m.add(xe)}).next(()=>m)}containsKey(e,t){const a=de(t.path),h=IDBKeyRange.bound([a],[Gl(a)],!1,!0);let m=0;return yc(e).Wt({index:"documentTargetsIndex",jt:!0,range:h},([b,O],X,ne)=>{0!==b&&(m++,ne.done())}).next(()=>m>0)}Et(e,t){return mc(e).get(t).next(a=>a?Vh(a):null)}}function mc(i){return Zs(i,"targets")}function Wf(i){return Zs(i,"targetGlobal")}function yc(i){return Zs(i,"targetDocuments")}function ud(i){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,Ce.Z)(function*(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==nm)throw i;Qt("LocalStore","Unexpectedly lost primary lease")}),Kf.apply(this,arguments)}function zp([i,e],[t,a]){const h=hr(i,t);return 0===h?hr(e,a):h}class ty{constructor(e){this.An=e,this.buffer=new hi(zp),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();zp(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wp{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const a=this.Vn?3e5:6e4;Qt("LruGarbageCollector",`Garbage collection scheduled in ${a}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,Ce.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(h){Pu(h)?Qt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",h):yield ud(h)}yield t.Sn(e)}))}}class Kp{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return $t.resolve(cs.A);const a=new ty(t);return this.Dn.forEachTarget(e,h=>a.Pn(h.sequenceNumber)).next(()=>this.Dn.xn(e,h=>a.Pn(h))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.Dn.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Qt("LruGarbageCollector","Garbage collection skipped; disabled"),$t.resolve(ld)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Qt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ld):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let a,h,m,b,O,X,ne;const xe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(st=>(st>this.params.maximumSequenceNumbersToCollect?(Qt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${st}`),h=this.params.maximumSequenceNumbersToCollect):h=st,b=Date.now(),this.nthSequenceNumber(e,h))).next(st=>(a=st,O=Date.now(),this.removeTargets(e,a,t))).next(st=>(m=st,X=Date.now(),this.removeOrphanedDocuments(e,a))).next(st=>(ne=Date.now(),Du()<=Ye.in.DEBUG&&Qt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${b-xe}ms\n\tDetermined least recently used ${h} in `+(O-b)+`ms\n\tRemoved ${m} targets in `+(X-O)+`ms\n\tRemoved ${st} documents in `+(ne-X)+`ms\nTotal Duration: ${ne-xe}ms`),$t.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:st})))}}class lm{constructor(e,t){this.db=e,this.garbageCollector=new Kp(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(h=>a+h))}kn(e){let t=0;return this.xn(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(a,h)=>t(h))}addReference(e,t,a){return qp(e,a)}removeReference(e,t,a){return qp(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return qp(e,t)}On(e,t){return function(a,h){let m=!1;return Zh(a).zt(b=>Hp(a,b,h).next(O=>(O&&(m=!0),$t.resolve(!O)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Mn(e,(b,O)=>{if(O<=t){const X=this.On(e,b).next(ne=>{if(!ne)return m++,a.getEntry(e,b).next(()=>(a.removeEntry(b,ar.min()),yc(e).delete([0,de(b.path)])))});h.push(X)}}).next(()=>$t.waitFor(h)).next(()=>a.apply(e)).next(()=>m)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return qp(e,t)}Mn(e,t){const a=yc(e);let h,m=cs.A;return a.Wt({index:"documentTargetsIndex"},([b,O],{path:X,sequenceNumber:ne})=>{0===b?(m!==cs.A&&t(new un(sn(h)),m),m=ne,h=X):m=cs.A}).next(()=>{m!==cs.A&&t(new un(sn(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qp(i,e){return yc(i).put((a=i.currentSequenceNumber,{targetId:0,path:de(e.path),sequenceNumber:a}));var a}class Yp{constructor(){this.changes=new eu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,H.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?$t.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class um{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return Qd(e).put(a)}removeEntry(e,t,a){return Qd(e).delete(function(h,m){const b=h.path.toArray();return[b.slice(0,b.length-2),b[b.length-2],xl(m),b[b.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.Fn(e,a)))}getEntry(e,t){let a=H.newInvalidDocument(t);return Qd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},(h,m)=>{a=this.$n(t,m)}).next(()=>a)}Bn(e,t){let a={size:0,document:H.newInvalidDocument(t)};return Qd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qf(t))},(h,m)=>{a={document:this.$n(t,m),size:qh(m)}}).next(()=>a)}getEntries(e,t){let a=Xo();return this.Ln(e,t,(h,m)=>{const b=this.$n(h,m);a=a.insert(h,b)}).next(()=>a)}Un(e,t){let a=Xo(),h=new Rn(un.comparator);return this.Ln(e,t,(m,b)=>{const O=this.$n(m,b);a=a.insert(m,O),h=h.insert(m,qh(b))}).next(()=>({documents:a,qn:h}))}Ln(e,t,a){if(t.isEmpty())return $t.resolve();let h=new hi(_c);t.forEach(X=>h=h.add(X));const m=IDBKeyRange.bound(qf(h.first()),qf(h.last())),b=h.getIterator();let O=b.getNext();return Qd(e).Wt({index:"documentKeyIndex",range:m},(X,ne,xe)=>{const st=un.fromSegments([...ne.prefixPath,ne.collectionGroup,ne.documentId]);for(;O&&_c(O,st)<0;)a(O,null),O=b.getNext();O&&O.isEqual(st)&&(a(O,ne),O=b.hasNext()?b.getNext():null),O?xe.Ut(qf(O)):xe.done()}).next(()=>{for(;O;)a(O,null),O=b.hasNext()?b.getNext():null})}getAllFromCollection(e,t,a){const h=[t.popLast().toArray(),t.lastSegment(),xl(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qd(e).qt(IDBKeyRange.bound(h,m,!0)).next(b=>{let O=Xo();for(const X of b){const ne=this.$n(un.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);O=O.insert(ne.key,ne)}return O})}getAllFromCollectionGroup(e,t,a,h){let m=Xo();const b=cm(t,a),O=cm(t,$n.max());return Qd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(b,O,!0)},(X,ne,xe)=>{const st=this.$n(un.fromSegments(ne.prefixPath.concat(ne.collectionGroup,ne.documentId)),ne);m=m.insert(st.key,st),m.size===h&&xe.done()}).next(()=>m)}newChangeBuffer(e){return new Zp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Xh(e).get("remoteDocumentGlobalKey").next(t=>(D(!!t),t))}Fn(e,t){return Xh(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const a=function sd(i,e){let t;if(e.document)t=So(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=un.fromSegments(e.noDocument.path),h=pc(e.noDocument.readTime);t=H.newNoDocument(a,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return S();{const a=un.fromSegments(e.unknownDocument.path),h=pc(e.unknownDocument.version);t=H.newUnknownDocument(a,h)}}return e.readTime&&t.setReadTime(function(a){const h=new Vi(a[0],a[1]);return ar.fromTimestamp(h)}(e.readTime)),t}(this.M,t);if(!a.isNoDocument()||!a.version.isEqual(ar.min()))return a}return H.newInvalidDocument(e)}}class Zp extends Yp{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new eu(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const t=[];let a=0,h=new hi((m,b)=>hr(m.canonicalString(),b.canonicalString()));return this.changes.forEach((m,b)=>{const O=this.Gn.get(m);if(t.push(this.Kn.removeEntry(e,m,O.readTime)),b.isValidDocument()){const X=Bh(this.Kn.M,b);h=h.add(m.path.popLast()),a+=qh(X)-O.size,t.push(this.Kn.addEntry(e,m,X))}else if(a-=O.size,this.trackRemovals){const X=Bh(this.Kn.M,b.convertToNoDocument(ar.min()));t.push(this.Kn.addEntry(e,m,X))}}),h.forEach(m=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Kn.updateMetadata(e,a)),$t.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(a=>(this.Gn.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:a,qn:h})=>(h.forEach((m,b)=>{this.Gn.set(m,{size:b,readTime:a.get(m).readTime})}),a))}}function Xh(i){return Zs(i,"remoteDocumentGlobal")}function Qd(i){return Zs(i,"remoteDocumentsV14")}function qf(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cm(i,e){const t=e.documentKey.path.toArray();return[i,xl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _c(i,e){const t=i.path.toArray(),a=e.path.toArray();let h=0;for(let m=0;m<t.length-2&&m<a.length-2;++m)if(h=hr(t[m],a[m]),h)return h;return h=hr(t.length,a.length),h||(h=hr(t[t.length-2],a[a.length-2]),h||hr(t[t.length-1],a[a.length-1]))}class ny{constructor(e){this.M=e}kt(e,t,a,h){const m=new Ou("createOrUpgrade",t);var O;a<1&&h>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wn,{unique:!0}),O.createObjectStore("documentMutations"),dm(e),function(O){O.createObjectStore("remoteDocuments")}(e));let b=$t.resolve();return a<3&&h>=3&&(0!==a&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),dm(e)),b=b.next(()=>function(O){const X=O.store("targetGlobal"),ne={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ar.min().toTimestamp(),targetCount:0};return X.put("targetGlobalKey",ne)}(m))),a<4&&h>=4&&(0!==a&&(b=b.next(()=>function(O,X){return X.store("mutations").qt().next(ne=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wn,{unique:!0});const xe=X.store("mutations"),st=ne.map(Lt=>xe.put(Lt));return $t.waitFor(st)})}(e,m))),b=b.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&h>=5&&(b=b.next(()=>this.Qn(m))),a<6&&h>=6&&(b=b.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.jn(m)))),a<7&&h>=7&&(b=b.next(()=>this.Wn(m))),a<8&&h>=8&&(b=b.next(()=>this.zn(e,m))),a<9&&h>=9&&(b=b.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&h>=10&&(b=b.next(()=>this.Hn(m))),a<11&&h>=11&&(b=b.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&h>=12&&(b=b.next(()=>{!function(O){const X=O.createObjectStore("documentOverlays",{keyPath:nd});X.createIndex("collectionPathOverlayIndex",Al,{unique:!1}),X.createIndex("collectionGroupOverlayIndex",hc,{unique:!1})}(e)})),a<13&&h>=13&&(b=b.next(()=>function(O){const X=O.createObjectStore("remoteDocumentsV14",{keyPath:da});X.createIndex("documentKeyIndex",Jc),X.createIndex("collectionGroupIndex",jf)}(e)).next(()=>this.Jn(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&h>=14&&(b=b.next(()=>{!function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:dc}).createIndex("sequenceNumberIndex",Wd,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:ed}).createIndex("documentKeyIndex",td,{unique:!1})}(e)})),b}jn(e){let t=0;return e.store("remoteDocuments").Wt((a,h)=>{t+=qh(h)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Qn(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.qt().next(h=>$t.forEach(h,m=>{const b=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return a.qt("userMutationsIndex",b).next(O=>$t.forEach(O,X=>{D(X.userId===m.userId);const ne=Yd(this.M,X);return Kh(e,m.userId,ne).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return a.Wt((b,O)=>{const X=new ri(b),ne=[0,de(X)];m.push(t.get(ne).next(xe=>xe?$t.resolve():t.put({targetId:0,path:de(X),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>$t.waitFor(m))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Qo});const a=t.store("collectionParents"),h=new Hh,m=b=>{if(h.add(b)){const O=b.lastSegment(),X=b.popLast();return a.put({collectionId:O,parent:de(X)})}};return t.store("remoteDocuments").Wt({jt:!0},(b,O)=>{const X=new ri(b);return m(X.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([b,O,X],ne)=>{const xe=sn(O);return m(xe.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((a,h)=>{const m=Vh(h),b=Lp(this.M,m);return t.put(b)})}Jn(e,t){const a=t.store("remoteDocuments"),h=[];return a.Wt((m,b)=>{const O=t.store("remoteDocumentsV14"),X=(ne=b,ne.document?new un(ri.fromString(ne.document.name).popFirst(5)):ne.noDocument?un.fromSegments(ne.noDocument.path):ne.unknownDocument?un.fromSegments(ne.unknownDocument.path):S()).path.toArray();var ne;const xe={prefixPath:X.slice(0,X.length-2),collectionGroup:X[X.length-2],documentId:X[X.length-1],readTime:b.readTime||[0,0],unknownDocument:b.unknownDocument,noDocument:b.noDocument,document:b.document,hasCommittedMutations:!!b.hasCommittedMutations};h.push(O.put(xe))}).next(()=>$t.waitFor(h))}}function dm(i){i.createObjectStore("targetDocuments",{keyPath:zd}).createIndex("documentTargetsIndex",Nh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nu,{unique:!0}),i.createObjectStore("targetGlobal")}const Nu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qh{constructor(e,t,a,h,m,b,O,X,ne,xe,st=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.Yn=m,this.window=b,this.document=O,this.Xn=ne,this.Zn=xe,this.ts=st,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=Lt=>Promise.resolve(),!Qh.vt())throw new le(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lm(this,h),this.hs=t+"main",this.M=new qd(X),this.ls=new Ao(this.hs,this.ts,new ny(this.M)),this.fs=new Gp(this.referenceDelegate,this.M),this.ds=new um(this.M),this._s=new Bp,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===xe&&ki("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(W.FAILED_PRECONDITION,Nu);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new cs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var a=(0,Ce.Z)(function*(h){if(t.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ce.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Pu(e))return Qt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return cd(e).get("owner").next(t=>$t.resolve(this.Ps(t)))}Vs(e){return Xp(e).delete(this.clientId)}vs(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=Zs(a,"clientMetadata");return h.qt().next(m=>{const b=e.Ds(m,18e5),O=m.filter(X=>-1===b.indexOf(X));return $t.forEach(O,X=>h.delete(X.clientId)).next(()=>O)})}).catch(()=>[]);if(e.ws)for(const a of t)e.ws.removeItem(e.Cs(a.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?$t.resolve(!0):cd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new le(W.FAILED_PRECONDITION,Nu);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xp(e).qt().next(a=>void 0===this.Ds(a,5e3).find(h=>{if(this.clientId!==h.clientId){const b=!this.inForeground&&h.inForeground,O=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||b&&O)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Qt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new Lh(t,cs.A);return e.Rs(a).next(()=>e.Vs(a))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(a=>this.Ss(a.updateTimeMs,t)&&!this.xs(a.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Xp(e).qt().next(t=>this.Ds(t,18e5).map(a=>a.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Xd.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new am(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Up.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,a){Qt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",m=14===(b=this.ts)?rd:13===b?Fp:12===b?Np:11===b?ru:void S();var b;let O;return this.ls.runTransaction(e,h,m,X=>(O=new Lh(X,this.es?this.es.next():cs.A),"readwrite-primary"===t?this.Es(O).next(ne=>!!ne||this.As(O)).next(ne=>{if(!ne)throw ki(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new le(W.FAILED_PRECONDITION,nm);return a(O)}).next(ne=>this.bs(O).next(()=>ne)):this.$s(O).next(()=>a(O)))).then(X=>(O.raiseOnCommittedEvent(),X))}$s(e){return cd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(W.FAILED_PRECONDITION,Nu)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cd(e).put("owner",t)}static vt(){return Ao.vt()}Rs(e){const t=cd(e);return t.get("owner").next(a=>this.Ps(a)?(Qt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$t.resolve())}Ss(e,t){const a=Date.now();return!(e<a-t||e>a&&(ki(`Detected an update time that is in the future: ${e} > ${a}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,We.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const a=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Qt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return ki("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ki("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cd(i){return Zs(i,"owner")}function Xp(i){return Zs(i,"clientMetadata")}function ou(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Qp{constructor(e,t,a){this.ds=e,this.Bs=t,this.indexManager=a}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(a=>this.Us(e,t,a))}Us(e,t,a){return this.ds.getEntry(e,t).next(h=>{for(const m of a)m.applyToLocalView(h);return h})}qs(e,t){e.forEach((a,h)=>{for(const m of t)m.applyToLocalView(h)})}Ks(e,t){return this.ds.getEntries(e,t).next(a=>this.Gs(e,a).next(()=>a))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>this.qs(t,a))}Qs(e,t,a){return un.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.js(e,t.path):Fd(t)?this.Ws(e,t,a):this.zs(e,t,a);var h}js(e,t){return this.Ls(e,new un(t)).next(a=>{let h=zc();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}Ws(e,t,a){const h=t.collectionGroup;let m=zc();return this.indexManager.getCollectionParents(e,h).next(b=>$t.forEach(b,O=>{const X=(ne=t,xe=O.child(h),new El(xe,null,ne.explicitOrderBy.slice(),ne.filters.slice(),ne.limit,ne.limitType,ne.startAt,ne.endAt));var ne,xe;return this.zs(e,X,a).next(ne=>{ne.forEach((xe,st)=>{m=m.insert(xe,st)})})}).next(()=>m))}zs(e,t,a){let h;return this.ds.getAllFromCollection(e,t.path,a).next(m=>(h=m,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(m=>{for(const b of m)for(const O of b.mutations){const X=O.key;let ne=h.get(X);null==ne&&(ne=H.newInvalidDocument(X),h=h.insert(X,ne)),Ha(O,ne,b.localWriteTime),ne.isFoundDocument()||(h=h.remove(X))}}).next(()=>(h.forEach((m,b)=>{Ua(t,b)||(h=h.remove(m))}),h))}}class Yf{constructor(e,t,a,h){this.targetId=e,this.fromCache=t,this.Hs=a,this.Js=h}static Ys(e,t){let a=Mi(),h=Mi();for(const m of t.docChanges)switch(m.type){case 0:a=a.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Yf(e,t.fromCache,a,h)}}class Jh{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,a,h){return this.ti(e,t).next(m=>m||this.ei(e,t,h,a)).next(m=>m||this.ni(e,t))}ti(e,t){return $t.resolve(null)}ei(e,t,a,h){return function ec(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||h.isEqual(ar.min())?this.ni(e,t):this.Zs.Ks(e,a).next(m=>{const b=this.si(t,m);return this.ii(t,b,a,h)?this.ni(e,t):(Du()<=Ye.in.DEBUG&&Qt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Bd(t)),this.ri(e,b,t,dn(h,-1)))})}si(e,t){let a=new hi($c(e));return t.forEach((h,m)=>{Ua(e,m)&&(a=a.add(m))}),a}ii(e,t,a,h){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}ni(e,t){return Du()<=Ye.in.DEBUG&&Qt("QueryEngine","Using full collection scan to execute query:",Bd(t)),this.Zs.Qs(e,t,$n.min())}ri(e,t,a,h){return this.Zs.Qs(e,a,h).next(m=>(t.forEach(b=>{m=m.insert(b.key,b)}),m))}}class Jp{constructor(e,t,a,h){this.persistence=e,this.oi=t,this.M=h,this.ui=new Rn(hr),this.ai=new eu(m=>La(m),Yl),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(a)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Qp(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function au(i,e,t,a){return new Jp(i,e,t,a)}function vc(i,e){return eg.apply(this,arguments)}function eg(){return eg=(0,Ce.Z)(function*(i,e){const t=j(i);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let h;return t.Bs.getAllMutationBatches(a).next(m=>(h=m,t.li(e),t.Bs.getAllMutationBatches(a))).next(m=>{const b=[],O=[];let X=Mi();for(const ne of h){b.push(ne.batchId);for(const xe of ne.mutations)X=X.add(xe.key)}for(const ne of m){O.push(ne.batchId);for(const xe of ne.mutations)X=X.add(xe.key)}return t.fi.Ks(a,X).next(ne=>({di:ne,removedBatchIds:b,addedBatchIds:O}))})})}),eg.apply(this,arguments)}function Ec(i,e){const t=j(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),m=t.hi.newChangeBuffer({trackRemovals:!0});return function(b,O,X,ne){const xe=X.batch,st=xe.keys();let Lt=$t.resolve();return st.forEach(Jt=>{Lt=Lt.next(()=>ne.getEntry(O,Jt)).next(nn=>{const Ln=X.docVersions.get(Jt);D(null!==Ln),nn.version.compareTo(Ln)<0&&(xe.applyToRemoteDocument(nn,X),nn.isValidDocument()&&(nn.setReadTime(X.commitVersion),ne.addEntry(nn)))})}),Lt.next(()=>b.Bs.removeMutationBatch(O,xe))}(t,a,e,m).next(()=>m.apply(a)).next(()=>t.Bs.performConsistencyCheck(a)).next(()=>t.fi.Ks(a,h))})}function tg(i){const e=j(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function ng(i,e){const t=j(i),a=e.snapshotVersion;let h=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const b=t.hi.newChangeBuffer({trackRemovals:!0});h=t.ui;const O=[];e.targetChanges.forEach((ne,xe)=>{const st=h.get(xe);if(!st)return;O.push(t.fs.removeMatchingKeys(m,ne.removedDocuments,xe).next(()=>t.fs.addMatchingKeys(m,ne.addedDocuments,xe)));let Lt=st.withSequenceNumber(m.currentSequenceNumber);var Jt,nn,Ln;e.targetMismatches.has(xe)?Lt=Lt.withResumeToken(Fr.EMPTY_BYTE_STRING,ar.min()).withLastLimboFreeSnapshotVersion(ar.min()):ne.resumeToken.approximateByteSize()>0&&(Lt=Lt.withResumeToken(ne.resumeToken,a)),h=h.insert(xe,Lt),nn=Lt,Ln=ne,(0===(Jt=st).resumeToken.approximateByteSize()||nn.snapshotVersion.toMicroseconds()-Jt.snapshotVersion.toMicroseconds()>=3e8||Ln.addedDocuments.size+Ln.modifiedDocuments.size+Ln.removedDocuments.size>0)&&O.push(t.fs.updateTargetData(m,Lt))});let X=Xo();if(e.documentUpdates.forEach(ne=>{e.resolvedLimboDocuments.has(ne)&&O.push(t.persistence.referenceDelegate.updateLimboDocument(m,ne))}),O.push(Zf(m,b,e.documentUpdates).next(ne=>{X=ne})),!a.isEqual(ar.min())){const ne=t.fs.getLastRemoteSnapshotVersion(m).next(xe=>t.fs.setTargetsMetadata(m,m.currentSequenceNumber,a));O.push(ne)}return $t.waitFor(O).next(()=>b.apply(m)).next(()=>t.fi.Gs(m,X)).next(()=>X)}).then(m=>(t.ui=h,m))}function Zf(i,e,t){let a=Mi();return t.forEach(h=>a=a.add(h)),e.getEntries(i,a).next(h=>{let m=Xo();return t.forEach((b,O)=>{const X=h.get(b);O.isNoDocument()&&O.version.isEqual(ar.min())?(e.removeEntry(b,O.readTime),m=m.insert(b,O)):!X.isValidDocument()||O.version.compareTo(X.version)>0||0===O.version.compareTo(X.version)&&X.hasPendingWrites?(e.addEntry(O),m=m.insert(b,O)):Qt("LocalStore","Ignoring outdated watch update for ",b,". Current version:",X.version," Watch version:",O.version)}),m})}function ry(i,e){const t=j(i);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(a,e)))}function wc(i,e){const t=j(i);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return t.fs.getTargetData(a,e).next(m=>m?(h=m,$t.resolve(h)):t.fs.allocateTargetId(a).next(b=>(h=new Jo(e,b,0,a.currentSequenceNumber),t.fs.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=t.ui.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.ui=t.ui.insert(a.targetId,a),t.ai.set(e,a.targetId)),a})}function Fu(i,e,t){return rg.apply(this,arguments)}function rg(){return rg=(0,Ce.Z)(function*(i,e,t){const a=j(i),h=a.ui.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",m,b=>a.persistence.referenceDelegate.removeTarget(b,h)))}catch(b){if(!Pu(b))throw b;Qt("LocalStore",`Failed to update sequence numbers for target ${e}: ${b}`)}a.ui=a.ui.remove(e),a.ai.delete(h.target)}),rg.apply(this,arguments)}function Ka(i,e,t){const a=j(i);let h=ar.min(),m=Mi();return a.persistence.runTransaction("Execute query","readonly",b=>function(O,X,ne){const xe=j(O),st=xe.ai.get(ne);return void 0!==st?$t.resolve(xe.ui.get(st)):xe.fs.getTargetData(X,ne)}(a,b,ca(e)).next(O=>{if(O)return h=O.lastLimboFreeSnapshotVersion,a.fs.getMatchingKeysForTargetId(b,O.targetId).next(X=>{m=X})}).next(()=>a.oi.Qs(b,e,t?h:ar.min(),t?m:Mi())).next(O=>(bc(a,wl(e),O),{documents:O,_i:m})))}function Ic(i,e){const t=j(i),a=j(t.fs),h=t.ui.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",m=>a.Et(m,e).next(b=>b?b.target:null))}function ef(i,e){const t=j(i),a=t.ci.get(e)||ar.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.hi.getAllFromCollectionGroup(h,e,dn(a,-1),Number.MAX_SAFE_INTEGER)).then(h=>(bc(t,e,h),h))}function bc(i,e,t){let a=ar.min();t.forEach((h,m)=>{m.readTime.compareTo(a)>0&&(a=m.readTime)}),i.ci.set(e,a)}function Ml(){return Ml=(0,Ce.Z)(function*(i,e,t,a){const h=j(i);let m=Mi(),b=Xo();for(const ne of t){const xe=e.wi(ne.metadata.name);ne.document&&(m=m.add(xe));const st=e.mi(ne);st.setReadTime(e.gi(ne.metadata.readTime)),b=b.insert(xe,st)}const O=h.hi.newChangeBuffer({trackRemovals:!0}),X=yield wc(h,(ne=a,ca(Va(ri.fromString(`__bundle__/docs/${ne}`)))));var ne;return h.persistence.runTransaction("Apply bundle documents","readwrite",ne=>Zf(ne,O,b).next(xe=>(O.apply(ne),xe)).next(xe=>h.fs.removeMatchingKeysForTargetId(ne,X.targetId).next(()=>h.fs.addMatchingKeys(ne,m,X.targetId)).next(()=>h.fi.Gs(ne,xe)).next(()=>xe)))}),Ml.apply(this,arguments)}function ig(i,e){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,Ce.Z)(function*(i,e,t=Mi()){const a=yield wc(i,ca(Uh(e.bundledQuery))),h=j(i);return h.persistence.runTransaction("Save named query","readwrite",m=>{const b=Vs(e.readTime);if(a.snapshotVersion.compareTo(b)>=0)return h._s.saveNamedQuery(m,e);const O=a.withResumeToken(Fr.EMPTY_BYTE_STRING,b);return h.ui=h.ui.insert(O.targetId,O),h.fs.updateTargetData(m,O).next(()=>h.fs.removeMatchingKeysForTargetId(m,a.targetId)).next(()=>h.fs.addMatchingKeys(m,t,a.targetId)).next(()=>h._s.saveNamedQuery(m,e))})}),Jd.apply(this,arguments)}class Xf{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return $t.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var a;return this.yi.set(t.id,{id:(a=t).id,version:a.version,createTime:Vs(a.createTime)}),$t.resolve()}getNamedQuery(e,t){return $t.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(a=t).name,query:Uh(a.bundledQuery),readTime:Vs(a.readTime)}),$t.resolve();var a}}class sg{constructor(){this.overlays=new Rn(un.comparator),this.Ii=new Map}getOverlay(e,t){return $t.resolve(this.overlays.get(t))}saveOverlays(e,t,a){return a.forEach((h,m)=>{this.Xt(e,t,m)}),$t.resolve()}removeOverlaysForBatchId(e,t,a){const h=this.Ii.get(a);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.Ii.delete(a)),$t.resolve()}getOverlaysForCollection(e,t,a){const h=Wc(),m=t.length+1,b=new un(t.child("")),O=this.overlays.getIteratorFrom(b);for(;O.hasNext();){const X=O.getNext().value,ne=X.getKey();if(!t.isPrefixOf(ne.path))break;ne.path.length===m&&X.largestBatchId>a&&h.set(X.getKey(),X)}return $t.resolve(h)}getOverlaysForCollectionGroup(e,t,a,h){let m=new Rn((ne,xe)=>ne-xe);const b=this.overlays.getIterator();for(;b.hasNext();){const ne=b.getNext().value;if(ne.getKey().getCollectionGroup()===t&&ne.largestBatchId>a){let xe=m.get(ne.largestBatchId);null===xe&&(xe=Wc(),m=m.insert(ne.largestBatchId,xe)),xe.set(ne.getKey(),ne)}}const O=Wc(),X=m.getIterator();for(;X.hasNext()&&(X.getNext().value.forEach((ne,xe)=>O.set(ne,xe)),!(O.size()>=h)););return $t.resolve(O)}Xt(e,t,a){if(null===a)return;const h=this.overlays.get(a.key);if(null!==h){const b=this.Ii.get(h.largestBatchId).delete(a.key);this.Ii.set(h.largestBatchId,b)}this.overlays=this.overlays.insert(a.key,new id(t,a));let m=this.Ii.get(t);void 0===m&&(m=Mi(),this.Ii.set(t,m)),this.Ii.set(t,m.add(a.key))}}class Lu{constructor(){this.Ti=new hi(yo.Ei),this.Ai=new hi(yo.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const a=new yo(e,t);this.Ti=this.Ti.add(a),this.Ai=this.Ai.add(a)}bi(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.Pi(new yo(e,t))}Vi(e,t){e.forEach(a=>this.removeReference(a,t))}vi(e){const t=new un(new ri([])),a=new yo(t,e),h=new yo(t,e+1),m=[];return this.Ai.forEachInRange([a,h],b=>{this.Pi(b),m.push(b.key)}),m}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new un(new ri([])),a=new yo(t,e),h=new yo(t,e+1);let m=Mi();return this.Ai.forEachInRange([a,h],b=>{m=m.add(b.key)}),m}containsKey(e){const t=new yo(e,0),a=this.Ti.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class yo{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return un.comparator(e.key,t.key)||hr(e.Ci,t.Ci)}static Ri(e,t){return hr(e.Ci,t.Ci)||un.comparator(e.key,t.key)}}class Qf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new hi(yo.Ei)}checkEmpty(e){return $t.resolve(0===this.Bs.length)}addMutationBatch(e,t,a,h){const m=this.xi;this.xi++;const b=new Kd(m,t,a,h);this.Bs.push(b);for(const O of h)this.Ni=this.Ni.add(new yo(O.key,m)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return $t.resolve(b)}lookupMutationBatch(e,t){return $t.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.Mi(t+1),m=h<0?0:h;return $t.resolve(this.Bs.length>m?this.Bs[m]:null)}getHighestUnacknowledgedBatchId(){return $t.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return $t.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new yo(t,0),h=new yo(t,Number.POSITIVE_INFINITY),m=[];return this.Ni.forEachInRange([a,h],b=>{const O=this.ki(b.Ci);m.push(O)}),$t.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new hi(hr);return t.forEach(h=>{const m=new yo(h,0),b=new yo(h,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([m,b],O=>{a=a.add(O.Ci)})}),$t.resolve(this.Oi(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,h=a.length+1;let m=a;un.isDocumentKey(m)||(m=m.child(""));const b=new yo(new un(m),0);let O=new hi(hr);return this.Ni.forEachWhile(X=>{const ne=X.key.path;return!!a.isPrefixOf(ne)&&(ne.length===h&&(O=O.add(X.Ci)),!0)},b),$t.resolve(this.Oi(O))}Oi(e){const t=[];return e.forEach(a=>{const h=this.ki(a);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){D(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let a=this.Ni;return $t.forEach(t.mutations,h=>{const m=new yo(h.key,t.batchId);return a=a.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.Ni=a})}_n(e){}containsKey(e,t){const a=new yo(t,0),h=this.Ni.firstAfterOrEqual(a);return $t.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return $t.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class iy{constructor(e){this.$i=e,this.docs=new Rn(un.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,h=this.docs.get(a),m=h?h.size:0,b=this.$i(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:b}),this.size+=b-m,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return $t.resolve(a?a.document.mutableCopy():H.newInvalidDocument(t))}getEntries(e,t){let a=Xo();return t.forEach(h=>{const m=this.docs.get(h);a=a.insert(h,m?m.document.mutableCopy():H.newInvalidDocument(h))}),$t.resolve(a)}getAllFromCollection(e,t,a){let h=Xo();const m=new un(t.child("")),b=this.docs.getIteratorFrom(m);for(;b.hasNext();){const{key:O,value:{document:X}}=b.getNext();if(!t.isPrefixOf(O.path))break;O.path.length>t.length+1||Kr(mr(X),a)<=0||(h=h.insert(X.key,X.mutableCopy()))}return $t.resolve(h)}getAllFromCollectionGroup(e,t,a,h){S()}Bi(e,t){return $t.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new Jf(this)}getSize(e){return $t.resolve(this.size)}}class Jf extends Yp{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((a,h)=>{h.isValidDocument()?t.push(this.Kn.addEntry(e,h)):this.Kn.removeEntry(a)}),$t.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class hm{constructor(e){this.persistence=e,this.Li=new eu(t=>La(t),Yl),this.lastRemoteSnapshotVersion=ar.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Lu,this.targetCount=0,this.Ki=su.gn()}forEachTarget(e,t){return this.Li.forEach((a,h)=>t(h)),$t.resolve()}getLastRemoteSnapshotVersion(e){return $t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $t.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),$t.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.Ui&&(this.Ui=t),$t.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new su(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,$t.resolve()}updateTargetData(e,t){return this.Tn(t),$t.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,$t.resolve()}removeTargets(e,t,a){let h=0;const m=[];return this.Li.forEach((b,O)=>{O.sequenceNumber<=t&&null===a.get(O.targetId)&&(this.Li.delete(b),m.push(this.removeMatchingKeysForTargetId(e,O.targetId)),h++)}),$t.waitFor(m).next(()=>h)}getTargetCount(e){return $t.resolve(this.targetCount)}getTargetData(e,t){const a=this.Li.get(t)||null;return $t.resolve(a)}addMatchingKeys(e,t,a){return this.qi.bi(t,a),$t.resolve()}removeMatchingKeys(e,t,a){this.qi.Vi(t,a);const h=this.persistence.referenceDelegate,m=[];return h&&t.forEach(b=>{m.push(h.markPotentiallyOrphaned(e,b))}),$t.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),$t.resolve()}getMatchingKeysForTargetId(e,t){const a=this.qi.Di(t);return $t.resolve(a)}containsKey(e,t){return $t.resolve(this.qi.containsKey(t))}}class fm{constructor(e,t){this.Gi={},this.overlays={},this.es=new cs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new hm(this),this.indexManager=new Lr,this.ds=new iy(a=>this.referenceDelegate.Qi(a)),this.M=new qd(t),this._s=new Xf(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Gi[e.toKey()];return a||(a=new Qf(t,this.referenceDelegate),this.Gi[e.toKey()]=a),a}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,a){Qt("MemoryPersistence","Starting transaction:",e);const h=new og(this.es.next());return this.referenceDelegate.ji(),a(h).next(m=>this.referenceDelegate.Wi(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}zi(e,t){return $t.or(Object.values(this.Gi).map(a=>()=>a.containsKey(e,t)))}}class og extends rm{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Hi=new Lu,this.Ji=null}static Yi(e){return new ag(e)}get Xi(){if(this.Ji)return this.Ji;throw S()}addReference(e,t,a){return this.Hi.addReference(a,t),this.Xi.delete(a.toString()),$t.resolve()}removeReference(e,t,a){return this.Hi.removeReference(a,t),this.Xi.add(a.toString()),$t.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),$t.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(h=>this.Xi.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(m=>this.Xi.add(m.toString()))}).next(()=>a.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $t.forEach(this.Xi,a=>{const h=un.fromPath(a);return this.Zi(e,h).next(m=>{m||t.removeEntry(h,ar.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(a=>{a?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return $t.or([()=>$t.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function lg(i,e){return`firestore_clients_${i}_${e}`}function ug(i,e,t){let a=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function tf(i,e){return`firestore_targets_${i}_${e}`}class xo{constructor(e,t,a,h){this.user=e,this.batchId=t,this.state=a,this.error=h}static tr(e,t,a){const h=JSON.parse(a);let m,b="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return b&&h.error&&(b="string"==typeof h.error.message&&"string"==typeof h.error.code,b&&(m=new le(h.error.code,h.error.message))),b?new xo(e,t,h.state,m):(ki("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dd{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static tr(e,t){const a=JSON.parse(t);let h,m="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return m&&a.error&&(m="string"==typeof a.error.message&&"string"==typeof a.error.code,m&&(h=new le(a.error.code,a.error.message))),m?new dd(e,a.state,h):(ki("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const a=JSON.parse(t);let h="object"==typeof a&&a.activeTargetIds instanceof Array,m=Cl();for(let b=0;h&&b<a.activeTargetIds.length;++b)h=la(a.activeTargetIds[b]),m=m.add(a.activeTargetIds[b]);return h?new hd(e,m):(ki("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Dc{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Dc(t.clientId,t.onlineState):(ki("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ep{constructor(){this.activeTargetIds=Cl()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nf{constructor(e,t,a,h,m){this.window=e,this.Yn=t,this.persistenceKey=a,this.ir=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Rn(hr),this.started=!1,this.cr=[];const b=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.hr=lg(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ep),this.dr=new RegExp(`^firestore_clients_${b}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${b}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${b}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Fs();for(const h of t){if(h===e.ir)continue;const m=e.getItem(lg(e.persistenceKey,h));if(m){const b=hd.tr(h,m);b&&(e.ar=e.ar.insert(b.clientId,b))}}e.yr();const a=e.storage.getItem(e.mr);if(a){const h=e.pr(a);h&&e.Ir(h)}for(const h of e.cr)e.ur(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((a,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,a){this.Er(e,t,a),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(tf(this.persistenceKey,e));if(a){const h=dd.tr(e,a);h&&(t=h.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tf(this.persistenceKey,e))}updateQueryState(e,t,a){this.br(e,t,a)}handleUserChange(e,t,a){t.forEach(h=>{this.Ar(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Qt("SharedClientState","READ",e,t),t}setItem(e,t){Qt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Qt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const a=e;if(a.storageArea===this.storage){if(Qt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.hr)return void ki("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==a.key)if(t.dr.test(a.key)){if(null==a.newValue){const h=t.vr(a.key);return t.Sr(h,null)}{const h=t.Dr(a.key,a.newValue);if(h)return t.Sr(h.clientId,h)}}else if(t._r.test(a.key)){if(null!==a.newValue){const h=t.Cr(a.key,a.newValue);if(h)return t.Nr(h)}}else if(t.wr.test(a.key)){if(null!==a.newValue){const h=t.kr(a.key,a.newValue);if(h)return t.Mr(h)}}else if(a.key===t.mr){if(null!==a.newValue){const h=t.pr(a.newValue);if(h)return t.Ir(h)}}else if(a.key===t.lr){const h=function(m){let b=cs.A;if(null!=m)try{const O=JSON.parse(m);D("number"==typeof O),b=O}catch(O){ki("SharedClientState","Failed to read sequence number from WebStorage",O)}return b}(a.newValue);h!==cs.A&&t.sequenceNumberHandler(h)}else if(a.key===t.gr){const h=t.Or(a.newValue);yield Promise.all(h.map(m=>t.syncEngine.Fr(m)))}}else t.cr.push(a)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,a){const h=new xo(this.currentUser,e,t,a),m=ug(this.persistenceKey,this.currentUser,e);this.setItem(m,h.er())}Ar(e){const t=ug(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,a){const h=tf(this.persistenceKey,e),m=new dd(e,t,a);this.setItem(h,m.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const a=this.vr(e);return hd.tr(a,t)}Cr(e,t){const a=this._r.exec(e),h=Number(a[1]);return xo.tr(new Ts(void 0!==a[2]?a[2]:null),h,t)}kr(e,t){const a=this.wr.exec(e),h=Number(a[1]);return dd.tr(h,t)}pr(e){return Dc.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Qt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const a=t?this.ar.insert(e,t):this.ar.remove(e),h=this.Tr(this.ar),m=this.Tr(a),b=[],O=[];return m.forEach(X=>{h.has(X)||b.push(X)}),h.forEach(X=>{m.has(X)||O.push(X)}),this.syncEngine.Lr(b,O).then(()=>{this.ar=a})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Cl();return e.forEach((a,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class sy{constructor(){this.Ur=new ep,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,a){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ep,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tp{Kr(e){}shutdown(){}}class rf{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Qt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Qt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const pm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class sf{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class cg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,a,h,m){const b=this.ho(e,t);Qt("RestConnection","Sending: ",b,a);const O={};return this.lo(O,h,m),this.fo(e,b,O,a).then(X=>(Qt("RestConnection","Received: ",X),X),X=>{throw oa("RestConnection",`${e} failed with error: `,X,"url: ",b,"request:",a),X})}_o(e,t,a,h,m){return this.co(e,t,a,h,m)}lo(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ko,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,m)=>e[m]=h),a&&a.headers.forEach((h,m)=>e[m]=h)}ho(e,t){return`${this.uo}/v1/${t}:${pm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,a,h){return new Promise((m,b)=>{const O=new rl;O.listenOnce(Fo.COMPLETE,()=>{try{switch(O.getLastErrorCode()){case ro.NO_ERROR:const ne=O.getResponseJson();Qt("Connection","XHR received:",JSON.stringify(ne)),m(ne);break;case ro.TIMEOUT:Qt("Connection",'RPC "'+e+'" timed out'),b(new le(W.DEADLINE_EXCEEDED,"Request time out"));break;case ro.HTTP_ERROR:const xe=O.getStatus();if(Qt("Connection",'RPC "'+e+'" failed with status:',xe,"response text:",O.getResponseText()),xe>0){const st=O.getResponseJson().error;if(st&&st.status&&st.message){const Lt=function(Jt){const nn=Jt.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(nn)>=0?nn:W.UNKNOWN}(st.status);b(new le(Lt,st.message))}else b(new le(W.UNKNOWN,"Server responded with status "+O.getStatus()))}else b(new le(W.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{Qt("Connection",'RPC "'+e+'" completed.')}});const X=JSON.stringify(h);O.send(t,"POST",X,a,15)})}wo(e,t,a){const h=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=no(),b=Hl(),O={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(O.xmlHttpFactory=new Cu({})),this.lo(O.initMessageHeaders,t,a),(0,We.uI)()||(0,We.b$)()||(0,We.d)()||(0,We.w1)()||(0,We.Mn)()||(0,We.ru)()||(O.httpHeadersOverwriteParam="$httpHeaders");const X=h.join("");Qt("Connection","Creating WebChannel: "+X,O);const ne=m.createWebChannel(X,O);let xe=!1,st=!1;const Lt=new sf({Jr:nn=>{st?Qt("Connection","Not sending because WebChannel is closed:",nn):(xe||(Qt("Connection","Opening WebChannel transport."),ne.open(),xe=!0),Qt("Connection","WebChannel sending:",nn),ne.send(nn))},Yr:()=>ne.close()}),Jt=(nn,Ln,Er)=>{nn.listen(Ln,Ps=>{try{Er(Ps)}catch(vo){setTimeout(()=>{throw vo},0)}})};return Jt(ne,Ci.EventType.OPEN,()=>{st||Qt("Connection","WebChannel transport opened.")}),Jt(ne,Ci.EventType.CLOSE,()=>{st||(st=!0,Qt("Connection","WebChannel transport closed"),Lt.ro())}),Jt(ne,Ci.EventType.ERROR,nn=>{st||(st=!0,oa("Connection","WebChannel transport errored:",nn),Lt.ro(new le(W.UNAVAILABLE,"The operation could not be completed")))}),Jt(ne,Ci.EventType.MESSAGE,nn=>{var Ln;if(!st){const Er=nn.data[0];D(!!Er);const Ps=Er,vo=Ps.error||(null===(Ln=Ps[0])||void 0===Ln?void 0:Ln.error);if(vo){Qt("Connection","WebChannel received error:",vo);const rs=vo.status;let $s=function(Xs){const xa=ys[Xs];if(void 0!==xa)return Ia(xa)}(rs),ks=vo.message;void 0===$s&&($s=W.INTERNAL,ks="Unknown error status: "+rs+" with message "+vo.message),st=!0,Lt.ro(new le($s,ks)),ne.close()}else Qt("Connection","WebChannel received:",Er),Lt.oo(Er)}}),Jt(b,bu.STAT_EVENT,nn=>{nn.stat===Io.PROXY?Qt("Connection","Detected buffering proxy"):nn.stat===Io.NOPROXY&&Qt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Lt.io()},0),Lt}}function gm(){return"undefined"!=typeof window?window:null}function af(){return"undefined"!=typeof document?document:null}function lf(i){return new al(i,!0)}class eh{constructor(e,t,a=1e3,h=1.5,m=6e4){this.Yn=e,this.timerId=t,this.mo=a,this.yo=h,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),h=Math.max(0,t-a);h>0&&Qt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class uf{constructor(e,t,a,h,m,b,O,X){this.Yn=e,this.Vo=a,this.vo=h,this.So=m,this.authCredentialsProvider=b,this.appCheckCredentialsProvider=O,this.listener=X,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new eh(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ce.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var a=this;return(0,Ce.Z)(function*(){a.Uo(),a.qo(),a.No.cancel(),a.Do++,4!==e?a.No.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),a.No.Ao()):t&&t.code===W.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Ko(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.Do===t&&this.Qo(a,h)},a=>{e(()=>{const h=new le(W.UNKNOWN,"Fetching auth token failed: "+a.message);return this.jo(h)})})}Qo(e,t){const a=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{a(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(h=>{a(()=>this.jo(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ce.Z)(function*(){e.state=0,e.start()}))}jo(e){return Qt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Qt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mm extends uf{constructor(e,t,a,h,m,b){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,h,b),this.M=m}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Gd(i,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(X=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:S(),h=e.targetChange.targetIds||[],m=function(X,ne){return X.N?(D(void 0===ne||"string"==typeof ne),Fr.fromBase64String(ne||"")):(D(void 0===ne||ne instanceof Uint8Array),Fr.fromUint8Array(ne||new Uint8Array))}(i,e.targetChange.resumeToken),b=e.targetChange.cause,O=b&&function(X){const ne=void 0===X.code?W.UNKNOWN:Ia(X.code);return new le(ne,X.message||"")}(b);t=new Ar(a,h,m,O||null)}else if("documentChange"in e){const a=e.documentChange,h=Os(i,a.document.name),m=Vs(a.document.updateTime),b=new Ls({mapValue:{fields:a.document.fields}}),O=H.newFoundDocument(h,m,b);t=new Kc(a.targetIds||[],a.removedTargetIds||[],O.key,O)}else if("documentDelete"in e){const a=e.documentDelete,h=Os(i,a.document),m=a.readTime?Vs(a.readTime):ar.min(),b=H.newNoDocument(h,m);t=new Kc([],a.removedTargetIds||[],b.key,b)}else if("documentRemove"in e){const a=e.documentRemove,h=Os(i,a.document);t=new Kc([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return S();{const a=e.filter,m=new sc(a.count||0);t=new Ud(a.targetId,m)}}var X;return t}(this.M,e),a=function(h){if(!("targetChange"in h))return ar.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?ar.min():m.readTime?Vs(m.readTime):ar.min()}(e);return this.listener.zo(t,a)}Ho(e){const t={};t.database=Tl(this.M),t.addTarget=function(h,m){let b;const O=m.target;return b=Zl(O)?{documents:Ph(h,O)}:{query:Xc(h,O)},b.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?b.resumeToken=Mh(h,m.resumeToken):m.snapshotVersion.compareTo(ar.min())>0&&(b.readTime=yr(h,m.snapshotVersion.toTimestamp())),b}(this.M,e);const a=function kh(i,e){const t=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return S()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.Lo(t)}Jo(e){const t={};t.database=Tl(this.M),t.removeTarget=e,this.Lo(t)}}class ym extends uf{constructor(e,t,a,h,m,b){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,h,b),this.M=m,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(D(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Sl(i,e){return i&&i.length>0?(D(void 0!==e),i.map(t=>function(a,h){let m=Vs(a.updateTime?a.updateTime:h);return m.isEqual(ar.min())&&(m=Vs(h)),new Vf(m,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=Vs(e.commitTime);return this.listener.tu(a,t)}return D(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Tl(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>za(this.M,a))};this.Lo(t)}}class th extends class{}{constructor(e,t,a,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=a,this.M=h,this.su=!1}iu(){if(this.su)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.So.co(e,t,a,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(W.UNKNOWN,h.toString())})}_o(e,t,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.So._o(e,t,a,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(W.UNKNOWN,h.toString())})}terminate(){this.su=!0}}class lu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ki(t),this.uu=!1):Qt("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class ba{constructor(e,t,a,h,m){var b=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=m,this.gu.Kr(O=>{a.enqueueAndForget((0,Ce.Z)(function*(){var X;uu(b)&&(Qt("RemoteStore","Restarting streams for network reachability change."),yield(X=(0,Ce.Z)(function*(ne){const xe=j(ne);xe.wu.add(4),yield Tc(xe),xe.yu.set("Unknown"),xe.wu.delete(4),yield fd(xe)}),function(ne){return X.apply(this,arguments)})(b))}))}),this.yu=new lu(a,h)}}function fd(i){return np.apply(this,arguments)}function np(){return np=(0,Ce.Z)(function*(i){if(uu(i))for(const e of i.mu)yield e(!0)}),np.apply(this,arguments)}function Tc(i){return nh.apply(this,arguments)}function nh(){return nh=(0,Ce.Z)(function*(i){for(const e of i.mu)yield e(!1)}),nh.apply(this,arguments)}function Bu(i,e){const t=j(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),rh(t)?df(t):yd(t).Mo()&&Ca(t,e))}function cf(i,e){const t=j(i),a=yd(t);t._u.delete(e),a.Mo()&&dg(t,e),0===t._u.size&&(a.Mo()?a.$o():uu(t)&&t.yu.set("Unknown"))}function Ca(i,e){i.pu.Z(e.targetId),yd(i).Ho(e)}function dg(i,e){i.pu.Z(e),yd(i).Jo(e)}function df(i){i.pu=new $d({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i._u.get(e)||null}),yd(i).start(),i.yu.au()}function rh(i){return uu(i)&&!yd(i).ko()&&i._u.size>0}function uu(i){return 0===j(i).wu.size}function ea(i){i.pu=void 0}function rp(i){return hg.apply(this,arguments)}function hg(){return hg=(0,Ce.Z)(function*(i){i._u.forEach((e,t)=>{Ca(i,e)})}),hg.apply(this,arguments)}function ip(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,Ce.Z)(function*(i,e){ea(i),rh(i)?(i.yu.lu(e),df(i)):i.yu.set("Unknown")}),hf.apply(this,arguments)}function _m(i,e,t){return fg.apply(this,arguments)}function fg(){return fg=(0,Ce.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof Ar&&2===e.state&&e.cause)try{yield(a=(0,Ce.Z)(function*(h,m){const b=m.cause;for(const O of m.targetIds)h._u.has(O)&&(yield h.remoteSyncer.rejectListen(O,b),h._u.delete(O),h.pu.removeTarget(O))}),function(h,m){return a.apply(this,arguments)})(i,e)}catch(a){Qt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield ff(i,a)}else if(e instanceof Kc?i.pu.ut(e):e instanceof Ud?i.pu._t(e):i.pu.ht(e),!t.isEqual(ar.min()))try{const a=yield tg(i.localStore);t.compareTo(a)>=0&&(yield function(h,m){const b=h.pu.yt(m);return b.targetChanges.forEach((O,X)=>{if(O.resumeToken.approximateByteSize()>0){const ne=h._u.get(X);ne&&h._u.set(X,ne.withResumeToken(O.resumeToken,m))}}),b.targetMismatches.forEach(O=>{const X=h._u.get(O);if(!X)return;h._u.set(O,X.withResumeToken(Fr.EMPTY_BYTE_STRING,X.snapshotVersion)),dg(h,O);const ne=new Jo(X.target,O,1,X.sequenceNumber);Ca(h,ne)}),h.remoteSyncer.applyRemoteEvent(b)}(i,t))}catch(a){Qt("RemoteStore","Failed to raise snapshot:",a),yield ff(i,a)}var a}),fg.apply(this,arguments)}function ff(i,e,t){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,Ce.Z)(function*(i,e,t){if(!Pu(e))throw e;i.wu.add(1),yield Tc(i),i.yu.set("Offline"),t||(t=()=>tg(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Qt("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield fd(i)}))}),Vu.apply(this,arguments)}function vm(i,e){return e().catch(t=>ff(i,t,e))}function pd(i){return sp.apply(this,arguments)}function sp(){return sp=(0,Ce.Z)(function*(i){const e=j(i),t=Ol(e);let a=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;op(e);)try{const h=yield ry(e.localStore,a);if(null===h){0===e.du.length&&t.$o();break}a=h.batchId,pf(e,h)}catch(h){yield ff(e,h)}pg(e)&&gf(e)}),sp.apply(this,arguments)}function op(i){return uu(i)&&i.du.length<10}function pf(i,e){i.du.push(e);const t=Ol(i);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function pg(i){return uu(i)&&!Ol(i).ko()&&i.du.length>0}function gf(i){Ol(i).start()}function Uu(i){return ih.apply(this,arguments)}function ih(){return ih=(0,Ce.Z)(function*(i){Ol(i).nu()}),ih.apply(this,arguments)}function oy(i){return ap.apply(this,arguments)}function ap(){return ap=(0,Ce.Z)(function*(i){const e=Ol(i);for(const t of i.du)e.Zo(t.mutations)}),ap.apply(this,arguments)}function qy(i,e,t){return mf.apply(this,arguments)}function mf(){return mf=(0,Ce.Z)(function*(i,e,t){const a=i.du.shift(),h=ul.from(a,e,t);yield vm(i,()=>i.remoteSyncer.applySuccessfulWrite(h)),yield pd(i)}),mf.apply(this,arguments)}function Em(i,e){return gd.apply(this,arguments)}function gd(){return gd=(0,Ce.Z)(function*(i,e){var t;e&&Ol(i).Xo&&(yield(t=(0,Ce.Z)(function*(a,h){if(Gi(m=h.code)&&m!==W.ABORTED){const b=a.du.shift();Ol(a).Fo(),yield vm(a,()=>a.remoteSyncer.rejectFailedWrite(b.batchId,h)),yield pd(a)}var m}),function(a,h){return t.apply(this,arguments)})(i,e)),pg(i)&&gf(i)}),gd.apply(this,arguments)}function md(i,e){return gg.apply(this,arguments)}function gg(){return gg=(0,Ce.Z)(function*(i,e){const t=j(i);t.asyncQueue.verifyOperationInProgress(),Qt("RemoteStore","RemoteStore received new credentials");const a=uu(t);t.wu.add(3),yield Tc(t),a&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield fd(t)}),gg.apply(this,arguments)}function cu(i,e){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,Ce.Z)(function*(i,e){const t=j(i);e?(t.wu.delete(2),yield fd(t)):e||(t.wu.add(2),yield Tc(t),t.yu.set("Unknown"))}),Rl.apply(this,arguments)}function yd(i){return i.Iu||(i.Iu=function(e,t,a){const h=j(e);return h.iu(),new mm(t,h.So,h.authCredentials,h.appCheckCredentials,h.M,a)}(i.datastore,i.asyncQueue,{Xr:rp.bind(null,i),eo:ip.bind(null,i),zo:_m.bind(null,i)}),i.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(i.Iu.Fo(),rh(i)?df(i):i.yu.set("Unknown")):(yield i.Iu.stop(),ea(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function Ol(i){return i.Tu||(i.Tu=function(e,t,a){const h=j(e);return h.iu(),new ym(t,h.So,h.authCredentials,h.appCheckCredentials,h.M,a)}(i.datastore,i.asyncQueue,{Xr:Uu.bind(null,i),eo:Em.bind(null,i),eu:oy.bind(null,i),tu:qy.bind(null,i)}),i.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(i.Tu.Fo(),yield pd(i)):(yield i.Tu.stop(),i.du.length>0&&(Qt("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class sh{constructor(e,t,a,h,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=h,this.removalCallback=m,this.deferred=new He,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(b=>{})}static createAndSchedule(e,t,a,h,m){const b=Date.now()+a,O=new sh(e,t,b,h,m);return O.start(a),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new le(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sc(i,e){if(ki("AsyncQueue",`${e}: ${i}`),Pu(i))return new le(W.UNAVAILABLE,`${e}: ${i}`);throw i}class Pl{constructor(e){this.comparator=e?(t,a)=>e(t,a)||un.comparator(t.key,a.key):(t,a)=>un.comparator(t.key,a.key),this.keyedMap=zc(),this.sortedSet=new Rn(this.comparator)}static emptySet(e){return new Pl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=a.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new Pl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class wm{constructor(){this.Eu=new Rn(un.comparator)}track(e){const t=e.doc.key,a=this.Eu.get(t);a?0!==e.type&&3===a.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==a.type?this.Eu=this.Eu.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Eu=this.Eu.remove(t):1===e.type&&2===a.type?this.Eu=this.Eu.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):S():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,a)=>{e.push(a)}),e}}class Ac{constructor(e,t,a,h,m,b,O,X){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=m,this.fromCache=b,this.syncStateChanged=O,this.excludesMetadataChanges=X}static fromInitialDocuments(e,t,a,h){const m=[];return t.forEach(b=>{m.push({type:0,doc:b})}),new Ac(e,t,Pl.emptySet(t),m,a,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==a[h].type||!t[h].doc.isEqual(a[h].doc))return!1;return!0}}class _d{constructor(){this.Ru=void 0,this.listeners=[]}}class mg{constructor(){this.queries=new eu(e=>Ff(e),tc),this.onlineState="Unknown",this.bu=new Set}}function oh(i,e){return yf.apply(this,arguments)}function yf(){return yf=(0,Ce.Z)(function*(i,e){const t=j(i),a=e.query;let h=!1,m=t.queries.get(a);if(m||(h=!0,m=new _d),h)try{m.Ru=yield t.onListen(a)}catch(b){const O=Sc(b,`Initialization of query '${Bd(e.query)}' failed`);return void e.onError(O)}t.queries.set(a,m),m.listeners.push(e),e.Pu(t.onlineState),m.Ru&&e.Vu(m.Ru)&&vg(t)}),yf.apply(this,arguments)}function du(i,e){return yg.apply(this,arguments)}function yg(){return yg=(0,Ce.Z)(function*(i,e){const t=j(i),a=e.query;let h=!1;const m=t.queries.get(a);if(m){const b=m.listeners.indexOf(e);b>=0&&(m.listeners.splice(b,1),h=0===m.listeners.length)}if(h)return t.queries.delete(a),t.onUnlisten(a)}),yg.apply(this,arguments)}function ay(i,e){const t=j(i);let a=!1;for(const h of e){const b=t.queries.get(h.query);if(b){for(const O of b.listeners)O.Vu(h)&&(a=!0);b.Ru=h}}a&&vg(t)}function _g(i,e,t){const a=j(i),h=a.queries.get(e);if(h)for(const m of h.listeners)m.onError(t);a.queries.delete(e)}function vg(i){i.bu.forEach(e=>{e.next()})}class Da{constructor(e,t,a){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=a||{}}Vu(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new Ac(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class lp{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class up{constructor(e){this.M=e}wi(e){return Os(this.M,e)}mi(e){return e.metadata.exists?So(this.M,e.document,!1):H.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Vs(e)}}class Eg{constructor(e,t,a){this.Ou=e,this.localStore=t,this.M=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ta(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const a=ri.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,a=new up(this.M);for(const h of e)if(h.metadata.queries){const m=a.wi(h.metadata.name);for(const b of h.metadata.queries){const O=(t.get(b)||Mi()).add(m);t.set(b,O)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function Cc(i,e,t,a){return Ml.apply(this,arguments)}(e.localStore,new up(e.M),e.documents,e.Ou.id),a=e.$u(e.documents);for(const h of e.queries)yield ig(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function ta(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class ah{constructor(e){this.key=e}}class $u{constructor(e){this.key=e}}class _f{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Mi(),this.mutatedKeys=Mi(),this.Gu=$c(e),this.Qu=new Pl(this.Gu)}get ju(){return this.Uu}Wu(e,t){const a=t?t.zu:new wm,h=t?t.Qu:this.Qu;let m=t?t.mutatedKeys:this.mutatedKeys,b=h,O=!1;const X="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,ne="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((xe,st)=>{const Lt=h.get(xe),Jt=Ua(this.query,st)?st:null,nn=!!Lt&&this.mutatedKeys.has(Lt.key),Ln=!!Jt&&(Jt.hasLocalMutations||this.mutatedKeys.has(Jt.key)&&Jt.hasCommittedMutations);let Er=!1;Lt&&Jt?Lt.data.isEqual(Jt.data)?nn!==Ln&&(a.track({type:3,doc:Jt}),Er=!0):this.Hu(Lt,Jt)||(a.track({type:2,doc:Jt}),Er=!0,(X&&this.Gu(Jt,X)>0||ne&&this.Gu(Jt,ne)<0)&&(O=!0)):!Lt&&Jt?(a.track({type:0,doc:Jt}),Er=!0):Lt&&!Jt&&(a.track({type:1,doc:Lt}),Er=!0,(X||ne)&&(O=!0)),Er&&(Jt?(b=b.add(Jt),m=Ln?m.add(xe):m.delete(xe)):(b=b.delete(xe),m=m.delete(xe)))}),null!==this.query.limit)for(;b.size>this.query.limit;){const xe="F"===this.query.limitType?b.last():b.first();b=b.delete(xe.key),m=m.delete(xe.key),a.track({type:1,doc:xe})}return{Qu:b,zu:a,ii:O,mutatedKeys:m}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Au();m.sort((ne,xe)=>function(st,Lt){const Jt=nn=>{switch(nn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return Jt(st)-Jt(Lt)}(ne.type,xe.type)||this.Gu(ne.doc,xe.doc)),this.Ju(a);const b=t?this.Yu():[],O=0===this.Ku.size&&this.current?1:0,X=O!==this.qu;return this.qu=O,0!==m.length||X?{snapshot:new Ac(this.query,e.Qu,h,m,e.mutatedKeys,0===O,X,!1),Xu:b}:{Xu:b}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new wm,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Mi(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const t=[];return e.forEach(a=>{this.Ku.has(a)||t.push(new $u(a))}),this.Ku.forEach(a=>{e.has(a)||t.push(new ah(a))}),t}ta(e){this.Uu=e._i,this.Ku=Mi();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Ac.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class cl{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class vd{constructor(e){this.key=e,this.na=!1}}class wg{constructor(e,t,a,h,m,b){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=b,this.sa={},this.ia=new eu(O=>Ff(O),tc),this.ra=new Map,this.oa=new Set,this.ua=new Rn(un.comparator),this.aa=new Map,this.ca=new Lu,this.ha={},this.la=new Map,this.fa=su.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function ly(i,e){return hu.apply(this,arguments)}function hu(){return hu=(0,Ce.Z)(function*(i,e){const t=Hu(i);let a,h;const m=t.ia.get(e);if(m)a=m.targetId,t.sharedClientState.addLocalQueryTarget(a),h=m.view.ea();else{const b=yield wc(t.localStore,ca(e));t.isPrimaryClient&&Bu(t.remoteStore,b);const O=t.sharedClientState.addLocalQueryTarget(b.targetId);a=b.targetId,h=yield Im(t,e,a,"current"===O)}return h}),hu.apply(this,arguments)}function Im(i,e,t,a){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,Ce.Z)(function*(i,e,t,a){i._a=(xe,st,Lt)=>{return(Jt=(0,Ce.Z)(function*(nn,Ln,Er,Ps){let vo=Ln.view.Wu(Er);vo.ii&&(vo=yield Ka(nn.localStore,Ln.query,!1).then(({documents:ks})=>Ln.view.Wu(ks,vo)));const rs=Ps&&Ps.targetChanges.get(Ln.targetId),$s=Ln.view.applyChanges(vo,nn.isPrimaryClient,rs);return Ag(nn,Ln.targetId,$s.Xu),$s.snapshot}),function(nn,Ln,Er,Ps){return Jt.apply(this,arguments)})(i,xe,st,Lt);var Jt};const h=yield Ka(i.localStore,e,!0),m=new _f(e,h._i),b=m.Wu(h.documents),O=xu.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==i.onlineState),X=m.applyChanges(b,i.isPrimaryClient,O);Ag(i,t,X.Xu);const ne=new cl(e,t,m);return i.ia.set(e,ne),i.ra.has(t)?i.ra.get(t).push(e):i.ra.set(t,[e]),X.snapshot}),Ig.apply(this,arguments)}function Yy(i,e){return cp.apply(this,arguments)}function cp(){return cp=(0,Ce.Z)(function*(i,e){const t=j(i),a=t.ia.get(e),h=t.ra.get(a.targetId);if(h.length>1)return t.ra.set(a.targetId,h.filter(m=>!tc(m,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Fu(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),cf(t.remoteStore,a.targetId),ch(t,a.targetId)}).catch(ud))):(ch(t,a.targetId),yield Fu(t.localStore,a.targetId,!0))}),cp.apply(this,arguments)}function Cg(){return Cg=(0,Ce.Z)(function*(i,e,t){const a=Rc(i);try{const h=yield function(m,b){const O=j(m),X=Vi.now(),ne=b.reduce((st,Lt)=>st.add(Lt.key),Mi());let xe;return O.persistence.runTransaction("Locally write mutations","readwrite",st=>O.fi.Ks(st,ne).next(Lt=>{xe=Lt;const Jt=[];for(const nn of b){const Ln=Sh(nn,xe.get(nn.key));null!=Ln&&Jt.push(new Au(nn.key,Ln,F(Ln.value.mapValue),Ys.exists(!0)))}return O.Bs.addMutationBatch(st,X,Jt,b)})).then(st=>(st.applyToLocalDocumentSet(xe),{batchId:st.batchId,changes:xe}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(m,b,O){let X=m.ha[m.currentUser.toKey()];X||(X=new Rn(hr)),X=X.insert(b,O),m.ha[m.currentUser.toKey()]=X}(a,h.batchId,t),yield ju(a,h.changes),yield pd(a.remoteStore)}catch(h){const m=Sc(h,"Failed to persist write");t.reject(m)}}),Cg.apply(this,arguments)}function Dg(i,e){return dp.apply(this,arguments)}function dp(){return dp=(0,Ce.Z)(function*(i,e){const t=j(i);try{const a=yield ng(t.localStore,e);e.targetChanges.forEach((h,m)=>{const b=t.aa.get(m);b&&(D(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?b.na=!0:h.modifiedDocuments.size>0?D(b.na):h.removedDocuments.size>0&&(D(b.na),b.na=!1))}),yield ju(t,a,e)}catch(a){yield ud(a)}}),dp.apply(this,arguments)}function hp(i,e,t){const a=j(i);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const h=[];a.ia.forEach((m,b)=>{const O=b.view.Pu(e);O.snapshot&&h.push(O.snapshot)}),function(m,b){const O=j(m);O.onlineState=b;let X=!1;O.queries.forEach((ne,xe)=>{for(const st of xe.listeners)st.Pu(b)&&(X=!0)}),X&&vg(O)}(a.eventManager,e),h.length&&a.sa.zo(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Ta(i,e,t){return lh.apply(this,arguments)}function lh(){return lh=(0,Ce.Z)(function*(i,e,t){const a=j(i);a.sharedClientState.updateQueryState(e,"rejected",t);const h=a.aa.get(e),m=h&&h.key;if(m){let b=new Rn(un.comparator);b=b.insert(m,H.newNoDocument(m,ar.min()));const O=Mi().add(m),X=new Bs(ar.min(),new Map,new hi(hr),b,O);yield Dg(a,X),a.ua=a.ua.remove(m),a.aa.delete(e),xg(a)}else yield Fu(a.localStore,e,!1).then(()=>ch(a,e,t)).catch(ud)}),lh.apply(this,arguments)}function bm(i,e){return vf.apply(this,arguments)}function vf(){return vf=(0,Ce.Z)(function*(i,e){const t=j(i),a=e.batch.batchId;try{const h=yield Ec(t.localStore,e);uh(t,a,null),Sa(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield ju(t,h)}catch(h){yield ud(h)}}),vf.apply(this,arguments)}function Tg(i,e,t){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,Ce.Z)(function*(i,e,t){const a=j(i);try{const h=yield function(m,b){const O=j(m);return O.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let ne;return O.Bs.lookupMutationBatch(X,b).next(xe=>(D(null!==xe),ne=xe.keys(),O.Bs.removeMutationBatch(X,xe))).next(()=>O.Bs.performConsistencyCheck(X)).next(()=>O.fi.Ks(X,ne))})}(a.localStore,e);uh(a,e,t),Sa(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield ju(a,h)}catch(h){yield ud(h)}}),Ef.apply(this,arguments)}function Sg(){return Sg=(0,Ce.Z)(function*(i,e){const t=j(i);uu(t.remoteStore)||Qt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(m){const b=j(m);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>b.Bs.getHighestUnacknowledgedBatchId(O))}(t.localStore);if(-1===a)return void e.resolve();const h=t.la.get(a)||[];h.push(e),t.la.set(a,h)}catch(a){const h=Sc(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Sg.apply(this,arguments)}function Sa(i,e){(i.la.get(e)||[]).forEach(t=>{t.resolve()}),i.la.delete(e)}function uh(i,e,t){const a=j(i);let h=a.ha[a.currentUser.toKey()];if(h){const m=h.get(e);m&&(t?m.reject(t):m.resolve(),h=h.remove(e)),a.ha[a.currentUser.toKey()]=h}}function ch(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.ra.get(e))i.ia.delete(a),t&&i.sa.wa(a,t);i.ra.delete(e),i.isPrimaryClient&&i.ca.vi(e).forEach(a=>{i.ca.containsKey(a)||fp(i,a)})}function fp(i,e){i.oa.delete(e.path.canonicalString());const t=i.ua.get(e);null!==t&&(cf(i.remoteStore,t),i.ua=i.ua.remove(e),i.aa.delete(t),xg(i))}function Ag(i,e,t){for(const a of t)a instanceof ah?(i.ca.addReference(a.key,e),Dm(i,a)):a instanceof $u?(Qt("SyncEngine","Document no longer in limbo: "+a.key),i.ca.removeReference(a.key,e),i.ca.containsKey(a.key)||fp(i,a.key)):S()}function Dm(i,e){const t=e.key,a=t.path.canonicalString();i.ua.get(t)||i.oa.has(a)||(Qt("SyncEngine","New document in limbo: "+t),i.oa.add(a),xg(i))}function xg(i){for(;i.oa.size>0&&i.ua.size<i.maxConcurrentLimboResolutions;){const e=i.oa.values().next().value;i.oa.delete(e);const t=new un(ri.fromString(e)),a=i.fa.next();i.aa.set(a,new vd(t)),i.ua=i.ua.insert(t,a),Bu(i.remoteStore,new Jo(ca(Va(t.path)),a,2,cs.A))}}function ju(i,e,t){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,Ce.Z)(function*(i,e,t){const a=j(i),h=[],m=[],b=[];var O;a.ia.isEmpty()||(a.ia.forEach((O,X)=>{b.push(a._a(X,e,t).then(ne=>{if(ne){a.isPrimaryClient&&a.sharedClientState.updateQueryState(X.targetId,ne.fromCache?"not-current":"current"),h.push(ne);const xe=Yf.Ys(X.targetId,ne);m.push(xe)}}))}),yield Promise.all(b),a.sa.zo(h),yield(O=(0,Ce.Z)(function*(X,ne){const xe=j(X);try{yield xe.persistence.runTransaction("notifyLocalViewChanges","readwrite",st=>$t.forEach(ne,Lt=>$t.forEach(Lt.Hs,Jt=>xe.persistence.referenceDelegate.addReference(st,Lt.targetId,Jt)).next(()=>$t.forEach(Lt.Js,Jt=>xe.persistence.referenceDelegate.removeReference(st,Lt.targetId,Jt)))))}catch(st){if(!Pu(st))throw st;Qt("LocalStore","Failed to update sequence numbers: "+st)}for(const st of ne){const Lt=st.targetId;if(!st.fromCache){const Jt=xe.ui.get(Lt),Ln=Jt.withLastLimboFreeSnapshotVersion(Jt.snapshotVersion);xe.ui=xe.ui.insert(Lt,Ln)}}}),function(X,ne){return O.apply(this,arguments)})(a.localStore,m))}),Mg.apply(this,arguments)}function uy(i,e){return dh.apply(this,arguments)}function dh(){return dh=(0,Ce.Z)(function*(i,e){const t=j(i);if(!t.currentUser.isEqual(e)){Qt("SyncEngine","User change. New user:",e.toKey());const a=yield vc(t.localStore,e);t.currentUser=e,(h=t).la.forEach(b=>{b.forEach(O=>{O.reject(new le(W.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.la.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield ju(t,a.di)}var h}),dh.apply(this,arguments)}function hh(i,e){const t=j(i),a=t.aa.get(e);if(a&&a.na)return Mi().add(a.key);{let h=Mi();const m=t.ra.get(e);if(!m)return h;for(const b of m){const O=t.ia.get(b);h=h.unionWith(O.view.ju)}return h}}function cy(i,e){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,Ce.Z)(function*(i,e){const t=j(i),a=yield Ka(t.localStore,e.query,!0),h=e.view.ta(a);return t.isPrimaryClient&&Ag(t,e.targetId,h.Xu),h}),Ed.apply(this,arguments)}function dy(i,e){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,Ce.Z)(function*(i,e){const t=j(i);return ef(t.localStore,e).then(a=>ju(t,a))}),Rg.apply(this,arguments)}function Og(i,e,t,a){return dl.apply(this,arguments)}function dl(){return dl=(0,Ce.Z)(function*(i,e,t,a){const h=j(i),m=yield function(b,O){const X=j(b),ne=j(X.Bs);return X.persistence.runTransaction("Lookup mutation documents","readonly",xe=>ne.fn(xe,O).next(st=>st?X.fi.Ks(xe,st):$t.resolve(null)))}(h.localStore,e);var O;null!==m?("pending"===t?yield pd(h.remoteStore):"acknowledged"===t||"rejected"===t?(uh(h,e,a||null),Sa(h,e),O=e,j(j(h.localStore).Bs)._n(O)):S(),yield ju(h,m)):Qt("SyncEngine","Cannot apply mutation batch with id: "+e)}),dl.apply(this,arguments)}function Mo(){return Mo=(0,Ce.Z)(function*(i,e){const t=j(i);if(Hu(t),Rc(t),!0===e&&!0!==t.da){const a=t.sharedClientState.getAllActiveQueryTargets(),h=yield xc(t,a.toArray());t.da=!0,yield cu(t.remoteStore,!0);for(const m of h)Bu(t.remoteStore,m)}else if(!1===e&&!1!==t.da){const a=[];let h=Promise.resolve();t.ra.forEach((m,b)=>{t.sharedClientState.isLocalQueryTarget(b)?a.push(b):h=h.then(()=>(ch(t,b),Fu(t.localStore,b,!0))),cf(t.remoteStore,b)}),yield h,yield xc(t,a),function(m){const b=j(m);b.aa.forEach((O,X)=>{cf(b.remoteStore,X)}),b.ca.Si(),b.aa=new Map,b.ua=new Rn(un.comparator)}(t),t.da=!1,yield cu(t.remoteStore,!1)}}),Mo.apply(this,arguments)}function xc(i,e,t){return fh.apply(this,arguments)}function fh(){return fh=(0,Ce.Z)(function*(i,e,t){const a=j(i),h=[],m=[];for(const b of e){let O;const X=a.ra.get(b);if(X&&0!==X.length){O=yield wc(a.localStore,ca(X[0]));for(const ne of X){const xe=a.ia.get(ne),st=yield cy(a,xe);st.snapshot&&m.push(st.snapshot)}}else{const ne=yield Ic(a.localStore,b);O=yield wc(a.localStore,ne),yield Im(a,qa(ne),b,!1)}h.push(O)}return a.sa.zo(m),h}),fh.apply(this,arguments)}function qa(i){return Op(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Ya(i){const e=j(i);return j(j(e.localStore).persistence).Fs()}function ph(i,e,t,a){return fu.apply(this,arguments)}function fu(){return fu=(0,Ce.Z)(function*(i,e,t,a){const h=j(i);if(h.da)return void Qt("SyncEngine","Ignoring unexpected query state notification.");const m=h.ra.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const b=yield ef(h.localStore,wl(m[0])),O=Bs.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ju(h,b,O);break}case"rejected":yield Fu(h.localStore,e,!0),ch(h,e,a);break;default:S()}}),fu.apply(this,arguments)}function wd(i,e,t){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,Ce.Z)(function*(i,e,t){const a=Hu(i);if(a.da){for(const h of e){if(a.ra.has(h)){Qt("SyncEngine","Adding an already active target "+h);continue}const m=yield Ic(a.localStore,h),b=yield wc(a.localStore,m);yield Im(a,qa(m),b.targetId,!1),Bu(a.remoteStore,b)}for(const h of t)a.ra.has(h)&&(yield Fu(a.localStore,h,!1).then(()=>{cf(a.remoteStore,h),ch(a,h)}).catch(ud))}}),Mc.apply(this,arguments)}function Hu(i){const e=j(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ta.bind(null,e),e.sa.zo=ay.bind(null,e.eventManager),e.sa.wa=_g.bind(null,e.eventManager),e}function Rc(i){const e=j(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tg.bind(null,e),e}class Id{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.M=lf(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return au(this.persistence,new Jh,e.initialUser,this.M)}ya(e){return new fm(ag.Yi,this.M)}ga(e){return new sy}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bd extends Id{constructor(e,t,a){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,Ce.Z)(function*(){yield t().call(a,e),yield a.Ta.initialize(a,e),yield Rc(a.Ta.syncEngine),yield pd(a.Ta.remoteStore),yield a.persistence.Ts(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(a.localStore),Promise.resolve()))})()}Ia(e){return au(this.persistence,new Jh,e.initialUser,this.M)}pa(e){return new Wp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=ou(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Ss.withCacheSize(this.cacheSizeBytes):Ss.DEFAULT;return new Qh(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,gm(),af(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new sy}}class Pg extends bd{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,Ce.Z)(function*(){yield t().call(a,e);const h=a.Ta.syncEngine;a.sharedClientState instanceof nf&&(a.sharedClientState.syncEngine={$r:Og.bind(null,h),Br:ph.bind(null,h),Lr:wd.bind(null,h),Fs:Ya.bind(null,h),Fr:dy.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.Ts(function(){var m=(0,Ce.Z)(function*(b){yield function wf(i,e){return Mo.apply(this,arguments)}(a.Ta.syncEngine,b),a.gcScheduler&&(b&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):b||a.gcScheduler.stop())});return function(b){return m.apply(this,arguments)}}())})()}ga(e){const t=gm();if(!nf.vt(t))throw new le(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=ou(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nf(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class pp{initialize(e,t){var a=this;return(0,Ce.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>hp(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=uy.bind(null,a.syncEngine),yield cu(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mg}createDatastore(e){const t=lf(e.databaseInfo.databaseId),a=new cg(e.databaseInfo);return new th(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,h=e.asyncQueue,m=O=>hp(this.syncEngine,O,0),b=rf.vt()?new rf:new tp,new ba(t,a,h,m,b);var t,a,h,m,b}createSyncEngine(e,t){return function(a,h,m,b,O,X,ne){const xe=new wg(a,h,m,b,O,X);return ne&&(xe.da=!0),xe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const a=j(t);Qt("RemoteStore","RemoteStore shutting down."),a.wu.add(5),yield Tc(a),a.gu.shutdown(),a.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function kg(i,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<i.byteLength){const a={value:i.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Tm{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new He,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(a=>{a&&a.Mu()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Va();if(null===t)return null;const a=e.ba.decode(t),h=Number(a);isNaN(h)&&e.va(`length string (${a}) is not valid number`);const m=yield e.Sa(h);return new lp(JSON.parse(m),t.length+h)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ce.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}Sa(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const a=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class Sm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new le(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,Ce.Z)(function*(m,b){const O=j(m),X=Tl(O.M)+"/documents",ne={documents:b.map(Jt=>Zc(O.M,Jt))},xe=yield O._o("BatchGetDocuments",X,ne),st=new Map;xe.forEach(Jt=>{const nn=function Hd(i,e){return"found"in e?function(t,a){D(!!a.found);const h=Os(t,a.found.name),m=Vs(a.found.updateTime),b=new Ls({mapValue:{fields:a.found.fields}});return H.newFoundDocument(h,m,b)}(i,e):"missing"in e?function(t,a){D(!!a.missing),D(!!a.readTime);const h=Os(t,a.missing),m=Vs(a.readTime);return H.newNoDocument(h,m)}(i,e):S()}(O.M,Jt);st.set(nn.key.toString(),nn)});const Lt=[];return b.forEach(Jt=>{const nn=st.get(Jt.toString());D(!!nn),Lt.push(nn)}),Lt}),function(m,b){return h.apply(this,arguments)})(t.datastore,e);var h;return a.forEach(h=>t.recordVersion(h)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Or(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,h)=>{const m=un.fromPath(h);e.mutations.push(new Ga(m,e.precondition(m)))}),yield(a=(0,Ce.Z)(function*(h,m){const b=j(h),O=Tl(b.M)+"/documents",X={writes:m.map(ne=>za(b.M,ne))};yield b.co("Commit",O,X)}),function(h,m){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw S();t=ar.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new le(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ys.updateTime(t):Ys.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ar.min()))throw new le(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ys.updateTime(t)}return Ys.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Am{constructor(e,t,a,h,m){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=h,this.deferred=m,this.xa=a.maxAttempts,this.No=new eh(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ce.Z)(function*(){const t=new Sm(e.datastore),a=e.ka(t);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Ma(m)}))}).catch(h=>{e.Ma(h)})}))}ka(e){try{const t=this.updateFunction(e);return!so(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Gi(t)}return!1}}class xm{constructor(e,t,a,h){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=h,this.user=Ts.UNAUTHENTICATED,this.clientId=Lo.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var b=(0,Ce.Z)(function*(O){Qt("FirestoreClient","Received user=",O.uid),yield m.authCredentialListener(O),m.user=O});return function(O){return b.apply(this,arguments)}}()),this.appCheckCredentials.start(a,b=>(Qt("FirestoreClient","Received new app check token=",b),this.appCheckCredentialListener(b,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new He;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const h=Sc(a,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function Ng(i,e){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,Ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Qt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let a=t.initialUser;i.setCredentialChangeListener(function(){var h=(0,Ce.Z)(function*(m){a.isEqual(m)||(yield vc(e.localStore,m),a=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Fg.apply(this,arguments)}function Lg(i,e){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,Ce.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield mp(i);Qt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield e.initialize(t,a),i.setCredentialChangeListener(h=>md(e.remoteStore,h)),i.setAppCheckTokenChangeListener((h,m)=>md(e.remoteStore,m)),i.onlineComponents=e}),Bg.apply(this,arguments)}function mp(i){return yp.apply(this,arguments)}function yp(){return yp=(0,Ce.Z)(function*(i){return i.offlineComponents||(Qt("FirestoreClient","Using default OfflineComponentProvider"),yield Ng(i,new Id)),i.offlineComponents}),yp.apply(this,arguments)}function Vg(i){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,Ce.Z)(function*(i){return i.onlineComponents||(Qt("FirestoreClient","Using default OnlineComponentProvider"),yield Lg(i,new pp)),i.onlineComponents}),Mm.apply(this,arguments)}function Ug(i){return mp(i).then(e=>e.persistence)}function $g(i){return mp(i).then(e=>e.localStore)}function jg(i){return Vg(i).then(e=>e.remoteStore)}function _p(i){return Vg(i).then(e=>e.syncEngine)}function mh(i){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,Ce.Z)(function*(i){const e=yield Vg(i),t=e.eventManager;return t.onListen=ly.bind(null,e.syncEngine),t.onUnlisten=Yy.bind(null,e.syncEngine),t}),Rm.apply(this,arguments)}function Ro(i,e,t={}){const a=new He;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(h,m,b,O,X){const ne=new gp({next:st=>{m.enqueueAndForget(()=>du(h,xe));const Lt=st.docs.has(b);!Lt&&st.fromCache?X.reject(new le(W.UNAVAILABLE,"Failed to get document because the client is offline.")):Lt&&st.fromCache&&O&&"server"===O.source?X.reject(new le(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(st)},error:st=>X.reject(st)}),xe=new Da(Va(b.path),ne,{includeMetadataChanges:!0,ku:!0});return oh(h,xe)}(yield mh(i),i.asyncQueue,e,t,a)})),a.promise}function If(i,e,t={}){const a=new He;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(h,m,b,O,X){const ne=new gp({next:st=>{m.enqueueAndForget(()=>du(h,xe)),st.fromCache&&"server"===O.source?X.reject(new le(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(st)},error:st=>X.reject(st)}),xe=new Da(b,ne,{includeMetadataChanges:!0,ku:!0});return oh(h,xe)}(yield mh(i),i.asyncQueue,e,t,a)})),a.promise}const gu=new Map;function Oc(i,e,t){if(!t)throw new le(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Pm(i,e,t,a){if(!0===e&&!0===a)throw new le(W.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function vp(i){if(!un.isDocumentKey(i))throw new le(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Gg(i){if(un.isDocumentKey(i))throw new le(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function yh(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":S()}function Qr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new le(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yh(i);throw new le(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function _h(i,e){if(e<=0)throw new le(W.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class zg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new le(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new le(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Pm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,t,a){this._authCredentials=t,this._appCheckCredentials=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zg({}),this._settingsFrozen=!1,e instanceof ds?this._databaseId=e:(this._app=e,this._databaseId=function(h){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new le(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ds(h.options.projectId)}(e))}get app(){if(!this._app)throw new le(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zg(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new bn;switch(t.type){case"gapi":const a=t.client;return D(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new Xr(a,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new le(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gu.get(e);t&&(Qt("ComponentProvider","Removing Datastore"),gu.delete(e),t.terminate())}(this),Promise.resolve()}}class vs{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vs(this.firestore,e,this._key)}}class jo{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class kl extends jo{constructor(e,t,a){super(e,t,Va(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vs(this.firestore,null,new un(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function Ep(i,e,...t){if(i=(0,We.m9)(i),Oc("collection","path",e),i instanceof vh){const a=ri.fromString(e,...t);return Gg(a),new kl(i,null,a)}{if(!(i instanceof vs||i instanceof kl))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(ri.fromString(e,...t));return Gg(a),new kl(i.firestore,null,a)}}function bf(i,e,...t){if(i=(0,We.m9)(i),1===arguments.length&&(e=Lo.R()),Oc("doc","path",e),i instanceof vh){const a=ri.fromString(e,...t);return vp(a),new vs(i,null,new un(a))}{if(!(i instanceof vs||i instanceof kl))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(ri.fromString(e,...t));return vp(a),new vs(i.firestore,i instanceof kl?i.converter:null,new un(a))}}function Wg(i,e){return i=(0,We.m9)(i),e=(0,We.m9)(e),(i instanceof vs||i instanceof kl)&&(e instanceof vs||e instanceof kl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Cf(i,e){return i=(0,We.m9)(i),e=(0,We.m9)(e),i instanceof jo&&e instanceof jo&&i.firestore===e.firestore&&tc(i._query,e._query)&&i.converter===e.converter}class Qy{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new eh(this,"async_queue_retry"),this.Qa=()=>{const t=af();t&&Qt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=af();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=af();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new He;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Pu(t))throw t;Qt("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(a=>{throw this.Ua=a,this.qa=!1,ki("INTERNAL UNHANDLED ERROR: ",function(m){let b=m.message||"";return m.stack&&(b=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),b}(a)),a}).then(a=>(this.qa=!1,a))));return this.Fa=t,t}enqueueAfterDelay(e,t,a){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const h=sh.createAndSchedule(this,e,t,a,m=>this.Ha(m));return this.La.push(h),h}ja(){this.Ua&&S()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Df(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(i)}class km{constructor(){this._progressObserver={},this._taskCompletionResolver=new He,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yi extends vh{constructor(e,t,a){super(e,t,a),this.type="firestore",this._queue=new Qy,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Tf(this),this._firestoreClient.terminate()}}function Us(i){return i._firestoreClient||Tf(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Tf(i){var e;const t=i._freezeSettings(),a=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new gs(i._databaseId,m,i._persistenceKey,(O=t).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var m,O;i._firestoreClient=new xm(i._authCredentials,i._appCheckCredentials,i._queue,a)}function Gu(i,e,t){const a=new He;return i.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield Ng(i,t),yield Lg(i,e),a.resolve()}catch(h){if(!("FirebaseError"===(m=h).name?m.code===W.FAILED_PRECONDITION||m.code===W.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw h;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+h),a.reject(h)}var m})).then(()=>a.promise)}function o(i){if(i._initialized||i._terminated)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class l{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new le(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class v{constructor(e){this._byteString=e}static fromBase64String(e){try{return new v(Fr.fromBase64String(e))}catch(t){throw new le(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new v(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class T{constructor(e){this._methodName=e}}class R{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return hr(this._lat,e._lat)||hr(this._long,e._long)}}const Q=/^__.*__$/;class oe{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new Au(e,this.data,this.fieldMask,t,this.fieldTransforms):new ic(e,this.data,t,this.fieldTransforms)}}class ve{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vt(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}class Ct{constructor(e,t,a,h,m,b){this.settings=e,this.databaseId=t,this.M=a,this.ignoreUndefinedProperties=h,void 0===m&&this.tc(),this.fieldTransforms=m||[],this.fieldMask=b||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Ct(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.nc({path:a,ic:!1});return h.rc(e),h}oc(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.nc({path:a,ic:!1});return h.tc(),h}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Vm(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(vt(this.ec)&&Q.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class jt{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=a||lf(e)}lc(e,t,a,h=!1){return new Ct({ec:e,methodName:t,hc:a,path:Hi.emptyPath(),ic:!1,cc:h},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function on(i){const e=i._freezeSettings(),t=lf(i._databaseId);return new jt(i._databaseId,!!e.ignoreUndefinedProperties,t)}function gn(i,e,t,a,h,m={}){const b=i.lc(m.merge||m.mergeFields?2:0,e,t,h);vy("Data must be an object, but it was:",b,a);const O=Cp(a,b);let X,ne;if(m.merge)X=new il(b.fieldMask),ne=b.fieldTransforms;else if(m.mergeFields){const xe=[];for(const st of m.mergeFields){const Lt=_o(e,st,t);if(!b.contains(Lt))throw new le(W.INVALID_ARGUMENT,`Field '${Lt}' is specified in your field mask but missing from your input data.`);Ey(xe,Lt)||xe.push(Lt)}X=new il(xe),ne=b.fieldTransforms.filter(st=>X.covers(st.field))}else X=null,ne=b.fieldTransforms;return new oe(new Ls(O),X,ne)}class br extends T{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof br}}function qr(i,e,t){return new Ct({ec:3,hc:e.settings.hc,methodName:i._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class lo extends T{_toFieldTransform(e){return new mo(e.path,new nc)}isEqual(e){return e instanceof lo}}class uo extends T{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=qr(this,e,!0),a=this.fc.map(m=>Nl(m,t)),h=new $a(a);return new mo(e.path,h)}isEqual(e){return this===e}}class As extends T{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=qr(this,e,!0),a=this.fc.map(m=>Nl(m,t)),h=new Ni(a);return new mo(e.path,h)}isEqual(e){return this===e}}class co extends T{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Ms(e.M,Ei(e.M,this.dc));return new mo(e.path,t)}isEqual(e){return this===e}}function zu(i,e,t,a){const h=i.lc(1,e,t);vy("Data must be an object, but it was:",h,a);const m=[],b=Ls.empty();_i(a,(X,ne)=>{const xe=Bm(e,X,t);ne=(0,We.m9)(ne);const st=h.oc(xe);if(ne instanceof br)m.push(xe);else{const Lt=Nl(ne,st);null!=Lt&&(m.push(xe),b.set(xe,Lt))}});const O=new il(m);return new ve(b,O,h.fieldTransforms)}function Wu(i,e,t,a,h,m){const b=i.lc(1,e,t),O=[_o(e,a,t)],X=[h];if(m.length%2!=0)throw new le(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Lt=0;Lt<m.length;Lt+=2)O.push(_o(e,m[Lt])),X.push(m[Lt+1]);const ne=[],xe=Ls.empty();for(let Lt=O.length-1;Lt>=0;--Lt)if(!Ey(ne,O[Lt])){const Jt=O[Lt];let nn=X[Lt];nn=(0,We.m9)(nn);const Ln=b.oc(Jt);if(nn instanceof br)ne.push(Jt);else{const Er=Nl(nn,Ln);null!=Er&&(ne.push(Jt),xe.set(Jt,Er))}}const st=new il(ne);return new ve(xe,st,b.fieldTransforms)}function Kg(i,e,t,a=!1){return Nl(t,i.lc(a?4:3,e))}function Nl(i,e){if(_y(i=(0,We.m9)(i)))return vy("Unsupported field value:",e,i),Cp(i,e);if(i instanceof T)return function(t,a){if(!vt(a.ec))throw a.ac(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ac(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,a){const h=[];let m=0;for(const b of t){let O=Nl(b,a.uc(m));null==O&&(O={nullValue:"NULL_VALUE"}),h.push(O),m++}return{arrayValue:{values:h}}}(i,e)}return function(t,a){if(null===(t=(0,We.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ei(a.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=Vi.fromDate(t);return{timestampValue:yr(a.M,h)}}if(t instanceof Vi){const h=new Vi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yr(a.M,h)}}if(t instanceof R)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof v)return{bytesValue:Mh(a.M,t._byteString)};if(t instanceof vs){const h=a.databaseId,m=t.firestore._databaseId;if(!m.isEqual(h))throw a.ac(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:zi(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a.ac(`Unsupported field value: ${yh(t)}`)}(i,e)}function Cp(i,e){const t={};return zl(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(i,(a,h)=>{const m=Nl(h,e.sc(a));null!=m&&(t[a]=m)}),{mapValue:{fields:t}}}function _y(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Vi||i instanceof R||i instanceof v||i instanceof vs||i instanceof T)}function vy(i,e,t){if(!_y(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=yh(t);throw e.ac("an object"===a?i+" a custom object":i+" "+a)}var a}function _o(i,e,t){if((e=(0,We.m9)(e))instanceof l)return e._internalPath;if("string"==typeof e)return Bm(i,e);throw Vm("Field path arguments must be of type string or ",i,!1,void 0,t)}const t_=new RegExp("[~\\*/\\[\\]]");function Bm(i,e,t){if(e.search(t_)>=0)throw Vm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new l(...e.split("."))._internalPath}catch(a){throw Vm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Vm(i,e,t,a,h){const m=a&&!a.isEmpty(),b=void 0!==h;let O=`Function ${e}() called with invalid data`;t&&(O+=" (via `toFirestore()`)"),O+=". ";let X="";return(m||b)&&(X+=" (found",m&&(X+=` in field ${a}`),b&&(X+=` in document ${h}`),X+=")"),new le(W.INVALID_ARGUMENT,O+i+X)}function Ey(i,e){return i.some(t=>t.isEqual(e))}class qg{constructor(e,t,a,h,m){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new vs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new n_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class n_ extends qg{data(){return super.data()}}function Yg(i,e){return"string"==typeof e?Bm(i,e):e instanceof l?e._internalPath:e._delegate._internalPath}class mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cd extends qg{constructor(e,t,a,h,m,b){super(e,t,a,h,b),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Yg("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class Zg extends Cd{data(e={}){return super.data(e)}}class Dd{constructor(e,t,a,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new mu(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new Zg(this._firestore,this._userDataWriter,a.key,a,new mu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map(b=>({type:"added",doc:new Zg(a._firestore,a._userDataWriter,b.doc.key,b.doc,new mu(a._snapshot.mutatedKeys.has(b.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:m++}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(b=>h||3!==b.type).map(b=>{const O=new Zg(a._firestore,a._userDataWriter,b.doc.key,b.doc,new mu(a._snapshot.mutatedKeys.has(b.doc.key),a._snapshot.fromCache),a.query.converter);let X=-1,ne=-1;return 0!==b.type&&(X=m.indexOf(b.doc.key),m=m.delete(b.doc.key)),1!==b.type&&(m=m.add(b.doc),ne=m.indexOf(b.doc.key)),{type:N_(b.type),doc:O,oldIndex:X,newIndex:ne}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function N_(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}function wy(i,e){return i instanceof Cd&&e instanceof Cd?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Dd&&e instanceof Dd&&i._firestore===e._firestore&&Cf(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function F_(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new le(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}function Pc(i,...e){for(const t of e)i=t._apply(i);return i}class kc extends Dp{constructor(e,t,a){super(),this._c=e,this.wc=t,this.mc=a,this.type="where"}_apply(e){const t=on(e.firestore),a=function(h,m,b,O,X,ne,xe){let st;if(X.isKeyField()){if("array-contains"===ne||"array-contains-any"===ne)throw new le(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ne}' queries on documentId().`);if("in"===ne||"not-in"===ne){Cy(xe,ne);const Jt=[];for(const nn of xe)Jt.push(s_(O,h,nn));st={arrayValue:{values:Jt}}}else st=s_(O,h,xe)}else"in"!==ne&&"not-in"!==ne&&"array-contains-any"!==ne||Cy(xe,ne),st=Kg(b,"where",xe,"in"===ne||"not-in"===ne);const Lt=ms.create(X,ne,st);return function(Jt,nn){if(nn.S()){const Er=Uc(Jt);if(null!==Er&&!Er.isEqual(nn.field))throw new le(W.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Er.toString()}' and '${nn.field.toString()}'`);const Ps=Nd(Jt);null!==Ps&&o_(0,nn.field,Ps)}const Ln=function(Er,Ps){for(const vo of Er.filters)if(Ps.indexOf(vo.op)>=0)return vo.op;return null}(Jt,function(Er){switch(Er){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(nn.op));if(null!==Ln)throw new le(W.INVALID_ARGUMENT,Ln===nn.op?`Invalid query. You cannot use more than one '${nn.op.toString()}' filter.`:`Invalid query. You cannot use '${nn.op.toString()}' filters with '${Ln.toString()}' filters.`)}(h,Lt),Lt}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new jo(e.firestore,e.converter,function(h,m){const b=h.filters.concat([m]);return new El(h.path,h.collectionGroup,h.explicitOrderBy.slice(),b,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}class B_ extends Dp{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(a,h,m){if(null!==a.startAt)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const b=new Zo(h,m);return function(O,X){if(null===Nd(O)){const ne=Uc(O);null!==ne&&o_(0,ne,X.field)}}(a,b),b}(e._query,this._c,this.gc);return new jo(e.firestore,e.converter,function(a,h){const m=a.explicitOrderBy.concat([h]);return new El(a.path,a.collectionGroup,m,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class yu extends Dp{constructor(e,t,a){super(),this.type=e,this.yc=t,this.Ic=a}_apply(e){return new jo(e.firestore,e.converter,Ld(e._query,this.yc,this.Ic))}}class Iy extends Dp{constructor(e,t,a){super(),this.type=e,this.Tc=t,this.Ec=a}_apply(e){const t=Tp(e,this.type,this.Tc,this.Ec);return new jo(e.firestore,e.converter,(h=t,new El((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}class i_ extends Dp{constructor(e,t,a){super(),this.type=e,this.Tc=t,this.Ec=a}_apply(e){const t=Tp(e,this.type,this.Tc,this.Ec);return new jo(e.firestore,e.converter,(h=t,new El((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function Tp(i,e,t,a){if(t[0]=(0,We.m9)(t[0]),t[0]instanceof qg)return function(h,m,b,O,X){if(!O)throw new le(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${b}().`);const ne=[];for(const xe of Ql(h))if(xe.field.isKeyField())ne.push(Ws(m,O.key));else{const st=O.data.field(xe.field);if(Ih(st))throw new le(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+xe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===st){const Lt=xe.field.canonicalString();throw new le(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Lt}' (used as the orderBy) does not exist.`)}ne.push(st)}return new Ba(ne,X)}(i._query,i.firestore._databaseId,e,t[0]._document,a);{const h=on(i.firestore);return function(m,b,O,X,ne,xe){const st=m.explicitOrderBy;if(ne.length>st.length)throw new le(W.INVALID_ARGUMENT,`Too many arguments provided to ${X}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Lt=[];for(let Jt=0;Jt<ne.length;Jt++){const nn=ne[Jt];if(st[Jt].field.isKeyField()){if("string"!=typeof nn)throw new le(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${X}(), but got a ${typeof nn}`);if(!Fd(m)&&-1!==nn.indexOf("/"))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${X}() must be a plain document ID, but '${nn}' contains a slash.`);const Ln=m.path.child(ri.fromString(nn));if(!un.isDocumentKey(Ln))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${X}() must result in a valid document path, but '${Ln}' is not because it contains an odd number of segments.`);const Er=new un(Ln);Lt.push(Ws(b,Er))}else{const Ln=Kg(O,X,nn);Lt.push(Ln)}}return new Ba(Lt,xe)}(i._query,i.firestore._databaseId,h,e,t,a)}}function s_(i,e,t){if("string"==typeof(t=(0,We.m9)(t))){if(""===t)throw new le(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fd(e)&&-1!==t.indexOf("/"))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(ri.fromString(t));if(!un.isDocumentKey(a))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Ws(i,new un(a))}if(t instanceof vs)return Ws(i,t._key);throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yh(t)}.`)}function Cy(i,e){if(!Array.isArray(i)||0===i.length)throw new le(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new le(W.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function o_(i,e,t){if(!t.isEqual(e))throw new le(W.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const a_={maxAttempts:5};class Um{convertValue(e,t="none"){switch(ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ii(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw S()}}convertObject(e,t){const a={};return _i(e.fields,(h,m)=>{a[h]=this.convertValue(m,t)}),a}convertGeoPoint(e){return new R(ii(e.latitude),ii(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=pl(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(io(e));default:return null}}convertTimestamp(e){const t=vi(e);return new Vi(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=ri.fromString(e);D(K(a));const h=new ds(a.get(1),a.get(3)),m=new un(a.popFirst(5));return h.isEqual(t)||ki(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function Af(i,e,t){let a;return a=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,a}class j_ extends Um{constructor(e){super(),this.firestore=e}convertBytes(e){return new v(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vs(this.firestore,null,t)}}class Dy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=on(e)}set(e,t,a){this._verifyNotCommitted();const h=Td(e,this._firestore),m=Af(h.converter,t,a),b=gn(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,a);return this._mutations.push(b.toMutation(h._key,Ys.none())),this}update(e,t,a,...h){this._verifyNotCommitted();const m=Td(e,this._firestore);let b;return b="string"==typeof(t=(0,We.m9)(t))||t instanceof l?Wu(this._dataReader,"WriteBatch.update",m._key,t,a,h):zu(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(b.toMutation(m._key,Ys.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Td(e,this._firestore);return this._mutations=this._mutations.concat(new Or(t._key,Ys.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Td(i,e){if((i=(0,We.m9)(i)).firestore!==e)throw new le(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Fc extends Um{constructor(e){super(),this.firestore=e}convertBytes(e){return new v(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vs(this.firestore,null,t)}}function xy(i,e,t){i=Qr(i,vs);const a=Qr(i.firestore,Yi),h=Af(i.converter,e,t);return Sp(a,[gn(on(a),"setDoc",i._key,h,null!==i.converter,t).toMutation(i._key,Ys.none())])}function My(i,e,t,...a){i=Qr(i,vs);const h=Qr(i.firestore,Yi),m=on(h);let b;return b="string"==typeof(e=(0,We.m9)(e))||e instanceof l?Wu(m,"updateDoc",i._key,e,t,a):zu(m,"updateDoc",i._key,e),Sp(h,[b.toMutation(i._key,Ys.exists(!0))])}function h_(i,...e){var t,a,h;i=(0,We.m9)(i);let m={includeMetadataChanges:!1},b=0;"object"!=typeof e[b]||Df(e[b])||(m=e[b],b++);const O={includeMetadataChanges:m.includeMetadataChanges};if(Df(e[b])){const st=e[b];e[b]=null===(t=st.next)||void 0===t?void 0:t.bind(st),e[b+1]=null===(a=st.error)||void 0===a?void 0:a.bind(st),e[b+2]=null===(h=st.complete)||void 0===h?void 0:h.bind(st)}let X,ne,xe;if(i instanceof vs)ne=Qr(i.firestore,Yi),xe=Va(i._key.path),X={next:st=>{e[b]&&e[b](Ry(ne,i,st))},error:e[b+1],complete:e[b+2]};else{const st=Qr(i,jo);ne=Qr(st.firestore,Yi),xe=st._query;const Lt=new Fc(ne);X={next:Jt=>{e[b]&&e[b](new Dd(ne,Lt,st,Jt))},error:e[b+1],complete:e[b+2]},F_(i._query)}return function(st,Lt,Jt,nn){const Ln=new gp(nn),Er=new Da(Lt,Ln,Jt);return st.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return oh(yield mh(st),Er)})),()=>{Ln.Aa(),st.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return du(yield mh(st),Er)}))}}(Us(ne),xe,O,X)}function Sp(i,e){return function(t,a){const h=new He;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function bg(i,e,t){return Cg.apply(this,arguments)}(yield _p(t),a,h)})),h.promise}(Us(i),e)}function Ry(i,e,t){const a=t.docs.get(e._key),h=new Fc(i);return new Cd(i,h,e._key,a,new mu(t.hasPendingWrites,t.fromCache),e.converter)}class z_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=on(e)}get(e){const t=Td(e,this._firestore),a=new j_(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return S();const m=h[0];if(m.isFoundDocument())return new qg(this._firestore,a,m.key,m,t.converter);if(m.isNoDocument())return new qg(this._firestore,a,t._key,null,t.converter);throw S()})}set(e,t,a){const h=Td(e,this._firestore),m=Af(h.converter,t,a),b=gn(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,a);return this._transaction.set(h._key,b),this}update(e,t,a,...h){const m=Td(e,this._firestore);let b;return b="string"==typeof(t=(0,We.m9)(t))||t instanceof l?Wu(this._dataReader,"Transaction.update",m._key,t,a,h):zu(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,b),this}delete(e){const t=Td(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Td(e,this._firestore),a=new Fc(this._firestore);return super.get(e).then(h=>new Cd(this._firestore,a,t._key,h._document,new mu(!1,!1),t.converter))}}function Oy(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new le("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Py(){if("undefined"==typeof Uint8Array)throw new le("unimplemented","Uint8Arrays are not available in this environment.")}function ky(){if(!function wh(){return"undefined"!=typeof atob}())throw new le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Ko=nt.SDK_VERSION,(0,nt._registerComponent)(new ot.wA("firestore",(t,{options:a})=>{const h=t.getProvider("app").getImmediate(),m=new Yi(h,new Vn(t.getProvider("auth-internal")),new qo(t.getProvider("app-check-internal")));return a=Object.assign({useFetchStreams:e},a),m._setSettings(a),m},"PUBLIC")),(0,nt.registerVersion)(ya,"3.4.9",i),(0,nt.registerVersion)(ya,"3.4.9","esm2017")}();class Ap{constructor(e){this._delegate=e}static fromBase64String(e){return ky(),new Ap(v.fromBase64String(e))}static fromUint8Array(e){return Py(),new Ap(v.fromUint8Array(e))}toBase64(){return ky(),this._delegate.toBase64()}toUint8Array(){return Py(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $m(i){return function p_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(i,["next","error","complete"])}class g_{enableIndexedDbPersistence(e,t){return function Sf(i,e){o(i=Qr(i,Yi));const t=Us(i),a=i._freezeSettings(),h=new pp;return Gu(t,h,new bd(h,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wp(i){o(i=Qr(i,Yi));const e=Us(i),t=i._freezeSettings(),a=new pp;return Gu(e,a,new Pg(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function e_(i){if(i._initialized&&!i._terminated)throw new le(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new He;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(a){if(!Ao.vt())return Promise.resolve();const h=a+"main";yield Ao.delete(h)}),function(a){return t.apply(this,arguments)})(ou(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ny{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof ds||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&oa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function py(i,e,t,a={}){var h;const m=(i=Qr(i,vh))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&oa("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),a.mockUserToken){let b,O;if("string"==typeof a.mockUserToken)b=a.mockUserToken,O=Ts.MOCK_USER;else{b=(0,We.Sg)(a.mockUserToken,null===(h=i._app)||void 0===h?void 0:h.options.projectId);const X=a.mockUserToken.sub||a.mockUserToken.user_id;if(!X)throw new le(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new Ts(X)}i._authCredentials=new vr(new Ut(b,O))}}(this._delegate,e,t,a)}enableNetwork(){return function Ip(i){return function hy(i){return i.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield Ug(i),t=yield jg(i);return e.setNetworkEnabled(!0),function(a){const h=j(a);return h.wu.delete(0),fd(h)}(t)}))}(Us(i=Qr(i,Yi)))}(this._delegate)}disableNetwork(){return function bp(i){return function Hg(i){return i.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield Ug(i),t=yield jg(i);return e.setNetworkEnabled(!1),(a=(0,Ce.Z)(function*(h){const m=j(h);m.wu.add(0),yield Tc(m),m.yu.set("Offline")}),function(h){return a.apply(this,arguments)})(t);var a}))}(Us(i=Qr(i,Yi)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,Pm("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function yy(i){return function(e){const t=new He;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function Cm(i,e){return Sg.apply(this,arguments)}(yield _p(e),t)})),t.promise}(Us(i=Qr(i,Yi)))}(this._delegate)}onSnapshotsInSync(e){return function G_(i,e){return function Zy(i,e){const t=new gp(e);return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return a=yield mh(i),h=t,j(a).bu.add(h),void h.next();var a,h})),()=>{t.Aa(),i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return a=yield mh(i),h=t,void j(a).bu.delete(h);var a,h}))}}(Us(i=Qr(i,Yi)),Df(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sr(this,Ep(this._delegate,e))}catch(t){throw Za(t,"collection()","Firestore.collection()")}}doc(e){try{return new _u(this,bf(this._delegate,e))}catch(t){throw Za(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Aa(this,function gy(i,e){if(i=Qr(i,vh),Oc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jo(i,null,(t=e,new El(ri.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Za(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function W_(i,e,t){i=Qr(i,Yi);const a=Object.assign(Object.assign({},a_),t);return function(h){if(h.maxAttempts<1)throw new le(W.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function fy(i,e,t){const a=new He;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const h=yield(m=i,Vg(m).then(b=>b.datastore));var m;new Am(i.asyncQueue,h,t,e,a).run()})),a.promise}(Us(i),h=>e(new z_(i,h)),a)}(this._delegate,t=>e(new Fy(this,t)))}batch(){return Us(this._delegate),new Ly(new Dy(this._delegate,e=>Sp(this._delegate,e)))}loadBundle(e){return function Lm(i,e){const t=Us(i=Qr(i,Yi)),a=new km;return function Om(i,e,t,a){const h=function(m,b){let O;return O="string"==typeof m?(new TextEncoder).encode(m):m,X=function(X,ne){if(X instanceof Uint8Array)return kg(X,void 0);if(X instanceof ArrayBuffer)return kg(new Uint8Array(X),void 0);if(X instanceof ReadableStream)return X.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new Tm(X,b);var X}(t,lf(e));i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function gh(i,e,t){const a=j(i);var h;(h=(0,Ce.Z)(function*(m,b,O){try{const X=yield b.getMetadata();if(yield function(Lt,Jt){const nn=j(Lt),Ln=Vs(Jt.createTime);return nn.persistence.runTransaction("hasNewerBundle","readonly",Er=>nn._s.getBundleMetadata(Er,Jt.id)).then(Er=>!!Er&&Er.createTime.compareTo(Ln)>=0)}(m.localStore,X))return yield b.close(),O._completeWith({taskState:"Success",documentsLoaded:(Lt=X).totalDocuments,bytesLoaded:Lt.totalBytes,totalDocuments:Lt.totalDocuments,totalBytes:Lt.totalBytes}),Promise.resolve(new Set);O._updateProgress(ta(X));const ne=new Eg(X,m.localStore,b.M);let xe=yield b.ma();for(;xe;){const Lt=yield ne.Fu(xe);Lt&&O._updateProgress(Lt),xe=yield b.ma()}const st=yield ne.complete();return yield ju(m,st.Lu,void 0),yield function(Lt,Jt){const nn=j(Lt);return nn.persistence.runTransaction("Save bundle","readwrite",Ln=>nn._s.saveBundleMetadata(Ln,Jt))}(m.localStore,X),O._completeWith(st.progress),Promise.resolve(st.Bu)}catch(X){return oa("SyncEngine",`Loading bundle failed with ${X}`),O._failWith(X),Promise.resolve(new Set)}var Lt}),function(m,b,O){return h.apply(this,arguments)})(a,e,t).then(h=>{a.sharedClientState.notifyBundleLoaded(h)})}(yield _p(i),h,a)}))}(t,i._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function u(i,e){return function Xy(i,e){return i.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,a){const h=j(t);return h.persistence.runTransaction("Get named query","readonly",m=>h._s.getNamedQuery(m,a))}(yield $g(i),e)}))}(Us(i=Qr(i,Yi)),e).then(t=>t?new jo(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Aa(this,t):null)}}class Xg extends Um{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ap(new v(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _u.forKey(t,this.firestore,null)}}class Fy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xg(e)}get(e){const t=Rf(e);return this._delegate.get(t).then(a=>new Mf(this._firestore,new Cd(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const h=Rf(e);return a?(Oy("Transaction.set",a),this._delegate.set(h,t,a)):this._delegate.set(h,t),this}update(e,t,a,...h){const m=Rf(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,a,...h),this}delete(e){const t=Rf(e);return this._delegate.delete(t),this}}class Ly{constructor(e){this._delegate=e}set(e,t,a){const h=Rf(e);return a?(Oy("WriteBatch.set",a),this._delegate.set(h,t,a)):this._delegate.set(h,t),this}update(e,t,a,...h){const m=Rf(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,a,...h),this}delete(e){const t=Rf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Fl{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new Zg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jm(this._firestore,a),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=Fl.INSTANCES;let h=a.get(e);h||(h=new WeakMap,a.set(e,h));let m=h.get(t);return m||(m=new Fl(e,new Xg(e),t),h.set(t,m)),m}}Fl.INSTANCES=new WeakMap;class _u{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xg(e)}static forPath(e,t,a){if(e.length%2!=0)throw new le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _u(t,new vs(t._delegate,a,new un(e)))}static forKey(e,t,a){return new _u(t,new vs(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new sr(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sr(this.firestore,Ep(this._delegate,e))}catch(t){throw Za(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,We.m9)(e))instanceof vs&&Wg(this._delegate,e)}set(e,t){t=Oy("DocumentReference.set",t);try{return t?xy(this._delegate,e,t):xy(this._delegate,e)}catch(a){throw Za(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?My(this._delegate,e):My(this._delegate,e,t,...a)}catch(h){throw Za(h,"updateDoc()","DocumentReference.update()")}}delete(){return function d_(i){return Sp(Qr(i.firestore,Yi),[new Or(i._key,Ys.none())])}(this._delegate)}onSnapshot(...e){const t=xf(e),a=ev(e,h=>new Mf(this.firestore,new Cd(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return h_(this._delegate,t,a)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Sy(i){i=Qr(i,vs);const e=Qr(i.firestore,Yi),t=Us(e),a=new Fc(e);return function pu(i,e){const t=new He;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(a=(0,Ce.Z)(function*(h,m,b){try{const O=yield function(X,ne){const xe=j(X);return xe.persistence.runTransaction("read document","readonly",st=>xe.fi.Ls(st,ne))}(h,m);O.isFoundDocument()?b.resolve(O):O.isNoDocument()?b.resolve(null):b.reject(new le(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const X=Sc(O,`Failed to get document '${m} from cache`);b.reject(X)}}),function(h,m,b){return a.apply(this,arguments)})(yield $g(i),e,t);var a})),t.promise}(t,i._key).then(h=>new Cd(e,a,i._key,h,new mu(null!==h&&h.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ay(i){i=Qr(i,vs);const e=Qr(i.firestore,Yi);return Ro(Us(e),i._key,{source:"server"}).then(t=>Ry(e,i,t))}(this._delegate):function Ty(i){i=Qr(i,vs);const e=Qr(i.firestore,Yi);return Ro(Us(e),i._key).then(t=>Ry(e,i,t))}(this._delegate),t.then(a=>new Mf(this.firestore,new Cd(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new _u(this.firestore,this._delegate.withConverter(e?Fl.getInstance(this.firestore,e):null))}}function Za(i,e,t){return i.message=i.message.replace(e,t),i}function xf(i){for(const e of i)if("object"==typeof e&&!$m(e))return e;return{}}function ev(i,e){var t,a;let h;return h=$m(i[0])?i[0]:$m(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{h.next&&h.next(e(m))},error:null===(t=h.error)||void 0===t?void 0:t.bind(h),complete:null===(a=h.complete)||void 0===a?void 0:a.bind(h)}}class Mf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _u(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wy(this._delegate,e._delegate)}}class jm extends Mf{data(e){const t=this._delegate.data(e);return function $(i,e){i||S()}(void 0!==t),t}}class Aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xg(e)}where(e,t,a){try{return new Aa(this.firestore,Pc(this._delegate,function L_(i,e,t){const a=e,h=Yg("where",i);return new kc(h,a,t)}(e,t,a)))}catch(h){throw Za(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Aa(this.firestore,Pc(this._delegate,function Nc(i,e="asc"){const t=e,a=Yg("orderBy",i);return new B_(a,t)}(e,t)))}catch(a){throw Za(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Aa(this.firestore,Pc(this._delegate,function Ku(i){return _h("limit",i),new yu("limit",i,"F")}(e)))}catch(t){throw Za(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Aa(this.firestore,Pc(this._delegate,function r_(i){return _h("limitToLast",i),new yu("limitToLast",i,"L")}(e)))}catch(t){throw Za(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Aa(this.firestore,Pc(this._delegate,function V_(...i){return new Iy("startAt",i,!0)}(...e)))}catch(t){throw Za(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Aa(this.firestore,Pc(this._delegate,function U_(...i){return new Iy("startAfter",i,!1)}(...e)))}catch(t){throw Za(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Aa(this.firestore,Pc(this._delegate,function $_(...i){return new i_("endBefore",i,!1)}(...e)))}catch(t){throw Za(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Aa(this.firestore,Pc(this._delegate,function by(...i){return new i_("endAt",i,!0)}(...e)))}catch(t){throw Za(t,"endAt()","Query.endAt()")}}isEqual(e){return Cf(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function u_(i){i=Qr(i,jo);const e=Qr(i.firestore,Yi),t=Us(e),a=new Fc(e);return function hl(i,e){const t=new He;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(a=(0,Ce.Z)(function*(h,m,b){try{const O=yield Ka(h,m,!0),X=new _f(m,O._i),ne=X.Wu(O.documents),xe=X.applyChanges(ne,!1);b.resolve(xe.snapshot)}catch(O){const X=Sc(O,`Failed to execute query '${m} against cache`);b.reject(X)}}),function(h,m,b){return a.apply(this,arguments)})(yield $g(i),e,t);var a})),t.promise}(t,i._query).then(h=>new Dd(e,a,i,h))}(this._delegate):"server"===(null==e?void 0:e.source)?function c_(i){i=Qr(i,jo);const e=Qr(i.firestore,Yi),t=Us(e),a=new Fc(e);return If(t,i._query,{source:"server"}).then(h=>new Dd(e,a,i,h))}(this._delegate):function l_(i){i=Qr(i,jo);const e=Qr(i.firestore,Yi),t=Us(e),a=new Fc(e);return F_(i._query),If(t,i._query).then(h=>new Dd(e,a,i,h))}(this._delegate),t.then(a=>new __(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=xf(e),a=ev(e,h=>new __(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return h_(this._delegate,t,a)}withConverter(e){return new Aa(this.firestore,this._delegate.withConverter(e?Fl.getInstance(this.firestore,e):null))}}class y_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class __{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Aa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new y_(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new jm(this._firestore,a))})}isEqual(e){return wy(this._delegate,e._delegate)}}class sr extends Aa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _u(this.firestore,e):null}doc(e){try{return new _u(this.firestore,void 0===e?bf(this._delegate):bf(this._delegate,e))}catch(t){throw Za(t,"doc()","CollectionReference.doc()")}}add(e){return function H_(i,e){const t=Qr(i.firestore,Yi),a=bf(i),h=Af(i.converter,e);return Sp(t,[gn(on(i.firestore),"addDoc",a._key,h,null!==i.converter,{}).toMutation(a._key,Ys.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new _u(this.firestore,t))}isEqual(e){return Wg(this._delegate,e._delegate)}withConverter(e){return new sr(this.firestore,this._delegate.withConverter(e?Fl.getInstance(this.firestore,e):null))}}function Rf(i){return Qr(i,vs)}class By{constructor(...e){this._delegate=new l(...e)}static documentId(){return new By(Hi.keyField().canonicalString())}isEqual(e){return(e=(0,We.m9)(e))instanceof l&&this._delegate._internalPath.isEqual(e._internalPath)}}class Of{constructor(e){this._delegate=e}static serverTimestamp(){const e=function q_(){return new lo("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Of(e)}static delete(){const e=function K_(){return new br("deleteField")}();return e._methodName="FieldValue.delete",new Of(e)}static arrayUnion(...e){const t=function Y_(...i){return new uo("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Of(t)}static arrayRemove(...e){const t=function Z_(...i){return new As("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Of(t)}static increment(e){const t=function X_(i){return new co("increment",i)}(e);return t._methodName="FieldValue.increment",new Of(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Hm={Firestore:Ny,GeoPoint:R,Timestamp:Vi,Blob:Ap,Transaction:Fy,WriteBatch:Ly,DocumentReference:_u,DocumentSnapshot:Mf,Query:Aa,QueryDocumentSnapshot:jm,QuerySnapshot:__,CollectionReference:sr,FieldPath:By,FieldValue:Of,setLogLevel:function m_(i){!function Tu(i){bo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Gm(i){(function tv(i,e){i.INTERNAL.registerComponent(new ot.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),h=t.getProvider("firestore").getImmediate();return e(a,h)},"PUBLIC").setServiceProps(Object.assign({},Hm)))})(i,(e,t)=>new Ny(e,t,new g_)),i.registerVersion("@firebase/firestore-compat","0.1.18")}(ke.Z);var qu=P(1205),ho=P(440);function E_(i,e){return function v_(i,e=J.z){return new q.y(t=>{let a;return null!=e?e.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},t)}):a=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=a&&a()}})}(i,e)}function zm(i,e){return E_(i,e).pipe((0,ye.U)(t=>({payload:t,type:"query"})))}function Qg(i,e){return zm(i,e).pipe((0,pe.O)(void 0),ze(),(0,ye.U)(([t,a])=>{const h=a.payload.docChanges(),m=h.map(b=>({type:b.type,payload:b}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((b,O)=>{const X=h.find(xe=>xe.doc.ref.isEqual(b.ref)),ne=null==t?void 0:t.payload.docs.find(xe=>xe.ref.isEqual(b.ref));X&&JSON.stringify(X.doc.metadata)===JSON.stringify(b.metadata)||!X&&ne&&JSON.stringify(ne.metadata)===JSON.stringify(b.metadata)||m.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:b}})}),m}))}function Vy(i,e,t){return Qg(i,t).pipe((0,Me.R)((a,h)=>function w_(i,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(i=function rv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Uy(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Uy(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Uy(i,e.oldIndex,1)}return i}(i,a))}),i}(a,h.map(m=>m.payload),e),[]),(0,Oe.x)(),(0,ye.U)(a=>a.map(h=>({type:h.type,payload:h}))))}function Uy(i,e,t,...a){const h=i.slice();return h.splice(e,t,...a),h}function I_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}P(127);class xp{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=Qg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ye.U)(a=>a.filter(h=>e.indexOf(h.type)>-1)))),t.pipe((0,pe.O)(void 0),ze(),(0,Ue.h)(([a,h])=>h.length>0||!a),(0,ye.U)(([a,h])=>h),Ee.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Me.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=I_(e);return Vy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}valueChanges(e={}){return zm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),Ee.iC)}get(e){return(0,Se.D)(this.query.get(e)).pipe(Ee.iC)}add(e){return this.ref.add(e)}doc(e){return new b_(this.ref.doc(e),this.afs)}}class b_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:h,query:m}=$y(a,t);return new xp(h,m,this.afs)}snapshotChanges(){return function nv(i,e){return E_(i,e).pipe((0,pe.O)(void 0),ze(),(0,ye.U)(([t,a])=>a.exists?(null==t?void 0:t.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ye.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Se.D)(this.ref.get(e)).pipe(Ee.iC)}}class iv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Qg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,Ue.h)(t=>t.length>0),Ee.iC):Qg(this.query,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Me.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=I_(e);return Vy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ee.iC)}valueChanges(e={}){return zm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(a=>a.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),Ee.iC)}get(e){return(0,Se.D)(this.query.get(e)).pipe(Ee.iC)}}const sv=new c.OlP("angularfire2.enableFirestorePersistence"),Wm=new c.OlP("angularfire2.firestore.persistenceSettings"),C_=new c.OlP("angularfire2.firestore.settings"),D_=new c.OlP("angularfire2.firestore.use-emulator");function $y(i,e=(t=>t)){return{query:e(i),ref:i}}let ov=(()=>{class i{constructor(t,a,h,m,b,O,X,ne,xe,st,Lt,Jt,nn,Ln,Er,Ps,vo){this.schedulers=X;const rs=(0,tt.on)(t,O,a),$s=xe;st&&(0,qu.nw)(rs,O,Lt,nn,Ln,Er,Jt,Ps),[this.firestore,this.persistenceEnabled$]=(0,tt.cc)(`${rs.name}.firestore`,"AngularFirestore",rs.name,()=>{const ks=O.runOutsideAngular(()=>rs.firestore());if(m&&ks.settings(m),$s&&ks.useEmulator(...$s),h&&!(0,Le.PM)(b)){const Xs=()=>{try{return(0,Se.D)(ks.enablePersistence(ne||void 0).then(()=>!0,()=>!1))}catch(xa){return"undefined"!=typeof console&&console.warn(xa),(0,Ae.of)(!1)}};return[ks,O.runOutsideAngular(Xs)]}return[ks,(0,Ae.of)(!1)]},[m,$s,h])}collection(t,a){let h;h="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:b}=$y(h,a),O=this.schedulers.ngZone.run(()=>m);return new xp(O,b,this)}collectionGroup(t,a){const h=a||(b=>b),m=this.firestore.collectionGroup(t);return new iv(h(m),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const h=this.schedulers.ngZone.run(()=>a);return new b_(h,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(c.LFG(tt.Dh),c.LFG(tt.xv,8),c.LFG(sv,8),c.LFG(C_,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Ee.HU),c.LFG(Wm,8),c.LFG(D_,8),c.LFG(qu.zQ,8),c.LFG(qu.Qv,8),c.LFG(qu.L6,8),c.LFG(qu._Q,8),c.LFG(qu.rT,8),c.LFG(qu.lh,8),c.LFG(qu.f7,8),c.LFG(ho.nm,8))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})()},2011:(Xt,ut,P)=>{"use strict";P.d(ut,{hO:()=>Oe,xv:()=>ze,Dh:()=>Re,GT:()=>Ee,cc:()=>Ue,on:()=>pe,pX:()=>Ae});var c=P(5e3),J=P(127),q=P(5813);Xt=P.hmd(Xt);const Se=["ngOnDestroy"],Ae=(ke,Ce,nt,ot={})=>new Proxy(ke,{get:(Ye,We)=>nt.runOutsideAngular(()=>{var $e;if(ke[We])return(null===($e=null==ot?void 0:ot.spy)||void 0===$e?void 0:$e.get)&&ot.spy.get(We,ke[We]),ke[We];if(Se.indexOf(We)>-1)return()=>{};const Ke=Ce.toPromise().then(ee=>{const Qe=ee&&ee[We];return"function"==typeof Qe?Qe.bind(ee):Qe&&Qe.then?Qe.then(he=>nt.run(()=>he)):nt.run(()=>Qe)});return new Proxy(()=>{},{get:(ee,Qe)=>Ke[Qe],apply:(ee,Qe,he)=>Ke.then(me=>{var ge;const Ne=me&&me(...he);return(null===(ge=null==ot?void 0:ot.spy)||void 0===ge?void 0:ge.apply)&&ot.spy.apply(We,he,Ne),Ne})})})}),Ee=(ke,Ce)=>{Ce.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(ot=>{Object.defineProperty(ke.prototype,ot,Object.getOwnPropertyDescriptor(nt.prototype||nt,ot))})})};class be{constructor(Ce){return Ce}}const Re=new c.OlP("angularfire2.app.options"),ze=new c.OlP("angularfire2.app.name");function pe(ke,Ce,nt){const Ye="object"==typeof nt&&nt||{};Ye.name=Ye.name||"string"==typeof nt&&nt||"[DEFAULT]";const $e=J.Z.apps.filter(Ke=>Ke&&Ke.name===Ye.name)[0]||Ce.runOutsideAngular(()=>J.Z.initializeApp(ke,Ye));try{JSON.stringify(ke)!==JSON.stringify($e.options)&&ye("error",`${$e.name} Firebase App already initialized with different options${Xt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ke){}return new be($e)}const ye=(ke,...Ce)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[ke](...Ce)},Me={provide:be,useFactory:pe,deps:[Re,c.R0b,[new c.FiY,ze]]};let Oe=(()=>{class ke{constructor(nt){J.Z.registerVersion("angularfire",q.q4.full,"core"),J.Z.registerVersion("angularfire",q.q4.full,"app-compat"),J.Z.registerVersion("angular",c.q4F.full,nt.toString())}static initializeApp(nt,ot){return{ngModule:ke,providers:[{provide:Re,useValue:nt},{provide:ze,useValue:ot}]}}}return ke.\u0275fac=function(nt){return new(nt||ke)(c.LFG(c.Lbi))},ke.\u0275mod=c.oAB({type:ke}),ke.\u0275inj=c.cJS({providers:[Me]}),ke})();function Ue(ke,Ce,nt,ot,Ye){const[,We,$e]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===ke)||[];if(We)return function tt(ke,Ce){try{return ke.toString()===Ce.toString()}catch(nt){return ke===Ce}}(Ye,$e)||(De("error",`${Ce} was already initialized on the ${nt} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),De("warn",{is:Ye,was:$e})),We;{const Ke=ot();return globalThis.\u0275AngularfireInstanceCache.push([ke,Ke,Ye]),Ke}}const Le=!!Xt.hot,De=(ke,...Ce)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[ke](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Xt,ut,P)=>{"use strict";P.d(ut,{q4:()=>so,iC:()=>_l,fc:()=>Yo,HU:()=>ql,vb:()=>Kl,JM:()=>Wl});var c=P(5e3),J=P(5867),q=P(5861),Se=P(9681),Ae=P(2090),Ee=P(4859),be=P(1877),Re=P(8766);const ze="@firebase/installations",Me="w:0.5.9",Oe="FIS_v2",Ce=new Ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(F){return F instanceof Ae.ZR&&F.code.includes("request-failed")}function ot({projectId:F}){return`https://firebaseinstallations.googleapis.com/v1/projects/${F}/installations`}function Ye(F){return{token:F.token,requestStatus:2,expiresIn:me(F.expiresIn),creationTime:Date.now()}}function We(F,H){return $e.apply(this,arguments)}function $e(){return($e=(0,q.Z)(function*(F,H){const Pe=(yield H.json()).error;return Ce.create("request-failed",{requestName:F,serverCode:Pe.code,serverMessage:Pe.message,serverStatus:Pe.status})})).apply(this,arguments)}function Ke({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function ee(F,{refreshToken:H}){const ae=Ke(F);return ae.append("Authorization",function ge(F){return`${Oe} ${F}`}(H)),ae}function Qe(F){return he.apply(this,arguments)}function he(){return(he=(0,q.Z)(function*(F){const H=yield F();return H.status>=500&&H.status<600?F():H})).apply(this,arguments)}function me(F){return Number(F.replace("s","000"))}function Ne(F,H){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,q.Z)(function*({appConfig:F,heartbeatServiceProvider:H},{fid:ae}){const Pe=ot(F),yt=Ke(F),Ot=H.getImmediate({optional:!0});if(Ot){const $n=yield Ot.getHeartbeatsHeader();$n&&yt.append("x-firebase-client",$n)}const dn={method:"POST",headers:yt,body:JSON.stringify({fid:ae,authVersion:Oe,appId:F.appId,sdkVersion:Me})},mr=yield Qe(()=>fetch(Pe,dn));if(mr.ok){const $n=yield mr.json();return{fid:$n.fid||ae,registrationStatus:2,refreshToken:$n.refreshToken,authToken:Ye($n.authToken)}}throw yield We("Create Installation",mr)})).apply(this,arguments)}function _t(F){return new Promise(H=>{setTimeout(H,F)})}const ct=/^[cdef][\w-]{21}$/;function Ve(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const ae=function It(F){return function xt(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return ct.test(ae)?ae:""}catch(F){return""}}function dt(F){return`${F.appName}!${F.appId}`}const gt=new Map;function at(F,H){const ae=dt(F);wt(ae,H),function kn(F,H){const ae=function Dn(){return!Sn&&"BroadcastChannel"in self&&(Sn=new BroadcastChannel("[Firebase] FID Change"),Sn.onmessage=F=>{wt(F.data.key,F.data.fid)}),Sn}();ae&&ae.postMessage({key:F,fid:H}),function mn(){0===gt.size&&Sn&&(Sn.close(),Sn=null)}()}(ae,H)}function wt(F,H){const ae=gt.get(F);if(ae)for(const Pe of ae)Pe(H)}let Sn=null;const lr="firebase-installations-store";let Hn=null;function In(){return Hn||(Hn=(0,Re.X3)("firebase-installations-database",1,{upgrade:(F,H)=>{0===H&&F.createObjectStore(lr)}})),Hn}function Qn(F,H){return On.apply(this,arguments)}function On(){return(On=(0,q.Z)(function*(F,H){const ae=dt(F),yt=(yield In()).transaction(lr,"readwrite"),Ot=yt.objectStore(lr),tn=yield Ot.get(ae);return yield Ot.put(H,ae),yield yt.done,(!tn||tn.fid!==H.fid)&&at(F,H.fid),H})).apply(this,arguments)}function Nn(F){return jr.apply(this,arguments)}function jr(){return(jr=(0,q.Z)(function*(F){const H=dt(F),Pe=(yield In()).transaction(lr,"readwrite");yield Pe.objectStore(lr).delete(H),yield Pe.done})).apply(this,arguments)}function fi(F,H){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,q.Z)(function*(F,H){const ae=dt(F),yt=(yield In()).transaction(lr,"readwrite"),Ot=yt.objectStore(lr),tn=yield Ot.get(ae),dn=H(tn);return void 0===dn?yield Ot.delete(ae):yield Ot.put(dn,ae),yield yt.done,dn&&(!tn||tn.fid!==dn.fid)&&at(F,dn.fid),dn})).apply(this,arguments)}function qe(F){return Je.apply(this,arguments)}function Je(){return(Je=(0,q.Z)(function*(F){let H;const ae=yield fi(F.appConfig,Pe=>{const yt=At(Pe),Ot=Et(F,yt);return H=Ot.registrationPromise,Ot.installationEntry});return""===ae.fid?{installationEntry:yield H}:{installationEntry:ae,registrationPromise:H}})).apply(this,arguments)}function At(F){return ei(F||{fid:Ve(),registrationStatus:0})}function Et(F,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(Ce.create("app-offline"))};const ae={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},Pe=function Kt(F,H){return bt.apply(this,arguments)}(F,ae);return{installationEntry:ae,registrationPromise:Pe}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:Un(F)}:{installationEntry:H}}function bt(){return(bt=(0,q.Z)(function*(F,H){try{const ae=yield Ne(F,H);return Qn(F.appConfig,ae)}catch(ae){throw nt(ae)&&409===ae.customData.serverCode?yield Nn(F.appConfig):yield Qn(F.appConfig,{fid:H.fid,registrationStatus:0}),ae}})).apply(this,arguments)}function Un(F){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,q.Z)(function*(F){let H=yield fn(F.appConfig);for(;1===H.registrationStatus;)yield _t(100),H=yield fn(F.appConfig);if(0===H.registrationStatus){const{installationEntry:ae,registrationPromise:Pe}=yield qe(F);return Pe||ae}return H})).apply(this,arguments)}function fn(F){return fi(F,H=>{if(!H)throw Ce.create("installation-not-found");return ei(H)})}function ei(F){return function fr(F){return 1===F.registrationStatus&&F.registrationTime+1e4<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function xr(F,H){return we.apply(this,arguments)}function we(){return(we=(0,q.Z)(function*({appConfig:F,heartbeatServiceProvider:H},ae){const Pe=je(F,ae),yt=ee(F,ae),Ot=H.getImmediate({optional:!0});if(Ot){const $n=yield Ot.getHeartbeatsHeader();$n&&yt.append("x-firebase-client",$n)}const dn={method:"POST",headers:yt,body:JSON.stringify({installation:{sdkVersion:Me,appId:F.appId}})},mr=yield Qe(()=>fetch(Pe,dn));if(mr.ok)return Ye(yield mr.json());throw yield We("Generate Auth Token",mr)})).apply(this,arguments)}function je(F,{fid:H}){return`${ot(F)}/${H}/authTokens:generate`}function Ze(F){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,q.Z)(function*(F,H=!1){let ae;const Pe=yield fi(F.appConfig,Ot=>{if(!vn(Ot))throw Ce.create("not-registered");const tn=Ot.authToken;if(!H&&wr(tn))return Ot;if(1===tn.requestStatus)return ae=Fe(F,H),Ot;{if(!navigator.onLine)throw Ce.create("app-offline");const dn=rr(Ot);return ae=rn(F,dn),dn}});return ae?yield ae:Pe.authToken})).apply(this,arguments)}function Fe(F,H){return mt.apply(this,arguments)}function mt(){return(mt=(0,q.Z)(function*(F,H){let ae=yield zt(F.appConfig);for(;1===ae.authToken.requestStatus;)yield _t(100),ae=yield zt(F.appConfig);const Pe=ae.authToken;return 0===Pe.requestStatus?Ze(F,H):Pe})).apply(this,arguments)}function zt(F){return fi(F,H=>{if(!vn(H))throw Ce.create("not-registered");return function kr(F){return 1===F.requestStatus&&F.requestTime+1e4<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function rn(F,H){return yn.apply(this,arguments)}function yn(){return(yn=(0,q.Z)(function*(F,H){try{const ae=yield xr(F,H),Pe=Object.assign(Object.assign({},H),{authToken:ae});return yield Qn(F.appConfig,Pe),ae}catch(ae){if(!nt(ae)||401!==ae.customData.serverCode&&404!==ae.customData.serverCode){const Pe=Object.assign(Object.assign({},H),{authToken:{requestStatus:0}});yield Qn(F.appConfig,Pe)}else yield Nn(F.appConfig);throw ae}})).apply(this,arguments)}function vn(F){return void 0!==F&&2===F.registrationStatus}function wr(F){return 2===F.requestStatus&&!function En(F){const H=Date.now();return H<F.creationTime||F.creationTime+F.expiresIn<H+36e5}(F)}function rr(F){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:H})}function Gr(){return(Gr=(0,q.Z)(function*(F){const H=F,{installationEntry:ae,registrationPromise:Pe}=yield qe(H);return Pe?Pe.catch(console.error):Ze(H).catch(console.error),ae.fid})).apply(this,arguments)}function wi(){return(wi=(0,q.Z)(function*(F,H=!1){const ae=F;return yield Yr(ae),(yield Ze(ae,H)).token})).apply(this,arguments)}function Yr(F){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,q.Z)(function*(F){const{registrationPromise:H}=yield qe(F);H&&(yield H)})).apply(this,arguments)}function oi(F){return Ce.create("missing-app-config-values",{valueName:F})}const Gn="installations",cn=F=>{const H=F.getProvider("app").getImmediate(),ae=function Br(F){if(!F||!F.options)throw oi("App Configuration");if(!F.name)throw oi("App Name");const H=["projectId","apiKey","appId"];for(const ae of H)if(!F.options[ae])throw oi(ae);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(H);return{app:H,appConfig:ae,heartbeatServiceProvider:(0,Se._getProvider)(H,"heartbeat"),_delete:()=>Promise.resolve()}},Zn=F=>{const H=F.getProvider("app").getImmediate(),ae=(0,Se._getProvider)(H,Gn).getImmediate();return{getId:()=>function Fi(F){return Gr.apply(this,arguments)}(ae),getToken:yt=>function Bn(F){return wi.apply(this,arguments)}(ae,yt)}};(function Zr(){(0,Se._registerComponent)(new Ee.wA(Gn,cn,"PUBLIC")),(0,Se._registerComponent)(new Ee.wA("installations-internal",Zn,"PRIVATE"))})(),(0,Se.registerVersion)(ze,"0.5.9"),(0,Se.registerVersion)(ze,"0.5.9","esm2017");const ai="@firebase/remote-config",Mr=new Ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class An{constructor(H,ae,Pe,yt){this.client=H,this.storage=ae,this.storageCache=Pe,this.logger=yt}isCachedDataFresh(H,ae){if(!ae)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Pe=Date.now()-ae,yt=Pe<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Pe}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${yt}.`),yt}fetch(H){var ae=this;return(0,q.Z)(function*(){const[Pe,yt]=yield Promise.all([ae.storage.getLastSuccessfulFetchTimestampMillis(),ae.storage.getLastSuccessfulFetchResponse()]);if(yt&&ae.isCachedDataFresh(H.cacheMaxAgeMillis,Pe))return yt;H.eTag=yt&&yt.eTag;const Ot=yield ae.client.fetch(H),tn=[ae.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ot.status&&tn.push(ae.storage.setLastSuccessfulFetchResponse(Ot)),yield Promise.all(tn),Ot})()}}function Xn(F=navigator){return F.languages&&F.languages[0]||F.language}class nr{constructor(H,ae,Pe,yt,Ot,tn){this.firebaseInstallations=H,this.sdkVersion=ae,this.namespace=Pe,this.projectId=yt,this.apiKey=Ot,this.appId=tn}fetch(H){var ae=this;return(0,q.Z)(function*(){const[Pe,yt]=yield Promise.all([ae.firebaseInstallations.getId(),ae.firebaseInstallations.getToken()]),tn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ae.projectId}/namespaces/${ae.namespace}:fetch?key=${ae.apiKey}`,dn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},mr={sdk_version:ae.sdkVersion,app_instance_id:Pe,app_instance_id_token:yt,app_id:ae.appId,language_code:Xn()},$n={method:"POST",headers:dn,body:JSON.stringify(mr)},Kr=fetch(tn,$n),Rn=new Promise((Fa,Do)=>{H.signal.addEventListener(()=>{const La=new Error("The operation was aborted.");La.name="AbortError",Do(La)})});let qs;try{yield Promise.race([Kr,Rn]),qs=yield Kr}catch(Fa){let Do="fetch-client-network";throw"AbortError"===Fa.name&&(Do="fetch-timeout"),Mr.create(Do,{originalErrorMessage:Fa.message})}let si=qs.status;const hi=qs.headers.get("ETag")||void 0;let wa,ao;if(200===qs.status){let Fa;try{Fa=yield qs.json()}catch(Do){throw Mr.create("fetch-client-parse",{originalErrorMessage:Do.message})}wa=Fa.entries,ao=Fa.state}if("INSTANCE_STATE_UNSPECIFIED"===ao?si=500:"NO_CHANGE"===ao?si=304:("NO_TEMPLATE"===ao||"EMPTY_CONFIG"===ao)&&(wa={}),304!==si&&200!==si)throw Mr.create("fetch-status",{httpStatus:si});return{status:si,eTag:hi,config:wa}})()}}class rt{constructor(H,ae){this.client=H,this.storage=ae}fetch(H){var ae=this;return(0,q.Z)(function*(){const Pe=(yield ae.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ae.attemptFetch(H,Pe)})()}attemptFetch(H,{throttleEndTimeMillis:ae,backoffCount:Pe}){var yt=this;return(0,q.Z)(function*(){yield function ci(F,H){return new Promise((ae,Pe)=>{const yt=Math.max(H-Date.now(),0),Ot=setTimeout(ae,yt);F.addEventListener(()=>{clearTimeout(Ot),Pe(Mr.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,ae);try{const Ot=yield yt.client.fetch(H);return yield yt.storage.deleteThrottleMetadata(),Ot}catch(Ot){if(!function Ii(F){if(!(F instanceof Ae.ZR&&F.customData))return!1;const H=Number(F.customData.httpStatus);return 429===H||500===H||503===H||504===H}(Ot))throw Ot;const tn={throttleEndTimeMillis:Date.now()+(0,Ae.$s)(Pe),backoffCount:Pe+1};return yield yt.storage.setThrottleMetadata(tn),yt.attemptFetch(H,tn)}})()}}class Wt{constructor(H,ae,Pe,yt,Ot){this.app=H,this._client=ae,this._storageCache=Pe,this._storage=yt,this._logger=Ot,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Zt(F,H){const ae=F.target.error||void 0;return Mr.create(H,{originalErrorMessage:ae&&ae.message})}const pn="app_namespace_store";class is{constructor(H,ae,Pe,yt=function Dr(){return new Promise((F,H)=>{try{const ae=indexedDB.open("firebase_remote_config",1);ae.onerror=Pe=>{H(Zt(Pe,"storage-open"))},ae.onsuccess=Pe=>{F(Pe.target.result)},ae.onupgradeneeded=Pe=>{0===Pe.oldVersion&&Pe.target.result.createObjectStore(pn,{keyPath:"compositeKey"})}}catch(ae){H(Mr.create("storage-open",{originalErrorMessage:ae}))}})}()){this.appId=H,this.appName=ae,this.namespace=Pe,this.openDbPromise=yt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var ae=this;return(0,q.Z)(function*(){const Pe=yield ae.openDbPromise;return new Promise((yt,Ot)=>{const dn=Pe.transaction([pn],"readonly").objectStore(pn),mr=ae.createCompositeKey(H);try{const $n=dn.get(mr);$n.onerror=Kr=>{Ot(Zt(Kr,"storage-get"))},$n.onsuccess=Kr=>{const Rn=Kr.target.result;yt(Rn?Rn.value:void 0)}}catch($n){Ot(Mr.create("storage-get",{originalErrorMessage:$n&&$n.message}))}})})()}set(H,ae){var Pe=this;return(0,q.Z)(function*(){const yt=yield Pe.openDbPromise;return new Promise((Ot,tn)=>{const mr=yt.transaction([pn],"readwrite").objectStore(pn),$n=Pe.createCompositeKey(H);try{const Kr=mr.put({compositeKey:$n,value:ae});Kr.onerror=Rn=>{tn(Zt(Rn,"storage-set"))},Kr.onsuccess=()=>{Ot()}}catch(Kr){tn(Mr.create("storage-set",{originalErrorMessage:Kr&&Kr.message}))}})})()}delete(H){var ae=this;return(0,q.Z)(function*(){const Pe=yield ae.openDbPromise;return new Promise((yt,Ot)=>{const dn=Pe.transaction([pn],"readwrite").objectStore(pn),mr=ae.createCompositeKey(H);try{const $n=dn.delete(mr);$n.onerror=Kr=>{Ot(Zt(Kr,"storage-delete"))},$n.onsuccess=()=>{yt()}}catch($n){Ot(Mr.create("storage-delete",{originalErrorMessage:$n&&$n.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class js{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,q.Z)(function*(){const ae=H.storage.getLastFetchStatus(),Pe=H.storage.getLastSuccessfulFetchTimestampMillis(),yt=H.storage.getActiveConfig(),Ot=yield ae;Ot&&(H.lastFetchStatus=Ot);const tn=yield Pe;tn&&(H.lastSuccessfulFetchTimestampMillis=tn);const dn=yield yt;dn&&(H.activeConfig=dn)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function Qs(){return fo.apply(this,arguments)}function fo(){return(fo=(0,q.Z)(function*(){if(!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch(F){return!1}})).apply(this,arguments)}!function Ai(){(0,Se._registerComponent)(new Ee.wA("remote-config",function F(H,{instanceIdentifier:ae}){const Pe=H.getProvider("app").getImmediate(),yt=H.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Mr.create("registration-window");if(!(0,Ae.hl)())throw Mr.create("indexed-db-unavailable");const{projectId:Ot,apiKey:tn,appId:dn}=Pe.options;if(!Ot)throw Mr.create("registration-project-id");if(!tn)throw Mr.create("registration-api-key");if(!dn)throw Mr.create("registration-app-id");const mr=new is(dn,Pe.name,ae=ae||"firebase"),$n=new js(mr),Kr=new be.Yd(ai);Kr.logLevel=be.in.ERROR;const Rn=new nr(yt,Se.SDK_VERSION,ae,Ot,tn,dn),qs=new rt(Rn,mr),si=new An(qs,mr,$n,Kr),hi=new Wt(Pe,si,$n,mr,Kr);return function fe(F){const H=(0,Ae.m9)(F);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(hi),hi},"PUBLIC").setMultipleInstances(!0)),(0,Se.registerVersion)(ai,"0.3.8"),(0,Se.registerVersion)(ai,"0.3.8","esm2017")}();const Ho="/firebase-messaging-sw.js",Pi="/firebase-cloud-messaging-push-scope",Jr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ws="google.c.a.c_id",Is="google.c.a.c_l",Go="google.c.a.ts",Hs="google.c.a.e";var Js=(()=>{return(F=Js||(Js={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Js;var F})();function Bi(F){const H=new Uint8Array(F);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function eo(F){const ae=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Pe=atob(ae),yt=new Uint8Array(Pe.length);for(let Ot=0;Ot<Pe.length;++Ot)yt[Ot]=Pe.charCodeAt(Ot);return yt}const Tr="fcm_token_details_db",as="fcm_token_object_Store";function Xi(F){return Qi.apply(this,arguments)}function Qi(){return Qi=(0,q.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ot=>Ot.name).includes(Tr))return null;let H=null;return(yield(0,Re.X3)(Tr,5,{upgrade:(Pe=(0,q.Z)(function*(yt,Ot,tn,dn){var mr;if(Ot<2||!yt.objectStoreNames.contains(as))return;const $n=dn.objectStore(as),Kr=yield $n.index("fcmSenderId").get(F);if(yield $n.clear(),Kr)if(2===Ot){const Rn=Kr;if(!Rn.auth||!Rn.p256dh||!Rn.endpoint)return;H={token:Rn.fcmToken,createTime:null!==(mr=Rn.createTime)&&void 0!==mr?mr:Date.now(),subscriptionOptions:{auth:Rn.auth,p256dh:Rn.p256dh,endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:"string"==typeof Rn.vapidKey?Rn.vapidKey:Bi(Rn.vapidKey)}}}else if(3===Ot){const Rn=Kr;H={token:Rn.fcmToken,createTime:Rn.createTime,subscriptionOptions:{auth:Bi(Rn.auth),p256dh:Bi(Rn.p256dh),endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:Bi(Rn.vapidKey)}}}else if(4===Ot){const Rn=Kr;H={token:Rn.fcmToken,createTime:Rn.createTime,subscriptionOptions:{auth:Bi(Rn.auth),p256dh:Bi(Rn.p256dh),endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:Bi(Rn.vapidKey)}}}}),function(Ot,tn,dn,mr){return Pe.apply(this,arguments)})})).close(),yield(0,Re.Lj)(Tr),yield(0,Re.Lj)("fcm_vapid_details_db"),yield(0,Re.Lj)("undefined"),Oo(H)?H:null;var Pe}),Qi.apply(this,arguments)}function Oo(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:H}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}const ls="firebase-messaging-store";let Cs=null;function _r(){return Cs||(Cs=(0,Re.X3)("firebase-messaging-database",1,{upgrade:(F,H)=>{0===H&&F.createObjectStore(ls)}})),Cs}function V(F){return se.apply(this,arguments)}function se(){return(se=(0,q.Z)(function*(F){const H=qt(F),Pe=yield(yield _r()).transaction(ls).objectStore(ls).get(H);if(Pe)return Pe;{const yt=yield Xi(F.appConfig.senderId);if(yt)return yield U(F,yt),yt}})).apply(this,arguments)}function U(F,H){return ue.apply(this,arguments)}function ue(){return(ue=(0,q.Z)(function*(F,H){const ae=qt(F),yt=(yield _r()).transaction(ls,"readwrite");return yield yt.objectStore(ls).put(H,ae),yield yt.done,H})).apply(this,arguments)}function Be(F){return kt.apply(this,arguments)}function kt(){return(kt=(0,q.Z)(function*(F){const H=qt(F),Pe=(yield _r()).transaction(ls,"readwrite");yield Pe.objectStore(ls).delete(H),yield Pe.done})).apply(this,arguments)}function qt({appConfig:F}){return F.appId}const Pn=new Ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Jn(F,H){return ir.apply(this,arguments)}function ir(){return(ir=(0,q.Z)(function*(F,H){const ae=yield es(F),Pe=xs(H),yt={method:"POST",headers:ae,body:JSON.stringify(Pe)};let Ot;try{Ot=yield(yield fetch(Ns(F.appConfig),yt)).json()}catch(tn){throw Pn.create("token-subscribe-failed",{errorInfo:tn})}if(Ot.error)throw Pn.create("token-subscribe-failed",{errorInfo:Ot.error.message});if(!Ot.token)throw Pn.create("token-subscribe-no-token");return Ot.token})).apply(this,arguments)}function dr(F,H){return di.apply(this,arguments)}function di(){return(di=(0,q.Z)(function*(F,H){const ae=yield es(F),Pe=xs(H.subscriptionOptions),yt={method:"PATCH",headers:ae,body:JSON.stringify(Pe)};let Ot;try{Ot=yield(yield fetch(`${Ns(F.appConfig)}/${H.token}`,yt)).json()}catch(tn){throw Pn.create("token-update-failed",{errorInfo:tn})}if(Ot.error)throw Pn.create("token-update-failed",{errorInfo:Ot.error.message});if(!Ot.token)throw Pn.create("token-update-no-token");return Ot.token})).apply(this,arguments)}function Vr(F,H){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,q.Z)(function*(F,H){const Pe={method:"DELETE",headers:yield es(F)};try{const Ot=yield(yield fetch(`${Ns(F.appConfig)}/${H}`,Pe)).json();if(Ot.error)throw Pn.create("token-unsubscribe-failed",{errorInfo:Ot.error.message})}catch(yt){throw Pn.create("token-unsubscribe-failed",{errorInfo:yt})}})).apply(this,arguments)}function Ns({projectId:F}){return`https://fcmregistrations.googleapis.com/v1/projects/${F}/registrations`}function es(F){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,q.Z)(function*({appConfig:F,installations:H}){const ae=yield H.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${ae}`})})).apply(this,arguments)}function xs({p256dh:F,auth:H,endpoint:ae,vapidKey:Pe}){const yt={web:{endpoint:ae,auth:H,p256dh:F}};return Pe!==Jr&&(yt.web.applicationPubKey=Pe),yt}const zo=6048e5;function Po(F){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,q.Z)(function*(F){const H=yield E(F.swRegistration,F.vapidKey),ae={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:H.endpoint,auth:Bi(H.getKey("auth")),p256dh:Bi(H.getKey("p256dh"))},Pe=yield V(F.firebaseDependencies);if(Pe){if(w(Pe.subscriptionOptions,ae))return Date.now()>=Pe.createTime+zo?N(F,{token:Pe.token,createTime:Date.now(),subscriptionOptions:ae}):Pe.token;try{yield Vr(F.firebaseDependencies,Pe.token)}catch(yt){console.warn(yt)}return Tt(F.firebaseDependencies,ae)}return Tt(F.firebaseDependencies,ae)})).apply(this,arguments)}function z(F){return L.apply(this,arguments)}function L(){return(L=(0,q.Z)(function*(F){const H=yield V(F.firebaseDependencies);H&&(yield Vr(F.firebaseDependencies,H.token),yield Be(F.firebaseDependencies));const ae=yield F.swRegistration.pushManager.getSubscription();return!ae||ae.unsubscribe()})).apply(this,arguments)}function N(F,H){return Y.apply(this,arguments)}function Y(){return(Y=(0,q.Z)(function*(F,H){try{const ae=yield dr(F.firebaseDependencies,H),Pe=Object.assign(Object.assign({},H),{token:ae,createTime:Date.now()});return yield U(F.firebaseDependencies,Pe),ae}catch(ae){throw yield z(F),ae}})).apply(this,arguments)}function Tt(F,H){return _n.apply(this,arguments)}function _n(){return(_n=(0,q.Z)(function*(F,H){const Pe={token:yield Jn(F,H),createTime:Date.now(),subscriptionOptions:H};return yield U(F,Pe),Pe.token})).apply(this,arguments)}function E(F,H){return G.apply(this,arguments)}function G(){return(G=(0,q.Z)(function*(F,H){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:eo(H)})})).apply(this,arguments)}function w(F,H){return H.vapidKey===F.vapidKey&&H.endpoint===F.endpoint&&H.auth===F.auth&&H.p256dh===F.p256dh}function B(F){const H={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function ce(F,H){if(!H.notification)return;F.notification={};const ae=H.notification.title;ae&&(F.notification.title=ae);const Pe=H.notification.body;Pe&&(F.notification.body=Pe);const yt=H.notification.image;yt&&(F.notification.image=yt)}(H,F),function Pt(F,H){!H.data||(F.data=H.data)}(H,F),function an(F,H){if(!H.fcmOptions)return;F.fcmOptions={};const ae=H.fcmOptions.link;ae&&(F.fcmOptions.link=ae);const Pe=H.fcmOptions.analytics_label;Pe&&(F.fcmOptions.analyticsLabel=Pe)}(H,F),H}function Mn(F){return"object"==typeof F&&!!F&&ws in F}function er(F,H){const ae=[];for(let Pe=0;Pe<F.length;Pe++)ae.push(F.charAt(Pe)),Pe<H.length&&ae.push(H.charAt(Pe));return ae.join("")}function tr(F){return Pn.create("missing-app-config-values",{valueName:F})}er("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),er("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ti{constructor(H,ae,Pe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const yt=function $r(F){if(!F||!F.options)throw tr("App Configuration Object");if(!F.name)throw tr("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:ae}=F;for(const Pe of H)if(!ae[Pe])throw tr(Pe);return{appName:F.name,projectId:ae.projectId,apiKey:ae.apiKey,appId:ae.appId,senderId:ae.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:yt,installations:ae,analyticsProvider:Pe}}_delete(){return Promise.resolve()}}function Ds(F){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,q.Z)(function*(F){try{F.swRegistration=yield navigator.serviceWorker.register(Ho,{scope:Pi}),F.swRegistration.update().catch(()=>{})}catch(H){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:H.message})}})).apply(this,arguments)}function ji(F,H){return to.apply(this,arguments)}function to(){return(to=(0,q.Z)(function*(F,H){if(!H&&!F.swRegistration&&(yield Ds(F)),H||!F.swRegistration){if(!(H instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");F.swRegistration=H}})).apply(this,arguments)}function ni(F,H){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,q.Z)(function*(F,H){H?F.vapidKey=H:F.vapidKey||(F.vapidKey=Jr)})).apply(this,arguments)}function Qa(){return(Qa=(0,q.Z)(function*(F,H){if(!navigator)throw Pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pn.create("permission-blocked");return yield ni(F,null==H?void 0:H.vapidKey),yield ji(F,null==H?void 0:H.serviceWorkerRegistration),Po(F)})).apply(this,arguments)}function Ja(F,H,ae){return vu.apply(this,arguments)}function vu(){return(vu=(0,q.Z)(function*(F,H,ae){const Pe=Ma(H);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(Pe,{message_id:ae[ws],message_name:ae[Is],message_time:ae[Go],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ma(F){switch(F){case Js.NOTIFICATION_CLICKED:return"notification_open";case Js.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function fa(){return(fa=(0,q.Z)(function*(F,H){const ae=H.data;if(!ae.isFirebaseMessaging)return;F.onMessageHandler&&ae.messageType===Js.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(B(ae)):F.onMessageHandler.next(B(ae)));const Pe=ae.data;Mn(Pe)&&"1"===Pe[Hs]&&(yield Ja(F,ae.messageType,Pe))})).apply(this,arguments)}const ko="@firebase/messaging",Wo=F=>{const H=new ti(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ae=>function Vl(F,H){return fa.apply(this,arguments)}(H,ae)),H},pa=F=>{const H=F.getProvider("messaging").getImmediate();return{getToken:Pe=>function Bl(F,H){return Qa.apply(this,arguments)}(H,Pe)}};function ra(){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,q.Z)(function*(){try{yield(0,Ae.eu)()}catch(F){return!1}return"undefined"!=typeof window&&(0,Ae.hl)()&&(0,Ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Eu(){(0,Se._registerComponent)(new Ee.wA("messaging",Wo,"PUBLIC")),(0,Se._registerComponent)(new Ee.wA("messaging-internal",pa,"PRIVATE")),(0,Se.registerVersion)(ko,"0.9.13"),(0,Se.registerVersion)(ko,"0.9.13","esm2017")}();const ma="analytics",Md="firebase_id",Eo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",us="https://www.googletagmanager.com/gtag/js",ns=new be.Yd("@firebase/analytics");function jl(F){return Promise.all(F.map(H=>H.catch(ae=>ae)))}function wo(F,H){const ae=document.createElement("script");ae.src=`${us}?l=${F}&id=${H}`,ae.async=!0,document.head.appendChild(ae)}function ia(F,H,ae,Pe,yt,Ot){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,q.Z)(function*(F,H,ae,Pe,yt,Ot){const tn=Pe[yt];try{if(tn)yield H[tn];else{const mr=(yield jl(ae)).find($n=>$n.measurementId===yt);mr&&(yield H[mr.appId])}}catch(dn){ns.error(dn)}F("config",yt,Ot)})).apply(this,arguments)}function tl(F,H,ae,Pe,yt){return sa.apply(this,arguments)}function sa(){return(sa=(0,q.Z)(function*(F,H,ae,Pe,yt){try{let Ot=[];if(yt&&yt.send_to){let tn=yt.send_to;Array.isArray(tn)||(tn=[tn]);const dn=yield jl(ae);for(const mr of tn){const $n=dn.find(Rn=>Rn.measurementId===mr),Kr=$n&&H[$n.appId];if(!Kr){Ot=[];break}Ot.push(Kr)}}0===Ot.length&&(Ot=Object.values(H)),yield Promise.all(Ot),F("event",Pe,yt||{})}catch(Ot){ns.error(Ot)}})).apply(this,arguments)}function Bc(){const F=window.document.getElementsByTagName("script");for(const H of Object.values(F))if(H.src&&H.src.includes(us))return H;return null}const ps=new Ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Fo=new class ro{constructor(H={},ae=1e3){this.throttleMetadata=H,this.intervalMillis=ae}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,ae){this.throttleMetadata[H]=ae}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function bu(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function Io(F){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,q.Z)(function*(F){var H;const{appId:ae,apiKey:Pe}=F,yt={method:"GET",headers:bu(Pe)},Ot=Eo.replace("{app-id}",ae),tn=yield fetch(Ot,yt);if(200!==tn.status&&304!==tn.status){let dn="";try{const mr=yield tn.json();(null===(H=mr.error)||void 0===H?void 0:H.message)&&(dn=mr.error.message)}catch(mr){}throw ps.create("config-fetch-failed",{httpStatus:tn.status,responseMessage:dn})}return tn.json()})).apply(this,arguments)}function Ci(F){return rl.apply(this,arguments)}function rl(){return(rl=(0,q.Z)(function*(F,H=Fo,ae){const{appId:Pe,apiKey:yt,measurementId:Ot}=F.options;if(!Pe)throw ps.create("no-app-id");if(!yt){if(Ot)return{measurementId:Ot,appId:Pe};throw ps.create("no-api-key")}const tn=H.getThrottleMetadata(Pe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},dn=new Du;return setTimeout((0,q.Z)(function*(){dn.abort()}),void 0!==ae?ae:6e4),ya({appId:Pe,apiKey:yt,measurementId:Ot},tn,dn,H)})).apply(this,arguments)}function ya(F,H,ae){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,q.Z)(function*(F,{throttleEndTimeMillis:H,backoffCount:ae},Pe,yt=Fo){const{appId:Ot,measurementId:tn}=F;try{yield Ko(Pe,H)}catch(dn){if(tn)return ns.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tn} provided in the "measurementId" field in the local Firebase config. [${dn.message}]`),{appId:Ot,measurementId:tn};throw dn}try{const dn=yield Io(F);return yt.deleteThrottleMetadata(Ot),dn}catch(dn){if(!bo(dn)){if(yt.deleteThrottleMetadata(Ot),tn)return ns.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tn} provided in the "measurementId" field in the local Firebase config. [${dn.message}]`),{appId:Ot,measurementId:tn};throw dn}const mr=503===Number(dn.customData.httpStatus)?(0,Ae.$s)(ae,yt.intervalMillis,30):(0,Ae.$s)(ae,yt.intervalMillis),$n={throttleEndTimeMillis:Date.now()+mr,backoffCount:ae+1};return yt.setThrottleMetadata(Ot,$n),ns.debug(`Calling attemptFetch again in ${mr} millis`),ya(F,$n,Pe,yt)}})).apply(this,arguments)}function Ko(F,H){return new Promise((ae,Pe)=>{const yt=Math.max(H-Date.now(),0),Ot=setTimeout(ae,yt);F.addEventListener(()=>{clearTimeout(Ot),Pe(ps.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}function bo(F){if(!(F instanceof Ae.ZR&&F.customData))return!1;const H=Number(F.customData.httpStatus);return 429===H||500===H||503===H||504===H}class Du{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}function Tu(){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,q.Z)(function*(){if(!(0,Ae.hl)())return ns.warn(ps.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ae.eu)()}catch(F){return ns.warn(ps.create("indexeddb-unavailable",{errorInfo:F}).message),!1}return!0})).apply(this,arguments)}function oa(){return(oa=(0,q.Z)(function*(F,H,ae,Pe,yt,Ot,tn){var dn;const mr=Ci(F);mr.then(si=>{ae[si.measurementId]=si.appId,F.options.measurementId&&si.measurementId!==F.options.measurementId&&ns.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${si.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(si=>ns.error(si)),H.push(mr);const $n=Tu().then(si=>{if(si)return Pe.getId()}),[Kr,Rn]=yield Promise.all([mr,$n]);Bc()||wo(Ot,Kr.measurementId),yt("js",new Date);const qs=null!==(dn=null==tn?void 0:tn.config)&&void 0!==dn?dn:{};return qs.origin="firebase",qs.update=!0,null!=Rn&&(qs[Md]=Rn),yt("config",Kr.measurementId,qs),Kr.measurementId})).apply(this,arguments)}class M{constructor(H){this.app=H}_delete(){return delete S[this.app.options.appId],Promise.resolve()}}let S={},D=[];const $={};let le,He,j="dataLayer",Ut=!1;function Vn(F,H,ae){!function vr(){const F=[];if((0,Ae.ru)()&&F.push("This is a browser extension environment."),(0,Ae.zI)()||F.push("Cookies are not available."),F.length>0){const H=F.map((Pe,yt)=>`(${yt+1}) ${Pe}`).join(" "),ae=ps.create("invalid-analytics-context",{errorInfo:H});ns.warn(ae.message)}}();const Pe=F.options.appId;if(!Pe)throw ps.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw ps.create("no-api-key");ns.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=S[Pe])throw ps.create("already-exists",{id:Pe});if(!Ut){!function po(F){let H=[];Array.isArray(window[F])?H=window[F]:window[F]=H}(j);const{wrappedGtag:Ot,gtagCore:tn}=function go(F,H,ae,Pe,yt){let Ot=function(...tn){window[Pe].push(arguments)};return window[yt]&&"function"==typeof window[yt]&&(Ot=window[yt]),window[yt]=function nl(F,H,ae,Pe){function Ot(){return(Ot=(0,q.Z)(function*(tn,dn,mr){try{"event"===tn?yield tl(F,H,ae,dn,mr):"config"===tn?yield ia(F,H,ae,Pe,dn,mr):F("set",dn)}catch($n){ns.error($n)}})).apply(this,arguments)}return function yt(tn,dn,mr){return Ot.apply(this,arguments)}}(Ot,F,H,ae),{gtagCore:Ot,wrappedGtag:window[yt]}}(S,D,$,j,"gtag");He=Ot,le=tn,Ut=!0}return S[Pe]=function ki(F,H,ae,Pe,yt,Ot,tn){return oa.apply(this,arguments)}(F,D,$,H,le,j,ae),new M(F)}function Xr(){return(Xr=(0,q.Z)(function*(F,H,ae,Pe,yt){if(yt&&yt.global)F("event",ae,Pe);else{const Ot=yield H;F("event",ae,Object.assign(Object.assign({},Pe),{send_to:Ot}))}})).apply(this,arguments)}function ar(){return va.apply(this,arguments)}function va(){return(va=(0,q.Z)(function*(){if((0,Ae.ru)()||!(0,Ae.zI)()||!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch(F){return!1}})).apply(this,arguments)}const Hi="@firebase/analytics";!function wh(){(0,Se._registerComponent)(new Ee.wA(ma,(H,{options:ae})=>Vn(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),ae),"PUBLIC")),(0,Se._registerComponent)(new Ee.wA("analytics-internal",function F(H){try{const ae=H.getProvider(ma).getImmediate();return{logEvent:(Pe,yt,Ot)=>function Xu(F,H,ae,Pe){F=(0,Ae.m9)(F),function Wr(F,H,ae,Pe,yt){return Xr.apply(this,arguments)}(He,S[F.app.options.appId],H,ae,Pe).catch(yt=>ns.error(yt))}(ae,Pe,yt,Ot)}}catch(ae){throw ps.create("interop-component-reg-failed",{reason:ae})}},"PRIVATE")),(0,Se.registerVersion)(Hi,"0.7.9"),(0,Se.registerVersion)(Hi,"0.7.9","esm2017")}();var Fr=P(4408),vi=P(7565);const xi=new class ii extends vi.v{}(class Qu extends Fr.o{constructor(H,ae){super(H,ae),this.scheduler=H,this.work=ae}schedule(H,ae=0){return ae>0?super.schedule(H,ae):(this.delay=ae,this.state=H,this.scheduler.flush(this),this)}execute(H,ae){return ae>0||this.closed?super.execute(H,ae):this._execute(H,ae)}requestAsyncId(H,ae,Pe=0){return null!=Pe&&Pe>0||null==Pe&&this.delay>0?super.requestAsyncId(H,ae,Pe):(H.flush(this),0)}});var pl=P(4986),io=P(8505),gs=P(5363),ds=P(9468);const so=new c.GfV("7.3.0"),aa="__angularfire_symbol__analyticsIsSupportedValue",la="__angularfire_symbol__analyticsIsSupported",un="__angularfire_symbol__remoteConfigIsSupportedValue",zs="__angularfire_symbol__remoteConfigIsSupported",qi="__angularfire_symbol__messagingIsSupportedValue",ka="__angularfire_symbol__messagingIsSupported";function Wl(F,H,ae){if(H){if(1===H.length)return H[0];const Ot=H.filter(tn=>tn.app===ae);if(1===Ot.length)return Ot[0]}return ae.container.getProvider(F).getImmediate({optional:!0})}globalThis[la]||(globalThis[la]=ar().then(F=>globalThis[aa]=F).catch(()=>globalThis[aa]=!1)),globalThis[ka]||(globalThis[ka]=ra().then(F=>globalThis[qi]=F).catch(()=>globalThis[qi]=!1)),globalThis[zs]||(globalThis[zs]=Qs().then(F=>globalThis[un]=F).catch(()=>globalThis[un]=!1));const Kl=(F,H)=>{const ae=H?[H]:(0,J.C6)(),Pe=[];return ae.forEach(yt=>{yt.container.getProvider(F).instances.forEach(tn=>{Pe.includes(tn)||Pe.push(tn)})}),Pe};function Ws(){}class Na{constructor(H,ae=xi){this.zone=H,this.delegate=ae}now(){return this.delegate.now()}schedule(H,ae,Pe){const yt=this.zone;return this.delegate.schedule(function(tn){yt.runGuarded(()=>{H.apply(this,[tn])})},ae,Pe)}}class ml{constructor(H){this.zone=H,this.task=null}call(H,ae){const Pe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ws,{},Ws,Ws)),ae.pipe((0,io.b)({next:Pe,complete:Pe,error:Pe})).subscribe(H).add(Pe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ql=(()=>{class F{constructor(ae){this.ngZone=ae,this.outsideAngular=ae.runOutsideAngular(()=>new Na(Zone.current)),this.insideAngular=ae.run(()=>new Na(Zone.current,pl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(ae){return new(ae||F)(c.LFG(c.R0b))},F.\u0275prov=c.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function Ea(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function Yo(F){return F.pipe((0,gs.Q)(Ea().outsideAngular))}function _l(F){return Ea(),function vl(F){return function(ae){return(ae=ae.lift(new ml(F.ngZone))).pipe((0,ds.R)(F.outsideAngular),(0,gs.Q)(F.insideAngular))}}(Ea())(F)}},2090:(Xt,ut,P)=>{"use strict";P.d(ut,{BH:()=>Oe,LL:()=>Xe,ZR:()=>Ne,gQ:()=>lr,zI:()=>he,hu:()=>J,g5:()=>q,US:()=>Ee,tV:()=>ze,h$:()=>be,L:()=>Re,$s:()=>fn,r3:()=>Gt,Sg:()=>Ue,ne:()=>Hn,p$:()=>pe,vZ:()=>Sn,ZB:()=>ye,gK:()=>fi,pd:()=>Yn,m9:()=>xr,z$:()=>tt,GJ:()=>at,jU:()=>ke,ru:()=>Ce,d:()=>ot,xb:()=>wt,w1:()=>Ye,hl:()=>ee,uI:()=>Le,UG:()=>De,Yr:()=>$e,b$:()=>nt,G6:()=>Ke,Mn:()=>We,w9:()=>gt,cI:()=>ct,UI:()=>kn,xO:()=>mn,zd:()=>jn,DV:()=>Nt,ug:()=>Et,dS:()=>At,Pz:()=>lt,Dv:()=>jr,Wj:()=>qe,lb:()=>Je,eu:()=>Qe});const J=function(we,je){if(!we)throw q(je)},q=function(we){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+we)},Se=function(we){const je=[];let Ze=0;for(let Mt=0;Mt<we.length;Mt++){let Fe=we.charCodeAt(Mt);Fe<128?je[Ze++]=Fe:Fe<2048?(je[Ze++]=Fe>>6|192,je[Ze++]=63&Fe|128):55296==(64512&Fe)&&Mt+1<we.length&&56320==(64512&we.charCodeAt(Mt+1))?(Fe=65536+((1023&Fe)<<10)+(1023&we.charCodeAt(++Mt)),je[Ze++]=Fe>>18|240,je[Ze++]=Fe>>12&63|128,je[Ze++]=Fe>>6&63|128,je[Ze++]=63&Fe|128):(je[Ze++]=Fe>>12|224,je[Ze++]=Fe>>6&63|128,je[Ze++]=63&Fe|128)}return je},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(we,je){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ze=je?this.byteToCharMapWebSafe_:this.byteToCharMap_,Mt=[];for(let Fe=0;Fe<we.length;Fe+=3){const mt=we[Fe],zt=Fe+1<we.length,rn=zt?we[Fe+1]:0,yn=Fe+2<we.length,vn=yn?we[Fe+2]:0;let rr=(15&rn)<<2|vn>>6,kr=63&vn;yn||(kr=64,zt||(rr=64)),Mt.push(Ze[mt>>2],Ze[(3&mt)<<4|rn>>4],Ze[rr],Ze[kr])}return Mt.join("")},encodeString(we,je){return this.HAS_NATIVE_SUPPORT&&!je?btoa(we):this.encodeByteArray(Se(we),je)},decodeString(we,je){return this.HAS_NATIVE_SUPPORT&&!je?atob(we):function(we){const je=[];let Ze=0,Mt=0;for(;Ze<we.length;){const Fe=we[Ze++];if(Fe<128)je[Mt++]=String.fromCharCode(Fe);else if(Fe>191&&Fe<224){const mt=we[Ze++];je[Mt++]=String.fromCharCode((31&Fe)<<6|63&mt)}else if(Fe>239&&Fe<365){const yn=((7&Fe)<<18|(63&we[Ze++])<<12|(63&we[Ze++])<<6|63&we[Ze++])-65536;je[Mt++]=String.fromCharCode(55296+(yn>>10)),je[Mt++]=String.fromCharCode(56320+(1023&yn))}else{const mt=we[Ze++],zt=we[Ze++];je[Mt++]=String.fromCharCode((15&Fe)<<12|(63&mt)<<6|63&zt)}}return je.join("")}(this.decodeStringToByteArray(we,je))},decodeStringToByteArray(we,je){this.init_();const Ze=je?this.charToByteMapWebSafe_:this.charToByteMap_,Mt=[];for(let Fe=0;Fe<we.length;){const mt=Ze[we.charAt(Fe++)],rn=Fe<we.length?Ze[we.charAt(Fe)]:0;++Fe;const vn=Fe<we.length?Ze[we.charAt(Fe)]:64;++Fe;const En=Fe<we.length?Ze[we.charAt(Fe)]:64;if(++Fe,null==mt||null==rn||null==vn||null==En)throw Error();Mt.push(mt<<2|rn>>4),64!==vn&&(Mt.push(rn<<4&240|vn>>2),64!==En&&Mt.push(vn<<6&192|En))}return Mt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}},be=function(we){const je=Se(we);return Ee.encodeByteArray(je,!0)},Re=function(we){return be(we).replace(/\./g,"")},ze=function(we){try{return Ee.decodeString(we,!0)}catch(je){console.error("base64Decode failed: ",je)}return null};function pe(we){return ye(void 0,we)}function ye(we,je){if(!(je instanceof Object))return je;switch(je.constructor){case Date:return new Date(je.getTime());case Object:void 0===we&&(we={});break;case Array:we=[];break;default:return je}for(const Ze in je)!je.hasOwnProperty(Ze)||!Me(Ze)||(we[Ze]=ye(we[Ze],je[Ze]));return we}function Me(we){return"__proto__"!==we}class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((je,Ze)=>{this.resolve=je,this.reject=Ze})}wrapCallback(je){return(Ze,Mt)=>{Ze?this.reject(Ze):this.resolve(Mt),"function"==typeof je&&(this.promise.catch(()=>{}),1===je.length?je(Ze):je(Ze,Mt))}}}function Ue(we,je){if(we.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Mt=je||"demo-project",Fe=we.iat||0,mt=we.sub||we.user_id;if(!mt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const zt=Object.assign({iss:`https://securetoken.google.com/${Mt}`,aud:Mt,iat:Fe,exp:Fe+3600,auth_time:Fe,sub:mt,user_id:mt,firebase:{sign_in_provider:"custom",identities:{}}},we);return[Re(JSON.stringify({alg:"none",type:"JWT"})),Re(JSON.stringify(zt)),""].join(".")}function tt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(we){return!1}}function ke(){return"object"==typeof self&&self.self===self}function Ce(){const we="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof we&&void 0!==we.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ot(){return tt().indexOf("Electron/")>=0}function Ye(){const we=tt();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function We(){return tt().indexOf("MSAppHost/")>=0}function $e(){return!1}function Ke(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"object"==typeof indexedDB}function Qe(){return new Promise((we,je)=>{try{let Ze=!0;const Mt="validate-browser-context-for-indexeddb-analytics-module",Fe=self.indexedDB.open(Mt);Fe.onsuccess=()=>{Fe.result.close(),Ze||self.indexedDB.deleteDatabase(Mt),we(!0)},Fe.onupgradeneeded=()=>{Ze=!1},Fe.onerror=()=>{var mt;je((null===(mt=Fe.error)||void 0===mt?void 0:mt.message)||"")}}catch(Ze){je(Ze)}})}function he(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(je,Ze,Mt){super(Ze),this.code=je,this.customData=Mt,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe.prototype.create)}}class Xe{constructor(je,Ze,Mt){this.service=je,this.serviceName=Ze,this.errors=Mt}create(je,...Ze){const Mt=Ze[0]||{},Fe=`${this.service}/${je}`,mt=this.errors[je],zt=mt?function _t(we,je){return we.replace(xt,(Ze,Mt)=>{const Fe=je[Mt];return null!=Fe?String(Fe):`<${Mt}?>`})}(mt,Mt):"Error";return new Ne(Fe,`${this.serviceName}: ${zt} (${Fe}).`,Mt)}}const xt=/\{\$([^}]+)}/g;function ct(we){return JSON.parse(we)}function lt(we){return JSON.stringify(we)}const Ve=function(we){let je={},Ze={},Mt={},Fe="";try{const mt=we.split(".");je=ct(ze(mt[0])||""),Ze=ct(ze(mt[1])||""),Fe=mt[2],Mt=Ze.d||{},delete Ze.d}catch(mt){}return{header:je,claims:Ze,data:Mt,signature:Fe}},gt=function(we){const Ze=Ve(we).claims;return!!Ze&&"object"==typeof Ze&&Ze.hasOwnProperty("iat")},at=function(we){const je=Ve(we).claims;return"object"==typeof je&&!0===je.admin};function Gt(we,je){return Object.prototype.hasOwnProperty.call(we,je)}function Nt(we,je){if(Object.prototype.hasOwnProperty.call(we,je))return we[je]}function wt(we){for(const je in we)if(Object.prototype.hasOwnProperty.call(we,je))return!1;return!0}function kn(we,je,Ze){const Mt={};for(const Fe in we)Object.prototype.hasOwnProperty.call(we,Fe)&&(Mt[Fe]=je.call(Ze,we[Fe],Fe,we));return Mt}function Sn(we,je){if(we===je)return!0;const Ze=Object.keys(we),Mt=Object.keys(je);for(const Fe of Ze){if(!Mt.includes(Fe))return!1;const mt=we[Fe],zt=je[Fe];if(Dn(mt)&&Dn(zt)){if(!Sn(mt,zt))return!1}else if(mt!==zt)return!1}for(const Fe of Mt)if(!Ze.includes(Fe))return!1;return!0}function Dn(we){return null!==we&&"object"==typeof we}function mn(we){const je=[];for(const[Ze,Mt]of Object.entries(we))Array.isArray(Mt)?Mt.forEach(Fe=>{je.push(encodeURIComponent(Ze)+"="+encodeURIComponent(Fe))}):je.push(encodeURIComponent(Ze)+"="+encodeURIComponent(Mt));return je.length?"&"+je.join("&"):""}function jn(we){const je={};return we.replace(/^\?/,"").split("&").forEach(Mt=>{if(Mt){const[Fe,mt]=Mt.split("=");je[decodeURIComponent(Fe)]=decodeURIComponent(mt)}}),je}function Yn(we){const je=we.indexOf("?");if(!je)return"";const Ze=we.indexOf("#",je);return we.substring(je,Ze>0?Ze:void 0)}class lr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let je=1;je<this.blockSize;++je)this.pad_[je]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(je,Ze){Ze||(Ze=0);const Mt=this.W_;if("string"==typeof je)for(let En=0;En<16;En++)Mt[En]=je.charCodeAt(Ze)<<24|je.charCodeAt(Ze+1)<<16|je.charCodeAt(Ze+2)<<8|je.charCodeAt(Ze+3),Ze+=4;else for(let En=0;En<16;En++)Mt[En]=je[Ze]<<24|je[Ze+1]<<16|je[Ze+2]<<8|je[Ze+3],Ze+=4;for(let En=16;En<80;En++){const rr=Mt[En-3]^Mt[En-8]^Mt[En-14]^Mt[En-16];Mt[En]=4294967295&(rr<<1|rr>>>31)}let vn,wr,Fe=this.chain_[0],mt=this.chain_[1],zt=this.chain_[2],rn=this.chain_[3],yn=this.chain_[4];for(let En=0;En<80;En++){En<40?En<20?(vn=rn^mt&(zt^rn),wr=1518500249):(vn=mt^zt^rn,wr=1859775393):En<60?(vn=mt&zt|rn&(mt|zt),wr=2400959708):(vn=mt^zt^rn,wr=3395469782);const rr=(Fe<<5|Fe>>>27)+vn+yn+wr+Mt[En]&4294967295;yn=rn,rn=zt,zt=4294967295&(mt<<30|mt>>>2),mt=Fe,Fe=rr}this.chain_[0]=this.chain_[0]+Fe&4294967295,this.chain_[1]=this.chain_[1]+mt&4294967295,this.chain_[2]=this.chain_[2]+zt&4294967295,this.chain_[3]=this.chain_[3]+rn&4294967295,this.chain_[4]=this.chain_[4]+yn&4294967295}update(je,Ze){if(null==je)return;void 0===Ze&&(Ze=je.length);const Mt=Ze-this.blockSize;let Fe=0;const mt=this.buf_;let zt=this.inbuf_;for(;Fe<Ze;){if(0===zt)for(;Fe<=Mt;)this.compress_(je,Fe),Fe+=this.blockSize;if("string"==typeof je){for(;Fe<Ze;)if(mt[zt]=je.charCodeAt(Fe),++zt,++Fe,zt===this.blockSize){this.compress_(mt),zt=0;break}}else for(;Fe<Ze;)if(mt[zt]=je[Fe],++zt,++Fe,zt===this.blockSize){this.compress_(mt),zt=0;break}}this.inbuf_=zt,this.total_+=Ze}digest(){const je=[];let Ze=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Fe=this.blockSize-1;Fe>=56;Fe--)this.buf_[Fe]=255&Ze,Ze/=256;this.compress_(this.buf_);let Mt=0;for(let Fe=0;Fe<5;Fe++)for(let mt=24;mt>=0;mt-=8)je[Mt]=this.chain_[Fe]>>mt&255,++Mt;return je}}function Hn(we,je){const Ze=new In(we,je);return Ze.subscribe.bind(Ze)}class In{constructor(je,Ze){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ze,this.task.then(()=>{je(this)}).catch(Mt=>{this.error(Mt)})}next(je){this.forEachObserver(Ze=>{Ze.next(je)})}error(je){this.forEachObserver(Ze=>{Ze.error(je)}),this.close(je)}complete(){this.forEachObserver(je=>{je.complete()}),this.close()}subscribe(je,Ze,Mt){let Fe;if(void 0===je&&void 0===Ze&&void 0===Mt)throw new Error("Missing Observer.");Fe=function On(we,je){if("object"!=typeof we||null===we)return!1;for(const Ze of je)if(Ze in we&&"function"==typeof we[Ze])return!0;return!1}(je,["next","error","complete"])?je:{next:je,error:Ze,complete:Mt},void 0===Fe.next&&(Fe.next=Nn),void 0===Fe.error&&(Fe.error=Nn),void 0===Fe.complete&&(Fe.complete=Nn);const mt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Fe.error(this.finalError):Fe.complete()}catch(zt){}}),this.observers.push(Fe),mt}unsubscribeOne(je){void 0===this.observers||void 0===this.observers[je]||(delete this.observers[je],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(je){if(!this.finalized)for(let Ze=0;Ze<this.observers.length;Ze++)this.sendOne(Ze,je)}sendOne(je,Ze){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[je])try{Ze(this.observers[je])}catch(Mt){"undefined"!=typeof console&&console.error&&console.error(Mt)}})}close(je){this.finalized||(this.finalized=!0,void 0!==je&&(this.finalError=je),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nn(){}const jr=function(we,je,Ze,Mt){let Fe;if(Mt<je?Fe="at least "+je:Mt>Ze&&(Fe=0===Ze?"none":"no more than "+Ze),Fe)throw new Error(we+" failed: Was called with "+Mt+(1===Mt?" argument.":" arguments.")+" Expects "+Fe+".")};function fi(we,je){return`${we} failed: ${je} argument `}function qe(we,je,Ze,Mt){if((!Mt||Ze)&&"function"!=typeof Ze)throw new Error(fi(we,je)+"must be a valid function.")}function Je(we,je,Ze,Mt){if((!Mt||Ze)&&("object"!=typeof Ze||null===Ze))throw new Error(fi(we,je)+"must be a valid context object.")}const At=function(we){const je=[];let Ze=0;for(let Mt=0;Mt<we.length;Mt++){let Fe=we.charCodeAt(Mt);if(Fe>=55296&&Fe<=56319){const mt=Fe-55296;Mt++,J(Mt<we.length,"Surrogate pair missing trail surrogate."),Fe=65536+(mt<<10)+(we.charCodeAt(Mt)-56320)}Fe<128?je[Ze++]=Fe:Fe<2048?(je[Ze++]=Fe>>6|192,je[Ze++]=63&Fe|128):Fe<65536?(je[Ze++]=Fe>>12|224,je[Ze++]=Fe>>6&63|128,je[Ze++]=63&Fe|128):(je[Ze++]=Fe>>18|240,je[Ze++]=Fe>>12&63|128,je[Ze++]=Fe>>6&63|128,je[Ze++]=63&Fe|128)}return je},Et=function(we){let je=0;for(let Ze=0;Ze<we.length;Ze++){const Mt=we.charCodeAt(Ze);Mt<128?je++:Mt<2048?je+=2:Mt>=55296&&Mt<=56319?(je+=4,Ze++):je+=3}return je};function fn(we,je=1e3,Ze=2){const Mt=je*Math.pow(Ze,we),Fe=Math.round(.5*Mt*(Math.random()-.5)*2);return Math.min(144e5,Mt+Fe)}function xr(we){return we&&we._delegate?we._delegate:we}},8161:(Xt,ut,P)=>{"use strict";P.d(ut,{Br:()=>Vr,dr:()=>fn,BJ:()=>ei,oU:()=>fr,cs:()=>V,yp:()=>we,YG:()=>Mt,Sm:()=>Fe,PM:()=>mt,FN:()=>zt,Zi:()=>rn,Dq:()=>vn,wI:()=>rr,W2:()=>kr,IJ:()=>Gr,W4:()=>Bn,fr:()=>Yr,jY:()=>Hr,Gu:()=>$i,gu:()=>Nr,pK:()=>yi,Ie:()=>Sr,Q$:()=>Zn,q_:()=>Zr,uN:()=>zn,jP:()=>ls,Nd:()=>et,cJ:()=>_e,GO:()=>Te,yq:()=>nr,ZU:()=>ci,UN:()=>_r,yW:()=>Ii,Bs:()=>Ge,wd:()=>Dt,sr:()=>Zt,Pc:()=>_n,r4:()=>N,HT:()=>Ur,IN:()=>Tn,SH:()=>Qi,as:()=>jr,Dh:()=>xs,QI:()=>Bt,j9:()=>qe,yF:()=>zo});var c=P(5e3),J=P(2382),q=P(655),Se=P(8421),Ae=P(8306),Ee=P(5577),be=P(1144),Re=P(576),ze=P(3268);const pe=["addListener","removeListener"],ye=["addEventListener","removeEventListener"],Me=["on","off"];function Oe(E,G,w,B){if((0,Re.m)(w)&&(B=w,w=void 0),B)return Oe(E,G,w).pipe((0,ze.Z)(B));const[ce,Pt]=function De(E){return(0,Re.m)(E.addEventListener)&&(0,Re.m)(E.removeEventListener)}(E)?ye.map(an=>Mn=>E[an](G,Mn,w)):function tt(E){return(0,Re.m)(E.addListener)&&(0,Re.m)(E.removeListener)}(E)?pe.map(Ue(E,G)):function Le(E){return(0,Re.m)(E.on)&&(0,Re.m)(E.off)}(E)?Me.map(Ue(E,G)):[];if(!ce&&(0,be.z)(E))return(0,Ee.z)(an=>Oe(an,G,w))((0,Se.Xf)(E));if(!ce)throw new TypeError("Invalid event target");return new Ae.y(an=>{const Mn=(...er)=>an.next(1<er.length?er:er[0]);return ce(Mn),()=>Pt(Mn)})}function Ue(E,G){return w=>B=>E[w](G,B)}var ke=P(7579),Ce=P(1135),nt=P(6115),$e=(P(1815),P(6447),P(3139),P(6254)),Ke=P(3756),ee=P(4318),he=(P(7726),P(599)),ge=(P(3509),P(2361)),lt=P(9300),Ve=P(3900),It=P(1884),dt=P(9808);const at=$e.i,wt=["*"],kn=["outlet"],Sn=[[["","slot","top"]],"*"],Dn=["[slot=top]","*"],Yn=E=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(E):"function"==typeof requestAnimationFrame?requestAnimationFrame(E):setTimeout(E);let lr=(()=>{class E{constructor(w,B){this.injector=w,this.el=B,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(w){this.el.nativeElement.value=this.lastValue=null==w?"":w,Hn(this.el)}handleChangeEvent(w,B){w===this.el.nativeElement&&(B!==this.lastValue&&(this.lastValue=B,this.onChange(B)),Hn(this.el))}_handleBlurEvent(w){w===this.el.nativeElement&&(this.onTouched(),Hn(this.el))}registerOnChange(w){this.onChange=w}registerOnTouched(w){this.onTouched=w}setDisabledState(w){this.el.nativeElement.disabled=w}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let w;try{w=this.injector.get(J.a5)}catch(ce){}if(!w)return;w.statusChanges&&(this.statusChanges=w.statusChanges.subscribe(()=>Hn(this.el)));const B=w.control;B&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Pt=>{if(void 0!==B[Pt]){const an=B[Pt].bind(B);B[Pt]=(...Mn)=>{an(...Mn),Hn(this.el)}}})}}return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.zs3),c.Y36(c.SBq))},E.\u0275dir=c.lG2({type:E,hostBindings:function(w,B){1&w&&c.NdJ("ionBlur",function(Pt){return B._handleBlurEvent(Pt.target)})}}),E})();const Hn=E=>{Yn(()=>{const G=E.nativeElement,w=null!=G.value&&G.value.toString().length>0,B=In(G);Qn(G,B);const ce=G.closest("ion-item");ce&&Qn(ce,w?[...B,"item-has-value"]:B)})},In=E=>{const G=E.classList,w=[];for(let B=0;B<G.length;B++){const ce=G.item(B);null!==ce&&On(ce,"ng-")&&w.push(`ion-${ce.substring(3)}`)}return w},Qn=(E,G)=>{const w=E.classList;w.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),w.add(...G)},On=(E,G)=>E.substring(0,G.length)===G;let jr=(()=>{class E extends lr{constructor(w,B){super(w,B)}_handleIonChange(w){this.handleChangeEvent(w,w.value)}registerOnChange(w){super.registerOnChange(B=>{w(""===B?null:parseFloat(B))})}}return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.zs3),c.Y36(c.SBq))},E.\u0275dir=c.lG2({type:E,selectors:[["ion-input","type","number"]],hostBindings:function(w,B){1&w&&c.NdJ("ionChange",function(Pt){return B._handleIonChange(Pt.target)})},features:[c._Bn([{provide:J.JU,useExisting:E,multi:!0}]),c.qOj]}),E})(),Bt=(()=>{class E extends lr{constructor(w,B){super(w,B)}_handleChangeEvent(w){this.handleChangeEvent(w,w.value)}}return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.zs3),c.Y36(c.SBq))},E.\u0275dir=c.lG2({type:E,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(w,B){1&w&&c.NdJ("ionChange",function(Pt){return B._handleChangeEvent(Pt.target)})},features:[c._Bn([{provide:J.JU,useExisting:E,multi:!0}]),c.qOj]}),E})(),qe=(()=>{class E extends lr{constructor(w,B){super(w,B)}_handleInputEvent(w){this.handleChangeEvent(w,w.value)}}return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.zs3),c.Y36(c.SBq))},E.\u0275dir=c.lG2({type:E,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(w,B){1&w&&c.NdJ("ionChange",function(Pt){return B._handleInputEvent(Pt.target)})},features:[c._Bn([{provide:J.JU,useExisting:E,multi:!0}]),c.qOj]}),E})();const Je=(E,G)=>{const w=E.prototype;G.forEach(B=>{Object.defineProperty(w,B,{get(){return this.el[B]},set(ce){this.z.runOutsideAngular(()=>this.el[B]=ce)}})})},At=(E,G)=>{const w=E.prototype;G.forEach(B=>{w[B]=function(){const ce=arguments;return this.z.runOutsideAngular(()=>this.el[B].apply(this.el,ce))}})},Et=(E,G,w)=>{w.forEach(B=>E[B]=Oe(G,B))};function bt(E){return function(w){const{defineCustomElementFn:B,inputs:ce,methods:Pt}=E;return void 0!==B&&B(),ce&&Je(w,ce),Pt&&At(w,Pt),w}}let fn=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-app"]],ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0})],E),E})(),ei=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-avatar"]],ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0})],E),E})(),fr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],E),E})(),we=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-badge"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","mode"]})],E),E})(),Mt=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement,Et(this,this.el,["ionFocus","ionBlur"])}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],E),E})(),Fe=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["collapse"]})],E),E})(),mt=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],E),E})(),zt=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["mode"]})],E),E})(),rn=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","mode","translucent"]})],E),E})(),vn=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","mode"]})],E),E})(),rr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],E),E})(),kr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement,Et(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],E),E})(),Gr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],E),E})(),Bn=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement,Et(this,this.el,["ionFocus","ionBlur"])}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],E),E})(),Yr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],E),E})(),Hr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["fixed"]})],E),E})(),$i=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],E),E})(),Nr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],E),E})(),yi=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement,Et(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],E),E})(),Sr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],E),E})(),Zn=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],E),E})(),Zr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],E),E})(),zn=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","mode"]})],E),E})(),et=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-row"]],ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0})],E),E})(),_e=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement,Et(this,this.el,["ionChange"])}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-segment"]],inputs:{color:"color",disabled:"disabled",mode:"mode",scrollable:"scrollable",selectOnFocus:"selectOnFocus",swipeGesture:"swipeGesture",value:"value"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","disabled","mode","scrollable","selectOnFocus","swipeGesture","value"]})],E),E})(),Te=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-segment-button"]],inputs:{disabled:"disabled",layout:"layout",mode:"mode",type:"type",value:"value"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["disabled","layout","mode","type","value"]})],E),E})(),nr=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","mode","selectedTab","translucent"]})],E),E})(),ci=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],E),E})(),Ii=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","mode"]})],E),E})(),Ge=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-thumbnail"]],ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0})],E),E})(),Dt=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","size"]})],E),E})(),Zt=(()=>{let E=class{constructor(w,B,ce){this.z=ce,w.detach(),this.el=B.nativeElement}};return E.\u0275fac=function(w){return new(w||E)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:wt,decls:1,vars:0,template:function(w,B){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,q.gn)([bt({defineCustomElementFn:void 0,inputs:["color","mode"]})],E),E})();class pn{constructor(G={}){this.data=G}get(G){return this.data[G]}}let cr=(()=>{class E{constructor(w,B){this.zone=w,this.appRef=B}create(w,B,ce){return new bi(w,B,ce,this.appRef,this.zone)}}return E.\u0275fac=function(w){return new(w||E)(c.LFG(c.R0b),c.LFG(c.z2F))},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac}),E})();class bi{constructor(G,w,B,ce,Pt){this.resolver=G,this.injector=w,this.location=B,this.appRef=ce,this.zone=Pt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(G,w,B,ce){return this.zone.run(()=>new Promise(Pt=>{Pt(Dr(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,G,w,B,ce))}))}removeViewFromDom(G,w){return this.zone.run(()=>new Promise(B=>{const ce=this.elRefMap.get(w);if(ce){ce.destroy(),this.elRefMap.delete(w);const Pt=this.elEventsMap.get(w);Pt&&(Pt(),this.elEventsMap.delete(w))}B()}))}}const Dr=(E,G,w,B,ce,Pt,an,Mn,er,$r,tr)=>{const ti=G.resolveComponentFactory(er),Ds=c.zs3.create({providers:na($r),parent:w}),Wi=B?B.createComponent(ti,B.length,Ds):ti.create(Ds),ji=Wi.instance,to=Wi.location.nativeElement;if($r&&Object.assign(ji,$r),tr)for(const Xa of tr)to.classList.add(Xa);const ni=js(E,ji,to);return Mn.appendChild(to),B||ce.attachView(Wi.hostView),Wi.changeDetectorRef.reattach(),Pt.set(to,Wi),an.set(to,ni),to},is=[ee.L,ee.a,ee.b,ee.c,ee.d],js=(E,G,w)=>E.run(()=>{const B=is.filter(ce=>"function"==typeof G[ce]).map(ce=>{const Pt=an=>G[ce](an.detail);return w.addEventListener(ce,Pt),()=>w.removeEventListener(ce,Pt)});return()=>B.forEach(ce=>ce())}),Ai=new c.OlP("NavParamsToken"),na=E=>[{provide:Ai,useValue:E},{provide:pn,useFactory:Es,deps:[Ai]}],Es=E=>new pn(E),fo=(E,G)=>((E=E.filter(w=>w.stackId!==G.stackId)).push(G),E),Jr=(E,G)=>{const w=E.createUrlTree(["."],{relativeTo:G});return E.serializeUrl(w)},ws=(E,G)=>{if(!E)return;const w=Is(G);for(let B=0;B<w.length;B++){if(B>=E.length)return w[B];if(w[B]!==E[B])return}},Is=E=>E.split("/").map(G=>G.trim()).filter(G=>""!==G),Go=E=>{E&&(E.ref.destroy(),E.unlistenEvents())};class Hs{constructor(G,w,B,ce,Pt,an){this.containerEl=w,this.router=B,this.navCtrl=ce,this.zone=Pt,this.location=an,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==G?Is(G):void 0}createView(G,w){var B;const ce=Jr(this.router,w),Pt=null===(B=null==G?void 0:G.location)||void 0===B?void 0:B.nativeElement,an=js(this.zone,G.instance,Pt);return{id:this.nextId++,stackId:ws(this.tabsPrefix,ce),unlistenEvents:an,element:Pt,ref:G,url:ce}}getExistingView(G){const w=Jr(this.router,G),B=this.views.find(ce=>ce.url===w);return B&&B.ref.changeDetectorRef.reattach(),B}setActive(G){var w,B;const ce=this.navCtrl.consumeTransition();let{direction:Pt,animation:an,animationBuilder:Mn}=ce;const er=this.activeView,$r=((E,G)=>!G||E.stackId!==G.stackId)(G,er);$r&&(Pt="back",an=void 0);const tr=this.views.slice();let ti;const Ds=this.router;Ds.getCurrentNavigation?ti=Ds.getCurrentNavigation():(null===(w=Ds.navigations)||void 0===w?void 0:w.value)&&(ti=Ds.navigations.value),(null===(B=null==ti?void 0:ti.extras)||void 0===B?void 0:B.replaceUrl)&&this.views.length>0&&this.views.splice(-1,1);const Wi=this.views.includes(G),ji=this.insertView(G,Pt);Wi||G.ref.changeDetectorRef.detectChanges();const to=G.animationBuilder;return void 0===Mn&&"back"===Pt&&!$r&&void 0!==to&&(Mn=to),er&&(er.animationBuilder=Mn),this.zone.runOutsideAngular(()=>this.wait(()=>(er&&er.ref.changeDetectorRef.detach(),G.ref.changeDetectorRef.reattach(),this.transition(G,er,an,this.canGoBack(1),!1,Mn).then(()=>os(G,ji,tr,this.location,this.zone)).then(()=>({enteringView:G,direction:Pt,animation:an,tabSwitch:$r})))))}canGoBack(G,w=this.getActiveStackId()){return this.getStack(w).length>G}pop(G,w=this.getActiveStackId()){return this.zone.run(()=>{var B,ce;const Pt=this.getStack(w);if(Pt.length<=G)return Promise.resolve(!1);const an=Pt[Pt.length-G-1];let Mn=an.url;const er=an.savedData;if(er){const tr=er.get("primary");(null===(ce=null===(B=null==tr?void 0:tr.route)||void 0===B?void 0:B._routerState)||void 0===ce?void 0:ce.snapshot.url)&&(Mn=tr.route._routerState.snapshot.url)}const{animationBuilder:$r}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Mn,Object.assign(Object.assign({},an.savedExtras),{animation:$r})).then(()=>!0)})}startBackTransition(){const G=this.activeView;if(G){const w=this.getStack(G.stackId),B=w[w.length-2],ce=B.animationBuilder;return this.wait(()=>this.transition(B,G,"back",this.canGoBack(2),!0,ce))}return Promise.resolve()}endBackTransition(G){G?(this.skipTransition=!0,this.pop(1)):this.activeView&&Js(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(G){const w=this.getStack(G);return w.length>0?w[w.length-1]:void 0}getRootUrl(G){const w=this.getStack(G);return w.length>0?w[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Go),this.activeView=void 0,this.views=[]}getStack(G){return this.views.filter(w=>w.stackId===G)}insertView(G,w){return this.activeView=G,this.views=((E,G,w)=>"root"===w?fo(E,G):"forward"===w?((E,G)=>(E.indexOf(G)>=0?E=E.filter(B=>B.stackId!==G.stackId||B.id<=G.id):E.push(G),E))(E,G):((E,G)=>E.indexOf(G)>=0?E.filter(B=>B.stackId!==G.stackId||B.id<=G.id):fo(E,G))(E,G))(this.views,G,w),this.views.slice()}transition(G,w,B,ce,Pt,an){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(w===G)return Promise.resolve(!1);const Mn=G?G.element:void 0,er=w?w.element:void 0,$r=this.containerEl;return Mn&&Mn!==er&&(Mn.classList.add("ion-page"),Mn.classList.add("ion-page-invisible"),Mn.parentElement!==$r&&$r.appendChild(Mn),$r.commit)?$r.commit(Mn,er,{deepWait:!0,duration:void 0===B?0:void 0,direction:B,showGoBack:ce,progressAnimation:Pt,animationBuilder:an}):Promise.resolve(!1)}wait(G){return(0,q.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const w=this.runningTask=G();return w.finally(()=>this.runningTask=void 0),w})}}const os=(E,G,w,B,ce)=>"function"==typeof requestAnimationFrame?new Promise(Pt=>{requestAnimationFrame(()=>{Js(E,G,w,B,ce),Pt()})}):Promise.resolve(),Js=(E,G,w,B,ce)=>{ce.run(()=>w.filter(Pt=>!G.includes(Pt)).forEach(Go)),G.forEach(Pt=>{const Mn=B.path().split("?")[0].split("#")[0];if(Pt!==E&&Pt.url!==Mn){const er=Pt.element;er.setAttribute("aria-hidden","true"),er.classList.add("ion-page-hidden"),Pt.ref.changeDetectorRef.detach()}})};let Bi=(()=>{class E{get(w,B){const ce=Tr();return ce?ce.get(w,B):null}getBoolean(w,B){const ce=Tr();return!!ce&&ce.getBoolean(w,B)}getNumber(w,B){const ce=Tr();return ce?ce.getNumber(w,B):0}}return E.\u0275fac=function(w){return new(w||E)},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const eo=new c.OlP("USERCONFIG"),Tr=()=>{if("undefined"!=typeof window){const E=window.Ionic;if(null==E?void 0:E.config)return E.config}return null};let bs=(()=>{class E{constructor(w,B){this.doc=w,this.backButton=new ke.x,this.keyboardDidShow=new ke.x,this.keyboardDidHide=new ke.x,this.pause=new ke.x,this.resume=new ke.x,this.resize=new ke.x,B.run(()=>{var ce;let Pt;this.win=w.defaultView,this.backButton.subscribeWithPriority=function(an,Mn){return this.subscribe(er=>er.register(an,$r=>B.run(()=>Mn($r))))},Xi(this.pause,w,"pause"),Xi(this.resume,w,"resume"),Xi(this.backButton,w,"ionBackButton"),Xi(this.resize,this.win,"resize"),Xi(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Xi(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(an=>{Pt=an}),(null===(ce=this.win)||void 0===ce?void 0:ce.cordova)?w.addEventListener("deviceready",()=>{Pt("cordova")},{once:!0}):Pt("dom")})}is(w){return(0,$e.a)(this.win,w)}platforms(){return(0,$e.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(w){return as(this.win.location.href,w)}isLandscape(){return!this.isPortrait()}isPortrait(){var w,B;return null===(B=(w=this.win).matchMedia)||void 0===B?void 0:B.call(w,"(orientation: portrait)").matches}testUserAgent(w){const B=this.win.navigator;return!!((null==B?void 0:B.userAgent)&&B.userAgent.indexOf(w)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return E.\u0275fac=function(w){return new(w||E)(c.LFG(dt.K0),c.LFG(c.R0b))},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const as=(E,G)=>{G=G.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");const B=new RegExp("[\\?&]"+G+"=([^&#]*)").exec(E);return B?decodeURIComponent(B[1].replace(/\+/g," ")):null},Xi=(E,G,w)=>{G&&G.addEventListener(w,B=>{E.next(null!=B?B.detail:void 0)})};let Qi=(()=>{class E{constructor(w,B,ce,Pt){this.location=B,this.serializer=ce,this.router=Pt,this.direction=zr,this.animated=Ji,this.guessDirection="forward",this.lastNavId=-1,Pt&&Pt.events.subscribe(an=>{if(an instanceof nt.OD){const Mn=an.restoredState?an.restoredState.navigationId:an.id;this.guessDirection=Mn<this.lastNavId?"back":"forward",this.guessAnimation=an.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?an.id:Mn}}),w.backButton.subscribeWithPriority(0,an=>{this.pop(),an()})}navigateForward(w,B={}){return this.setDirection("forward",B.animated,B.animationDirection,B.animation),this.navigate(w,B)}navigateBack(w,B={}){return this.setDirection("back",B.animated,B.animationDirection,B.animation),this.navigate(w,B)}navigateRoot(w,B={}){return this.setDirection("root",B.animated,B.animationDirection,B.animation),this.navigate(w,B)}back(w={animated:!0,animationDirection:"back"}){return this.setDirection("back",w.animated,w.animationDirection,w.animation),this.location.back()}pop(){return(0,q.mG)(this,void 0,void 0,function*(){let w=this.topOutlet;for(;w&&!(yield w.pop());)w=w.parentOutlet})}setDirection(w,B,ce,Pt){this.direction=w,this.animated=Oo(w,B,ce),this.animationBuilder=Pt}setTopOutlet(w){this.topOutlet=w}consumeTransition(){let B,w="root";const ce=this.animationBuilder;return"auto"===this.direction?(w=this.guessDirection,B=this.guessAnimation):(B=this.animated,w=this.direction),this.direction=zr,this.animated=Ji,this.animationBuilder=void 0,{direction:w,animation:B,animationBuilder:ce}}navigate(w,B){if(Array.isArray(w))return this.router.navigate(w,B);{const ce=this.serializer.parse(w.toString());return void 0!==B.queryParams&&(ce.queryParams=Object.assign({},B.queryParams)),void 0!==B.fragment&&(ce.fragment=B.fragment),this.router.navigateByUrl(ce,B)}}}return E.\u0275fac=function(w){return new(w||E)(c.LFG(bs),c.LFG(dt.Ye),c.LFG(nt.Hx),c.LFG(nt.F0,8))},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const Oo=(E,G,w)=>{if(!1!==G){if(void 0!==w)return w;if("forward"===E||"back"===E)return E;if("root"===E&&!0===G)return"forward"}},zr="auto",Ji=void 0;let ls=(()=>{class E{constructor(w,B,ce,Pt,an,Mn,er,$r,tr,ti,Ds,Wi,ji){this.parentContexts=w,this.location=B,this.resolver=ce,this.config=Mn,this.navCtrl=er,this.parentOutlet=ji,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Ce.X(null),this.stackEvents=new c.vpe,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.nativeEl=tr.nativeElement,this.name=Pt||nt.eC,this.tabsPrefix="true"===an?Jr(ti,Wi):void 0,this.stackCtrl=new Hs(this.tabsPrefix,this.nativeEl,ti,er,Ds,$r),w.onChildOutletCreated(this.name,this)}set animation(w){this.nativeEl.animation=w}set animated(w){this.nativeEl.animated=w}set swipeGesture(w){this._swipeGesture=w,this.nativeEl.swipeHandler=w?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:B=>this.stackCtrl.endBackTransition(B)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const w=this.getContext();(null==w?void 0:w.route)&&this.activateWith(w.route,w.resolver||null)}new Promise(w=>(0,Ke.c)(this.nativeEl,w)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(w,B){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const B=this.getContext();this.activatedView.savedData=new Map(B.children.contexts);const ce=this.activatedView.savedData.get("primary");if(ce&&B.route&&(ce.route=Object.assign({},B.route)),this.activatedView.savedExtras={},B.route){const Pt=B.route.snapshot;this.activatedView.savedExtras.queryParams=Pt.queryParams,this.activatedView.savedExtras.fragment=Pt.fragment}}const w=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,B){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=w;let ce,Pt=this.stackCtrl.getExistingView(w);if(Pt){ce=this.activated=Pt.ref;const an=Pt.savedData;an&&(this.getContext().children.contexts=an),this.updateActivatedRouteProxy(ce.instance,w)}else{const er=(B=B||this.resolver).resolveComponentFactory(w._futureSnapshot.routeConfig.component),$r=this.parentContexts.getOrCreateContext(this.name).children,tr=new Ce.X(null),ti=this.createActivatedRouteProxy(tr,w),Ds=new Cs(ti,$r,this.location.injector);ce=this.activated=this.location.createComponent(er,this.location.length,Ds),tr.next(ce.instance),Pt=this.stackCtrl.createView(this.activated,w),this.proxyMap.set(ce.instance,ti),this.currentActivatedRoute$.next({component:ce.instance,activatedRoute:w})}this.activatedView=Pt,this.stackCtrl.setActive(Pt).then(an=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(ce.instance),this.stackEvents.emit(an)})}canGoBack(w=1,B){return this.stackCtrl.canGoBack(w,B)}pop(w=1,B){return this.stackCtrl.pop(w,B)}getLastUrl(w){const B=this.stackCtrl.getLastUrl(w);return B?B.url:void 0}getLastRouteView(w){return this.stackCtrl.getLastUrl(w)}getRootView(w){return this.stackCtrl.getRootUrl(w)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(w,B){const ce=new nt.gz;return ce._futureSnapshot=B._futureSnapshot,ce._routerState=B._routerState,ce.snapshot=B.snapshot,ce.outlet=B.outlet,ce.component=B.component,ce._paramMap=this.proxyObservable(w,"paramMap"),ce._queryParamMap=this.proxyObservable(w,"queryParamMap"),ce.url=this.proxyObservable(w,"url"),ce.params=this.proxyObservable(w,"params"),ce.queryParams=this.proxyObservable(w,"queryParams"),ce.fragment=this.proxyObservable(w,"fragment"),ce.data=this.proxyObservable(w,"data"),ce}proxyObservable(w,B){return w.pipe((0,lt.h)(ce=>!!ce),(0,Ve.w)(ce=>this.currentActivatedRoute$.pipe((0,lt.h)(Pt=>null!==Pt&&Pt.component===ce),(0,Ve.w)(Pt=>Pt&&Pt.activatedRoute[B]),(0,It.x)())))}updateActivatedRouteProxy(w,B){const ce=this.proxyMap.get(w);if(!ce)throw new Error("Could not find activated route proxy for view");ce._futureSnapshot=B._futureSnapshot,ce._routerState=B._routerState,ce.snapshot=B.snapshot,ce.outlet=B.outlet,ce.component=B.component,this.currentActivatedRoute$.next({component:w,activatedRoute:B})}}return E.\u0275fac=function(w){return new(w||E)(c.Y36(nt.y6),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.$8M("tabs"),c.Y36(Bi),c.Y36(Qi),c.Y36(dt.Ye),c.Y36(c.SBq),c.Y36(nt.F0),c.Y36(c.R0b),c.Y36(nt.gz),c.Y36(E,12))},E.\u0275dir=c.lG2({type:E,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),E})();class Cs{constructor(G,w,B){this.route=G,this.childContexts=w,this.parent=B}get(G,w){return G===nt.gz?this.route:G===nt.y6?this.childContexts:this.parent.get(G,w)}}let _r=(()=>{class E{constructor(w){this.navCtrl=w,this.ionTabsWillChange=new c.vpe,this.ionTabsDidChange=new c.vpe}onPageSelected(w){const B=w.enteringView.stackId;w.tabSwitch&&void 0!==B&&(this.ionTabsWillChange.emit({tab:B}),this.tabBar&&(this.tabBar.selectedTab=B),this.ionTabsDidChange.emit({tab:B}))}select(w){const B="string"==typeof w,ce=B?w:w.detail.tab,Pt=this.outlet.getActiveStackId()===ce,an=`${this.outlet.tabsPrefix}/${ce}`;if(B||w.stopPropagation(),Pt){const Mn=this.outlet.getActiveStackId(),er=this.outlet.getLastRouteView(Mn);if((null==er?void 0:er.url)===an)return;const $r=this.outlet.getRootView(ce);return this.navCtrl.navigateRoot(an,Object.assign(Object.assign({},$r&&an===$r.url&&$r.savedExtras),{animated:!0,animationDirection:"back"}))}{const Mn=this.outlet.getLastRouteView(ce);return this.navCtrl.navigateRoot((null==Mn?void 0:Mn.url)||an,Object.assign(Object.assign({},null==Mn?void 0:Mn.savedExtras),{animated:!0,animationDirection:"back"}))}}getSelected(){return this.outlet.getActiveStackId()}}return E.\u0275fac=function(w){return new(w||E)(c.Y36(Qi))},E.\u0275cmp=c.Xpm({type:E,selectors:[["ion-tabs"]],contentQueries:function(w,B,ce){if(1&w&&c.Suo(ce,nr,5),2&w){let Pt;c.iGM(Pt=c.CRH())&&(B.tabBar=Pt.first)}},viewQuery:function(w,B){if(1&w&&c.Gf(kn,5,ls),2&w){let ce;c.iGM(ce=c.CRH())&&(B.outlet=ce.first)}},hostBindings:function(w,B){1&w&&c.NdJ("ionTabButtonClick",function(Pt){return B.select(Pt)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"},ngContentSelectors:Dn,decls:5,vars:0,consts:[[1,"tabs-inner"],["tabs","true",3,"stackEvents"],["outlet",""]],template:function(w,B){1&w&&(c.F$t(Sn),c.Hsn(0),c.TgZ(1,"div",0)(2,"ion-router-outlet",1,2),c.NdJ("stackEvents",function(Pt){return B.onPageSelected(Pt)}),c.qZA()(),c.Hsn(4,1))},directives:[ls],styles:["[_nghost-%COMP%] {\n        display: flex;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n\n        flex-direction: column;\n\n        width: 100%;\n        height: 100%;\n\n        contain: layout size style;\n        z-index: $z-index-page-container;\n      }\n      .tabs-inner[_ngcontent-%COMP%] {\n        position: relative;\n\n        flex: 1;\n\n        contain: layout size style;\n      }"]}),E})(),V=(()=>{class E{constructor(w,B,ce){this.routerOutlet=w,this.navCtrl=B,this.config=ce}onClick(w){var B;const ce=this.defaultHref||this.config.get("backButtonDefaultHref");(null===(B=this.routerOutlet)||void 0===B?void 0:B.canGoBack())?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),w.preventDefault()):null!=ce&&(this.navCtrl.navigateBack(ce,{animation:this.routerAnimation}),w.preventDefault())}}return E.\u0275fac=function(w){return new(w||E)(c.Y36(ls,8),c.Y36(Qi),c.Y36(Bi))},E.\u0275dir=c.lG2({type:E,selectors:[["ion-back-button"]],hostBindings:function(w,B){1&w&&c.NdJ("click",function(Pt){return B.onClick(Pt)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),E})();class dr{constructor(G){this.ctrl=G}create(G){return this.ctrl.create(G||{})}dismiss(G,w,B){return this.ctrl.dismiss(G,w,B)}getTop(){return this.ctrl.getTop()}}let Vr=(()=>{class E extends dr{constructor(){super(he.a)}}return E.\u0275fac=function(w){return new(w||E)},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})(),Ur=(()=>{class E extends dr{constructor(){super(he.l)}}return E.\u0275fac=function(w){return new(w||E)},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})(),Tn=(()=>{class E extends dr{constructor(w,B,ce){super(he.m),this.angularDelegate=w,this.resolver=B,this.injector=ce}create(w){return super.create(Object.assign(Object.assign({},w),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return E.\u0275fac=function(w){return new(w||E)(c.LFG(cr),c.LFG(c._Vd),c.LFG(c.zs3))},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac}),E})(),xs=(()=>{class E extends dr{constructor(w,B,ce){super(he.c),this.angularDelegate=w,this.resolver=B,this.injector=ce}create(w){return super.create(Object.assign(Object.assign({},w),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return E.\u0275fac=function(w){return new(w||E)(c.LFG(cr),c.LFG(c._Vd),c.LFG(c.zs3))},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac}),E})(),zo=(()=>{class E extends dr{constructor(){super(he.t)}}return E.\u0275fac=function(w){return new(w||E)},E.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();class N{shouldDetach(G){return!1}shouldAttach(G){return!1}store(G,w){}retrieve(G){return null}shouldReuseRoute(G,w){if(G.routeConfig!==w.routeConfig)return!1;const B=G.params,ce=w.params,Pt=Object.keys(B),an=Object.keys(ce);if(Pt.length!==an.length)return!1;for(const Mn of Pt)if(ce[Mn]!==B[Mn])return!1;return!0}}const Y=(E,G,w)=>()=>{if(G.defaultView&&"undefined"!=typeof window){(E=>{const G=window,w=G.Ionic;w&&w.config&&"Object"!==w.config.constructor.name||(G.Ionic=G.Ionic||{},G.Ionic.config=Object.assign(Object.assign({},G.Ionic.config),E))})(Object.assign(Object.assign({},E),{_zoneGate:Pt=>w.run(Pt)}));const ce="__zone_symbol__addEventListener"in G.body?"__zone_symbol__addEventListener":"addEventListener";return function gt(){var E=[];if("undefined"!=typeof window){var G=window;(!G.customElements||G.Element&&(!G.Element.prototype.closest||!G.Element.prototype.matches||!G.Element.prototype.remove||!G.Element.prototype.getRootNode))&&E.push(P.e(6748).then(P.t.bind(P,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||G.NodeList&&!G.NodeList.prototype.forEach||!G.fetch||!function(){try{var B=new URL("b","http://a");return B.pathname="c%20d","http://a/c%20d"===B.href&&B.searchParams}catch(ce){return!1}}()||"undefined"==typeof WeakMap)&&E.push(P.e(2214).then(P.t.bind(P,4144,23)))}return Promise.all(E)}().then(()=>((E,G)=>"undefined"==typeof window?Promise.resolve():(0,ge.p)().then(()=>(at(),(0,ge.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal"]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),G))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Yn,jmp:Pt=>w.runOutsideAngular(Pt),ael(Pt,an,Mn,er){Pt[ce](an,Mn,er)},rel(Pt,an,Mn,er){Pt.removeEventListener(an,Mn,er)}}))}};let _n=(()=>{class E{static forRoot(w){return{ngModule:E,providers:[{provide:eo,useValue:w},{provide:c.ip1,useFactory:Y,multi:!0,deps:[eo,dt.K0,c.R0b]}]}}}return E.\u0275fac=function(w){return new(w||E)},E.\u0275mod=c.oAB({type:E}),E.\u0275inj=c.cJS({providers:[cr,Tn,xs],imports:[[dt.ez]]}),E})()},9442:(Xt,ut,P)=>{"use strict";P.d(ut,{c:()=>tt});var c=P(3756);let J;const Se=Le=>Le.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ae=Le=>{if(void 0===J){const ke=void 0!==Le.style.webkitAnimationName;J=void 0===Le.style.animationName&&ke?"-webkit-":""}return J},Ee=(Le,De,ke)=>{const Ce=De.startsWith("animation")?Ae(Le):"";Le.style.setProperty(Ce+De,ke)},be=(Le,De)=>{const ke=De.startsWith("animation")?Ae(Le):"";Le.style.removeProperty(ke+De)},pe=[],Ue=(Le=[],De)=>{if(void 0!==De){const ke=Array.isArray(De)?De:[De];return[...Le,...ke]}return Le},tt=Le=>{let De,ke,Ce,nt,ot,Ye,Qe,ct,lt,Ve,It,Gt,Nt,We=[],$e=[],Ke=[],ee=!1,he={},me=[],ge=[],Ne={},Xe=0,_t=!1,xt=!1,dt=!0,gt=!1,at=!0,wt=!1;const kn=Le,Sn=[],Dn=[],mn=[],jn=[],Yn=[],lr=[],Hn=[],In=[],Qn=[],On=[],Nn="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,jr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Nn,Bt=()=>On,Kt=(_e,Te)=>(((null==Te?void 0:Te.oneTimeCallback)?Dn:Sn).push({c:_e,o:Te}),Nt),Un=()=>{if(jr)On.forEach(_e=>{_e.cancel()}),On.length=0;else{const _e=mn.slice();(0,c.r)(()=>{_e.forEach(Te=>{be(Te,"animation-name"),be(Te,"animation-duration"),be(Te,"animation-timing-function"),be(Te,"animation-iteration-count"),be(Te,"animation-delay"),be(Te,"animation-play-state"),be(Te,"animation-fill-mode"),be(Te,"animation-direction")})})}},Fn=()=>{Yn.forEach(_e=>{(null==_e?void 0:_e.parentNode)&&_e.parentNode.removeChild(_e)}),Yn.length=0},yn=()=>void 0!==ot?ot:Qe?Qe.getFill():"both",vn=()=>void 0!==lt?lt:void 0!==Ye?Ye:Qe?Qe.getDirection():"normal",wr=()=>_t?"linear":void 0!==Ce?Ce:Qe?Qe.getEasing():"linear",En=()=>xt?0:void 0!==Ve?Ve:void 0!==ke?ke:Qe?Qe.getDuration():0,rr=()=>void 0!==nt?nt:Qe?Qe.getIterations():1,kr=()=>void 0!==It?It:void 0!==De?De:Qe?Qe.getDelay():0,oi=()=>{0!==Xe&&(Xe--,0===Xe&&((()=>{Oi(),In.forEach(Rt=>Rt()),Qn.forEach(Rt=>Rt());const _e=dt?1:0,Te=me,pt=ge,Vt=Ne;mn.forEach(Rt=>{const Ft=Rt.classList;Te.forEach(ln=>Ft.add(ln)),pt.forEach(ln=>Ft.remove(ln));for(const ln in Vt)Vt.hasOwnProperty(ln)&&Ee(Rt,ln,Vt[ln])}),Sn.forEach(Rt=>Rt.c(_e,Nt)),Dn.forEach(Rt=>Rt.c(_e,Nt)),Dn.length=0,at=!0,dt&&(gt=!0),dt=!0})(),Qe&&Qe.animationFinish()))},Gn=(_e=!0)=>{Fn();const Te=(Le=>(Le.forEach(De=>{for(const ke in De)if(De.hasOwnProperty(ke)){const Ce=De[ke];if("easing"===ke)De["animation-timing-function"]=Ce,delete De[ke];else{const nt=Se(ke);nt!==ke&&(De[nt]=Ce,delete De[ke])}}}),Le))(We);mn.forEach(pt=>{if(Te.length>0){const Vt=((Le=[])=>Le.map(De=>{const ke=De.offset,Ce=[];for(const nt in De)De.hasOwnProperty(nt)&&"offset"!==nt&&Ce.push(`${nt}: ${De[nt]};`);return`${100*ke}% { ${Ce.join(" ")} }`}).join(" "))(Te);Gt=void 0!==Le?Le:(Le=>{let De=pe.indexOf(Le);return De<0&&(De=pe.push(Le)-1),`ion-animation-${De}`})(Vt);const Rt=((Le,De,ke)=>{const Ce=(Le=>{const De=Le.getRootNode();return De.head||De})(ke),nt=Ae(ke),ot=Ce.querySelector("#"+Le);if(ot)return ot;const Ye=(ke.ownerDocument||document).createElement("style");return Ye.id=Le,Ye.textContent=`@${nt}keyframes ${Le} { ${De} } @${nt}keyframes ${Le}-alt { ${De} }`,Ce.appendChild(Ye),Ye})(Gt,Vt,pt);Yn.push(Rt),Ee(pt,"animation-duration",`${En()}ms`),Ee(pt,"animation-timing-function",wr()),Ee(pt,"animation-delay",`${kr()}ms`),Ee(pt,"animation-fill-mode",yn()),Ee(pt,"animation-direction",vn());const Ft=rr()===1/0?"infinite":rr().toString();Ee(pt,"animation-iteration-count",Ft),Ee(pt,"animation-play-state","paused"),_e&&Ee(pt,"animation-name",`${Rt.id}-alt`),(0,c.r)(()=>{Ee(pt,"animation-name",Rt.id||null)})}})},cn=(_e=!0)=>{(()=>{lr.forEach(Vt=>Vt()),Hn.forEach(Vt=>Vt());const _e=$e,Te=Ke,pt=he;mn.forEach(Vt=>{const Rt=Vt.classList;_e.forEach(Ft=>Rt.add(Ft)),Te.forEach(Ft=>Rt.remove(Ft));for(const Ft in pt)pt.hasOwnProperty(Ft)&&Ee(Vt,Ft,pt[Ft])})})(),We.length>0&&(jr?(mn.forEach(_e=>{const Te=_e.animate(We,{id:kn,delay:kr(),duration:En(),easing:wr(),iterations:rr(),fill:yn(),direction:vn()});Te.pause(),On.push(Te)}),On.length>0&&(On[0].onfinish=()=>{oi()})):Gn(_e)),ee=!0},Zn=_e=>{if(_e=Math.min(Math.max(_e,0),.9999),jr)On.forEach(Te=>{Te.currentTime=Te.effect.getComputedTiming().delay+En()*_e,Te.pause()});else{const Te=`-${En()*_e}ms`;mn.forEach(pt=>{We.length>0&&(Ee(pt,"animation-delay",Te),Ee(pt,"animation-play-state","paused"))})}},Zr=_e=>{On.forEach(Te=>{Te.effect.updateTiming({delay:kr(),duration:En(),easing:wr(),iterations:rr(),fill:yn(),direction:vn()})}),void 0!==_e&&Zn(_e)},ai=(_e=!0,Te)=>{(0,c.r)(()=>{mn.forEach(pt=>{Ee(pt,"animation-name",Gt||null),Ee(pt,"animation-duration",`${En()}ms`),Ee(pt,"animation-timing-function",wr()),Ee(pt,"animation-delay",void 0!==Te?`-${Te*En()}ms`:`${kr()}ms`),Ee(pt,"animation-fill-mode",yn()||null),Ee(pt,"animation-direction",vn()||null);const Vt=rr()===1/0?"infinite":rr().toString();Ee(pt,"animation-iteration-count",Vt),_e&&Ee(pt,"animation-name",`${Gt}-alt`),(0,c.r)(()=>{Ee(pt,"animation-name",Gt||null)})})})},ur=(_e=!1,Te=!0,pt)=>(_e&&jn.forEach(Vt=>{Vt.update(_e,Te,pt)}),jr?Zr(pt):ai(Te,pt),Nt),Mr=()=>{ee&&(jr?On.forEach(_e=>{_e.pause()}):mn.forEach(_e=>{Ee(_e,"animation-play-state","paused")}),wt=!0)},Li=()=>{ct=void 0,oi()},Oi=()=>{ct&&clearTimeout(ct)},Si=_e=>new Promise(Te=>{(null==_e?void 0:_e.sync)&&(xt=!0,Kt(()=>xt=!1,{oneTimeCallback:!0})),ee||cn(),gt&&(jr?(Zn(0),Zr()):ai(),gt=!1),at&&(Xe=jn.length+1,at=!1),Kt(()=>Te(),{oneTimeCallback:!0}),jn.forEach(pt=>{pt.play()}),jr?(On.forEach(_e=>{_e.play()}),(0===We.length||0===mn.length)&&oi()):(()=>{if(Oi(),(0,c.r)(()=>{mn.forEach(_e=>{We.length>0&&Ee(_e,"animation-play-state","running")})}),0===We.length||0===mn.length)oi();else{const _e=kr()||0,Te=En()||0,pt=rr()||1;isFinite(pt)&&(ct=setTimeout(Li,_e+Te*pt+100)),((Le,De)=>{let ke;const Ce={passive:!0},ot=Ye=>{Le===Ye.target&&(ke&&ke(),Oi(),(0,c.r)(()=>{mn.forEach(_e=>{be(_e,"animation-duration"),be(_e,"animation-delay"),be(_e,"animation-play-state")}),(0,c.r)(oi)}))};Le&&(Le.addEventListener("webkitAnimationEnd",ot,Ce),Le.addEventListener("animationend",ot,Ce),ke=()=>{Le.removeEventListener("webkitAnimationEnd",ot,Ce),Le.removeEventListener("animationend",ot,Ce)})})(mn[0])}})(),wt=!1}),fe=(_e,Te)=>{const pt=We[0];return void 0===pt||void 0!==pt.offset&&0!==pt.offset?We=[{offset:0,[_e]:Te},...We]:pt[_e]=Te,Nt};return Nt={parentAnimation:Qe,elements:mn,childAnimations:jn,id:kn,animationFinish:oi,from:fe,to:(_e,Te)=>{const pt=We[We.length-1];return void 0===pt||void 0!==pt.offset&&1!==pt.offset?We=[...We,{offset:1,[_e]:Te}]:pt[_e]=Te,Nt},fromTo:(_e,Te,pt)=>fe(_e,Te).to(_e,pt),parent:_e=>(Qe=_e,Nt),play:Si,pause:()=>(jn.forEach(_e=>{_e.pause()}),Mr(),Nt),stop:()=>{jn.forEach(_e=>{_e.stop()}),ee&&(Un(),ee=!1),_t=!1,xt=!1,at=!0,lt=void 0,Ve=void 0,It=void 0,Xe=0,gt=!1,dt=!0,wt=!1},destroy:_e=>(jn.forEach(Te=>{Te.destroy(_e)}),(_e=>{Un(),_e&&Fn()})(_e),mn.length=0,jn.length=0,We.length=0,Sn.length=0,Dn.length=0,ee=!1,at=!0,Nt),keyframes:_e=>{const Te=We!==_e;return We=_e,Te&&(_e=>{jr?Bt().forEach(Te=>{if(Te.effect.setKeyframes)Te.effect.setKeyframes(_e);else{const pt=new KeyframeEffect(Te.effect.target,_e,Te.effect.getTiming());Te.effect=pt}}):Gn()})(We),Nt},addAnimation:_e=>{if(null!=_e)if(Array.isArray(_e))for(const Te of _e)Te.parent(Nt),jn.push(Te);else _e.parent(Nt),jn.push(_e);return Nt},addElement:_e=>{if(null!=_e)if(1===_e.nodeType)mn.push(_e);else if(_e.length>=0)for(let Te=0;Te<_e.length;Te++)mn.push(_e[Te]);else console.error("Invalid addElement value");return Nt},update:ur,fill:_e=>(ot=_e,ur(!0),Nt),direction:_e=>(Ye=_e,ur(!0),Nt),iterations:_e=>(nt=_e,ur(!0),Nt),duration:_e=>(!jr&&0===_e&&(_e=1),ke=_e,ur(!0),Nt),easing:_e=>(Ce=_e,ur(!0),Nt),delay:_e=>(De=_e,ur(!0),Nt),getWebAnimations:Bt,getKeyframes:()=>We,getFill:yn,getDirection:vn,getDelay:kr,getIterations:rr,getEasing:wr,getDuration:En,afterAddRead:_e=>(In.push(_e),Nt),afterAddWrite:_e=>(Qn.push(_e),Nt),afterClearStyles:(_e=[])=>{for(const Te of _e)Ne[Te]="";return Nt},afterStyles:(_e={})=>(Ne=_e,Nt),afterRemoveClass:_e=>(ge=Ue(ge,_e),Nt),afterAddClass:_e=>(me=Ue(me,_e),Nt),beforeAddRead:_e=>(lr.push(_e),Nt),beforeAddWrite:_e=>(Hn.push(_e),Nt),beforeClearStyles:(_e=[])=>{for(const Te of _e)he[Te]="";return Nt},beforeStyles:(_e={})=>(he=_e,Nt),beforeRemoveClass:_e=>(Ke=Ue(Ke,_e),Nt),beforeAddClass:_e=>($e=Ue($e,_e),Nt),onFinish:Kt,isRunning:()=>0!==Xe&&!wt,progressStart:(_e=!1,Te)=>(jn.forEach(pt=>{pt.progressStart(_e,Te)}),Mr(),_t=_e,ee||cn(),ur(!1,!0,Te),Nt),progressStep:_e=>(jn.forEach(Te=>{Te.progressStep(_e)}),Zn(_e),Nt),progressEnd:(_e,Te,pt)=>(_t=!1,jn.forEach(Vt=>{Vt.progressEnd(_e,Te,pt)}),void 0!==pt&&(Ve=pt),gt=!1,dt=!0,0===_e?(lt="reverse"===vn()?"normal":"reverse","reverse"===lt&&(dt=!1),jr?(ur(),Zn(1-Te)):(It=(1-Te)*En()*-1,ur(!1,!1))):1===_e&&(jr?(ur(),Zn(Te)):(It=Te*En()*-1,ur(!1,!1))),void 0!==_e&&(Kt(()=>{Ve=void 0,lt=void 0,It=void 0},{oneTimeCallback:!0}),Qe||Si()),Nt)}}},3509:(Xt,ut,P)=>{"use strict";P.d(ut,{G:()=>Ae});class J{constructor(be,Re,ze,pe,ye){this.id=Re,this.name=ze,this.disableScroll=ye,this.priority=1e6*pe+Re,this.ctrl=be}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const be=this.ctrl.capture(this.name,this.id,this.priority);return be&&this.disableScroll&&this.ctrl.disableScroll(this.id),be}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class q{constructor(be,Re,ze,pe){this.id=Re,this.disable=ze,this.disableScroll=pe,this.ctrl=be}block(){if(this.ctrl){if(this.disable)for(const be of this.disable)this.ctrl.disableGesture(be,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const be of this.disable)this.ctrl.enableGesture(be,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Se="backdrop-no-scroll",Ae=new class c{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(be){return new J(this,this.newID(),be.name,be.priority||0,!!be.disableScroll)}createBlocker(be={}){return new q(this,this.newID(),be.disable,!!be.disableScroll)}start(be,Re,ze){return this.canStart(be)?(this.requestedStart.set(Re,ze),!0):(this.requestedStart.delete(Re),!1)}capture(be,Re,ze){if(!this.start(be,Re,ze))return!1;const pe=this.requestedStart;let ye=-1e4;if(pe.forEach(Me=>{ye=Math.max(ye,Me)}),ye===ze){this.capturedId=Re,pe.clear();const Me=new CustomEvent("ionGestureCaptured",{detail:{gestureName:be}});return document.dispatchEvent(Me),!0}return pe.delete(Re),!1}release(be){this.requestedStart.delete(be),this.capturedId===be&&(this.capturedId=void 0)}disableGesture(be,Re){let ze=this.disabledGestures.get(be);void 0===ze&&(ze=new Set,this.disabledGestures.set(be,ze)),ze.add(Re)}enableGesture(be,Re){const ze=this.disabledGestures.get(be);void 0!==ze&&ze.delete(Re)}disableScroll(be){this.disabledScroll.add(be),1===this.disabledScroll.size&&document.body.classList.add(Se)}enableScroll(be){this.disabledScroll.delete(be),0===this.disabledScroll.size&&document.body.classList.remove(Se)}canStart(be){return!(void 0!==this.capturedId||this.isDisabled(be))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(be){const Re=this.disabledGestures.get(be);return!!(Re&&Re.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(Xt,ut,P)=>{"use strict";P.r(ut),P.d(ut,{MENU_BACK_BUTTON_PRIORITY:()=>Ae,OVERLAY_BACK_BUTTON_PRIORITY:()=>Se,blockHardwareBackButton:()=>J,startHardwareBackButton:()=>q});var c=P(5861);const J=()=>{document.addEventListener("backbutton",()=>{})},q=()=>{const Ee=document;let be=!1;Ee.addEventListener("backbutton",()=>{if(be)return;let Re=0,ze=[];const pe=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Oe,Ue){ze.push({priority:Oe,handler:Ue,id:Re++})}}});Ee.dispatchEvent(pe);const ye=function(){var Oe=(0,c.Z)(function*(Ue){try{if(null==Ue?void 0:Ue.handler){const tt=Ue.handler(Me);null!=tt&&(yield tt)}}catch(tt){console.error(tt)}});return function(tt){return Oe.apply(this,arguments)}}(),Me=()=>{if(ze.length>0){let Oe={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ze.forEach(Ue=>{Ue.priority>=Oe.priority&&(Oe=Ue)}),be=!0,ze=ze.filter(Ue=>Ue.id!==Oe.id),ye(Oe).then(()=>be=!1)}};Me()})},Se=100,Ae=99},3756:(Xt,ut,P)=>{"use strict";P.d(ut,{a:()=>be,b:()=>Re,c:()=>q,d:()=>Ue,e:()=>tt,f:()=>Oe,g:()=>ze,h:()=>ot,i:()=>Ee,j:()=>Se,k:()=>Me,l:()=>Le,m:()=>ye,n:()=>De,o:()=>nt,p:()=>Ce,q:()=>Ye,r:()=>pe,s:()=>We,t:()=>c,u:()=>ke});const c=($e,Ke=0)=>new Promise(ee=>{J($e,Ke,ee)}),J=($e,Ke=0,ee)=>{let Qe,he;const me={passive:!0},Ne=()=>{Qe&&Qe()},Xe=_t=>{(void 0===_t||$e===_t.target)&&(Ne(),ee(_t))};return $e&&($e.addEventListener("webkitTransitionEnd",Xe,me),$e.addEventListener("transitionend",Xe,me),he=setTimeout(Xe,Ke+500),Qe=()=>{he&&(clearTimeout(he),he=void 0),$e.removeEventListener("webkitTransitionEnd",Xe,me),$e.removeEventListener("transitionend",Xe,me)}),Ne},q=($e,Ke)=>{$e.componentOnReady?$e.componentOnReady().then(ee=>Ke(ee)):pe(()=>Ke($e))},Se=($e,Ke=[])=>{const ee={};return Ke.forEach(Qe=>{$e.hasAttribute(Qe)&&(null!==$e.getAttribute(Qe)&&(ee[Qe]=$e.getAttribute(Qe)),$e.removeAttribute(Qe))}),ee},Ae=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Ee=$e=>Se($e,Ae),be=($e,Ke,ee,Qe)=>{var he;if("undefined"!=typeof window){const me=window,ge=null===(he=null==me?void 0:me.Ionic)||void 0===he?void 0:he.config;if(ge){const Ne=ge.get("_ael");if(Ne)return Ne($e,Ke,ee,Qe);if(ge._ael)return ge._ael($e,Ke,ee,Qe)}}return $e.addEventListener(Ke,ee,Qe)},Re=($e,Ke,ee,Qe)=>{var he;if("undefined"!=typeof window){const me=window,ge=null===(he=null==me?void 0:me.Ionic)||void 0===he?void 0:he.config;if(ge){const Ne=ge.get("_rel");if(Ne)return Ne($e,Ke,ee,Qe);if(ge._rel)return ge._rel($e,Ke,ee,Qe)}}return $e.removeEventListener(Ke,ee,Qe)},ze=($e,Ke=$e)=>$e.shadowRoot||Ke,pe=$e=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame($e):"function"==typeof requestAnimationFrame?requestAnimationFrame($e):setTimeout($e),ye=$e=>!!$e.shadowRoot&&!!$e.attachShadow,Me=$e=>{const Ke=$e.closest("ion-item");return Ke?Ke.querySelector("ion-label"):null},Oe=$e=>{if($e.focus(),$e.classList.contains("ion-focusable")){const Ke=$e.closest("ion-app");Ke&&Ke.setFocus([$e])}},Ue=($e,Ke)=>{let ee;const Qe=$e.getAttribute("aria-labelledby"),he=$e.id;let me=null!==Qe&&""!==Qe.trim()?Qe:Ke+"-lbl",ge=null!==Qe&&""!==Qe.trim()?document.getElementById(Qe):Me($e);return ge?(null===Qe&&(ge.id=me),ee=ge.textContent,ge.setAttribute("aria-hidden","true")):""!==he.trim()&&(ge=document.querySelector(`label[for="${he}"]`),ge&&(""!==ge.id?me=ge.id:ge.id=me=`${he}-lbl`,ee=ge.textContent)),{label:ge,labelId:me,labelText:ee}},tt=($e,Ke,ee,Qe,he)=>{if($e||ye(Ke)){let me=Ke.querySelector("input.aux-input");me||(me=Ke.ownerDocument.createElement("input"),me.type="hidden",me.classList.add("aux-input"),Ke.appendChild(me)),me.disabled=he,me.name=ee,me.value=Qe||""}},Le=($e,Ke,ee)=>Math.max($e,Math.min(Ke,ee)),De=($e,Ke)=>{if(!$e){const ee="ASSERT: "+Ke;throw console.error(ee),new Error(ee)}},ke=$e=>$e.timeStamp||Date.now(),Ce=$e=>{if($e){const Ke=$e.changedTouches;if(Ke&&Ke.length>0){const ee=Ke[0];return{x:ee.clientX,y:ee.clientY}}if(void 0!==$e.pageX)return{x:$e.pageX,y:$e.pageY}}return{x:0,y:0}},nt=$e=>{const Ke="rtl"===document.dir;switch($e){case"start":return Ke;case"end":return!Ke;default:throw new Error(`"${$e}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ot=($e,Ke)=>{const ee=$e._original||$e;return{_original:$e,emit:Ye(ee.emit.bind(ee),Ke)}},Ye=($e,Ke=0)=>{let ee;return(...Qe)=>{clearTimeout(ee),ee=setTimeout($e,Ke,...Qe)}},We=($e,Ke)=>{if(null!=$e||($e={}),null!=Ke||(Ke={}),$e===Ke)return!0;const ee=Object.keys($e);if(ee.length!==Object.keys(Ke).length)return!1;for(const Qe of ee)if(!(Qe in Ke)||$e[Qe]!==Ke[Qe])return!1;return!0}},4318:(Xt,ut,P)=>{"use strict";P.d(ut,{L:()=>Se,a:()=>Ae,b:()=>Ee,c:()=>be,d:()=>Re,e:()=>Ke,g:()=>he,l:()=>We,s:()=>ee,t:()=>ye});var c=P(5861),J=P(2361),q=P(3756);const Se="ionViewWillEnter",Ae="ionViewDidEnter",Ee="ionViewWillLeave",be="ionViewDidLeave",Re="ionViewWillUnload",ye=me=>new Promise((ge,Ne)=>{(0,J.c)(()=>{Me(me),Oe(me).then(Xe=>{Xe.animation&&Xe.animation.destroy(),Ue(me),ge(Xe)},Xe=>{Ue(me),Ne(Xe)})})}),Me=me=>{const ge=me.enteringEl,Ne=me.leavingEl;Qe(ge,Ne,me.direction),me.showGoBack?ge.classList.add("can-go-back"):ge.classList.remove("can-go-back"),ee(ge,!1),ge.style.setProperty("pointer-events","none"),Ne&&(ee(Ne,!1),Ne.style.setProperty("pointer-events","none"))},Oe=function(){var me=(0,c.Z)(function*(ge){const Ne=yield tt(ge);return Ne&&J.B.isBrowser?Le(Ne,ge):De(ge)});return function(Ne){return me.apply(this,arguments)}}(),Ue=me=>{const ge=me.enteringEl,Ne=me.leavingEl;ge.classList.remove("ion-page-invisible"),ge.style.removeProperty("pointer-events"),void 0!==Ne&&(Ne.classList.remove("ion-page-invisible"),Ne.style.removeProperty("pointer-events"))},tt=function(){var me=(0,c.Z)(function*(ge){return ge.leavingEl&&ge.animated&&0!==ge.duration?ge.animationBuilder?ge.animationBuilder:"ios"===ge.mode?(yield Promise.resolve().then(P.bind(P,1815))).iosTransitionAnimation:(yield Promise.resolve().then(P.bind(P,6447))).mdTransitionAnimation:void 0});return function(Ne){return me.apply(this,arguments)}}(),Le=function(){var me=(0,c.Z)(function*(ge,Ne){yield ke(Ne,!0);const Xe=ge(Ne.baseEl,Ne);ot(Ne.enteringEl,Ne.leavingEl);const _t=yield nt(Xe,Ne);return Ne.progressCallback&&Ne.progressCallback(void 0),_t&&Ye(Ne.enteringEl,Ne.leavingEl),{hasCompleted:_t,animation:Xe}});return function(Ne,Xe){return me.apply(this,arguments)}}(),De=function(){var me=(0,c.Z)(function*(ge){const Ne=ge.enteringEl,Xe=ge.leavingEl;return yield ke(ge,!1),ot(Ne,Xe),Ye(Ne,Xe),{hasCompleted:!0}});return function(Ne){return me.apply(this,arguments)}}(),ke=function(){var me=(0,c.Z)(function*(ge,Ne){const _t=(void 0!==ge.deepWait?ge.deepWait:Ne)?[Ke(ge.enteringEl),Ke(ge.leavingEl)]:[$e(ge.enteringEl),$e(ge.leavingEl)];yield Promise.all(_t),yield Ce(ge.viewIsReady,ge.enteringEl)});return function(Ne,Xe){return me.apply(this,arguments)}}(),Ce=function(){var me=(0,c.Z)(function*(ge,Ne){ge&&(yield ge(Ne))});return function(Ne,Xe){return me.apply(this,arguments)}}(),nt=(me,ge)=>{const Ne=ge.progressCallback,Xe=new Promise(_t=>{me.onFinish(xt=>_t(1===xt))});return Ne?(me.progressStart(!0),Ne(me)):me.play(),Xe},ot=(me,ge)=>{We(ge,Ee),We(me,Se)},Ye=(me,ge)=>{We(me,Ae),We(ge,be)},We=(me,ge)=>{if(me){const Ne=new CustomEvent(ge,{bubbles:!1,cancelable:!1});me.dispatchEvent(Ne)}},$e=me=>me?new Promise(ge=>(0,q.c)(me,ge)):Promise.resolve(),Ke=function(){var me=(0,c.Z)(function*(ge){const Ne=ge;if(Ne){if(null!=Ne.componentOnReady){if(null!=(yield Ne.componentOnReady()))return}else if(null!=Ne.__registerHost)return void(yield new Promise(_t=>(0,q.r)(_t)));yield Promise.all(Array.from(Ne.children).map(Ke))}});return function(Ne){return me.apply(this,arguments)}}(),ee=(me,ge)=>{ge?(me.setAttribute("aria-hidden","true"),me.classList.add("ion-page-hidden")):(me.hidden=!1,me.removeAttribute("aria-hidden"),me.classList.remove("ion-page-hidden"))},Qe=(me,ge,Ne)=>{void 0!==me&&(me.style.zIndex="back"===Ne?"99":"101"),void 0!==ge&&(ge.style.zIndex="100")},he=me=>me.classList.contains("ion-page")?me:me.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||me},3139:(Xt,ut,P)=>{"use strict";P.r(ut),P.d(ut,{GESTURE_CONTROLLER:()=>c.G,createGesture:()=>ze});var c=P(3509);const J=(Oe,Ue,tt,Le)=>{const De=q(Oe)?{capture:!!Le.capture,passive:!!Le.passive}:!!Le.capture;let ke,Ce;return Oe.__zone_symbol__addEventListener?(ke="__zone_symbol__addEventListener",Ce="__zone_symbol__removeEventListener"):(ke="addEventListener",Ce="removeEventListener"),Oe[ke](Ue,tt,De),()=>{Oe[Ce](Ue,tt,De)}},q=Oe=>{if(void 0===Se)try{const Ue=Object.defineProperty({},"passive",{get:()=>{Se=!0}});Oe.addEventListener("optsTest",()=>{},Ue)}catch(Ue){Se=!1}return!!Se};let Se;const be=Oe=>Oe instanceof Document?Oe:Oe.ownerDocument,ze=Oe=>{let Ue=!1,tt=!1,Le=!0,De=!1;const ke=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Oe),Ce=ke.canStart,nt=ke.onWillStart,ot=ke.onStart,Ye=ke.onEnd,We=ke.notCaptured,$e=ke.onMove,Ke=ke.threshold,ee=ke.passive,Qe=ke.blurOnStart,he={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},me=((Oe,Ue,tt)=>{const Le=tt*(Math.PI/180),De="x"===Oe,ke=Math.cos(Le),Ce=Ue*Ue;let nt=0,ot=0,Ye=!1,We=0;return{start($e,Ke){nt=$e,ot=Ke,We=0,Ye=!0},detect($e,Ke){if(!Ye)return!1;const ee=$e-nt,Qe=Ke-ot,he=ee*ee+Qe*Qe;if(he<Ce)return!1;const me=Math.sqrt(he),ge=(De?ee:Qe)/me;return We=ge>ke?1:ge<-ke?-1:0,Ye=!1,!0},isGesture:()=>0!==We,getDirection:()=>We}})(ke.direction,ke.threshold,ke.maxAngle),ge=c.G.createGesture({name:Oe.gestureName,priority:Oe.gesturePriority,disableScroll:Oe.disableScroll}),_t=()=>{!Ue||(De=!1,$e&&$e(he))},xt=()=>!(ge&&!ge.capture()||(Ue=!0,Le=!1,he.startX=he.currentX,he.startY=he.currentY,he.startTime=he.currentTime,nt?nt(he).then(lt):lt(),0)),lt=()=>{Qe&&(()=>{if("undefined"!=typeof document){const at=document.activeElement;(null==at?void 0:at.blur)&&at.blur()}})(),ot&&ot(he),Le=!0},Ve=()=>{Ue=!1,tt=!1,De=!1,Le=!0,ge.release()},It=at=>{const Gt=Ue,Nt=Le;if(Ve(),Nt){if(pe(he,at),Gt)return void(Ye&&Ye(he));We&&We(he)}},dt=((Oe,Ue,tt,Le,De)=>{let ke,Ce,nt,ot,Ye,We,$e,Ke=0;const ee=ct=>{Ke=Date.now()+2e3,Ue(ct)&&(!Ce&&tt&&(Ce=J(Oe,"touchmove",tt,De)),nt||(nt=J(ct.target,"touchend",he,De)),ot||(ot=J(ct.target,"touchcancel",he,De)))},Qe=ct=>{Ke>Date.now()||!Ue(ct)||(!We&&tt&&(We=J(be(Oe),"mousemove",tt,De)),$e||($e=J(be(Oe),"mouseup",me,De)))},he=ct=>{ge(),Le&&Le(ct)},me=ct=>{Ne(),Le&&Le(ct)},ge=()=>{Ce&&Ce(),nt&&nt(),ot&&ot(),Ce=nt=ot=void 0},Ne=()=>{We&&We(),$e&&$e(),We=$e=void 0},Xe=()=>{ge(),Ne()},_t=(ct=!0)=>{ct?(ke||(ke=J(Oe,"touchstart",ee,De)),Ye||(Ye=J(Oe,"mousedown",Qe,De))):(ke&&ke(),Ye&&Ye(),ke=Ye=void 0,Xe())};return{enable:_t,stop:Xe,destroy:()=>{_t(!1),Le=tt=Ue=void 0}}})(ke.el,at=>{const Gt=Me(at);return!(tt||!Le||(ye(at,he),he.startX=he.currentX,he.startY=he.currentY,he.startTime=he.currentTime=Gt,he.velocityX=he.velocityY=he.deltaX=he.deltaY=0,he.event=at,Ce&&!1===Ce(he))||(ge.release(),!ge.start()))&&(tt=!0,0===Ke?xt():(me.start(he.startX,he.startY),!0))},at=>{Ue?!De&&Le&&(De=!0,pe(he,at),requestAnimationFrame(_t)):(pe(he,at),me.detect(he.currentX,he.currentY)&&(!me.isGesture()||!xt())&&gt())},It,{capture:!1,passive:ee}),gt=()=>{Ve(),dt.stop(),We&&We(he)};return{enable(at=!0){at||(Ue&&It(void 0),Ve()),dt.enable(at)},destroy(){ge.destroy(),dt.destroy()}}},pe=(Oe,Ue)=>{if(!Ue)return;const tt=Oe.currentX,Le=Oe.currentY,De=Oe.currentTime;ye(Ue,Oe);const ke=Oe.currentX,Ce=Oe.currentY,ot=(Oe.currentTime=Me(Ue))-De;if(ot>0&&ot<100){const We=(Ce-Le)/ot;Oe.velocityX=(ke-tt)/ot*.7+.3*Oe.velocityX,Oe.velocityY=.7*We+.3*Oe.velocityY}Oe.deltaX=ke-Oe.startX,Oe.deltaY=Ce-Oe.startY,Oe.event=Ue},ye=(Oe,Ue)=>{let tt=0,Le=0;if(Oe){const De=Oe.changedTouches;if(De&&De.length>0){const ke=De[0];tt=ke.clientX,Le=ke.clientY}else void 0!==Oe.pageX&&(tt=Oe.pageX,Le=Oe.pageY)}Ue.currentX=tt,Ue.currentY=Le},Me=Oe=>Oe.timeStamp||Date.now()},2361:(Xt,ut,P)=>{"use strict";P.d(ut,{B:()=>Si,H:()=>jn,a:()=>gt,b:()=>Br,c:()=>ui,e:()=>Ze,f:()=>Cr,g:()=>at,h:()=>Dn,i:()=>je,j:()=>wr,k:()=>oi,p:()=>Le,r:()=>cn,s:()=>Ue});var c=P(5861);let q,Se,Ae,Ee=!1,be=!1,Re=!1,ze=!1,pe=!1;const ye="undefined"!=typeof window?window:{},Me=ye.document||{head:{}},Oe={$flags$:0,$resourcesUrl$:"",jmp:re=>re(),raf:re=>requestAnimationFrame(re),ael:(re,fe,et,ft)=>re.addEventListener(fe,et,ft),rel:(re,fe,et,ft)=>re.removeEventListener(fe,et,ft),ce:(re,fe)=>new CustomEvent(re,fe)},Ue=re=>{Object.assign(Oe,re)},Le=re=>Promise.resolve(re),De=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(re){}return!1})(),ke=(re,fe,et,ft)=>{et&&et.map(([_e,Te,pt])=>{const Vt=nt(re,_e),Rt=Ce(fe,pt),Ft=ot(_e);Oe.ael(Vt,Te,Rt,Ft),(fe.$rmListeners$=fe.$rmListeners$||[]).push(()=>Oe.rel(Vt,Te,Rt,Ft))})},Ce=(re,fe)=>et=>{try{256&re.$flags$?re.$lazyInstance$[fe](et):(re.$queuedListeners$=re.$queuedListeners$||[]).push([fe,et])}catch(ft){ai(ft)}},nt=(re,fe)=>4&fe?Me:8&fe?ye:16&fe?Me.body:re,ot=re=>0!=(2&re),ee="s-id",Qe="sty-id",ge="http://www.w3.org/1999/xlink",_t=new WeakMap,xt=(re,fe,et)=>{let ft=Ir.get(re);De&&et?(ft=ft||new CSSStyleSheet,ft.replace(fe)):ft=fe,Ir.set(re,ft)},ct=(re,fe,et,ft)=>{let _e=Ve(fe,et),Te=Ir.get(_e);if(re=11===re.nodeType?re:Me,Te)if("string"==typeof Te){let Vt,pt=_t.get(re=re.head||re);pt||_t.set(re,pt=new Set),pt.has(_e)||(re.host&&(Vt=re.querySelector(`[${Qe}="${_e}"]`))?Vt.innerHTML=Te:(Vt=Me.createElement("style"),Vt.innerHTML=Te,re.insertBefore(Vt,re.querySelector("link"))),pt&&pt.add(_e))}else re.adoptedStyleSheets.includes(Te)||(re.adoptedStyleSheets=[...re.adoptedStyleSheets,Te]);return _e},Ve=(re,fe)=>"sc-"+(fe&&32&re.$flags$?re.$tagName$+"-"+fe:re.$tagName$),It=re=>re.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),gt=re=>mi.push(re),at=re=>te(re).$modeName$,Gt={},Sn=re=>"object"==(re=typeof re)||"function"===re,Dn=(re,fe,...et)=>{let ft=null,_e=null,Te=null,pt=!1,Vt=!1,Rt=[];const Ft=An=>{for(let Xn=0;Xn<An.length;Xn++)ft=An[Xn],Array.isArray(ft)?Ft(ft):null!=ft&&"boolean"!=typeof ft&&((pt="function"!=typeof re&&!Sn(ft))&&(ft=String(ft)),pt&&Vt?Rt[Rt.length-1].$text$+=ft:Rt.push(pt?mn(null,ft):ft),Vt=pt)};if(Ft(et),fe){fe.key&&(_e=fe.key),fe.name&&(Te=fe.name);{const An=fe.className||fe.class;An&&(fe.class="object"!=typeof An?An:Object.keys(An).filter(Xn=>An[Xn]).join(" "))}}if("function"==typeof re)return re(null===fe?{}:fe,Rt,lr);const ln=mn(re,null);return ln.$attrs$=fe,Rt.length>0&&(ln.$children$=Rt),ln.$key$=_e,ln.$name$=Te,ln},mn=(re,fe)=>({$flags$:0,$tag$:re,$text$:fe,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),jn={},lr={forEach:(re,fe)=>re.map(Hn).forEach(fe),map:(re,fe)=>re.map(Hn).map(fe).map(In)},Hn=re=>({vattrs:re.$attrs$,vchildren:re.$children$,vkey:re.$key$,vname:re.$name$,vtag:re.$tag$,vtext:re.$text$}),In=re=>{if("function"==typeof re.vtag){const et=Object.assign({},re.vattrs);return re.vkey&&(et.key=re.vkey),re.vname&&(et.name=re.vname),Dn(re.vtag,et,...re.vchildren||[])}const fe=mn(re.vtag,re.vtext);return fe.$attrs$=re.vattrs,fe.$children$=re.vchildren,fe.$key$=re.vkey,fe.$name$=re.vname,fe},Qn=(re,fe,et,ft,_e,Te)=>{if(et!==ft){let pt=Zr(re,fe),Vt=fe.toLowerCase();if("class"===fe){const Rt=re.classList,Ft=Nn(et),ln=Nn(ft);Rt.remove(...Ft.filter(An=>An&&!ln.includes(An))),Rt.add(...ln.filter(An=>An&&!Ft.includes(An)))}else if("style"===fe){for(const Rt in et)(!ft||null==ft[Rt])&&(Rt.includes("-")?re.style.removeProperty(Rt):re.style[Rt]="");for(const Rt in ft)(!et||ft[Rt]!==et[Rt])&&(Rt.includes("-")?re.style.setProperty(Rt,ft[Rt]):re.style[Rt]=ft[Rt])}else if("key"!==fe)if("ref"===fe)ft&&ft(re);else if(pt||"o"!==fe[0]||"n"!==fe[1]){const Rt=Sn(ft);if((pt||Rt&&null!==ft)&&!_e)try{if(re.tagName.includes("-"))re[fe]=ft;else{let ln=null==ft?"":ft;"list"===fe?pt=!1:(null==et||re[fe]!=ln)&&(re[fe]=ln)}}catch(ln){}let Ft=!1;Vt!==(Vt=Vt.replace(/^xlink\:?/,""))&&(fe=Vt,Ft=!0),null==ft||!1===ft?(!1!==ft||""===re.getAttribute(fe))&&(Ft?re.removeAttributeNS(ge,fe):re.removeAttribute(fe)):(!pt||4&Te||_e)&&!Rt&&(ft=!0===ft?"":ft,Ft?re.setAttributeNS(ge,fe,ft):re.setAttribute(fe,ft))}else fe="-"===fe[2]?fe.slice(3):Zr(ye,Vt)?Vt.slice(2):Vt[2]+fe.slice(3),et&&Oe.rel(re,fe,et,!1),ft&&Oe.ael(re,fe,ft,!1)}},On=/\s/,Nn=re=>re?re.split(On):[],jr=(re,fe,et,ft)=>{const _e=11===fe.$elm$.nodeType&&fe.$elm$.host?fe.$elm$.host:fe.$elm$,Te=re&&re.$attrs$||Gt,pt=fe.$attrs$||Gt;for(ft in Te)ft in pt||Qn(_e,ft,Te[ft],void 0,et,fe.$flags$);for(ft in pt)Qn(_e,ft,Te[ft],pt[ft],et,fe.$flags$)},fi=(re,fe,et,ft)=>{let pt,Vt,Rt,_e=fe.$children$[et],Te=0;if(Ee||(Re=!0,"slot"===_e.$tag$&&(q&&ft.classList.add(q+"-s"),_e.$flags$|=_e.$children$?2:1)),null!==_e.$text$)pt=_e.$elm$=Me.createTextNode(_e.$text$);else if(1&_e.$flags$)pt=_e.$elm$=Me.createTextNode("");else{if(ze||(ze="svg"===_e.$tag$),pt=_e.$elm$=Me.createElementNS(ze?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&_e.$flags$?"slot-fb":_e.$tag$),ze&&"foreignObject"===_e.$tag$&&(ze=!1),jr(null,_e,ze),(re=>null!=re)(q)&&pt["s-si"]!==q&&pt.classList.add(pt["s-si"]=q),_e.$children$)for(Te=0;Te<_e.$children$.length;++Te)Vt=fi(re,_e,Te,pt),Vt&&pt.appendChild(Vt);"svg"===_e.$tag$?ze=!1:"foreignObject"===pt.tagName&&(ze=!0)}return pt["s-hn"]=Ae,3&_e.$flags$&&(pt["s-sr"]=!0,pt["s-cr"]=Se,pt["s-sn"]=_e.$name$||"",Rt=re&&re.$children$&&re.$children$[et],Rt&&Rt.$tag$===_e.$tag$&&re.$elm$&&Bt(re.$elm$,!1)),pt},Bt=(re,fe)=>{Oe.$flags$|=1;const et=re.childNodes;for(let ft=et.length-1;ft>=0;ft--){const _e=et[ft];_e["s-hn"]!==Ae&&_e["s-ol"]&&(bt(_e).insertBefore(_e,Kt(_e)),_e["s-ol"].remove(),_e["s-ol"]=void 0,Re=!0),fe&&Bt(_e,fe)}Oe.$flags$&=-2},qe=(re,fe,et,ft,_e,Te)=>{let Vt,pt=re["s-cr"]&&re["s-cr"].parentNode||re;for(pt.shadowRoot&&pt.tagName===Ae&&(pt=pt.shadowRoot);_e<=Te;++_e)ft[_e]&&(Vt=fi(null,et,_e,re),Vt&&(ft[_e].$elm$=Vt,pt.insertBefore(Vt,Kt(fe))))},Je=(re,fe,et,ft,_e)=>{for(;fe<=et;++fe)(ft=re[fe])&&(_e=ft.$elm$,xr(ft),be=!0,_e["s-ol"]?_e["s-ol"].remove():Bt(_e,!0),_e.remove())},Et=(re,fe)=>re.$tag$===fe.$tag$&&("slot"===re.$tag$?re.$name$===fe.$name$:re.$key$===fe.$key$),Kt=re=>re&&re["s-ol"]||re,bt=re=>(re["s-ol"]?re["s-ol"]:re).parentNode,Un=(re,fe)=>{const et=fe.$elm$=re.$elm$,ft=re.$children$,_e=fe.$children$,Te=fe.$tag$,pt=fe.$text$;let Vt;null===pt?(ze="svg"===Te||"foreignObject"!==Te&&ze,"slot"===Te||jr(re,fe,ze),null!==ft&&null!==_e?((re,fe,et,ft)=>{let ci,Ii,_e=0,Te=0,pt=0,Vt=0,Rt=fe.length-1,Ft=fe[0],ln=fe[Rt],An=ft.length-1,Xn=ft[0],nr=ft[An];for(;_e<=Rt&&Te<=An;)if(null==Ft)Ft=fe[++_e];else if(null==ln)ln=fe[--Rt];else if(null==Xn)Xn=ft[++Te];else if(null==nr)nr=ft[--An];else if(Et(Ft,Xn))Un(Ft,Xn),Ft=fe[++_e],Xn=ft[++Te];else if(Et(ln,nr))Un(ln,nr),ln=fe[--Rt],nr=ft[--An];else if(Et(Ft,nr))("slot"===Ft.$tag$||"slot"===nr.$tag$)&&Bt(Ft.$elm$.parentNode,!1),Un(Ft,nr),re.insertBefore(Ft.$elm$,ln.$elm$.nextSibling),Ft=fe[++_e],nr=ft[--An];else if(Et(ln,Xn))("slot"===Ft.$tag$||"slot"===nr.$tag$)&&Bt(ln.$elm$.parentNode,!1),Un(ln,Xn),re.insertBefore(ln.$elm$,Ft.$elm$),ln=fe[--Rt],Xn=ft[++Te];else{for(pt=-1,Vt=_e;Vt<=Rt;++Vt)if(fe[Vt]&&null!==fe[Vt].$key$&&fe[Vt].$key$===Xn.$key$){pt=Vt;break}pt>=0?(Ii=fe[pt],Ii.$tag$!==Xn.$tag$?ci=fi(fe&&fe[Te],et,pt,re):(Un(Ii,Xn),fe[pt]=void 0,ci=Ii.$elm$),Xn=ft[++Te]):(ci=fi(fe&&fe[Te],et,Te,re),Xn=ft[++Te]),ci&&bt(Ft.$elm$).insertBefore(ci,Kt(Ft.$elm$))}_e>Rt?qe(re,null==ft[An+1]?null:ft[An+1].$elm$,et,ft,Te,An):Te>An&&Je(fe,_e,Rt)})(et,ft,fe,_e):null!==_e?(null!==re.$text$&&(et.textContent=""),qe(et,null,fe,_e,0,_e.length-1)):null!==ft&&Je(ft,0,ft.length-1),ze&&"svg"===Te&&(ze=!1)):(Vt=et["s-cr"])?Vt.parentNode.textContent=pt:re.$text$!==pt&&(et.data=pt)},Fn=re=>{let et,ft,_e,Te,pt,Vt,fe=re.childNodes;for(ft=0,_e=fe.length;ft<_e;ft++)if(et=fe[ft],1===et.nodeType){if(et["s-sr"])for(pt=et["s-sn"],et.hidden=!1,Te=0;Te<_e;Te++)if(Vt=fe[Te].nodeType,fe[Te]["s-hn"]!==et["s-hn"]||""!==pt){if(1===Vt&&pt===fe[Te].getAttribute("slot")){et.hidden=!0;break}}else if(1===Vt||3===Vt&&""!==fe[Te].textContent.trim()){et.hidden=!0;break}Fn(et)}},fn=[],ei=re=>{let fe,et,ft,_e,Te,pt,Vt=0,Rt=re.childNodes,Ft=Rt.length;for(;Vt<Ft;Vt++){if(fe=Rt[Vt],fe["s-sr"]&&(et=fe["s-cr"])&&et.parentNode)for(ft=et.parentNode.childNodes,_e=fe["s-sn"],pt=ft.length-1;pt>=0;pt--)et=ft[pt],!et["s-cn"]&&!et["s-nr"]&&et["s-hn"]!==fe["s-hn"]&&(fr(et,_e)?(Te=fn.find(ln=>ln.$nodeToRelocate$===et),be=!0,et["s-sn"]=et["s-sn"]||_e,Te?Te.$slotRefNode$=fe:fn.push({$slotRefNode$:fe,$nodeToRelocate$:et}),et["s-sr"]&&fn.map(ln=>{fr(ln.$nodeToRelocate$,et["s-sn"])&&(Te=fn.find(An=>An.$nodeToRelocate$===et),Te&&!ln.$slotRefNode$&&(ln.$slotRefNode$=Te.$slotRefNode$))})):fn.some(ln=>ln.$nodeToRelocate$===et)||fn.push({$nodeToRelocate$:et}));1===fe.nodeType&&ei(fe)}},fr=(re,fe)=>1===re.nodeType?null===re.getAttribute("slot")&&""===fe||re.getAttribute("slot")===fe:re["s-sn"]===fe||""===fe,xr=re=>{re.$attrs$&&re.$attrs$.ref&&re.$attrs$.ref(null),re.$children$&&re.$children$.map(xr)},je=re=>te(re).$hostElement$,Ze=(re,fe,et)=>{const ft=je(re);return{emit:_e=>Mt(ft,fe,{bubbles:!!(4&et),composed:!!(2&et),cancelable:!!(1&et),detail:_e})}},Mt=(re,fe,et)=>{const ft=Oe.ce(fe,et);return re.dispatchEvent(ft),ft},Fe=(re,fe)=>{fe&&!re.$onRenderResolve$&&fe["s-p"]&&fe["s-p"].push(new Promise(et=>re.$onRenderResolve$=et))},mt=(re,fe)=>{if(re.$flags$|=16,!(4&re.$flags$))return Fe(re,re.$ancestorComponent$),ui(()=>zt(re,fe));re.$flags$|=512},zt=(re,fe)=>{const ft=re.$lazyInstance$;let _e;return fe&&(re.$flags$|=256,re.$queuedListeners$&&(re.$queuedListeners$.map(([Te,pt])=>rr(ft,Te,pt)),re.$queuedListeners$=null),_e=rr(ft,"componentWillLoad")),_e=kr(_e,()=>rr(ft,"componentWillRender")),kr(_e,()=>rn(re,ft,fe))},rn=function(){var re=(0,c.Z)(function*(fe,et,ft){const _e=fe.$hostElement$,pt=_e["s-rc"];ft&&(re=>{const fe=re.$cmpMeta$,et=re.$hostElement$,ft=fe.$flags$,Te=ct(et.shadowRoot?et.shadowRoot:et.getRootNode(),fe,re.$modeName$);10&ft&&(et["s-sc"]=Te,et.classList.add(Te+"-h"),2&ft&&et.classList.add(Te+"-s"))})(fe);yn(fe,et),pt&&(pt.map(Rt=>Rt()),_e["s-rc"]=void 0);{const Rt=_e["s-p"],Ft=()=>vn(fe);0===Rt.length?Ft():(Promise.all(Rt).then(Ft),fe.$flags$|=4,Rt.length=0)}});return function(et,ft,_e){return re.apply(this,arguments)}}(),yn=(re,fe,et)=>{try{fe=fe.render&&fe.render(),re.$flags$&=-17,re.$flags$|=2,((re,fe)=>{const et=re.$hostElement$,ft=re.$cmpMeta$,_e=re.$vnode$||mn(null,null),Te=(re=>re&&re.$tag$===jn)(fe)?fe:Dn(null,null,fe);if(Ae=et.tagName,ft.$attrsToReflect$&&(Te.$attrs$=Te.$attrs$||{},ft.$attrsToReflect$.map(([pt,Vt])=>Te.$attrs$[Vt]=et[pt])),Te.$tag$=null,Te.$flags$|=4,re.$vnode$=Te,Te.$elm$=_e.$elm$=et.shadowRoot||et,q=et["s-sc"],Se=et["s-cr"],Ee=0!=(1&ft.$flags$),be=!1,Un(_e,Te),Oe.$flags$|=1,Re){ei(Te.$elm$);let pt,Vt,Rt,Ft,ln,An,Xn=0;for(;Xn<fn.length;Xn++)pt=fn[Xn],Vt=pt.$nodeToRelocate$,Vt["s-ol"]||(Rt=Me.createTextNode(""),Rt["s-nr"]=Vt,Vt.parentNode.insertBefore(Vt["s-ol"]=Rt,Vt));for(Xn=0;Xn<fn.length;Xn++)if(pt=fn[Xn],Vt=pt.$nodeToRelocate$,pt.$slotRefNode$){for(Ft=pt.$slotRefNode$.parentNode,ln=pt.$slotRefNode$.nextSibling,Rt=Vt["s-ol"];Rt=Rt.previousSibling;)if(An=Rt["s-nr"],An&&An["s-sn"]===Vt["s-sn"]&&Ft===An.parentNode&&(An=An.nextSibling,!An||!An["s-nr"])){ln=An;break}(!ln&&Ft!==Vt.parentNode||Vt.nextSibling!==ln)&&Vt!==ln&&(!Vt["s-hn"]&&Vt["s-ol"]&&(Vt["s-hn"]=Vt["s-ol"].parentNode.nodeName),Ft.insertBefore(Vt,ln))}else 1===Vt.nodeType&&(Vt.hidden=!0)}be&&Fn(Te.$elm$),Oe.$flags$&=-2,fn.length=0})(re,fe)}catch(ft){ai(ft,re.$hostElement$)}return null},vn=re=>{const et=re.$hostElement$,_e=re.$lazyInstance$,Te=re.$ancestorComponent$;rr(_e,"componentDidRender"),64&re.$flags$?rr(_e,"componentDidUpdate"):(re.$flags$|=64,Fi(et),rr(_e,"componentDidLoad"),re.$onReadyResolve$(et),Te||En()),re.$onInstanceResolve$(et),re.$onRenderResolve$&&(re.$onRenderResolve$(),re.$onRenderResolve$=void 0),512&re.$flags$&&li(()=>mt(re,!1)),re.$flags$&=-517},wr=re=>{{const fe=te(re),et=fe.$hostElement$.isConnected;return et&&2==(18&fe.$flags$)&&mt(fe,!1),et}},En=re=>{Fi(Me.documentElement),li(()=>Mt(ye,"appload",{detail:{namespace:"ionic"}}))},rr=(re,fe,et)=>{if(re&&re[fe])try{return re[fe](et)}catch(ft){ai(ft)}},kr=(re,fe)=>re&&re.then?re.then(fe):fe(),Fi=re=>re.classList.add("hydrated"),Bn=(re,fe,et,ft,_e,Te,pt)=>{let Vt,Rt,Ft,ln;if(1===Te.nodeType){for(Vt=Te.getAttribute("c-id"),Vt&&(Rt=Vt.split("."),(Rt[0]===pt||"0"===Rt[0])&&(Ft={$flags$:0,$hostId$:Rt[0],$nodeId$:Rt[1],$depth$:Rt[2],$index$:Rt[3],$tag$:Te.tagName.toLowerCase(),$elm$:Te,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},fe.push(Ft),Te.removeAttribute("c-id"),re.$children$||(re.$children$=[]),re.$children$[Ft.$index$]=Ft,re=Ft,ft&&"0"===Ft.$depth$&&(ft[Ft.$index$]=Ft.$elm$))),ln=Te.childNodes.length-1;ln>=0;ln--)Bn(re,fe,et,ft,_e,Te.childNodes[ln],pt);if(Te.shadowRoot)for(ln=Te.shadowRoot.childNodes.length-1;ln>=0;ln--)Bn(re,fe,et,ft,_e,Te.shadowRoot.childNodes[ln],pt)}else if(8===Te.nodeType)Rt=Te.nodeValue.split("."),(Rt[1]===pt||"0"===Rt[1])&&(Vt=Rt[0],Ft={$flags$:0,$hostId$:Rt[1],$nodeId$:Rt[2],$depth$:Rt[3],$index$:Rt[4],$elm$:Te,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Vt?(Ft.$elm$=Te.nextSibling,Ft.$elm$&&3===Ft.$elm$.nodeType&&(Ft.$text$=Ft.$elm$.textContent,fe.push(Ft),Te.remove(),re.$children$||(re.$children$=[]),re.$children$[Ft.$index$]=Ft,ft&&"0"===Ft.$depth$&&(ft[Ft.$index$]=Ft.$elm$))):Ft.$hostId$===pt&&("s"===Vt?(Ft.$tag$="slot",Te["s-sn"]=Rt[5]?Ft.$name$=Rt[5]:"",Te["s-sr"]=!0,ft&&(Ft.$elm$=Me.createElement(Ft.$tag$),Ft.$name$&&Ft.$elm$.setAttribute("name",Ft.$name$),Te.parentNode.insertBefore(Ft.$elm$,Te),Te.remove(),"0"===Ft.$depth$&&(ft[Ft.$index$]=Ft.$elm$)),et.push(Ft),re.$children$||(re.$children$=[]),re.$children$[Ft.$index$]=Ft):"r"===Vt&&(ft?Te.remove():(_e["s-cr"]=Te,Te["s-cn"]=!0))));else if(re&&"style"===re.$tag$){const An=mn(null,Te.textContent);An.$elm$=Te,An.$index$="0",re.$children$=[An]}},wi=(re,fe)=>{if(1===re.nodeType){let et=0;for(;et<re.childNodes.length;et++)wi(re.childNodes[et],fe);if(re.shadowRoot)for(et=0;et<re.shadowRoot.childNodes.length;et++)wi(re.shadowRoot.childNodes[et],fe)}else if(8===re.nodeType){const et=re.nodeValue.split(".");"o"===et[0]&&(fe.set(et[1]+"."+et[2],re),re.nodeValue="",re["s-en"]=et[3])}},Nr=(re,fe,et)=>{if(fe.$members$){re.watchers&&(fe.$watchers$=re.watchers);const ft=Object.entries(fe.$members$),_e=re.prototype;if(ft.map(([Te,[pt]])=>{31&pt||2&et&&32&pt?Object.defineProperty(_e,Te,{get(){return((re,fe)=>te(this).$instanceValues$.get(fe))(0,Te)},set(Vt){((re,fe,et,ft)=>{const _e=te(re),Te=_e.$hostElement$,pt=_e.$instanceValues$.get(fe),Vt=_e.$flags$,Rt=_e.$lazyInstance$;et=((re,fe)=>null==re||Sn(re)?re:4&fe?"false"!==re&&(""===re||!!re):2&fe?parseFloat(re):1&fe?String(re):re)(et,ft.$members$[fe][0]);const Ft=Number.isNaN(pt)&&Number.isNaN(et);if((!(8&Vt)||void 0===pt)&&et!==pt&&!Ft&&(_e.$instanceValues$.set(fe,et),Rt)){if(ft.$watchers$&&128&Vt){const An=ft.$watchers$[fe];An&&An.map(Xn=>{try{Rt[Xn](et,pt,fe)}catch(nr){ai(nr,Te)}})}2==(18&Vt)&&mt(_e,!1)}})(this,Te,Vt,fe)},configurable:!0,enumerable:!0}):1&et&&64&pt&&Object.defineProperty(_e,Te,{value(...Vt){const Rt=te(this);return Rt.$onInstancePromise$.then(()=>Rt.$lazyInstance$[Te](...Vt))}})}),1&et){const Te=new Map;_e.attributeChangedCallback=function(pt,Vt,Rt){Oe.jmp(()=>{const Ft=Te.get(pt);if(this.hasOwnProperty(Ft))Rt=this[Ft],delete this[Ft];else if(_e.hasOwnProperty(Ft)&&"number"==typeof this[Ft]&&this[Ft]==Rt)return;this[Ft]=(null!==Rt||"boolean"!=typeof this[Ft])&&Rt})},re.observedAttributes=ft.filter(([pt,Vt])=>15&Vt[0]).map(([pt,Vt])=>{const Rt=Vt[1]||pt;return Te.set(Rt,pt),512&Vt[0]&&fe.$attrsToReflect$.push([pt,Rt]),Rt})}}return re},pi=function(){var re=(0,c.Z)(function*(fe,et,ft,_e,Te){if(0==(32&et.$flags$)){{if(et.$flags$|=32,(Te=or(ft)).then){const Ft=()=>{};Te=yield Te,Ft()}Te.isProxied||(ft.$watchers$=Te.watchers,Nr(Te,ft,2),Te.isProxied=!0);const Rt=()=>{};et.$flags$|=8;try{new Te(et)}catch(Ft){ai(Ft)}et.$flags$&=-9,et.$flags$|=128,Rt(),fs(et.$lazyInstance$)}if(Te.style){let Rt=Te.style;"string"!=typeof Rt&&(Rt=Rt[et.$modeName$=(re=>mi.map(fe=>fe(re)).find(fe=>!!fe))(fe)]);const Ft=Ve(ft,et.$modeName$);if(!Ir.has(Ft)){const ln=()=>{};xt(Ft,Rt,!!(1&ft.$flags$)),ln()}}}const pt=et.$ancestorComponent$,Vt=()=>mt(et,!0);pt&&pt["s-rc"]?pt["s-rc"].push(Vt):Vt()});return function(et,ft,_e,Te,pt){return re.apply(this,arguments)}}(),fs=re=>{rr(re,"connectedCallback")},yi=re=>{const fe=re["s-cr"]=Me.createComment("");fe["s-cn"]=!0,re.insertBefore(fe,re.firstChild)},Br=(re,fe={})=>{const ft=[],_e=fe.exclude||[],Te=ye.customElements,pt=Me.head,Vt=pt.querySelector("meta[charset]"),Rt=Me.createElement("style"),Ft=[],ln=Me.querySelectorAll(`[${Qe}]`);let An,Xn=!0,nr=0;for(Object.assign(Oe,fe),Oe.$resourcesUrl$=new URL(fe.resourcesUrl||"./",Me.baseURI).href,Oe.$flags$|=2;nr<ln.length;nr++)xt(ln[nr].getAttribute(Qe),It(ln[nr].innerHTML),!0);re.map(ci=>{ci[1].map(Ii=>{const rt={$flags$:Ii[0],$tagName$:Ii[1],$members$:Ii[2],$listeners$:Ii[3]};rt.$members$=Ii[2],rt.$listeners$=Ii[3],rt.$attrsToReflect$=[],rt.$watchers$={};const Ge=rt.$tagName$,Dt=class extends HTMLElement{constructor(Wt){super(Wt),Zn(Wt=this,rt),1&rt.$flags$&&Wt.attachShadow({mode:"open",delegatesFocus:!!(16&rt.$flags$)})}connectedCallback(){An&&(clearTimeout(An),An=null),Xn?Ft.push(this):Oe.jmp(()=>(re=>{if(0==(1&Oe.$flags$)){const fe=te(re),et=fe.$cmpMeta$,ft=()=>{};if(1&fe.$flags$)ke(re,fe,et.$listeners$),fs(fe.$lazyInstance$);else{let _e;if(fe.$flags$|=1,_e=re.getAttribute(ee),_e){if(1&et.$flags$){const Te=ct(re.shadowRoot,et,re.getAttribute("s-mode"));re.classList.remove(Te+"-h",Te+"-s")}((re,fe,et,ft)=>{const Te=re.shadowRoot,pt=[],Rt=Te?[]:null,Ft=ft.$vnode$=mn(fe,null);Oe.$orgLocNodes$||wi(Me.body,Oe.$orgLocNodes$=new Map),re[ee]=et,re.removeAttribute(ee),Bn(Ft,pt,[],Rt,re,re,et),pt.map(ln=>{const An=ln.$hostId$+"."+ln.$nodeId$,Xn=Oe.$orgLocNodes$.get(An),nr=ln.$elm$;Xn&&""===Xn["s-en"]&&Xn.parentNode.insertBefore(nr,Xn.nextSibling),Te||(nr["s-hn"]=fe,Xn&&(nr["s-ol"]=Xn,nr["s-ol"]["s-nr"]=nr)),Oe.$orgLocNodes$.delete(An)}),Te&&Rt.map(ln=>{ln&&Te.appendChild(ln)})})(re,et.$tagName$,_e,fe)}_e||12&et.$flags$&&yi(re);{let Te=re;for(;Te=Te.parentNode||Te.host;)if(1===Te.nodeType&&Te.hasAttribute("s-id")&&Te["s-p"]||Te["s-p"]){Fe(fe,fe.$ancestorComponent$=Te);break}}et.$members$&&Object.entries(et.$members$).map(([Te,[pt]])=>{if(31&pt&&re.hasOwnProperty(Te)){const Vt=re[Te];delete re[Te],re[Te]=Vt}}),li(()=>pi(re,fe,et))}ft()}})(this))}disconnectedCallback(){Oe.jmp(()=>(re=>{if(0==(1&Oe.$flags$)){const fe=te(this),et=fe.$lazyInstance$;fe.$rmListeners$&&(fe.$rmListeners$.map(ft=>ft()),fe.$rmListeners$=void 0),rr(et,"disconnectedCallback")}})())}componentOnReady(){return te(this).$onReadyPromise$}};rt.$lazyBundleId$=ci[0],!_e.includes(Ge)&&!Te.get(Ge)&&(ft.push(Ge),Te.define(Ge,Nr(Dt,rt,1)))})}),Rt.innerHTML=ft+"{visibility:hidden}.hydrated{visibility:inherit}",Rt.setAttribute("data-styles",""),pt.insertBefore(Rt,Vt?Vt.nextSibling:pt.firstChild),Xn=!1,Ft.length?Ft.map(ci=>ci.connectedCallback()):Oe.jmp(()=>An=setTimeout(En,30))},oi=re=>{const fe=new URL(re,Oe.$resourcesUrl$);return fe.origin!==ye.location.origin?fe.href:fe.pathname},Gn=new WeakMap,te=re=>Gn.get(re),cn=(re,fe)=>Gn.set(fe.$lazyInstance$=re,fe),Zn=(re,fe)=>{const et={$flags$:0,$hostElement$:re,$cmpMeta$:fe,$instanceValues$:new Map};return et.$onInstancePromise$=new Promise(ft=>et.$onInstanceResolve$=ft),et.$onReadyPromise$=new Promise(ft=>et.$onReadyResolve$=ft),re["s-p"]=[],re["s-rc"]=[],ke(re,et,fe.$listeners$),Gn.set(re,et)},Zr=(re,fe)=>fe in re,ai=(re,fe)=>(0,console.error)(re,fe),ur=new Map,or=(re,fe,et)=>{const ft=re.$tagName$.replace(/-/g,"_"),_e=re.$lazyBundleId$,Te=ur.get(_e);return Te?Te[ft]:P(863)(`./${_e}.entry.js`).then(pt=>(ur.set(_e,pt),pt[ft]),ai)},Ir=new Map,mi=[],Mr=[],zn=[],Li=(re,fe)=>et=>{re.push(et),pe||(pe=!0,fe&&4&Oe.$flags$?li(Zi):Oe.raf(Zi))},Oi=re=>{for(let fe=0;fe<re.length;fe++)try{re[fe](performance.now())}catch(et){ai(et)}re.length=0},Zi=()=>{Oi(Mr),Oi(zn),(pe=Mr.length>0)&&Oe.raf(Zi)},li=re=>Le().then(re),Cr=Li(Mr,!1),ui=Li(zn,!0),Si={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},7726:(Xt,ut,P)=>{"use strict";P.d(ut,{m:()=>ye});var c=P(5861),J=P(7593),q=P(3756),Se=P(6254),Ae=P(9442);const Ee=Me=>(0,Ae.c)().duration(Me?400:300),be=Me=>{let Oe,Ue;const tt=Me.width+8,Le=(0,Ae.c)(),De=(0,Ae.c)();Me.isEndSide?(Oe=tt+"px",Ue="0px"):(Oe=-tt+"px",Ue="0px"),Le.addElement(Me.menuInnerEl).fromTo("transform",`translateX(${Oe})`,`translateX(${Ue})`);const Ce="ios"===(0,Se.b)(Me),nt=Ce?.2:.25;return De.addElement(Me.backdropEl).fromTo("opacity",.01,nt),Ee(Ce).addAnimation([Le,De])},Re=Me=>{let Oe,Ue;const tt=(0,Se.b)(Me),Le=Me.width;Me.isEndSide?(Oe=-Le+"px",Ue=Le+"px"):(Oe=Le+"px",Ue=-Le+"px");const De=(0,Ae.c)().addElement(Me.menuInnerEl).fromTo("transform",`translateX(${Ue})`,"translateX(0px)"),ke=(0,Ae.c)().addElement(Me.contentEl).fromTo("transform","translateX(0px)",`translateX(${Oe})`),Ce=(0,Ae.c)().addElement(Me.backdropEl).fromTo("opacity",.01,.32);return Ee("ios"===tt).addAnimation([De,ke,Ce])},ze=Me=>{const Oe=(0,Se.b)(Me),Ue=Me.width*(Me.isEndSide?-1:1)+"px",tt=(0,Ae.c)().addElement(Me.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ue})`);return Ee("ios"===Oe).addAnimation(tt)},ye=(()=>{const Me=new Map,Oe=[],Ue=function(){var lt=(0,c.Z)(function*(Ve){const It=yield ot(Ve);return!!It&&It.open()});return function(It){return lt.apply(this,arguments)}}(),tt=function(){var lt=(0,c.Z)(function*(Ve){const It=yield void 0!==Ve?ot(Ve):Ye();return void 0!==It&&It.close()});return function(It){return lt.apply(this,arguments)}}(),Le=function(){var lt=(0,c.Z)(function*(Ve){const It=yield ot(Ve);return!!It&&It.toggle()});return function(It){return lt.apply(this,arguments)}}(),De=function(){var lt=(0,c.Z)(function*(Ve,It){const dt=yield ot(It);return dt&&(dt.disabled=!Ve),dt});return function(It,dt){return lt.apply(this,arguments)}}(),ke=function(){var lt=(0,c.Z)(function*(Ve,It){const dt=yield ot(It);return dt&&(dt.swipeGesture=Ve),dt});return function(It,dt){return lt.apply(this,arguments)}}(),Ce=function(){var lt=(0,c.Z)(function*(Ve){if(null!=Ve){const It=yield ot(Ve);return void 0!==It&&It.isOpen()}return void 0!==(yield Ye())});return function(It){return lt.apply(this,arguments)}}(),nt=function(){var lt=(0,c.Z)(function*(Ve){const It=yield ot(Ve);return!!It&&!It.disabled});return function(It){return lt.apply(this,arguments)}}(),ot=function(){var lt=(0,c.Z)(function*(Ve){return yield ct(),"start"===Ve||"end"===Ve?xt(gt=>gt.side===Ve&&!gt.disabled)||xt(gt=>gt.side===Ve):null!=Ve?xt(dt=>dt.menuId===Ve):xt(dt=>!dt.disabled)||(Oe.length>0?Oe[0].el:void 0)});return function(It){return lt.apply(this,arguments)}}(),Ye=function(){var lt=(0,c.Z)(function*(){return yield ct(),Ne()});return function(){return lt.apply(this,arguments)}}(),We=function(){var lt=(0,c.Z)(function*(){return yield ct(),Xe()});return function(){return lt.apply(this,arguments)}}(),$e=function(){var lt=(0,c.Z)(function*(){return yield ct(),_t()});return function(){return lt.apply(this,arguments)}}(),Ke=(lt,Ve)=>{Me.set(lt,Ve)},he=lt=>{const Ve=lt.side;Oe.filter(It=>It.side===Ve&&It!==lt).forEach(It=>It.disabled=!0)},me=function(){var lt=(0,c.Z)(function*(Ve,It,dt){if(_t())return!1;if(It){const gt=yield Ye();gt&&Ve.el!==gt&&(yield gt.setOpen(!1,!1))}return Ve._setOpen(It,dt)});return function(It,dt,gt){return lt.apply(this,arguments)}}(),Ne=()=>xt(lt=>lt._isOpen),Xe=()=>Oe.map(lt=>lt.el),_t=()=>Oe.some(lt=>lt.isAnimating),xt=lt=>{const Ve=Oe.find(lt);if(void 0!==Ve)return Ve.el},ct=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(lt=>new Promise(Ve=>(0,q.c)(lt,Ve))));return Ke("reveal",ze),Ke("push",Re),Ke("overlay",be),"undefined"!=typeof document&&document.addEventListener("ionBackButton",lt=>{const Ve=Ne();Ve&&lt.detail.register(J.MENU_BACK_BUTTON_PRIORITY,()=>Ve.close())}),{registerAnimation:Ke,get:ot,getMenus:We,getOpen:Ye,isEnabled:nt,swipeGesture:ke,isAnimating:$e,isOpen:Ce,enable:De,toggle:Le,close:tt,open:Ue,_getOpenSync:Ne,_createAnimation:(lt,Ve)=>{const It=Me.get(lt);if(!It)throw new Error("animation not registered");return It(Ve)},_register:lt=>{Oe.indexOf(lt)<0&&(lt.disabled||he(lt),Oe.push(lt))},_unregister:lt=>{const Ve=Oe.indexOf(lt);Ve>-1&&Oe.splice(Ve,1)},_setOpen:me,_setActiveMenu:he}})()},6254:(Xt,ut,P)=>{"use strict";P.d(ut,{a:()=>ye,b:()=>_t,c:()=>q,g:()=>pe,i:()=>xt});var c=P(2361);class J{constructor(){this.m=new Map}reset(lt){this.m=new Map(Object.entries(lt))}get(lt,Ve){const It=this.m.get(lt);return void 0!==It?It:Ve}getBoolean(lt,Ve=!1){const It=this.m.get(lt);return void 0===It?Ve:"string"==typeof It?"true"===It:!!It}getNumber(lt,Ve){const It=parseFloat(this.m.get(lt));return isNaN(It)?void 0!==Ve?Ve:NaN:It}set(lt,Ve){this.m.set(lt,Ve)}}const q=new J,ze="ionic-persist-config",pe=ct=>Me(ct),ye=(ct,lt)=>("string"==typeof ct&&(lt=ct,ct=void 0),pe(ct).includes(lt)),Me=(ct=window)=>{if(void 0===ct)return[];ct.Ionic=ct.Ionic||{};let lt=ct.Ionic.platforms;return null==lt&&(lt=ct.Ionic.platforms=Oe(ct),lt.forEach(Ve=>ct.document.documentElement.classList.add(`plt-${Ve}`))),lt},Oe=ct=>{const lt=q.get("platform");return Object.keys(Ne).filter(Ve=>{const It=null==lt?void 0:lt[Ve];return"function"==typeof It?It(ct):Ne[Ve](ct)})},tt=ct=>!!(me(ct,/iPad/i)||me(ct,/Macintosh/i)&&Ye(ct)),ke=ct=>me(ct,/android|sink/i),Ye=ct=>ge(ct,"(any-pointer:coarse)"),$e=ct=>Ke(ct)||ee(ct),Ke=ct=>!!(ct.cordova||ct.phonegap||ct.PhoneGap),ee=ct=>{const lt=ct.Capacitor;return!!(null==lt?void 0:lt.isNative)},me=(ct,lt)=>lt.test(ct.navigator.userAgent),ge=(ct,lt)=>{var Ve;return null===(Ve=ct.matchMedia)||void 0===Ve?void 0:Ve.call(ct,lt).matches},Ne={ipad:tt,iphone:ct=>me(ct,/iPhone/i),ios:ct=>me(ct,/iPhone|iPod/i)||tt(ct),android:ke,phablet:ct=>{const lt=ct.innerWidth,Ve=ct.innerHeight,It=Math.min(lt,Ve),dt=Math.max(lt,Ve);return It>390&&It<520&&dt>620&&dt<800},tablet:ct=>{const lt=ct.innerWidth,Ve=ct.innerHeight,It=Math.min(lt,Ve),dt=Math.max(lt,Ve);return tt(ct)||(ct=>ke(ct)&&!me(ct,/mobile/i))(ct)||It>460&&It<820&&dt>780&&dt<1400},cordova:Ke,capacitor:ee,electron:ct=>me(ct,/electron/i),pwa:ct=>{var lt;return!(!(null===(lt=ct.matchMedia)||void 0===lt?void 0:lt.call(ct,"(display-mode: standalone)").matches)&&!ct.navigator.standalone)},mobile:Ye,mobileweb:ct=>Ye(ct)&&!$e(ct),desktop:ct=>!Ye(ct),hybrid:$e};let Xe;const _t=ct=>ct&&(0,c.g)(ct)||Xe,xt=(ct={})=>{if("undefined"==typeof window)return;const lt=window.document,Ve=window,It=Ve.Ionic=Ve.Ionic||{},dt={};ct._ael&&(dt.ael=ct._ael),ct._rel&&(dt.rel=ct._rel),ct._ce&&(dt.ce=ct._ce),(0,c.s)(dt);const gt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(ct=>{try{const lt=ct.sessionStorage.getItem(ze);return null!==lt?JSON.parse(lt):{}}catch(lt){return{}}})(Ve)),{persistConfig:!1}),It.config),(ct=>{const lt={};return ct.location.search.slice(1).split("&").map(Ve=>Ve.split("=")).map(([Ve,It])=>[decodeURIComponent(Ve),decodeURIComponent(It)]).filter(([Ve])=>((ct,lt)=>ct.substr(0,lt.length)===lt)(Ve,"ionic:")).map(([Ve,It])=>[Ve.slice("ionic:".length),It]).forEach(([Ve,It])=>{lt[Ve]=It}),lt})(Ve)),ct);q.reset(gt),q.getBoolean("persistConfig")&&((ct,lt)=>{try{ct.sessionStorage.setItem(ze,JSON.stringify(lt))}catch(Ve){return}})(Ve,gt),Me(Ve),It.config=q,It.mode=Xe=q.get("mode",lt.documentElement.getAttribute("mode")||(ye(Ve,"ios")?"ios":"md")),q.set("mode",Xe),lt.documentElement.setAttribute("mode",Xe),lt.documentElement.classList.add(Xe),q.getBoolean("_testing")&&q.set("animated",!1);const at=Nt=>{var wt;return null===(wt=Nt.tagName)||void 0===wt?void 0:wt.startsWith("ION-")},Gt=Nt=>["ios","md"].includes(Nt);(0,c.a)(Nt=>{for(;Nt;){const wt=Nt.mode||Nt.getAttribute("mode");if(wt){if(Gt(wt))return wt;at(Nt)&&console.warn('Invalid ionic mode: "'+wt+'", expected: "ios" or "md"')}Nt=Nt.parentElement}return Xe})}},1815:(Xt,ut,P)=>{"use strict";P.r(ut),P.d(ut,{iosTransitionAnimation:()=>Me,shadow:()=>Ee});var c=P(9442),J=P(4318);P(2361);const Ae=Oe=>document.querySelector(`${Oe}.ion-cloned-element`),Ee=Oe=>Oe.shadowRoot||Oe,be=Oe=>{const Ue="ION-TABS"===Oe.tagName?Oe:Oe.querySelector("ion-tabs"),tt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ue){const Le=Ue.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Le?Le.querySelector(tt):null}return Oe.querySelector(tt)},Re=(Oe,Ue)=>{const tt="ION-TABS"===Oe.tagName?Oe:Oe.querySelector("ion-tabs");let Le=[];if(null!=tt){const De=tt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=De&&(Le=De.querySelectorAll("ion-buttons"))}else Le=Oe.querySelectorAll("ion-buttons");for(const De of Le){const ke=De.closest("ion-header"),Ce=ke&&!ke.classList.contains("header-collapse-condense-inactive"),nt=De.querySelector("ion-back-button"),ot=De.classList.contains("buttons-collapse"),Ye="start"===De.slot||""===De.slot;if(null!==nt&&Ye&&(ot&&Ce&&Ue||!ot))return nt}return null},pe=(Oe,Ue,tt,Le,De,ke)=>{const Ce=Ue?`calc(100% - ${ke.right+4}px)`:ke.left-4+"px",nt=Ue?"7px":"-7px",ot=Ue?"-4px":"4px",Ye=Ue?"-4px":"4px",We=Ue?"right":"left",$e=Ue?"left":"right",Qe=tt?[{offset:0,opacity:1,transform:`translate3d(${ot}, ${ke.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${nt}, ${De.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${nt}, ${De.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${ot}, ${ke.top-46}px, 0) scale(1)`}],ge=tt?[{offset:0,opacity:1,transform:`translate3d(${Ye}, ${ke.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Ye}, ${ke.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Ye}, ${ke.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Ye}, ${ke.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Ye}, ${ke.top-46}px, 0) scale(1)`}],Ne=(0,c.c)(),Xe=(0,c.c)(),_t=Ae("ion-back-button"),xt=Ee(_t).querySelector(".button-text"),ct=Ee(_t).querySelector("ion-icon");_t.text=Le.text,_t.mode=Le.mode,_t.icon=Le.icon,_t.color=Le.color,_t.disabled=Le.disabled,_t.style.setProperty("display","block"),_t.style.setProperty("position","fixed"),Xe.addElement(ct),Ne.addElement(xt),Ne.beforeStyles({"transform-origin":`${We} center`}).beforeAddWrite(()=>{Le.style.setProperty("display","none"),_t.style.setProperty(We,Ce)}).afterAddWrite(()=>{Le.style.setProperty("display",""),_t.style.setProperty("display","none"),_t.style.removeProperty(We)}).keyframes(Qe),Xe.beforeStyles({"transform-origin":`${$e} center`}).keyframes(ge),Oe.addAnimation([Ne,Xe])},ye=(Oe,Ue,tt,Le,De,ke)=>{const Ce=Ue?`calc(100% - ${De.right}px)`:`${De.left}px`,nt=Ue?"-18px":"18px",ot=Ue?"right":"left",$e=tt?[{offset:0,opacity:0,transform:`translate3d(${nt}, ${ke.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${nt}, ${ke.top-4}px, 0) scale(0.5)`}],Ke=Ae("ion-title"),ee=(0,c.c)();Ke.innerText=Le.innerText,Ke.size=Le.size,Ke.color=Le.color,ee.addElement(Ke),ee.beforeStyles({"transform-origin":`${ot} center`,height:"46px",display:"",position:"relative",[ot]:Ce}).beforeAddWrite(()=>{Le.style.setProperty("display","none")}).afterAddWrite(()=>{Le.style.setProperty("display",""),Ke.style.setProperty("display","none")}).keyframes($e),Oe.addAnimation(ee)},Me=(Oe,Ue)=>{try{const tt="cubic-bezier(0.32,0.72,0,1)",Le="opacity",De="transform",ke="0%",nt="rtl"===Oe.ownerDocument.dir,ot=nt?"-99.5%":"99.5%",Ye=nt?"33%":"-33%",We=Ue.enteringEl,$e=Ue.leavingEl,Ke="back"===Ue.direction,ee=We.querySelector(":scope > ion-content"),Qe=We.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),he=We.querySelectorAll(":scope > ion-header > ion-toolbar"),me=(0,c.c)(),ge=(0,c.c)();if(me.addElement(We).duration(Ue.duration||540).easing(Ue.easing||tt).fill("both").beforeRemoveClass("ion-page-invisible"),$e&&Oe){const xt=(0,c.c)();xt.addElement(Oe),me.addAnimation(xt)}if(ee||0!==he.length||0!==Qe.length?(ge.addElement(ee),ge.addElement(Qe)):ge.addElement(We.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),me.addAnimation(ge),Ke?ge.beforeClearStyles([Le]).fromTo("transform",`translateX(${Ye})`,`translateX(${ke})`).fromTo(Le,.8,1):ge.beforeClearStyles([Le]).fromTo("transform",`translateX(${ot})`,`translateX(${ke})`),ee){const xt=Ee(ee).querySelector(".transition-effect");if(xt){const ct=xt.querySelector(".transition-cover"),lt=xt.querySelector(".transition-shadow"),Ve=(0,c.c)(),It=(0,c.c)(),dt=(0,c.c)();Ve.addElement(xt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),It.addElement(ct).beforeClearStyles([Le]).fromTo(Le,0,.1),dt.addElement(lt).beforeClearStyles([Le]).fromTo(Le,.03,.7),Ve.addAnimation([It,dt]),ge.addAnimation([Ve])}}const Ne=We.querySelector("ion-header.header-collapse-condense"),{forward:Xe,backward:_t}=((Oe,Ue,tt,Le,De)=>{const ke=Re(Le,tt),Ce=be(De),nt=be(Le),ot=Re(De,tt),Ye=null!==ke&&null!==Ce&&!tt,We=null!==nt&&null!==ot&&tt;if(Ye){const $e=Ce.getBoundingClientRect(),Ke=ke.getBoundingClientRect();ye(Oe,Ue,tt,Ce,$e,Ke),pe(Oe,Ue,tt,ke,$e,Ke)}else if(We){const $e=nt.getBoundingClientRect(),Ke=ot.getBoundingClientRect();ye(Oe,Ue,tt,nt,$e,Ke),pe(Oe,Ue,tt,ot,$e,Ke)}return{forward:Ye,backward:We}})(me,nt,Ke,We,$e);if(he.forEach(xt=>{const ct=(0,c.c)();ct.addElement(xt),me.addAnimation(ct);const lt=(0,c.c)();lt.addElement(xt.querySelector("ion-title"));const Ve=(0,c.c)(),It=Array.from(xt.querySelectorAll("ion-buttons,[menuToggle]")),dt=xt.closest("ion-header"),gt=null==dt?void 0:dt.classList.contains("header-collapse-condense-inactive");let at;at=It.filter(Ke?Sn=>{const Dn=Sn.classList.contains("buttons-collapse");return Dn&&!gt||!Dn}:Sn=>!Sn.classList.contains("buttons-collapse")),Ve.addElement(at);const Gt=(0,c.c)();Gt.addElement(xt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Nt=(0,c.c)();Nt.addElement(Ee(xt).querySelector(".toolbar-background"));const wt=(0,c.c)(),kn=xt.querySelector("ion-back-button");if(kn&&wt.addElement(kn),ct.addAnimation([lt,Ve,Gt,Nt,wt]),Ve.fromTo(Le,.01,1),Gt.fromTo(Le,.01,1),Ke)gt||lt.fromTo("transform",`translateX(${Ye})`,`translateX(${ke})`).fromTo(Le,.01,1),Gt.fromTo("transform",`translateX(${Ye})`,`translateX(${ke})`),wt.fromTo(Le,.01,1);else if(Ne||lt.fromTo("transform",`translateX(${ot})`,`translateX(${ke})`).fromTo(Le,.01,1),Gt.fromTo("transform",`translateX(${ot})`,`translateX(${ke})`),Nt.beforeClearStyles([Le,"transform"]),(null==dt?void 0:dt.translucent)?Nt.fromTo("transform",nt?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Nt.fromTo(Le,.01,"var(--opacity)"),Xe||wt.fromTo(Le,.01,1),kn&&!Xe){const Dn=(0,c.c)();Dn.addElement(Ee(kn).querySelector(".button-text")).fromTo("transform",nt?"translateX(-100px)":"translateX(100px)","translateX(0px)"),ct.addAnimation(Dn)}}),$e){const xt=(0,c.c)(),ct=$e.querySelector(":scope > ion-content"),lt=$e.querySelectorAll(":scope > ion-header > ion-toolbar"),Ve=$e.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(ct||0!==lt.length||0!==Ve.length?(xt.addElement(ct),xt.addElement(Ve)):xt.addElement($e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),me.addAnimation(xt),Ke){xt.beforeClearStyles([Le]).fromTo("transform",`translateX(${ke})`,nt?"translateX(-100%)":"translateX(100%)");const It=(0,J.g)($e);me.afterAddWrite(()=>{"normal"===me.getDirection()&&It.style.setProperty("display","none")})}else xt.fromTo("transform",`translateX(${ke})`,`translateX(${Ye})`).fromTo(Le,1,.8);if(ct){const It=Ee(ct).querySelector(".transition-effect");if(It){const dt=It.querySelector(".transition-cover"),gt=It.querySelector(".transition-shadow"),at=(0,c.c)(),Gt=(0,c.c)(),Nt=(0,c.c)();at.addElement(It).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Gt.addElement(dt).beforeClearStyles([Le]).fromTo(Le,.1,0),Nt.addElement(gt).beforeClearStyles([Le]).fromTo(Le,.7,.03),at.addAnimation([Gt,Nt]),xt.addAnimation([at])}}lt.forEach(It=>{const dt=(0,c.c)();dt.addElement(It);const gt=(0,c.c)();gt.addElement(It.querySelector("ion-title"));const at=(0,c.c)(),Gt=It.querySelectorAll("ion-buttons,[menuToggle]"),Nt=It.closest("ion-header"),wt=null==Nt?void 0:Nt.classList.contains("header-collapse-condense-inactive"),kn=Array.from(Gt).filter(lr=>{const Hn=lr.classList.contains("buttons-collapse");return Hn&&!wt||!Hn});at.addElement(kn);const Sn=(0,c.c)(),Dn=It.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Dn.length>0&&Sn.addElement(Dn);const mn=(0,c.c)();mn.addElement(Ee(It).querySelector(".toolbar-background"));const jn=(0,c.c)(),Yn=It.querySelector("ion-back-button");if(Yn&&jn.addElement(Yn),dt.addAnimation([gt,at,Sn,jn,mn]),me.addAnimation(dt),jn.fromTo(Le,.99,0),at.fromTo(Le,.99,0),Sn.fromTo(Le,.99,0),Ke){if(wt||gt.fromTo("transform",`translateX(${ke})`,nt?"translateX(-100%)":"translateX(100%)").fromTo(Le,.99,0),Sn.fromTo("transform",`translateX(${ke})`,nt?"translateX(-100%)":"translateX(100%)"),mn.beforeClearStyles([Le,"transform"]),(null==Nt?void 0:Nt.translucent)?mn.fromTo("transform","translateX(0px)",nt?"translateX(-100%)":"translateX(100%)"):mn.fromTo(Le,"var(--opacity)",0),Yn&&!_t){const Hn=(0,c.c)();Hn.addElement(Ee(Yn).querySelector(".button-text")).fromTo("transform",`translateX(${ke})`,`translateX(${(nt?-124:124)+"px"})`),dt.addAnimation(Hn)}}else wt||gt.fromTo("transform",`translateX(${ke})`,`translateX(${Ye})`).fromTo(Le,.99,0).afterClearStyles([De,Le]),Sn.fromTo("transform",`translateX(${ke})`,`translateX(${Ye})`).afterClearStyles([De,Le]),jn.afterClearStyles([Le]),gt.afterClearStyles([Le]),at.afterClearStyles([Le])})}return me}catch(tt){throw tt}}},6447:(Xt,ut,P)=>{"use strict";P.r(ut),P.d(ut,{mdTransitionAnimation:()=>Se});var c=P(9442),J=P(4318);P(2361);const Se=(Ae,Ee)=>{const ze="back"===Ee.direction,ye=Ee.leavingEl,Me=(0,J.g)(Ee.enteringEl),Oe=Me.querySelector("ion-toolbar"),Ue=(0,c.c)();if(Ue.addElement(Me).fill("both").beforeRemoveClass("ion-page-invisible"),ze?Ue.duration(Ee.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ue.duration(Ee.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Oe){const tt=(0,c.c)();tt.addElement(Oe),Ue.addAnimation(tt)}if(ye&&ze){Ue.duration(Ee.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const tt=(0,c.c)();tt.addElement((0,J.g)(ye)).onFinish(Le=>{1===Le&&tt.elements.length>0&&tt.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ue.addAnimation(tt)}return Ue}},599:(Xt,ut,P)=>{"use strict";P.d(ut,{B:()=>It,a:()=>Re,b:()=>ze,c:()=>Oe,d:()=>he,e:()=>tt,f:()=>ge,g:()=>_t,h:()=>Ee,i:()=>ct,j:()=>Ce,k:()=>ee,l:()=>pe,m:()=>ye,s:()=>Ve,t:()=>Ue});var c=P(5861),J=P(6254),q=P(7593),Se=P(3756);let Ae=0;const Ee=new WeakMap,be=dt=>({create:gt=>Le(dt,gt),dismiss:(gt,at,Gt)=>$e(document,gt,at,dt,Gt),getTop:()=>(0,c.Z)(function*(){return ee(document,dt)})()}),Re=be("ion-alert"),ze=be("ion-action-sheet"),pe=be("ion-loading"),ye=be("ion-modal"),Oe=be("ion-popover"),Ue=be("ion-toast"),tt=dt=>{"undefined"!=typeof document&&We(document);const gt=Ae++;dt.overlayIndex=gt,dt.hasAttribute("id")||(dt.id=`ion-overlay-${gt}`)},Le=(dt,gt)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(dt).then(()=>{const at=document.createElement(dt);return at.classList.add("overlay-hidden"),Object.assign(at,Object.assign(Object.assign({},gt),{hasController:!0})),Ne(document).appendChild(at),new Promise(Gt=>(0,Se.c)(at,Gt))}):Promise.resolve(),De='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',ke="input:not([type=hidden]), textarea, button, select",Ce=(dt,gt)=>{let at=dt.querySelector(De);const Gt=null==at?void 0:at.shadowRoot;Gt&&(at=Gt.querySelector(ke)||at),at?(0,Se.f)(at):gt.focus()},ot=(dt,gt)=>{const at=Array.from(dt.querySelectorAll(De));let Gt=at.length>0?at[at.length-1]:null;const Nt=null==Gt?void 0:Gt.shadowRoot;Nt&&(Gt=Nt.querySelector(ke)||Gt),Gt?Gt.focus():gt.focus()},We=dt=>{0===Ae&&(Ae=1,dt.addEventListener("focus",gt=>{((dt,gt)=>{const at=ee(gt,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Gt=dt.target;at&&Gt&&!at.classList.contains("ion-disable-focus-trap")&&(at.shadowRoot?(()=>{if(at.contains(Gt))at.lastFocus=Gt;else{const kn=at.lastFocus;Ce(at,at),kn===gt.activeElement&&ot(at,at),at.lastFocus=gt.activeElement}})():(()=>{if(at===Gt)at.lastFocus=void 0;else{const kn=(0,Se.g)(at);if(!kn.contains(Gt))return;const Sn=kn.querySelector(".ion-overlay-wrapper");if(!Sn)return;if(Sn.contains(Gt))at.lastFocus=Gt;else{const Dn=at.lastFocus;Ce(Sn,at),Dn===gt.activeElement&&ot(Sn,at),at.lastFocus=gt.activeElement}}})())})(gt,dt)},!0),dt.addEventListener("ionBackButton",gt=>{const at=ee(dt);(null==at?void 0:at.backdropDismiss)&&gt.detail.register(q.OVERLAY_BACK_BUTTON_PRIORITY,()=>at.dismiss(void 0,It))}),dt.addEventListener("keyup",gt=>{if("Escape"===gt.key){const at=ee(dt);(null==at?void 0:at.backdropDismiss)&&at.dismiss(void 0,It)}}))},$e=(dt,gt,at,Gt,Nt)=>{const wt=ee(dt,Gt,Nt);return wt?wt.dismiss(gt,at):Promise.reject("overlay does not exist")},ee=(dt,gt,at)=>{const Gt=((dt,gt)=>(void 0===gt&&(gt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(dt.querySelectorAll(gt)).filter(at=>at.overlayIndex>0)))(dt,gt).filter(Nt=>!(dt=>dt.classList.contains("overlay-hidden"))(Nt));return void 0===at?Gt[Gt.length-1]:Gt.find(Nt=>Nt.id===at)},Qe=(dt=!1)=>{const at=Ne(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!at||(dt?at.setAttribute("aria-hidden","true"):at.removeAttribute("aria-hidden"))},he=function(){var dt=(0,c.Z)(function*(gt,at,Gt,Nt,wt){var kn,Sn;if(gt.presented)return;Qe(!0),gt.presented=!0,gt.willPresent.emit(),null===(kn=gt.willPresentShorthand)||void 0===kn||kn.emit();const Dn=(0,J.b)(gt),mn=gt.enterAnimation?gt.enterAnimation:J.c.get(at,"ios"===Dn?Gt:Nt);(yield Xe(gt,mn,gt.el,wt))&&(gt.didPresent.emit(),null===(Sn=gt.didPresentShorthand)||void 0===Sn||Sn.emit()),"ION-TOAST"!==gt.el.tagName&&me(gt.el),gt.keyboardClose&&gt.el.focus()});return function(at,Gt,Nt,wt,kn){return dt.apply(this,arguments)}}(),me=function(){var dt=(0,c.Z)(function*(gt){let at=document.activeElement;if(!at)return;const Gt=null==at?void 0:at.shadowRoot;Gt&&(at=Gt.querySelector(ke)||at),yield gt.onDidDismiss(),at.focus()});return function(at){return dt.apply(this,arguments)}}(),ge=function(){var dt=(0,c.Z)(function*(gt,at,Gt,Nt,wt,kn,Sn){var Dn,mn;if(!gt.presented)return!1;Qe(!1),gt.presented=!1;try{gt.el.style.setProperty("pointer-events","none"),gt.willDismiss.emit({data:at,role:Gt}),null===(Dn=gt.willDismissShorthand)||void 0===Dn||Dn.emit({data:at,role:Gt});const jn=(0,J.b)(gt),Yn=gt.leaveAnimation?gt.leaveAnimation:J.c.get(Nt,"ios"===jn?wt:kn);"gesture"!==Gt&&(yield Xe(gt,Yn,gt.el,Sn)),gt.didDismiss.emit({data:at,role:Gt}),null===(mn=gt.didDismissShorthand)||void 0===mn||mn.emit({data:at,role:Gt}),Ee.delete(gt),gt.el.classList.add("overlay-hidden"),gt.el.style.removeProperty("pointer-events")}catch(jn){console.error(jn)}return gt.el.remove(),!0});return function(at,Gt,Nt,wt,kn,Sn,Dn){return dt.apply(this,arguments)}}(),Ne=dt=>dt.querySelector("ion-app")||dt.body,Xe=function(){var dt=(0,c.Z)(function*(gt,at,Gt,Nt){Gt.classList.remove("overlay-hidden");const kn=at(gt.el,Nt);(!gt.animated||!J.c.getBoolean("animated",!0))&&kn.duration(0),gt.keyboardClose&&kn.beforeAddWrite(()=>{const Dn=Gt.ownerDocument.activeElement;(null==Dn?void 0:Dn.matches("input,ion-input, ion-textarea"))&&Dn.blur()});const Sn=Ee.get(gt)||[];return Ee.set(gt,[...Sn,kn]),yield kn.play(),!0});return function(at,Gt,Nt,wt){return dt.apply(this,arguments)}}(),_t=(dt,gt)=>{let at;const Gt=new Promise(Nt=>at=Nt);return xt(dt,gt,Nt=>{at(Nt.detail)}),Gt},xt=(dt,gt,at)=>{const Gt=Nt=>{(0,Se.b)(dt,gt,Gt),at(Nt)};(0,Se.a)(dt,gt,Gt)},ct=dt=>"cancel"===dt||dt===It,lt=dt=>dt(),Ve=(dt,gt)=>{if("function"==typeof dt)return J.c.get("_zoneGate",lt)(()=>{try{return dt(gt)}catch(Gt){throw Gt}})},It="backdrop"},1328:(Xt,ut,P)=>{"use strict";P.d(ut,{u:()=>be});var c=P(655),J=P(5e3),q=P(7407),Se=P(8161),Ae=P(1205),Ee=P(6115);let be=(()=>{class Re{constructor(pe,ye,Me,Oe,Ue,tt){this.afStore=pe,this.toast=ye,this.ngFireAuth=Me,this.navCtrl=Oe,this.router=Ue,this.ngZone=tt,this.user={},this.ngFireAuth.authState.subscribe(Le=>(0,c.mG)(this,void 0,void 0,function*(){if(Le){this.userData=Le;const De=yield Le.getIdToken();localStorage.setItem("user",JSON.stringify(this.userData)),localStorage.setItem("token",De)}else localStorage.removeItem("user"),localStorage.removeItem("token")}))}SendVerificationMail(){return(0,c.mG)(this,void 0,void 0,function*(){const pe=yield this.ngFireAuth.currentUser;pe&&(yield pe.sendEmailVerification(),this.router.navigate(["verify-email"]))})}get isEmailVerified(){const pe=JSON.parse(localStorage.getItem("user")||"null");return!!(null==pe?void 0:pe.emailVerified)}SetUserData(pe){return this.afStore.doc(`users/${pe.uid}`).set({uid:pe.uid,email:pe.email,displayName:pe.displayName,photoURL:pe.photoURL,emailVerified:pe.emailVerified},{merge:!0})}SignOut(){return(0,c.mG)(this,void 0,void 0,function*(){try{yield this.ngFireAuth.signOut(),localStorage.removeItem("user"),localStorage.removeItem("token"),sessionStorage.clear(),this.ngZone.run(()=>{this.router.navigate(["/login"])}),this.showToaster("You are logged out")}catch(pe){console.error("Sign out error:",pe),this.showToaster("Error during logout")}})}showToaster(pe){this.toast.create({message:pe,color:"danger",duration:4e3}).then(ye=>ye.present())}Logout(){localStorage.clear(),sessionStorage.clear(),this.router.navigate(["/login"])}get isLoggedIn(){const pe=JSON.parse(localStorage.getItem("user")||"null");return null!==pe&&!0===pe.emailVerified&&!!localStorage.getItem("token")}}return Re.\u0275fac=function(pe){return new(pe||Re)(J.LFG(q.ST),J.LFG(Se.yF),J.LFG(Ae.zQ),J.LFG(Se.SH),J.LFG(Ee.F0),J.LFG(J.R0b))},Re.\u0275prov=J.Yz7({token:Re,factory:Re.\u0275fac,providedIn:"root"}),Re})()},2024:(Xt,ut,P)=>{"use strict";var c=P(9808),J=P(5e3);class q extends c.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Se extends q{static makeCurrent(){(0,c.HT)(new Se)}onAndCancel(o,l,f){return o.addEventListener(l,f,!1),()=>{o.removeEventListener(l,f,!1)}}dispatchEvent(o,l){o.dispatchEvent(l)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,l){return(l=l||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,l){return"window"===l?window:"document"===l?o:"body"===l?o.body:null}getBaseHref(o){const l=function Ee(){return Ae=Ae||document.querySelector("base"),Ae?Ae.getAttribute("href"):null}();return null==l?null:function Re(u){be=be||document.createElement("a"),be.setAttribute("href",u);const o=be.pathname;return"/"===o.charAt(0)?o:`/${o}`}(l)}resetBaseElement(){Ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return(0,c.Mx)(document.cookie,o)}}let be,Ae=null;const ze=new J.OlP("TRANSITION_ID"),ye=[{provide:J.ip1,useFactory:function pe(u,o,l){return()=>{l.get(J.CZH).donePromise.then(()=>{const f=(0,c.q)(),v=o.querySelectorAll(`style[ng-transition="${u}"]`);for(let T=0;T<v.length;T++)f.remove(v[T])})}},deps:[ze,c.K0,J.zs3],multi:!0}];class Me{static init(){(0,J.VLi)(new Me)}addToWindow(o){J.dqk.getAngularTestability=(f,v=!0)=>{const T=o.findTestabilityInTree(f,v);if(null==T)throw new Error("Could not find testability for element.");return T},J.dqk.getAllAngularTestabilities=()=>o.getAllTestabilities(),J.dqk.getAllAngularRootElements=()=>o.getAllRootElements(),J.dqk.frameworkStabilizers||(J.dqk.frameworkStabilizers=[]),J.dqk.frameworkStabilizers.push(f=>{const v=J.dqk.getAllAngularTestabilities();let T=v.length,R=!1;const Q=function(oe){R=R||oe,T--,0==T&&f(R)};v.forEach(function(oe){oe.whenStable(Q)})})}findTestabilityInTree(o,l,f){if(null==l)return null;const v=o.getTestability(l);return null!=v?v:f?(0,c.q)().isShadowRoot(l)?this.findTestabilityInTree(o,l.host,!0):this.findTestabilityInTree(o,l.parentElement,!0):null}}let Oe=(()=>{class u{build(){return new XMLHttpRequest}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac}),u})();const Ue=new J.OlP("EventManagerPlugins");let tt=(()=>{class u{constructor(l,f){this._zone=f,this._eventNameToPlugin=new Map,l.forEach(v=>v.manager=this),this._plugins=l.slice().reverse()}addEventListener(l,f,v){return this._findPluginFor(f).addEventListener(l,f,v)}addGlobalEventListener(l,f,v){return this._findPluginFor(f).addGlobalEventListener(l,f,v)}getZone(){return this._zone}_findPluginFor(l){const f=this._eventNameToPlugin.get(l);if(f)return f;const v=this._plugins;for(let T=0;T<v.length;T++){const R=v[T];if(R.supports(l))return this._eventNameToPlugin.set(l,R),R}throw new Error(`No event manager plugin found for event ${l}`)}}return u.\u0275fac=function(l){return new(l||u)(J.LFG(Ue),J.LFG(J.R0b))},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac}),u})();class Le{constructor(o){this._doc=o}addGlobalEventListener(o,l,f){const v=(0,c.q)().getGlobalEventTarget(this._doc,o);if(!v)throw new Error(`Unsupported event target ${v} for event ${l}`);return this.addEventListener(v,l,f)}}let De=(()=>{class u{constructor(){this._stylesSet=new Set}addStyles(l){const f=new Set;l.forEach(v=>{this._stylesSet.has(v)||(this._stylesSet.add(v),f.add(v))}),this.onStylesAdded(f)}onStylesAdded(l){}getAllStyles(){return Array.from(this._stylesSet)}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac}),u})(),ke=(()=>{class u extends De{constructor(l){super(),this._doc=l,this._hostNodes=new Map,this._hostNodes.set(l.head,[])}_addStylesToHost(l,f,v){l.forEach(T=>{const R=this._doc.createElement("style");R.textContent=T,v.push(f.appendChild(R))})}addHost(l){const f=[];this._addStylesToHost(this._stylesSet,l,f),this._hostNodes.set(l,f)}removeHost(l){const f=this._hostNodes.get(l);f&&f.forEach(Ce),this._hostNodes.delete(l)}onStylesAdded(l){this._hostNodes.forEach((f,v)=>{this._addStylesToHost(l,v,f)})}ngOnDestroy(){this._hostNodes.forEach(l=>l.forEach(Ce))}}return u.\u0275fac=function(l){return new(l||u)(J.LFG(c.K0))},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac}),u})();function Ce(u){(0,c.q)().remove(u)}const nt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ot=/%COMP%/g;function he(u,o,l){for(let f=0;f<o.length;f++){let v=o[f];Array.isArray(v)?he(u,v,l):(v=v.replace(ot,u),l.push(v))}return l}function me(u){return o=>{if("__ngUnwrap__"===o)return u;!1===u(o)&&(o.preventDefault(),o.returnValue=!1)}}let Ne=(()=>{class u{constructor(l,f,v){this.eventManager=l,this.sharedStylesHost=f,this.appId=v,this.rendererByCompId=new Map,this.defaultRenderer=new Xe(l)}createRenderer(l,f){if(!l||!f)return this.defaultRenderer;switch(f.encapsulation){case J.ifc.Emulated:{let v=this.rendererByCompId.get(f.id);return v||(v=new ct(this.eventManager,this.sharedStylesHost,f,this.appId),this.rendererByCompId.set(f.id,v)),v.applyToHost(l),v}case 1:case J.ifc.ShadowDom:return new lt(this.eventManager,this.sharedStylesHost,l,f);default:if(!this.rendererByCompId.has(f.id)){const v=he(f.id,f.styles,[]);this.sharedStylesHost.addStyles(v),this.rendererByCompId.set(f.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return u.\u0275fac=function(l){return new(l||u)(J.LFG(tt),J.LFG(ke),J.LFG(J.AFp))},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac}),u})();class Xe{constructor(o){this.eventManager=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(o,l){return l?document.createElementNS(nt[l]||l,o):document.createElement(o)}createComment(o){return document.createComment(o)}createText(o){return document.createTextNode(o)}appendChild(o,l){o.appendChild(l)}insertBefore(o,l,f){o&&o.insertBefore(l,f)}removeChild(o,l){o&&o.removeChild(l)}selectRootElement(o,l){let f="string"==typeof o?document.querySelector(o):o;if(!f)throw new Error(`The selector "${o}" did not match any elements`);return l||(f.textContent=""),f}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,l,f,v){if(v){l=v+":"+l;const T=nt[v];T?o.setAttributeNS(T,l,f):o.setAttribute(l,f)}else o.setAttribute(l,f)}removeAttribute(o,l,f){if(f){const v=nt[f];v?o.removeAttributeNS(v,l):o.removeAttribute(`${f}:${l}`)}else o.removeAttribute(l)}addClass(o,l){o.classList.add(l)}removeClass(o,l){o.classList.remove(l)}setStyle(o,l,f,v){v&(J.JOm.DashCase|J.JOm.Important)?o.style.setProperty(l,f,v&J.JOm.Important?"important":""):o.style[l]=f}removeStyle(o,l,f){f&J.JOm.DashCase?o.style.removeProperty(l):o.style[l]=""}setProperty(o,l,f){o[l]=f}setValue(o,l){o.nodeValue=l}listen(o,l,f){return"string"==typeof o?this.eventManager.addGlobalEventListener(o,l,me(f)):this.eventManager.addEventListener(o,l,me(f))}}class ct extends Xe{constructor(o,l,f,v){super(o),this.component=f;const T=he(v+"-"+f.id,f.styles,[]);l.addStyles(T),this.contentAttr=function ee(u){return"_ngcontent-%COMP%".replace(ot,u)}(v+"-"+f.id),this.hostAttr=function Qe(u){return"_nghost-%COMP%".replace(ot,u)}(v+"-"+f.id)}applyToHost(o){super.setAttribute(o,this.hostAttr,"")}createElement(o,l){const f=super.createElement(o,l);return super.setAttribute(f,this.contentAttr,""),f}}class lt extends Xe{constructor(o,l,f,v){super(o),this.sharedStylesHost=l,this.hostEl=f,this.shadowRoot=f.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const T=he(v.id,v.styles,[]);for(let R=0;R<T.length;R++){const Q=document.createElement("style");Q.textContent=T[R],this.shadowRoot.appendChild(Q)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(o,l){return super.appendChild(this.nodeOrShadowRoot(o),l)}insertBefore(o,l,f){return super.insertBefore(this.nodeOrShadowRoot(o),l,f)}removeChild(o,l){return super.removeChild(this.nodeOrShadowRoot(o),l)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}}let Ve=(()=>{class u extends Le{constructor(l){super(l)}supports(l){return!0}addEventListener(l,f,v){return l.addEventListener(f,v,!1),()=>this.removeEventListener(l,f,v)}removeEventListener(l,f,v){return l.removeEventListener(f,v)}}return u.\u0275fac=function(l){return new(l||u)(J.LFG(c.K0))},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac}),u})();const It=["alt","control","meta","shift"],gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},at={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Gt={alt:u=>u.altKey,control:u=>u.ctrlKey,meta:u=>u.metaKey,shift:u=>u.shiftKey};let Nt=(()=>{class u extends Le{constructor(l){super(l)}supports(l){return null!=u.parseEventName(l)}addEventListener(l,f,v){const T=u.parseEventName(f),R=u.eventCallback(T.fullKey,v,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,c.q)().onAndCancel(l,T.domEventName,R))}static parseEventName(l){const f=l.toLowerCase().split("."),v=f.shift();if(0===f.length||"keydown"!==v&&"keyup"!==v)return null;const T=u._normalizeKey(f.pop());let R="";if(It.forEach(oe=>{const ve=f.indexOf(oe);ve>-1&&(f.splice(ve,1),R+=oe+".")}),R+=T,0!=f.length||0===T.length)return null;const Q={};return Q.domEventName=v,Q.fullKey=R,Q}static getEventFullKey(l){let f="",v=function wt(u){let o=u.key;if(null==o){if(o=u.keyIdentifier,null==o)return"Unidentified";o.startsWith("U+")&&(o=String.fromCharCode(parseInt(o.substring(2),16)),3===u.location&&at.hasOwnProperty(o)&&(o=at[o]))}return gt[o]||o}(l);return v=v.toLowerCase()," "===v?v="space":"."===v&&(v="dot"),It.forEach(T=>{T!=v&&Gt[T](l)&&(f+=T+".")}),f+=v,f}static eventCallback(l,f,v){return T=>{u.getEventFullKey(T)===l&&v.runGuarded(()=>f(T))}}static _normalizeKey(l){return"esc"===l?"escape":l}}return u.\u0275fac=function(l){return new(l||u)(J.LFG(c.K0))},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac}),u})();const jn=(0,J.eFA)(J._c5,"browser",[{provide:J.Lbi,useValue:c.bD},{provide:J.g9A,useValue:function kn(){Se.makeCurrent(),Me.init()},multi:!0},{provide:c.K0,useFactory:function Dn(){return(0,J.RDi)(document),document},deps:[]}]),Yn=[{provide:J.zSh,useValue:"root"},{provide:J.qLn,useFactory:function Sn(){return new J.qLn},deps:[]},{provide:Ue,useClass:Ve,multi:!0,deps:[c.K0,J.R0b,J.Lbi]},{provide:Ue,useClass:Nt,multi:!0,deps:[c.K0]},{provide:Ne,useClass:Ne,deps:[tt,ke,J.AFp]},{provide:J.FYo,useExisting:Ne},{provide:De,useExisting:ke},{provide:ke,useClass:ke,deps:[c.K0]},{provide:J.dDg,useClass:J.dDg,deps:[J.R0b]},{provide:tt,useClass:tt,deps:[Ue,J.R0b]},{provide:c.JF,useClass:Oe,deps:[]}];let lr=(()=>{class u{constructor(l){if(l)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(l){return{ngModule:u,providers:[{provide:J.AFp,useValue:l.appId},{provide:ze,useExisting:J.AFp},ye]}}}return u.\u0275fac=function(l){return new(l||u)(J.LFG(u,12))},u.\u0275mod=J.oAB({type:u}),u.\u0275inj=J.cJS({providers:Yn,imports:[c.ez,J.hGG]}),u})();"undefined"!=typeof window&&window;var Gr=P(2011),Bn=P(6115),wi=P(8306),Yr=P(9646),Hr=P(8996),$i=P(4986),Nr=P(4482),pi=P(5403),gi=P(4004),yi=P(3900),Sr=P(5813),Br=P(3942),oi=P(5861),Gn=P(9681),te=P(2090),cn=P(4859);const Zn="firebasestorage.googleapis.com",Zr="storageBucket";class or extends te.ZR{constructor(o,l){super(Ir(o),`Firebase Storage: ${l} (${Ir(o)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,or.prototype)}_codeEquals(o){return Ir(o)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(o){this.customData.serverResponse=o,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ir(u){return"storage/"+u}function mi(){return new or("unknown","An unknown error occurred, please check the error payload for server response.")}function Cr(){return new or("canceled","User canceled the upload/download.")}function fe(){return new or("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function _e(u){return new or("invalid-argument",u)}function Te(){return new or("app-deleted","The Firebase app was deleted.")}function pt(u){return new or("invalid-root-operation","The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vt(u,o){return new or("invalid-format","String does not match format '"+u+"': "+o)}function Rt(u){throw new or("internal-error","Internal error: "+u)}class Ft{constructor(o,l){this.bucket=o,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const o=encodeURIComponent;return"/b/"+o(this.bucket)+"/o/"+o(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(o,l){let f;try{f=Ft.makeFromUrl(o,l)}catch(v){return new Ft(o,"")}if(""===f.path)return f;throw function Si(u){return new or("invalid-default-bucket","Invalid default bucket '"+u+"'.")}(o)}static makeFromUrl(o,l){let f=null;const v="([A-Za-z0-9.\\-_]+)",Q=new RegExp("^gs://"+v+"(/(.*))?$","i");function ve(co){co.path_=decodeURIComponent(co.path)}const Ct=l.replace(/[.]/g,"\\."),As=[{regex:Q,indices:{bucket:1,path:3},postModify:function T(co){"/"===co.path.charAt(co.path.length-1)&&(co.path_=co.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Ct}/v[A-Za-z0-9_]+/b/${v}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ve},{regex:new RegExp(`^https?://${l===Zn?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${v}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ve}];for(let co=0;co<As.length;co++){const zu=As[co],Wu=zu.regex.exec(o);if(Wu){let Nl=Wu[zu.indices.path];Nl||(Nl=""),f=new Ft(Wu[zu.indices.bucket],Nl),zu.postModify(f);break}}if(null==f)throw function ui(u){return new or("invalid-url","Invalid URL '"+u+"'.")}(o);return f}}class ln{constructor(o){this.promise_=Promise.reject(o)}getPromise(){return this.promise_}cancel(o=!1){}}function rt(u){return"string"==typeof u||u instanceof String}function Ge(u){return Dt()&&u instanceof Blob}function Dt(){return"undefined"!=typeof Blob}function Wt(u,o,l,f){if(f<o)throw _e(`Invalid value for '${u}'. Expected ${o} or greater.`);if(f>l)throw _e(`Invalid value for '${u}'. Expected ${l} or less.`)}function Zt(u,o,l){let f=o;return null==l&&(f=`https://${o}`),`${l}://${f}/v0${u}`}function pn(u){const o=encodeURIComponent;let l="?";for(const f in u)u.hasOwnProperty(f)&&(l=l+(o(f)+"=")+o(u[f])+"&");return l=l.slice(0,-1),l}var cr=(()=>{return(u=cr||(cr={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",cr;var u})();class bi{constructor(o,l,f,v,T,R,Q,oe,ve,vt,Ct){this.url_=o,this.method_=l,this.headers_=f,this.body_=v,this.successCodes_=T,this.additionalRetryCodes_=R,this.callback_=Q,this.errorCallback_=oe,this.timeout_=ve,this.progressCallback_=vt,this.connectionFactory_=Ct,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((jt,on)=>{this.resolve_=jt,this.reject_=on,this.start_()})}start_(){const l=(f,v)=>{const T=this.resolve_,R=this.reject_,Q=v.connection;if(v.wasSuccessCode)try{const oe=this.callback_(Q,Q.getResponse());!function nr(u){return void 0!==u}(oe)?T():T(oe)}catch(oe){R(oe)}else if(null!==Q){const oe=mi();oe.serverResponse=Q.getErrorText(),R(this.errorCallback_?this.errorCallback_(Q,oe):oe)}else R(v.canceled?this.appDelete_?Te():Cr():function li(){return new or("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?l(0,new Dr(!1,null,!0)):this.backoffId_=function An(u,o,l){let f=1,v=null,T=null,R=!1,Q=0;function oe(){return 2===Q}let ve=!1;function vt(...qr){ve||(ve=!0,o.apply(null,qr))}function Ct(qr){v=setTimeout(()=>{v=null,u(on,oe())},qr)}function jt(){T&&clearTimeout(T)}function on(qr,...lo){if(ve)return void jt();if(qr)return jt(),void vt.call(null,qr,...lo);if(oe()||R)return jt(),void vt.call(null,qr,...lo);let As;f<64&&(f*=2),1===Q?(Q=2,As=0):As=1e3*(f+Math.random()),Ct(As)}let gn=!1;function br(qr){gn||(gn=!0,jt(),!ve&&(null!==v?(qr||(Q=2),clearTimeout(v),Ct(0)):qr||(Q=1)))}return Ct(0),T=setTimeout(()=>{R=!0,br(!0)},l),br}((f,v)=>{if(v)return void f(!1,new Dr(!1,null,!0));const T=this.connectionFactory_();this.pendingConnection_=T;const R=Q=>{null!==this.progressCallback_&&this.progressCallback_(Q.loaded,Q.lengthComputable?Q.total:-1)};null!==this.progressCallback_&&T.addUploadProgressListener(R),T.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&T.removeUploadProgressListener(R),this.pendingConnection_=null;const Q=T.getErrorCode()===cr.NO_ERROR,oe=T.getStatus();if(!Q||this.isRetryStatusCode_(oe)){const vt=T.getErrorCode()===cr.ABORT;return void f(!1,new Dr(!1,null,vt))}const ve=-1!==this.successCodes_.indexOf(oe);f(!0,new Dr(ve,T))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(o){this.canceled_=!0,this.appDelete_=o||!1,null!==this.backoffId_&&function Xn(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(o){const l=o>=500&&o<600,v=-1!==[408,429].indexOf(o),T=-1!==this.additionalRetryCodes_.indexOf(o);return l||v||T}}class Dr{constructor(o,l,f){this.wasSuccessCode=o,this.connection=l,this.canceled=!!f}}function fo(...u){const o=function Qs(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==o){const l=new o;for(let f=0;f<u.length;f++)l.append(u[f]);return l.getBlob()}if(Dt())return new Blob(u);throw new or("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ss{constructor(o,l){this.data=o,this.contentType=l||null}}function ws(u,o){switch(u){case Jr.RAW:return new ss(Is(o));case Jr.BASE64:case Jr.BASE64URL:return new ss(Hs(u,o));case Jr.DATA_URL:return new ss(function Js(u){const o=new os(u);return o.base64?Hs(Jr.BASE64,o.rest):function Go(u){let o;try{o=decodeURIComponent(u)}catch(l){throw Vt(Jr.DATA_URL,"Malformed data URL.")}return Is(o)}(o.rest)}(o),function Bi(u){return new os(u).contentType}(o))}throw mi()}function Is(u){const o=[];for(let l=0;l<u.length;l++){let f=u.charCodeAt(l);f<=127?o.push(f):f<=2047?o.push(192|f>>6,128|63&f):55296==(64512&f)?l<u.length-1&&56320==(64512&u.charCodeAt(l+1))?(f=65536|(1023&f)<<10|1023&u.charCodeAt(++l),o.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|63&f)):o.push(239,191,189):56320==(64512&f)?o.push(239,191,189):o.push(224|f>>12,128|f>>6&63,128|63&f)}return new Uint8Array(o)}function Hs(u,o){switch(u){case Jr.BASE64:{const v=-1!==o.indexOf("-"),T=-1!==o.indexOf("_");if(v||T)throw Vt(u,"Invalid character '"+(v?"-":"_")+"' found: is it base64url encoded?");break}case Jr.BASE64URL:{const v=-1!==o.indexOf("+"),T=-1!==o.indexOf("/");if(v||T)throw Vt(u,"Invalid character '"+(v?"+":"/")+"' found: is it base64 encoded?");o=o.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Pi(u){return atob(u)}(o)}catch(v){throw Vt(u,"Invalid character found")}const f=new Uint8Array(l.length);for(let v=0;v<l.length;v++)f[v]=l.charCodeAt(v);return f}class os{constructor(o){this.base64=!1,this.contentType=null;const l=o.match(/^data:([^,]+)?,/);if(null===l)throw Vt(Jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const f=l[1]||null;null!=f&&(this.base64=function eo(u,o){return u.length>=o.length&&u.substring(u.length-o.length)===o}(f,";base64"),this.contentType=this.base64?f.substring(0,f.length-7):f),this.rest=o.substring(o.indexOf(",")+1)}}class Tr{constructor(o,l){let f=0,v="";Ge(o)?(this.data_=o,f=o.size,v=o.type):o instanceof ArrayBuffer?(l?this.data_=new Uint8Array(o):(this.data_=new Uint8Array(o.byteLength),this.data_.set(new Uint8Array(o))),f=this.data_.length):o instanceof Uint8Array&&(l?this.data_=o:(this.data_=new Uint8Array(o.length),this.data_.set(o)),f=o.length),this.size_=f,this.type_=v}size(){return this.size_}type(){return this.type_}slice(o,l){if(Ge(this.data_)){const v=function Ho(u,o,l){return u.webkitSlice?u.webkitSlice(o,l):u.mozSlice?u.mozSlice(o,l):u.slice?u.slice(o,l):null}(this.data_,o,l);return null===v?null:new Tr(v)}{const f=new Uint8Array(this.data_.buffer,o,l-o);return new Tr(f,!0)}}static getBlob(...o){if(Dt()){const l=o.map(f=>f instanceof Tr?f.data_:f);return new Tr(fo.apply(null,l))}{const l=o.map(R=>rt(R)?ws(Jr.RAW,R).data:R.data_);let f=0;l.forEach(R=>{f+=R.byteLength});const v=new Uint8Array(f);let T=0;return l.forEach(R=>{for(let Q=0;Q<R.length;Q++)v[T++]=R[Q]}),new Tr(v,!0)}}uploadData(){return this.data_}}function bs(u){let o;try{o=JSON.parse(u)}catch(l){return null}return function Ii(u){return"object"==typeof u&&!Array.isArray(u)}(o)?o:null}function Qi(u){const o=u.lastIndexOf("/",u.length-2);return-1===o?u:u.slice(o+1)}function Oo(u,o){return o}class zr{constructor(o,l,f,v){this.server=o,this.local=l||o,this.writable=!!f,this.xform=v||Oo}}let Ji=null;function Cs(){if(Ji)return Ji;const u=[];u.push(new zr("bucket")),u.push(new zr("generation")),u.push(new zr("metageneration")),u.push(new zr("name","fullPath",!0));const l=new zr("name");l.xform=function o(T,R){return function ls(u){return!rt(u)||u.length<2?u:Qi(u)}(R)},u.push(l);const v=new zr("size");return v.xform=function f(T,R){return void 0!==R?Number(R):R},u.push(v),u.push(new zr("timeCreated")),u.push(new zr("updated")),u.push(new zr("md5Hash",null,!0)),u.push(new zr("cacheControl",null,!0)),u.push(new zr("contentDisposition",null,!0)),u.push(new zr("contentEncoding",null,!0)),u.push(new zr("contentLanguage",null,!0)),u.push(new zr("contentType",null,!0)),u.push(new zr("metadata","customMetadata",!0)),Ji=u,Ji}function se(u,o,l){const f=bs(o);return null===f?null:function V(u,o,l){const f={type:"file"},v=l.length;for(let T=0;T<v;T++){const R=l[T];f[R.local]=R.xform(f,o[R.server])}return function _r(u,o){Object.defineProperty(u,"ref",{get:function l(){const T=new Ft(u.bucket,u.fullPath);return o._makeStorageReference(T)}})}(f,u),f}(u,f,l)}function ue(u,o){const l={},f=o.length;for(let v=0;v<f;v++){const T=o[v];T.writable&&(l[T.server]=u[T.local])}return JSON.stringify(l)}const Be="prefixes";class Pn{constructor(o,l,f,v){this.url=o,this.method=l,this.handler=f,this.timeout=v,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Jn(u){if(!u)throw mi()}function ir(u,o){return function l(f,v){const T=se(u,v,o);return Jn(null!==T),T}}function Vr(u){return function o(l,f){let v;return v=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function Oi(){return new or("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Li(){return new or("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function zn(u){return new or("quota-exceeded","Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===l.getStatus()?function Zi(u){return new or("unauthorized","User does not have permission to access '"+u+"'.")}(u.path):f,v.serverResponse=f.serverResponse,v}}function Ur(u){const o=Vr(u);return function l(f,v){let T=o(f,v);return 404===f.getStatus()&&(T=function Mr(u){return new or("object-not-found","Object '"+u+"' does not exist.")}(u.path)),T.serverResponse=v.serverResponse,T}}function Ns(u,o,l){const v=Zt(o.fullServerUrl(),u.host,u._protocol),R=u.maxOperationRetryTime,Q=new Pn(v,"GET",ir(u,l),R);return Q.errorHandler=Ur(o),Q}function es(u,o,l,f,v){const T={};T.prefix=o.isRoot?"":o.path+"/",l&&l.length>0&&(T.delimiter=l),f&&(T.pageToken=f),v&&(T.maxResults=v);const Q=Zt(o.bucketOnlyServerUrl(),u.host,u._protocol),ve=u.maxOperationRetryTime,vt=new Pn(Q,"GET",function dr(u,o){return function l(f,v){const T=function xn(u,o,l){const f=bs(l);return null===f?null:function qt(u,o,l){const f={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[Be])for(const v of l[Be]){const T=v.replace(/\/$/,""),R=u._makeStorageReference(new Ft(o,T));f.prefixes.push(R)}if(l.items)for(const v of l.items){const T=u._makeStorageReference(new Ft(o,v.name));f.items.push(T)}return f}(u,o,f)}(u,o,v);return Jn(null!==T),T}}(u,o.bucket),ve);return vt.urlParams=T,vt.errorHandler=Vr(o),vt}function z(u,o,l){const f=Object.assign({},l);return f.fullPath=u.path,f.size=o.size(),f.contentType||(f.contentType=function Gs(u,o){return u&&u.contentType||o&&o.type()||"application/octet-stream"}(null,o)),f}class N{constructor(o,l,f,v){this.current=o,this.total=l,this.finalized=!!f,this.metadata=v||null}}function Y(u,o){let l=null;try{l=u.getResponseHeader("X-Goog-Upload-Status")}catch(v){Jn(!1)}return Jn(!!l&&-1!==(o||["active"]).indexOf(l)),l}const E=262144;const w={STATE_CHANGED:"state_changed"},B={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ce(u){switch(u){case"running":case"pausing":case"canceling":return B.RUNNING;case"paused":return B.PAUSED;case"success":return B.SUCCESS;case"canceled":return B.CANCELED;default:return B.ERROR}}class Pt{constructor(o,l,f){if(function ci(u){return"function"==typeof u}(o)||null!=l||null!=f)this.next=o,this.error=null!=l?l:void 0,this.complete=null!=f?f:void 0;else{const T=o;this.next=T.next,this.error=T.error,this.complete=T.complete}}}function an(u){return(...o)=>{Promise.resolve().then(()=>u(...o))}}class $r extends class er{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cr.NO_ERROR,this.sendPromise_=new Promise(o=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=cr.ABORT,o()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=cr.NETWORK_ERROR,o()}),this.xhr_.addEventListener("load",()=>{o()})})}send(o,l,f,v){if(this.sent_)throw Rt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,o,!0),void 0!==v)for(const T in v)v.hasOwnProperty(T)&&this.xhr_.setRequestHeader(T,v[T].toString());return void 0!==f?this.xhr_.send(f):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(o){return-1}}getResponse(){if(!this.sent_)throw Rt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(o){return this.xhr_.getResponseHeader(o)}addUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",o)}removeUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",o)}}{initXhr(){this.xhr_.responseType="text"}}function tr(){return new $r}class to{constructor(o,l,f=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=o,this._blob=l,this._metadata=f,this._mappings=Cs(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=v=>{this._request=void 0,this._chunkMultiplier=1,v._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=v,this._transition("error"))},this._metadataErrorHandler=v=>{this._request=void 0,v._codeEquals("canceled")?this.completeTransitions_():(this._error=v,this._transition("error"))},this._promise=new Promise((v,T)=>{this._resolve=v,this._reject=T,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const o=this._transferred;return l=>this._updateProgress(o+l)}_shouldDoResumable(o){return o.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(o){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,f])=>{switch(this._state){case"running":o(l,f);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((o,l)=>{const f=function Tt(u,o,l,f,v){const T=o.bucketOnlyServerUrl(),R=z(o,f,v),Q={name:R.fullPath},oe=Zt(T,u.host,u._protocol),vt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${f.size()}`,"X-Goog-Upload-Header-Content-Type":R.contentType,"Content-Type":"application/json; charset=utf-8"},Ct=ue(R,l),gn=new Pn(oe,"POST",function on(br){let qr;Y(br);try{qr=br.getResponseHeader("X-Goog-Upload-URL")}catch(lo){Jn(!1)}return Jn(rt(qr)),qr},u.maxUploadRetryTime);return gn.urlParams=Q,gn.headers=vt,gn.body=Ct,gn.errorHandler=Vr(o),gn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),v=this._ref.storage._makeRequest(f,tr,o,l);this._request=v,v.getPromise().then(T=>{this._request=void 0,this._uploadUrl=T,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const o=this._uploadUrl;this._resolveToken((l,f)=>{const v=function _n(u,o,l,f){const oe=new Pn(l,"POST",function T(ve){const vt=Y(ve,["active","final"]);let Ct=null;try{Ct=ve.getResponseHeader("X-Goog-Upload-Size-Received")}catch(on){Jn(!1)}Ct||Jn(!1);const jt=Number(Ct);return Jn(!isNaN(jt)),new N(jt,f.size(),"final"===vt)},u.maxUploadRetryTime);return oe.headers={"X-Goog-Upload-Command":"query"},oe.errorHandler=Vr(o),oe}(this._ref.storage,this._ref._location,o,this._blob),T=this._ref.storage._makeRequest(v,tr,l,f);this._request=T,T.getPromise().then(R=>{R=R,this._request=void 0,this._updateProgress(R.current),this._needToFetchStatus=!1,R.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const o=E*this._chunkMultiplier,l=new N(this._transferred,this._blob.size()),f=this._uploadUrl;this._resolveToken((v,T)=>{let R;try{R=function G(u,o,l,f,v,T,R,Q){const oe=new N(0,0);if(R?(oe.current=R.current,oe.total=R.total):(oe.current=0,oe.total=f.size()),f.size()!==oe.total)throw function et(){return new or("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const ve=oe.total-oe.current;let vt=ve;v>0&&(vt=Math.min(vt,v));const Ct=oe.current,gn={"X-Goog-Upload-Command":vt===ve?"upload, finalize":"upload","X-Goog-Upload-Offset":`${oe.current}`},br=f.slice(Ct,Ct+vt);if(null===br)throw fe();const As=new Pn(l,"POST",function qr(co,zu){const Wu=Y(co,["active","final"]),Kg=oe.current+vt,Nl=f.size();let Cp;return Cp="final"===Wu?ir(o,T)(co,zu):null,new N(Kg,Nl,"final"===Wu,Cp)},o.maxUploadRetryTime);return As.headers=gn,As.body=br.uploadData(),As.progressCallback=Q||null,As.errorHandler=Vr(u),As}(this._ref._location,this._ref.storage,f,this._blob,o,this._mappings,l,this._makeProgressCallback())}catch(oe){return this._error=oe,void this._transition("error")}const Q=this._ref.storage._makeRequest(R,tr,v,T);this._request=Q,Q.getPromise().then(oe=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(oe.current),oe.finalized?(this._metadata=oe.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){E*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((o,l)=>{const f=Ns(this._ref.storage,this._ref._location,this._mappings),v=this._ref.storage._makeRequest(f,tr,o,l);this._request=v,v.getPromise().then(T=>{this._request=void 0,this._metadata=T,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((o,l)=>{const f=function L(u,o,l,f,v){const T=o.bucketOnlyServerUrl(),R={"X-Goog-Upload-Protocol":"multipart"},oe=function Q(){let As="";for(let co=0;co<2;co++)As+=Math.random().toString().slice(2);return As}();R["Content-Type"]="multipart/related; boundary="+oe;const ve=z(o,f,v),vt=ue(ve,l),on=Tr.getBlob("--"+oe+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+vt+"\r\n--"+oe+"\r\nContent-Type: "+ve.contentType+"\r\n\r\n",f,"\r\n--"+oe+"--");if(null===on)throw fe();const gn={name:ve.fullPath},br=Zt(T,u.host,u._protocol),lo=u.maxUploadRetryTime,uo=new Pn(br,"POST",ir(u,l),lo);return uo.urlParams=gn,uo.headers=R,uo.body=on.uploadData(),uo.errorHandler=Vr(o),uo}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),v=this._ref.storage._makeRequest(f,tr,o,l);this._request=v,v.getPromise().then(T=>{this._request=void 0,this._metadata=T,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(o){const l=this._transferred;this._transferred=o,this._transferred!==l&&this._notifyObservers()}_transition(o){if(this._state!==o)switch(o){case"canceling":case"pausing":this._state=o,void 0!==this._request&&this._request.cancel();break;case"running":const l="paused"===this._state;this._state=o,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=o,this._notifyObservers();break;case"canceled":this._error=Cr(),this._state=o,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const o=ce(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:o,metadata:this._metadata,task:this,ref:this._ref}}on(o,l,f,v){const T=new Pt(l||void 0,f||void 0,v||void 0);return this._addObserver(T),()=>{this._removeObserver(T)}}then(o,l){return this._promise.then(o,l)}catch(o){return this.then(null,o)}_addObserver(o){this._observers.push(o),this._notifyObserver(o)}_removeObserver(o){const l=this._observers.indexOf(o);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let o=!0;switch(ce(this._state)){case B.SUCCESS:an(this._resolve.bind(null,this.snapshot))();break;case B.CANCELED:case B.ERROR:an(this._reject.bind(null,this._error))();break;default:o=!1}o&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(o){switch(ce(this._state)){case B.RUNNING:case B.PAUSED:o.next&&an(o.next.bind(o,this.snapshot))();break;case B.SUCCESS:o.complete&&an(o.complete.bind(o))();break;default:o.error&&an(o.error.bind(o,this._error))()}}resume(){const o="paused"===this._state||"pausing"===this._state;return o&&this._transition("running"),o}pause(){const o="running"===this._state;return o&&this._transition("pausing"),o}cancel(){const o="running"===this._state||"pausing"===this._state;return o&&this._transition("canceling"),o}}class ni{constructor(o,l){this._service=o,this._location=l instanceof Ft?l:Ft.makeFromUrl(l,o.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(o,l){return new ni(o,l)}get root(){const o=new Ft(this._location.bucket,"");return this._newRef(this._service,o)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qi(this._location.path)}get storage(){return this._service}get parent(){const o=function as(u){if(0===u.length)return null;const o=u.lastIndexOf("/");return-1===o?"":u.slice(0,o)}(this._location.path);if(null===o)return null;const l=new Ft(this._location.bucket,o);return new ni(this._service,l)}_throwIfRoot(o){if(""===this._location.path)throw pt(o)}}function Vl(u,o,l){return fa.apply(this,arguments)}function fa(){return(fa=(0,oi.Z)(function*(u,o,l){const v=yield ko(u,{pageToken:l});o.prefixes.push(...v.prefixes),o.items.push(...v.items),null!=v.nextPageToken&&(yield Vl(u,o,v.nextPageToken))})).apply(this,arguments)}function ko(u,o){null!=o&&"number"==typeof o.maxResults&&Wt("options.maxResults",1,1e3,o.maxResults);const l=o||{},f=es(u.storage,u._location,"/",l.pageToken,l.maxResults);return u.storage.makeRequestWithTokens(f,tr)}function pa(u){u._throwIfRoot("getDownloadURL");const o=function xs(u,o,l){const v=Zt(o.fullServerUrl(),u.host,u._protocol),R=u.maxOperationRetryTime,Q=new Pn(v,"GET",function di(u,o){return function l(f,v){const T=se(u,v,o);return Jn(null!==T),function U(u,o,l,f){const v=bs(o);if(null===v||!rt(v.downloadTokens))return null;const T=v.downloadTokens;if(0===T.length)return null;const R=encodeURIComponent;return T.split(",").map(ve=>{const Ct=u.fullPath;return Zt("/b/"+R(u.bucket)+"/o/"+R(Ct),l,f)+pn({alt:"media",token:ve})})[0]}(T,v,u.host,u._protocol)}}(u,l),R);return Q.errorHandler=Ur(o),Q}(u.storage,u._location,Cs());return u.storage.makeRequestWithTokens(o,tr).then(l=>{if(null===l)throw function ft(){return new or("no-download-url","The given file does not have any download URLs.")}();return l})}function ra(u,o){const l=function Xi(u,o){const l=o.split("/").filter(f=>f.length>0).join("/");return 0===u.length?l:u+"/"+l}(u._location.path,o),f=new Ft(u._location.bucket,l);return new ni(u.storage,f)}function ts(u,o){if(u instanceof ga){const l=u;if(null==l._bucket)throw function re(){return new or("no-default-bucket","No default bucket found. Did you set the '"+Zr+"' property when initializing the app?")}();const f=new ni(l,l._bucket);return null!=o?ts(f,o):f}return void 0!==o?ra(u,o):u}function No(u,o){if(o&&function Ra(u){return/^[A-Za-z]+:\/\//.test(u)}(o)){if(u instanceof ga)return function Ul(u,o){return new ni(u,o)}(u,o);throw _e("To use ref(service, url), the first argument must be a Storage instance.")}return ts(u,o)}function Ki(u,o){const l=null==o?void 0:o[Zr];return null==l?null:Ft.makeFromBucketSpec(l,u)}class ga{constructor(o,l,f,v,T){this.app=o,this._authProvider=l,this._appCheckProvider=f,this._url=v,this._firebaseVersion=T,this._bucket=null,this._host=Zn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=v?Ft.makeFromBucketSpec(v,this._host):Ki(this._host,this.app.options)}get host(){return this._host}set host(o){this._host=o,this._bucket=null!=this._url?Ft.makeFromBucketSpec(this._url,o):Ki(o,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(o){Wt("time",0,Number.POSITIVE_INFINITY,o),this._maxUploadRetryTime=o}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(o){Wt("time",0,Number.POSITIVE_INFINITY,o),this._maxOperationRetryTime=o}_getAuthToken(){var o=this;return(0,oi.Z)(function*(){if(o._overrideAuthToken)return o._overrideAuthToken;const l=o._authProvider.getImmediate({optional:!0});if(l){const f=yield l.getToken();if(null!==f)return f.accessToken}return null})()}_getAppCheckToken(){var o=this;return(0,oi.Z)(function*(){const l=o._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(o=>o.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(o){return new ni(this,o)}_makeRequest(o,l,f,v){if(this._deleted)return new ln(Te());{const T=function Es(u,o,l,f,v,T){const R=pn(u.urlParams),Q=u.url+R,oe=Object.assign({},u.headers);return function Ai(u,o){o&&(u["X-Firebase-GMPID"]=o)}(oe,o),function is(u,o){null!==o&&o.length>0&&(u.Authorization="Firebase "+o)}(oe,l),function js(u,o){u["X-Firebase-Storage-Version"]="webjs/"+(null!=o?o:"AppManager")}(oe,T),function na(u,o){null!==o&&(u["X-Firebase-AppCheck"]=o)}(oe,f),new bi(Q,u.method,oe,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,v)}(o,this._appId,f,v,l,this._firebaseVersion);return this._requests.add(T),T.getPromise().then(()=>this._requests.delete(T),()=>this._requests.delete(T)),T}}makeRequestWithTokens(o,l){var f=this;return(0,oi.Z)(function*(){const[v,T]=yield Promise.all([f._getAuthToken(),f._getAppCheckToken()]);return f._makeRequest(o,l,v,T).getPromise()})()}}const xd="@firebase/storage";function Pa(u,o){return No(u=(0,te.m9)(u),o)}function Iu(u,{instanceIdentifier:o}){const l=u.getProvider("app").getImmediate(),f=u.getProvider("auth-internal"),v=u.getProvider("app-check-internal");return new ga(l,f,v,o,Gn.SDK_VERSION)}!function ps(){(0,Gn._registerComponent)(new cn.wA("storage",Iu,"PUBLIC").setMultipleInstances(!0)),(0,Gn.registerVersion)(xd,"0.9.6",""),(0,Gn.registerVersion)(xd,"0.9.6","esm2017")}();class no{constructor(o,l,f){this._delegate=o,this.task=l,this.ref=f}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Hl{constructor(o,l){this._delegate=o,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new no(this._delegate.snapshot,this,this._ref)}then(o,l){return this._delegate.then(f=>{if(o)return o(new no(f,this,this._ref))},l)}on(o,l,f,v){let T;return l&&(T="function"==typeof l?R=>l(new no(R,this,this._ref)):{next:l.next?R=>l.next(new no(R,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(o,T,f||void 0,v||void 0)}}class ro{constructor(o,l){this._delegate=o,this._service=l}get prefixes(){return this._delegate.prefixes.map(o=>new Fo(o,this._service))}get items(){return this._delegate.items.map(o=>new Fo(o,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Fo{constructor(o,l){this._delegate=o,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(o){const l=function tl(u,o){return ra(u,o)}(this._delegate,o);return new Fo(l,this.storage)}get root(){return new Fo(this._delegate.root,this.storage)}get parent(){const o=this._delegate.parent;return null==o?null:new Fo(o,this.storage)}put(o,l){return this._throwIfRoot("put"),new Hl(function Eo(u,o,l){return function Ja(u,o,l){return u._throwIfRoot("uploadBytesResumable"),new to(u,new Tr(o),l)}(u=(0,te.m9)(u),o,l)}(this._delegate,o,l),this)}putString(o,l=Jr.RAW,f){this._throwIfRoot("putString");const v=ws(l,o),T=Object.assign({},f);return null==T.contentType&&null!=v.contentType&&(T.contentType=v.contentType),new Hl(new to(this._delegate,new Tr(v.data,!0),T),this)}listAll(){return function wo(u){return function Ma(u){const o={prefixes:[],items:[]};return Vl(u,o).then(()=>o)}(u=(0,te.m9)(u))}(this._delegate).then(o=>new ro(o,this.storage))}list(o){return function jl(u,o){return ko(u=(0,te.m9)(u),o)}(this._delegate,o||void 0).then(l=>new ro(l,this.storage))}getMetadata(){return function us(u){return function el(u){u._throwIfRoot("getMetadata");const o=Ns(u.storage,u._location,Cs());return u.storage.makeRequestWithTokens(o,tr)}(u=(0,te.m9)(u))}(this._delegate)}updateMetadata(o){return function ns(u,o){return function Wo(u,o){u._throwIfRoot("updateMetadata");const l=function zo(u,o,l,f){const T=Zt(o.fullServerUrl(),u.host,u._protocol),Q=ue(l,f),ve=u.maxOperationRetryTime,vt=new Pn(T,"PATCH",ir(u,f),ve);return vt.headers={"Content-Type":"application/json; charset=utf-8"},vt.body=Q,vt.errorHandler=Ur(o),vt}(u.storage,u._location,o,Cs());return u.storage.makeRequestWithTokens(l,tr)}(u=(0,te.m9)(u),o)}(this._delegate,o)}getDownloadURL(){return function po(u){return pa(u=(0,te.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ia(u){return function Eu(u){u._throwIfRoot("deleteObject");const o=function Po(u,o){const f=Zt(o.fullServerUrl(),u.host,u._protocol),Q=new Pn(f,"DELETE",function R(oe,ve){},u.maxOperationRetryTime);return Q.successCodes=[200,204],Q.errorHandler=Ur(o),Q}(u.storage,u._location);return u.storage.makeRequestWithTokens(o,tr)}(u=(0,te.m9)(u))}(this._delegate)}_throwIfRoot(o){if(""===this._delegate._location.path)throw pt(o)}}class bu{constructor(o,l){this.app=o,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(o){if(Io(o))throw _e("ref() expected a child path but got a URL, use refFromURL instead.");return new Fo(Pa(this._delegate,o),this)}refFromURL(o){if(!Io(o))throw _e("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ft.makeFromUrl(o,this._delegate.host)}catch(l){throw _e("refFromUrl() expected a valid full URL but got an invalid one.")}return new Fo(Pa(this._delegate,o),this)}setMaxUploadRetryTime(o){this._delegate.maxUploadRetryTime=o}setMaxOperationRetryTime(o){this._delegate.maxOperationRetryTime=o}useEmulator(o,l,f={}){!function nl(u,o,l,f={}){!function wu(u,o,l,f={}){u.host=`${o}:${l}`,u._protocol="http";const{mockUserToken:v}=f;v&&(u._overrideAuthToken="string"==typeof v?v:(0,te.Sg)(v,u.app.options.projectId))}(u,o,l,f)}(this._delegate,o,l,f)}}function Io(u){return/^[A-Za-z]+:\/\//.test(u)}function ya(u,{instanceIdentifier:o}){const l=u.getProvider("app-compat").getImmediate(),f=u.getProvider("storage").getImmediate({identifier:o});return new bu(l,f)}!function Ts(u){const o={TaskState:B,TaskEvent:w,StringFormat:Jr,Storage:bu,Reference:Fo};u.INTERNAL.registerComponent(new cn.wA("storage-compat",ya,"PUBLIC").setServiceProps(o).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.1.14")}(Br.Z);var Ko=P(440),bo=P(127);function Tu(u){const o=function Du(u){return new wi.y(o=>{const l=R=>o.next(R);l(u.snapshot);const T=u.on("state_changed",l);return u.then(R=>{l(R),o.complete()},R=>{l(u.snapshot),(R=>{o.error(R)})(R)}),function(){T()}}).pipe(function fs(u,o=$i.z){return(0,Nr.e)((l,f)=>{let v=null,T=null,R=null;const Q=()=>{if(v){v.unsubscribe(),v=null;const ve=T;T=null,f.next(ve)}};function oe(){const ve=R+u,vt=o.now();if(vt<ve)return v=this.schedule(void 0,ve-vt),void f.add(v);Q()}l.subscribe((0,pi.x)(f,ve=>{T=ve,R=o.now(),v||(v=o.schedule(oe,u),f.add(v))},()=>{Q(),f.complete()},void 0,()=>{T=v=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>o,percentageChanges:()=>o.pipe((0,gi.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function Qt(u){return{getDownloadURL:()=>(0,Yr.of)(void 0).pipe(Sr.fc,(0,yi.w)(()=>u.getDownloadURL()),Sr.iC),getMetadata:()=>(0,Yr.of)(void 0).pipe(Sr.fc,(0,yi.w)(()=>u.getMetadata()),Sr.iC),delete:()=>(0,Hr.D)(u.delete()),child:o=>Qt(u.child(o)),updateMetadata:o=>(0,Hr.D)(u.updateMetadata(o)),put:(o,l)=>Tu(u.put(o,l)),putString:(o,l,f)=>Tu(u.putString(o,l,f)),list:o=>(0,Hr.D)(u.list(o)),listAll:()=>(0,Hr.D)(u.listAll())}}const ki=new J.OlP("angularfire2.storageBucket"),oa=new J.OlP("angularfire2.storage.maxUploadRetryTime"),M=new J.OlP("angularfire2.storage.maxOperationRetryTime"),S=new J.OlP("angularfire2.storage.use-emulator");let D=(()=>{class u{constructor(l,f,v,T,R,Q,oe,ve,vt,Ct){const jt=(0,Gr.on)(l,R,f);this.storage=(0,Gr.cc)(`${jt.name}.storage.${v}`,"AngularFireStorage",jt.name,()=>{const on=R.runOutsideAngular(()=>jt.storage(v||void 0)),gn=vt;return gn&&on.useEmulator(...gn),oe&&on.setMaxUploadRetryTime(oe),ve&&on.setMaxOperationRetryTime(ve),on},[oe,ve])}ref(l){return Qt(this.storage.ref(l))}refFromURL(l){return Qt(this.storage.refFromURL(l))}upload(l,f,v){return Qt(this.storage.ref(l)).put(f,v)}}return u.\u0275fac=function(l){return new(l||u)(J.LFG(Gr.Dh),J.LFG(Gr.xv,8),J.LFG(ki,8),J.LFG(J.Lbi),J.LFG(J.R0b),J.LFG(Sr.HU),J.LFG(oa,8),J.LFG(M,8),J.LFG(S,8),J.LFG(Ko.nm,8))},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),j=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=J.oAB({type:u}),u.\u0275inj=J.cJS({}),u})(),W=(()=>{class u{constructor(){bo.Z.registerVersion("angularfire",Sr.q4.full,"gcs-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=J.oAB({type:u}),u.\u0275inj=J.cJS({providers:[D],imports:[j]}),u})();var le=P(6451),He=P(3099),Ut=P(5026),bn=P(1884),vr=P(8421),Vn=P(4671),Wr=P(5032),Xr=P(7669);P(8775);var cs=P(1877);const Co="@firebase/database";let hr="";function _a(u){hr=u}class Gl{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,l){null==l?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,te.Pz)(l))}get(o){const l=this.domStorage_.getItem(this.prefixedName_(o));return null==l?null:(0,te.cI)(l)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class Vi{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,l){null==l?delete this.cache_[o]:this.cache_[o]=l}get(o){return(0,te.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const ar=function(u){try{if("undefined"!=typeof window&&void 0!==window[u]){const o=window[u];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new Gl(o)}}catch(o){}return new Vi},va=ar("localStorage"),_i=ar("sessionStorage"),zl=new cs.Yd("@firebase/database"),Zu=function(){let u=1;return function(){return u++}}(),ri=function(u){const o=(0,te.dS)(u),l=new te.gQ;l.update(o);const f=l.digest();return te.US.encodeByteArray(f)},Xu=function(...u){let o="";for(let l=0;l<u.length;l++){const f=u[l];Array.isArray(f)||f&&"object"==typeof f&&"number"==typeof f.length?o+=Xu.apply(null,f):o+="object"==typeof f?(0,te.Pz)(f):f,o+=" "}return o};let Hi=null,il=!0;const wh=function(u,o){(0,te.hu)(!o||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(zl.logLevel=cs.in.VERBOSE,Hi=zl.log.bind(zl),o&&_i.set("logging_enabled",!0)):"function"==typeof u?Hi=u:(Hi=null,_i.remove("logging_enabled"))},Fr=function(...u){if(!0===il&&(il=!1,null===Hi&&!0===_i.get("logging_enabled")&&wh(!0)),Hi){const o=Xu.apply(null,u);Hi(o)}},Qu=function(u){return function(...o){Fr(u,...o)}},vi=function(...u){const o="FIREBASE INTERNAL ERROR: "+Xu(...u);zl.error(o)},ii=function(...u){const o=`FIREBASE FATAL ERROR: ${Xu(...u)}`;throw zl.error(o),new Error(o)},xi=function(...u){const o="FIREBASE WARNING: "+Xu(...u);zl.warn(o)},pl=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},gs="[MIN_NAME]",ds="[MAX_NAME]",so=function(u,o){if(u===o)return 0;if(u===gs||o===ds)return-1;if(o===gs||u===ds)return 1;{const l=Ws(u),f=Ws(o);return null!==l?null!==f?l-f==0?u.length-o.length:l-f:-1:null!==f?1:u<o?-1:1}},aa=function(u,o){return u===o?0:u<o?-1:1},la=function(u,o){if(o&&u in o)return o[u];throw new Error("Missing required key ("+u+") in object: "+(0,te.Pz)(o))},un=function(u){if("object"!=typeof u||null===u)return(0,te.Pz)(u);const o=[];for(const f in u)o.push(f);o.sort();let l="{";for(let f=0;f<o.length;f++)0!==f&&(l+=","),l+=(0,te.Pz)(o[f]),l+=":",l+=un(u[o[f]]);return l+="}",l},zs=function(u,o){const l=u.length;if(l<=o)return[u];const f=[];for(let v=0;v<l;v+=o)f.push(u.substring(v,v+o>l?l:v+o));return f};function qi(u,o){for(const l in u)u.hasOwnProperty(l)&&o(l,u[l])}const ka=function(u){(0,te.hu)(!pl(u),"Invalid JSON number");const f=1023;let v,T,R,Q,oe;0===u?(T=0,R=0,v=1/u==-1/0?1:0):(v=u<0,(u=Math.abs(u))>=Math.pow(2,1-f)?(Q=Math.min(Math.floor(Math.log(u)/Math.LN2),f),T=Q+f,R=Math.round(u*Math.pow(2,52-Q)-Math.pow(2,52))):(T=0,R=Math.round(u/Math.pow(2,-1074))));const ve=[];for(oe=52;oe;oe-=1)ve.push(R%2?1:0),R=Math.floor(R/2);for(oe=11;oe;oe-=1)ve.push(T%2?1:0),T=Math.floor(T/2);ve.push(v?1:0),ve.reverse();const vt=ve.join("");let Ct="";for(oe=0;oe<64;oe+=8){let jt=parseInt(vt.substr(oe,8),2).toString(16);1===jt.length&&(jt="0"+jt),Ct+=jt}return Ct.toLowerCase()},gl=new RegExp("^-?(0*)\\d{1,10}$"),Wl=-2147483648,Kl=2147483647,Ws=function(u){if(gl.test(u)){const o=Number(u);if(o>=Wl&&o<=Kl)return o}return null},Na=function(u){try{u()}catch(o){setTimeout(()=>{throw xi("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},ql=function(u,o){const l=setTimeout(u,o);return"object"==typeof l&&l.unref&&l.unref(),l};class Ea{constructor(o,l){this.appName_=o,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(f=>this.appCheck=f)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((l,f)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(l,f):l(null)},0)})}addTokenChangeListener(o){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(f=>f.addTokenListener(o))}notifyForInvalidToken(){xi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class yl{constructor(o,l,f){this.appName_=o,this.firebaseOptions_=l,this.authProvider_=f,this.auth_=null,this.auth_=f.getImmediate({optional:!0}),this.auth_||f.onInit(v=>this.auth_=v)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(l=>l&&"auth/token-not-initialized"===l.code?(Fr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,f)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(l,f):l(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(l=>l.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(l=>l.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xi(o)}}let Ks=(()=>{class u{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Ls=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Pe="websocket",yt="long_polling";class Ot{constructor(o,l,f,v,T=!1,R="",Q=!1){this.secure=l,this.namespace=f,this.webSocketOnly=v,this.nodeAdmin=T,this.persistenceKey=R,this.includeNamespaceInQueryParams=Q,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=va.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&va.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function dn(u,o,l){let f;if((0,te.hu)("string"==typeof o,"typeof type must == string"),(0,te.hu)("object"==typeof l,"typeof params must == object"),o===Pe)f=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(o!==yt)throw new Error("Unknown connection type: "+o);f=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function tn(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(l.ns=u.namespace);const v=[];return qi(l,(T,R)=>{v.push(T+"="+R)}),f+v.join("&")}class mr{constructor(){this.counters_={}}incrementCounter(o,l=1){(0,te.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=l}get(){return(0,te.p$)(this.counters_)}}const $n={},Kr={};function Rn(u){const o=u.toString();return $n[o]||($n[o]=new mr),$n[o]}class si{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,l){this.closeAfterResponse=o,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,l){for(this.pendingResponses[o]=l;this.pendingResponses[this.currentResponseNum];){const f=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let v=0;v<f.length;++v)f[v]&&Na(()=>{this.onMessage_(f[v])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Xl{constructor(o,l,f,v,T,R,Q){this.connId=o,this.repoInfo=l,this.applicationId=f,this.appCheckToken=v,this.authToken=T,this.transportSessionId=R,this.lastSessionId=Q,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qu(o),this.stats_=Rn(l),this.urlFn=oe=>(this.appCheckToken&&(oe.ac=this.appCheckToken),dn(l,yt,oe))}open(o,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new si(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,te.Yr)()||"complete"===document.readyState)u();else{let o=!1;const l=function(){document.body?o||(o=!0,u()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dh((...T)=>{const[R,Q,oe,ve,vt]=T;if(this.incrementIncomingBytes_(T),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===R)this.id=Q,this.password=oe;else{if("close"!==R)throw new Error("Unrecognized command received: "+R);Q?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(Q,()=>{this.onClosed_()})):this.onClosed_()}},(...T)=>{const[R,Q]=T;this.incrementIncomingBytes_(T),this.myPacketOrderer.handleResponse(R,Q)},()=>{this.onClosed_()},this.urlFn);const f={start:"t"};f.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(f.cb=this.scriptTagHolder.uniqueCallbackIdentifier),f.v="5",this.transportSessionId&&(f.s=this.transportSessionId),this.lastSessionId&&(f.ls=this.lastSessionId),this.applicationId&&(f.p=this.applicationId),this.appCheckToken&&(f.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Ls.test(location.hostname)&&(f.r="f");const v=this.urlFn(f);this.log_("Connecting via long-poll to "+v),this.scriptTagHolder.addTag(v,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xl.forceAllow_=!0}static forceDisallow(){Xl.forceDisallow_=!0}static isAvailable(){return!((0,te.Yr)()||!Xl.forceAllow_&&(Xl.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const l=(0,te.Pz)(o);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const f=(0,te.h$)(l),v=zs(f,1840);for(let T=0;T<v.length;T++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,v.length,v[T]),this.curSegmentNum++}addDisconnectPingFrame(o,l){if((0,te.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const f={dframe:"t"};f.id=o,f.pw=l,this.myDisconnFrame.src=this.urlFn(f),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const l=(0,te.Pz)(o).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Dh{constructor(o,l,f,v){if(this.onDisconnect=f,this.urlFn=v,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,te.Yr)())this.commandCB=o,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Zu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Dh.createIFrame_();let T="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(T='<script>document.domain="'+document.domain+'";<\/script>');const R="<html><body>"+T+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(R),this.myIFrame.doc.close()}catch(Q){Fr("frame writing exception"),Q.stack&&Fr(Q.stack),Fr(Q)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||Fr("No IE domain setting required")}catch(l){const f=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+f+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,l){for(this.myID=o,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let l=this.urlFn(o),f="",v=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+f.length<=1870;){const R=this.pendingSegs.shift();f=f+"&seg"+v+"="+R.seg+"&ts"+v+"="+R.ts+"&d"+v+"="+R.d,v++}return l+=f,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(o,l,f){this.pendingSegs.push({seg:o,ts:l,d:f}),this.alive&&this.newRequest_()}addLongPollTag_(o,l){this.outstandingRequests.add(l);const f=()=>{this.outstandingRequests.delete(l),this.newRequest_()},v=setTimeout(f,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(v),f()})}addTag(o,l){(0,te.Yr)()?this.doNodeLongPoll(o,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const f=this.myIFrame.doc.createElement("script");f.type="text/javascript",f.async=!0,f.src=o,f.onload=f.onreadystatechange=function(){const v=f.readyState;(!v||"loaded"===v||"complete"===v)&&(f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),l())},f.onerror=()=>{Fr("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(f)}catch(f){}},Math.floor(1))}}let Ba=null;"undefined"!=typeof MozWebSocket?Ba=MozWebSocket:"undefined"!=typeof WebSocket&&(Ba=WebSocket);let Zo=(()=>{class u{constructor(l,f,v,T,R,Q,oe){this.connId=l,this.applicationId=v,this.appCheckToken=T,this.authToken=R,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qu(this.connId),this.stats_=Rn(f),this.connURL=u.connectionURL_(f,Q,oe,T,v),this.nodeAdmin=f.nodeAdmin}static connectionURL_(l,f,v,T,R){const Q={v:"5"};return!(0,te.Yr)()&&"undefined"!=typeof location&&location.hostname&&Ls.test(location.hostname)&&(Q.r="f"),f&&(Q.s=f),v&&(Q.ls=v),T&&(Q.ac=T),R&&(Q.p=R),dn(l,Pe,Q)}open(l,f){this.onDisconnect=f,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,va.set("previous_websocket_failure",!0);try{let v;if((0,te.Yr)()){const R={headers:{"User-Agent":`Firebase/5/${hr}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(R.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(R.headers["X-Firebase-AppCheck"]=this.appCheckToken);const Q=process.env,oe=0===this.connURL.indexOf("wss://")?Q.HTTPS_PROXY||Q.https_proxy:Q.HTTP_PROXY||Q.http_proxy;oe&&(R.proxy={origin:oe})}this.mySock=new Ba(this.connURL,[],v)}catch(v){this.log_("Error instantiating WebSocket.");const T=v.message||v.data;return T&&this.log_(T),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=v=>{this.handleIncomingFrame(v)},this.mySock.onerror=v=>{this.log_("WebSocket error.  Closing connection.");const T=v.message||v.data;T&&this.log_(T),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const v=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);v&&v.length>1&&parseFloat(v[1])<4.4&&(l=!0)}return!l&&null!==Ba&&!u.forceDisallow_}static previouslyFailed(){return va.isInMemoryStorage||!0===va.get("previous_websocket_failure")}markConnectionHealthy(){va.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const f=this.frames.join("");this.frames=null;const v=(0,te.cI)(f);this.onMessage(v)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,te.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const f=Number(l);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const f=l.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{const v=this.extractFrameCount_(f);null!==v&&this.appendFrame_(v)}}send(l){this.resetKeepAlive();const f=(0,te.Pz)(l);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const v=zs(f,16384);v.length>1&&this.sendString_(String(v.length));for(let T=0;T<v.length;T++)this.sendString_(v[T])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),kd=(()=>{class u{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Xl,Zo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const f=Zo&&Zo.isAvailable();let v=f&&!Zo.previouslyFailed();if(l.webSocketOnly&&(f||xi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),v=!0),v)this.transports_=[Zo];else{const T=this.transports_=[];for(const R of u.ALL_TRANSPORTS)R&&R.isAvailable()&&T.push(R);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class Bd{constructor(o,l,f,v,T,R,Q,oe,ve,vt){this.id=o,this.repoInfo_=l,this.applicationId_=f,this.appCheckToken_=v,this.authToken_=T,this.onMessage_=R,this.onReady_=Q,this.onDisconnect_=oe,this.onKill_=ve,this.lastSessionId=vt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qu("c:"+this.id+":"),this.transportManager_=new kd(l),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),f=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,f)},Math.floor(0));const v=o.healthyTimeout||0;v>0&&(this.healthyTimeout_=ql(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(v)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return l=>{o===this.conn_?this.onConnectionLost_(l):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return l=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(l):o===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const l=o.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const l=la("t",o),f=la("d",o);if("c"===l)this.onSecondaryControl_(f);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(f)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const l=la("t",o),f=la("d",o);"c"===l?this.onControl_(f):"d"===l&&this.onDataMessage_(f)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const l=la("t",o);if("d"in o){const f=o.d;if("h"===l)this.onHandshake_(f);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let v=0;v<this.pendingDataMessages.length;++v)this.onDataMessage_(this.pendingDataMessages[v]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(f):"r"===l?this.onReset_(f):"e"===l?vi("Server Error: "+f):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vi("Unknown control packet command: "+l)}}onHandshake_(o){const l=o.ts,f=o.v,v=o.h;this.sessionId=o.s,this.repoInfo_.host=v,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==f&&xi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),f=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,f),ql(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,l){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ql(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(va.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ua{put(o,l,f,v){}merge(o,l,f,v){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,l,f){}onDisconnectMerge(o,l,f){}onDisconnectCancel(o,l){}reportStats(o){}}class wl{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,te.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...l){if(Array.isArray(this.listeners_[o])){const f=[...this.listeners_[o]];for(let v=0;v<f.length;v++)f[v].callback.apply(f[v].context,l)}}on(o,l,f){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:l,context:f});const v=this.getInitialEvent(o);v&&l.apply(f,v)}off(o,l,f){this.validateEventType_(o);const v=this.listeners_[o]||[];for(let T=0;T<v.length;T++)if(v[T].callback===l&&(!f||f===v[T].context))return void v.splice(T,1)}validateEventType_(o){(0,te.hu)(this.allowedEvents_.find(l=>l===o),"Unknown event: "+o)}}class $c extends wl{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,te.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $c}getInitialEvent(o){return(0,te.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}class Di{constructor(o,l){if(void 0===l){this.pieces_=o.split("/");let f=0;for(let v=0;v<this.pieces_.length;v++)this.pieces_[v].length>0&&(this.pieces_[f]=this.pieces_[v],f++);this.pieces_.length=f,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=l}toString(){let o="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(o+="/"+this.pieces_[l]);return o||"/"}}function Ei(){return new Di("")}function Rr(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function Il(u){return u.pieces_.length-u.pieceNum_}function Ui(u){let o=u.pieceNum_;return o<u.pieces_.length&&o++,new Di(u.pieces_,o)}function jc(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function $a(u,o=0){return u.pieces_.slice(u.pieceNum_+o)}function Bf(u){if(u.pieceNum_>=u.pieces_.length)return null;const o=[];for(let l=u.pieceNum_;l<u.pieces_.length-1;l++)o.push(u.pieces_[l]);return new Di(o,0)}function Ni(u,o){const l=[];for(let f=u.pieceNum_;f<u.pieces_.length;f++)l.push(u.pieces_[f]);if(o instanceof Di)for(let f=o.pieceNum_;f<o.pieces_.length;f++)l.push(o.pieces_[f]);else{const f=o.split("/");for(let v=0;v<f.length;v++)f[v].length>0&&l.push(f[v])}return new Di(l,0)}function pr(u){return u.pieceNum_>=u.pieces_.length}function Ms(u,o){const l=Rr(u),f=Rr(o);if(null===l)return o;if(l===f)return Ms(Ui(u),Ui(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+u+")")}function ja(u,o){const l=$a(u,0),f=$a(o,0);for(let v=0;v<l.length&&v<f.length;v++){const T=so(l[v],f[v]);if(0!==T)return T}return l.length===f.length?0:l.length<f.length?-1:1}function ol(u,o){if(Il(u)!==Il(o))return!1;for(let l=u.pieceNum_,f=o.pieceNum_;l<=u.pieces_.length;l++,f++)if(u.pieces_[l]!==o.pieces_[f])return!1;return!0}function mo(u,o){let l=u.pieceNum_,f=o.pieceNum_;if(Il(u)>Il(o))return!1;for(;l<u.pieces_.length;){if(u.pieces_[l]!==o.pieces_[f])return!1;++l,++f}return!0}class Vd{constructor(o,l){this.errorPrefix_=l,this.parts_=$a(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let f=0;f<this.parts_.length;f++)this.byteLength_+=(0,te.ug)(this.parts_[f]);rc(this)}}function rc(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bl(u))}function bl(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class Hc extends wl{constructor(){let o,l;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(l="visibilitychange",o="hidden"):void 0!==document.mozHidden?(l="mozvisibilitychange",o="mozHidden"):void 0!==document.msHidden?(l="msvisibilitychange",o="msHidden"):void 0!==document.webkitHidden&&(l="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const f=!document[o];f!==this.visible_&&(this.visible_=f,this.trigger("visible",f))},!1)}static getInstance(){return new Hc}getInitialEvent(o){return(0,te.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const Ha=1e3;let sc,Jl=(()=>{class u extends Ua{constructor(l,f,v,T,R,Q,oe,ve){if(super(),this.repoInfo_=l,this.applicationId_=f,this.onDataUpdate_=v,this.onConnectStatus_=T,this.onServerInfoUpdate_=R,this.authTokenProvider_=Q,this.appCheckTokenProvider_=oe,this.authOverride_=ve,this.id=u.nextPersistentConnectionId_++,this.log_=Qu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ha,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ve&&!(0,te.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Hc.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&$c.getInstance().on("online",this.onOnline_,this)}sendRequest(l,f,v){const T=++this.requestNumber_,R={r:T,a:l,b:f};this.log_((0,te.Pz)(R)),(0,te.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(R),v&&(this.requestCBHash_[T]=v)}get(l){this.initConnection_();const f=new te.BH,v={p:l._path.toString(),q:l._queryObject},T={action:"g",request:v,onComplete:Q=>{const oe=Q.d;"ok"===Q.s?(this.onDataUpdate_(v.p,oe,!1,null),f.resolve(oe)):f.reject(oe)}};this.outstandingGets_.push(T),this.outstandingGetCount_++;const R=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const Q=this.outstandingGets_[R];void 0===Q||T!==Q||(delete this.outstandingGets_[R],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+R+" timed out on connection"),f.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(R),f.promise}listen(l,f,v,T){this.initConnection_();const R=l._queryIdentifier,Q=l._path.toString();this.log_("Listen called for "+Q+" "+R),this.listens.has(Q)||this.listens.set(Q,new Map),(0,te.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,te.hu)(!this.listens.get(Q).has(R),"listen() called twice for same path/queryId.");const oe={onComplete:T,hashFn:f,query:l,tag:v};this.listens.get(Q).set(R,oe),this.connected_&&this.sendListen_(oe)}sendGet_(l){const f=this.outstandingGets_[l];this.sendRequest("g",f.request,v=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),f.onComplete&&f.onComplete(v)})}sendListen_(l){const f=l.query,v=f._path.toString(),T=f._queryIdentifier;this.log_("Listen on "+v+" for "+T);const R={p:v};l.tag&&(R.q=f._queryObject,R.t=l.tag),R.h=l.hashFn(),this.sendRequest("q",R,oe=>{const ve=oe.d,vt=oe.s;u.warnOnListenWarnings_(ve,f),(this.listens.get(v)&&this.listens.get(v).get(T))===l&&(this.log_("listen response",oe),"ok"!==vt&&this.removeListen_(v,T),l.onComplete&&l.onComplete(vt,ve))})}static warnOnListenWarnings_(l,f){if(l&&"object"==typeof l&&(0,te.r3)(l,"w")){const v=(0,te.DV)(l,"w");if(Array.isArray(v)&&~v.indexOf("no_index")){const T='".indexOn": "'+f._queryParams.getIndex().toString()+'"',R=f._path.toString();xi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${T} at ${R} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,te.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,f=(0,te.w9)(l)?"auth":"gauth",v={cred:l};null===this.authOverride_?v.noauth=!0:"object"==typeof this.authOverride_&&(v.authvar=this.authOverride_),this.sendRequest(f,v,T=>{const R=T.s,Q=T.d||"error";this.authToken_===l&&("ok"===R?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(R,Q))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const f=l.s,v=l.d||"error";"ok"===f?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(f,v)})}unlisten(l,f){const v=l._path.toString(),T=l._queryIdentifier;this.log_("Unlisten called for "+v+" "+T),(0,te.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(v,T)&&this.connected_&&this.sendUnlisten_(v,T,l._queryObject,f)}sendUnlisten_(l,f,v,T){this.log_("Unlisten on "+l+" for "+f);const R={p:l};T&&(R.q=v,R.t=T),this.sendRequest("n",R)}onDisconnectPut(l,f,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,f,v):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:f,onComplete:v})}onDisconnectMerge(l,f,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,f,v):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:f,onComplete:v})}onDisconnectCancel(l,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,f):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:f})}sendOnDisconnect_(l,f,v,T){const R={p:f,d:v};this.log_("onDisconnect "+l,R),this.sendRequest(l,R,Q=>{T&&setTimeout(()=>{T(Q.s,Q.d)},Math.floor(0))})}put(l,f,v,T){this.putInternal("p",l,f,v,T)}merge(l,f,v,T){this.putInternal("m",l,f,v,T)}putInternal(l,f,v,T,R){this.initConnection_();const Q={p:f,d:v};void 0!==R&&(Q.h=R),this.outstandingPuts_.push({action:l,request:Q,onComplete:T}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+f)}sendPut_(l){const f=this.outstandingPuts_[l].action,v=this.outstandingPuts_[l].request,T=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(f,v,R=>{this.log_(f+" response",R),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),T&&T(R.s,R.d)})}reportStats(l){if(this.connected_){const f={c:l};this.log_("reportStats",f),this.sendRequest("s",f,v=>{"ok"!==v.s&&this.log_("reportStats","Error sending stats: "+v.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,te.Pz)(l));const f=l.r,v=this.requestCBHash_[f];v&&(delete this.requestCBHash_[f],v(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,f){this.log_("handleServerMessage",l,f),"d"===l?this.onDataUpdate_(f.p,f.d,!1,f.t):"m"===l?this.onDataUpdate_(f.p,f.d,!0,f.t):"c"===l?this.onListenRevoked_(f.p,f.q):"ac"===l?this.onAuthRevoked_(f.s,f.d):"apc"===l?this.onAppCheckRevoked_(f.s,f.d):"sd"===l?this.onSecurityDebugPacket_(f):vi("Unrecognized action received from server: "+(0,te.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,f){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=f,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,te.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ha,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Ha,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ha),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let f=Math.max(0,this.reconnectDelay_-l);f=Math.random()*f,this.log_("Trying to reconnect in "+f+"ms"),this.scheduleConnect_(f),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,oi.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const f=l.onDataMessage_.bind(l),v=l.onReady_.bind(l),T=l.onRealtimeDisconnect_.bind(l),R=l.id+":"+u.nextConnectionId_++,Q=l.lastSessionId;let oe=!1,ve=null;const vt=function(){ve?ve.close():(oe=!0,T())};l.realtime_={close:vt,sendRequest:function(on){(0,te.hu)(ve,"sendRequest call when we're not connected not allowed."),ve.sendRequest(on)}};const jt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[on,gn]=yield Promise.all([l.authTokenProvider_.getToken(jt),l.appCheckTokenProvider_.getToken(jt)]);oe?Fr("getToken() completed but was canceled"):(Fr("getToken() completed. Creating connection."),l.authToken_=on&&on.accessToken,l.appCheckToken_=gn&&gn.token,ve=new Bd(R,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,f,v,T,br=>{xi(br+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},Q))}catch(on){l.log_("Failed to get token: "+on),oe||(l.repoInfo_.nodeAdmin&&xi(on),vt())}}})()}interrupt(l){Fr("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){Fr("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,te.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ha,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const f=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:f})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const f=this.outstandingPuts_[l];f&&"h"in f.request&&f.queued&&(f.onComplete&&f.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,f){let v;v=f?f.map(R=>un(R)).join("$"):"default";const T=this.removeListen_(l,v);T&&T.onComplete&&T.onComplete("permission_denied")}removeListen_(l,f){const v=new Di(l).toString();let T;if(this.listens.has(v)){const R=this.listens.get(v);T=R.get(f),R.delete(f),0===R.size&&this.listens.delete(v)}else T=void 0;return T}onAuthRevoked_(l,f){Fr("Auth token revoked: "+l+"/"+f),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,f){Fr("App check token revoked: "+l+"/"+f),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const f of l.values())this.sendListen_(f);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let f="js";(0,te.Yr)()&&(f=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+f+"."+hr.replace(/\./g,"-")]=1,(0,te.uI)()?l["framework.cordova"]=1:(0,te.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=$c.getInstance().currentlyOnline();return(0,te.xb)(this.interruptReasons_)&&l}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class Or{constructor(o,l){this.name=o,this.node=l}static Wrap(o,l){return new Or(o,l)}}class Ga{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,l){const f=new Or(gs,o),v=new Or(gs,l);return 0!==this.compare(f,v)}minPost(){return Or.MIN}}class ys extends Ga{static get __EMPTY_NODE(){return sc}static set __EMPTY_NODE(o){sc=o}compare(o,l){return so(o.name,l.name)}isDefinedOn(o){throw(0,te.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,l){return!1}minPost(){return Or.MIN}maxPost(){return new Or(ds,sc)}makePost(o,l){return(0,te.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new Or(o,sc)}toString(){return".key"}}const Pr=new ys;class Gi{constructor(o,l,f,v,T=null){this.isReverse_=v,this.resultGenerator_=T,this.nodeStack_=[];let R=1;for(;!o.isEmpty();)if(o=o,R=l?f(o.key,l):1,v&&(R*=-1),R<0)o=this.isReverse_?o.left:o.right;else{if(0===R){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,o=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let zc,Ia=(()=>{class u{constructor(l,f,v,T,R){this.key=l,this.value=f,this.color=null!=v?v:u.RED,this.left=null!=T?T:To.EMPTY_NODE,this.right=null!=R?R:To.EMPTY_NODE}copy(l,f,v,T,R){return new u(null!=l?l:this.key,null!=f?f:this.value,null!=v?v:this.color,null!=T?T:this.left,null!=R?R:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,f,v){let T=this;const R=v(l,T.key);return T=R<0?T.copy(null,null,null,T.left.insert(l,f,v),null):0===R?T.copy(null,f,null,null,null):T.copy(null,null,null,null,T.right.insert(l,f,v)),T.fixUp_()}removeMin_(){if(this.left.isEmpty())return To.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,f){let v,T;if(v=this,f(l,v.key)<0)!v.left.isEmpty()&&!v.left.isRed_()&&!v.left.left.isRed_()&&(v=v.moveRedLeft_()),v=v.copy(null,null,null,v.left.remove(l,f),null);else{if(v.left.isRed_()&&(v=v.rotateRight_()),!v.right.isEmpty()&&!v.right.isRed_()&&!v.right.left.isRed_()&&(v=v.moveRedRight_()),0===f(l,v.key)){if(v.right.isEmpty())return To.EMPTY_NODE;T=v.right.min_(),v=v.copy(T.key,T.value,null,null,v.right.removeMin_())}v=v.copy(null,null,null,null,v.right.remove(l,f))}return v.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,f)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class To{constructor(o,l=To.EMPTY_NODE){this.comparator_=o,this.root_=l}insert(o,l){return new To(this.comparator_,this.root_.insert(o,l,this.comparator_).copy(null,null,Ia.BLACK,null,null))}remove(o){return new To(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,Ia.BLACK,null,null))}get(o){let l,f=this.root_;for(;!f.isEmpty();){if(l=this.comparator_(o,f.key),0===l)return f.value;l<0?f=f.left:l>0&&(f=f.right)}return null}getPredecessorKey(o){let l,f=this.root_,v=null;for(;!f.isEmpty();){if(l=this.comparator_(o,f.key),0===l){if(f.left.isEmpty())return v?v.key:null;for(f=f.left;!f.right.isEmpty();)f=f.right;return f.key}l<0?f=f.left:l>0&&(v=f,f=f.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new Gi(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,l){return new Gi(this.root_,o,this.comparator_,!1,l)}getReverseIteratorFrom(o,l){return new Gi(this.root_,o,this.comparator_,!0,l)}getReverseIterator(o){return new Gi(this.root_,null,this.comparator_,!0,o)}}function Xo(u,o){return so(u.name,o.name)}function xh(u,o){return so(u,o)}To.EMPTY_NODE=new class eu{copy(o,l,f,v,T){return this}insert(o,l,f){return new Ia(o,l,null)}remove(o,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const $f=function(u){return"number"==typeof u?"number:"+ka(u):"string:"+u},oc=function(u){if(u.isLeafNode()){const o=u.val();(0,te.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,te.r3)(o,".sv"),"Priority must be a string or number.")}else(0,te.hu)(u===zc||u.isEmpty(),"priority of unexpected type.");(0,te.hu)(u===zc||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Mi,Cl,Bs,ac=(()=>{class u{constructor(l,f=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=f,this.lazyHash_=null,(0,te.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),oc(this.priorityNode_)}static set __childrenNodeConstructor(l){Mi=l}static get __childrenNodeConstructor(){return Mi}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new u(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return pr(l)?this:".priority"===Rr(l)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,f){return null}updateImmediateChild(l,f){return".priority"===l?this.updatePriority(f):f.isEmpty()&&".priority"!==l?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,f).updatePriority(this.priorityNode_)}updateChild(l,f){const v=Rr(l);return null===v?f:f.isEmpty()&&".priority"!==v?this:((0,te.hu)(".priority"!==v||1===Il(l),".priority must be the last token in a path"),this.updateImmediateChild(v,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ui(l),f)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,f){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+$f(this.priorityNode_.val())+":");const f=typeof this.value_;l+=f+":",l+="number"===f?ka(this.value_):this.value_,this.lazyHash_=ri(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===u.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof u.__childrenNodeConstructor?-1:((0,te.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const f=typeof l.value_,v=typeof this.value_,T=u.VALUE_TYPE_ORDER.indexOf(f),R=u.VALUE_TYPE_ORDER.indexOf(v);return(0,te.hu)(T>=0,"Unknown leaf type: "+f),(0,te.hu)(R>=0,"Unknown leaf type: "+v),T===R?"object"===v?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:R-T}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const f=l;return this.value_===f.value_&&this.priorityNode_.equals(f.priorityNode_)}return!1}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const Ar=new class Ud extends Ga{compare(o,l){const f=o.node.getPriority(),v=l.node.getPriority(),T=f.compareTo(v);return 0===T?so(o.name,l.name):T}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,l){return!o.getPriority().equals(l.getPriority())}minPost(){return Or.MIN}maxPost(){return new Or(ds,new ac("[PRIORITY-POST]",Bs))}makePost(o,l){const f=Cl(o);return new Or(l,new ac("[PRIORITY-POST]",f))}toString(){return".priority"}},tu=Math.log(2);class $d{constructor(o){this.count=parseInt(Math.log(o+1)/tu,10),this.current_=this.count-1;const v=(T=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&v}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const qc=function(u,o,l,f){u.sort(o);const v=function(oe,ve){const vt=ve-oe;let Ct,jt;if(0===vt)return null;if(1===vt)return Ct=u[oe],jt=l?l(Ct):Ct,new Ia(jt,Ct.node,Ia.BLACK,null,null);{const on=parseInt(vt/2,10)+oe,gn=v(oe,on),br=v(on+1,ve);return Ct=u[on],jt=l?l(Ct):Ct,new Ia(jt,Ct.node,Ia.BLACK,gn,br)}},Q=function(oe){let ve=null,vt=null,Ct=u.length;const jt=function(gn,br){const qr=Ct-gn,lo=Ct;Ct-=gn;const uo=v(qr+1,lo),As=u[qr],co=l?l(As):As;on(new Ia(co,As.node,br,null,uo))},on=function(gn){ve?(ve.left=gn,ve=gn):(vt=gn,ve=gn)};for(let gn=0;gn<oe.count;++gn){const br=oe.nextBitIsOne(),qr=Math.pow(2,oe.count-(gn+1));br?jt(qr,Ia.BLACK):(jt(qr,Ia.BLACK),jt(qr,Ia.RED))}return vt}(new $d(u.length));return new To(f||o,Q)};let lc;const Mu={};class Rs{constructor(o,l){this.indexes_=o,this.indexSet_=l}static get Default(){return(0,te.hu)(Mu&&Ar,"ChildrenNode.ts has not been loaded"),lc=lc||new Rs({".priority":Mu},{".priority":Ar}),lc}get(o){const l=(0,te.DV)(this.indexes_,o);if(!l)throw new Error("No index defined for "+o);return l instanceof To?l:null}hasIndex(o){return(0,te.r3)(this.indexSet_,o.toString())}addIndex(o,l){(0,te.hu)(o!==Pr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const f=[];let v=!1;const T=l.getIterator(Or.Wrap);let Q,R=T.getNext();for(;R;)v=v||o.isDefinedOn(R.node),f.push(R),R=T.getNext();Q=v?qc(f,o.getCompare()):Mu;const oe=o.toString(),ve=Object.assign({},this.indexSet_);ve[oe]=o;const vt=Object.assign({},this.indexes_);return vt[oe]=Q,new Rs(vt,ve)}addToIndexes(o,l){const f=(0,te.UI)(this.indexes_,(v,T)=>{const R=(0,te.DV)(this.indexSet_,T);if((0,te.hu)(R,"Missing index implementation for "+T),v===Mu){if(R.isDefinedOn(o.node)){const Q=[],oe=l.getIterator(Or.Wrap);let ve=oe.getNext();for(;ve;)ve.name!==o.name&&Q.push(ve),ve=oe.getNext();return Q.push(o),qc(Q,R.getCompare())}return Mu}{const Q=l.get(o.name);let oe=v;return Q&&(oe=oe.remove(new Or(o.name,Q))),oe.insert(o,o.node)}});return new Rs(f,this.indexSet_)}removeFromIndexes(o,l){const f=(0,te.UI)(this.indexes_,v=>{if(v===Mu)return v;{const T=l.get(o.name);return T?v.remove(new Or(o.name,T)):v}});return new Rs(f,this.indexSet_)}}let al,yr=(()=>{class u{constructor(l,f,v){this.children_=l,this.priorityNode_=f,this.indexMap_=v,this.lazyHash_=null,this.priorityNode_&&oc(this.priorityNode_),this.children_.isEmpty()&&(0,te.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return al||(al=new u(new To(xh),null,Rs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||al}updatePriority(l){return this.children_.isEmpty()?this:new u(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const f=this.children_.get(l);return null===f?al:f}}getChild(l){const f=Rr(l);return null===f?this:this.getImmediateChild(f).getChild(Ui(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,f){if((0,te.hu)(f,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(f);{const v=new Or(l,f);let T,R;f.isEmpty()?(T=this.children_.remove(l),R=this.indexMap_.removeFromIndexes(v,this.children_)):(T=this.children_.insert(l,f),R=this.indexMap_.addToIndexes(v,this.children_));const Q=T.isEmpty()?al:this.priorityNode_;return new u(T,Q,R)}}updateChild(l,f){const v=Rr(l);if(null===v)return f;{(0,te.hu)(".priority"!==Rr(l)||1===Il(l),".priority must be the last token in a path");const T=this.getImmediateChild(v).updateChild(Ui(l),f);return this.updateImmediateChild(v,T)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const f={};let v=0,T=0,R=!0;if(this.forEachChild(Ar,(Q,oe)=>{f[Q]=oe.val(l),v++,R&&u.INTEGER_REGEXP_.test(Q)?T=Math.max(T,Number(Q)):R=!1}),!l&&R&&T<2*v){const Q=[];for(const oe in f)Q[oe]=f[oe];return Q}return l&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+$f(this.getPriority().val())+":"),this.forEachChild(Ar,(f,v)=>{const T=v.hash();""!==T&&(l+=":"+f+":"+T)}),this.lazyHash_=""===l?"":ri(l)}return this.lazyHash_}getPredecessorChildName(l,f,v){const T=this.resolveIndex_(v);if(T){const R=T.getPredecessorKey(new Or(l,f));return R?R.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const f=this.resolveIndex_(l);if(f){const v=f.minKey();return v&&v.name}return this.children_.minKey()}getFirstChild(l){const f=this.getFirstChildName(l);return f?new Or(f,this.children_.get(f)):null}getLastChildName(l){const f=this.resolveIndex_(l);if(f){const v=f.maxKey();return v&&v.name}return this.children_.maxKey()}getLastChild(l){const f=this.getLastChildName(l);return f?new Or(f,this.children_.get(f)):null}forEachChild(l,f){const v=this.resolveIndex_(l);return v?v.inorderTraversal(T=>f(T.name,T.node)):this.children_.inorderTraversal(f)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,f){const v=this.resolveIndex_(f);if(v)return v.getIteratorFrom(l,T=>T);{const T=this.children_.getIteratorFrom(l.name,Or.Wrap);let R=T.peek();for(;null!=R&&f.compare(R,l)<0;)T.getNext(),R=T.peek();return T}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,f){const v=this.resolveIndex_(f);if(v)return v.getReverseIteratorFrom(l,T=>T);{const T=this.children_.getReverseIteratorFrom(l.name,Or.Wrap);let R=T.peek();for(;null!=R&&f.compare(R,l)>0;)T.getNext(),R=T.peek();return T}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===Ru?-1:0}withIndex(l){if(l===Pr||this.indexMap_.hasIndex(l))return this;{const f=this.indexMap_.addIndex(l,this.children_);return new u(this.children_,this.priorityNode_,f)}}isIndexed(l){return l===Pr||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const f=l;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){const v=this.getIterator(Ar),T=f.getIterator(Ar);let R=v.getNext(),Q=T.getNext();for(;R&&Q;){if(R.name!==Q.name||!R.node.equals(Q.node))return!1;R=v.getNext(),Q=T.getNext()}return null===R&&null===Q}return!1}return!1}}resolveIndex_(l){return l===Pr?null:this.indexMap_.get(l.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const Ru=new class Mh extends yr{constructor(){super(new To(xh),yr.EMPTY_NODE,Rs.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return yr.EMPTY_NODE}isEmpty(){return!1}};function zi(u,o=null){if(null===u)return yr.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(o=u[".priority"]),(0,te.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new ac(u,zi(o));if(u instanceof Array){let l=yr.EMPTY_NODE;return qi(u,(f,v)=>{if((0,te.r3)(u,f)&&"."!==f.substring(0,1)){const T=zi(v);(T.isLeafNode()||!T.isEmpty())&&(l=l.updateImmediateChild(f,T))}}),l.updatePriority(zi(o))}{const l=[];let f=!1;if(qi(u,(R,Q)=>{if("."!==R.substring(0,1)){const oe=zi(Q);oe.isEmpty()||(f=f||!oe.getPriority().isEmpty(),l.push(new Or(R,oe)))}}),0===l.length)return yr.EMPTY_NODE;const T=qc(l,Xo,R=>R.name,xh);if(f){const R=qc(l,Ar.getCompare());return new yr(T,zi(o),new Rs({".priority":R},{".priority":Ar}))}return new yr(T,zi(o),Rs.Default)}}Object.defineProperties(Or,{MIN:{value:new Or(gs,yr.EMPTY_NODE)},MAX:{value:new Or(ds,Ru)}}),ys.__EMPTY_NODE=yr.EMPTY_NODE,ac.__childrenNodeConstructor=yr,function Wc(u){zc=u}(Ru),function Kc(u){Bs=u}(Ru),function xu(u){Cl=u}(zi);class Yc extends Ga{constructor(o){super(),this.indexPath_=o,(0,te.hu)(!pr(o)&&".priority"!==Rr(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,l){const f=this.extractChild(o.node),v=this.extractChild(l.node),T=f.compareTo(v);return 0===T?so(o.name,l.name):T}makePost(o,l){const f=zi(o),v=yr.EMPTY_NODE.updateChild(this.indexPath_,f);return new Or(l,v)}maxPost(){const o=yr.EMPTY_NODE.updateChild(this.indexPath_,Ru);return new Or(ds,o)}toString(){return $a(this.indexPath_,0).join("/")}}const Os=new class Zc extends Ga{compare(o,l){const f=o.node.compareTo(l.node);return 0===f?so(o.name,l.name):f}isDefinedOn(o){return!0}indexedValueChanged(o,l){return!o.equals(l)}minPost(){return Or.MIN}maxPost(){return Or.MAX}makePost(o,l){const f=zi(o);return new Or(l,f)}toString(){return".value"}},Dl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Oh=function(){let u=0;const o=[];return function(l){const f=l===u;let v;u=l;const T=new Array(8);for(v=7;v>=0;v--)T[v]=Dl.charAt(l%64),l=Math.floor(l/64);(0,te.hu)(0===l,"Cannot push at time == 0");let R=T.join("");if(f){for(v=11;v>=0&&63===o[v];v--)o[v]=0;o[v]++}else for(v=0;v<12;v++)o[v]=Math.floor(64*Math.random());for(v=0;v<12;v++)R+=Dl.charAt(o[v]);return(0,te.hu)(20===R.length,"nextPushId: Length should be 20."),R}}(),So=function(u){if(u===""+Kl)return"-";const o=Ws(u);if(null!=o)return""+(o+1);const l=new Array(u.length);for(let R=0;R<l.length;R++)l[R]=u.charAt(R);if(l.length<786)return l.push("-"),l.join("");let f=l.length-1;for(;f>=0&&"z"===l[f];)f--;if(-1===f)return ds;const T=Dl.charAt(Dl.indexOf(l[f])+1);return l[f]=T,l.slice(0,f+1).join("")},Hd=function(u){if(u===""+Wl)return gs;const o=Ws(u);if(null!=o)return""+(o-1);const l=new Array(u.length);for(let f=0;f<l.length;f++)l[f]=u.charAt(f);return"-"===l[l.length-1]?1===l.length?""+Kl:(delete l[l.length-1],l.join("")):(l[l.length-1]=Dl.charAt(Dl.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function Gd(u){return{type:"value",snapshotNode:u}}function za(u,o){return{type:"child_added",snapshotNode:o,childName:u}}function Vo(u,o){return{type:"child_removed",snapshotNode:o,childName:u}}function Sl(u,o,l){return{type:"child_changed",snapshotNode:o,childName:u,oldSnap:l}}class Xc{constructor(o){this.index_=o}updateChild(o,l,f,v,T,R){(0,te.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const Q=o.getImmediateChild(l);return Q.getChild(v).equals(f.getChild(v))&&Q.isEmpty()===f.isEmpty()||(null!=R&&(f.isEmpty()?o.hasChild(l)?R.trackChildChange(Vo(l,Q)):(0,te.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Q.isEmpty()?R.trackChildChange(za(l,f)):R.trackChildChange(Sl(l,f,Q))),o.isLeafNode()&&f.isEmpty())?o:o.updateImmediateChild(l,f).withIndex(this.index_)}updateFullNode(o,l,f){return null!=f&&(o.isLeafNode()||o.forEachChild(Ar,(v,T)=>{l.hasChild(v)||f.trackChildChange(Vo(v,T))}),l.isLeafNode()||l.forEachChild(Ar,(v,T)=>{if(o.hasChild(v)){const R=o.getImmediateChild(v);R.equals(T)||f.trackChildChange(Sl(v,T,R))}else f.trackChildChange(za(v,T))})),l.withIndex(this.index_)}updatePriority(o,l){return o.isEmpty()?yr.EMPTY_NODE:o.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class uc{constructor(o){this.indexedFilter_=new Xc(o.getIndex()),this.index_=o.getIndex(),this.startPost_=uc.getStartPost_(o),this.endPost_=uc.getEndPost_(o)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){return this.index_.compare(this.getStartPost(),o)<=0&&this.index_.compare(o,this.getEndPost())<=0}updateChild(o,l,f,v,T,R){return this.matches(new Or(l,f))||(f=yr.EMPTY_NODE),this.indexedFilter_.updateChild(o,l,f,v,T,R)}updateFullNode(o,l,f){l.isLeafNode()&&(l=yr.EMPTY_NODE);let v=l.withIndex(this.index_);v=v.updatePriority(yr.EMPTY_NODE);const T=this;return l.forEachChild(Ar,(R,Q)=>{T.matches(new Or(R,Q))||(v=v.updateImmediateChild(R,yr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,v,f)}updatePriority(o,l){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const l=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),l)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const l=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),l)}return o.getIndex().maxPost()}}class kh{constructor(o){this.rangedFilter_=new uc(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft()}updateChild(o,l,f,v,T,R){return this.rangedFilter_.matches(new Or(l,f))||(f=yr.EMPTY_NODE),o.getImmediateChild(l).equals(f)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,l,f,v,T,R):this.fullLimitUpdateChild_(o,l,f,T,R)}updateFullNode(o,l,f){let v;if(l.isLeafNode()||l.isEmpty())v=yr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let T;v=yr.EMPTY_NODE.withIndex(this.index_),T=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let R=0;for(;T.hasNext()&&R<this.limit_;){const Q=T.getNext();let oe;if(oe=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),Q)<=0:this.index_.compare(Q,this.rangedFilter_.getEndPost())<=0,!oe)break;v=v.updateImmediateChild(Q.name,Q.node),R++}}else{let T,R,Q,oe;if(v=l.withIndex(this.index_),v=v.updatePriority(yr.EMPTY_NODE),this.reverse_){oe=v.getReverseIterator(this.index_),T=this.rangedFilter_.getEndPost(),R=this.rangedFilter_.getStartPost();const Ct=this.index_.getCompare();Q=(jt,on)=>Ct(on,jt)}else oe=v.getIterator(this.index_),T=this.rangedFilter_.getStartPost(),R=this.rangedFilter_.getEndPost(),Q=this.index_.getCompare();let ve=0,vt=!1;for(;oe.hasNext();){const Ct=oe.getNext();!vt&&Q(T,Ct)<=0&&(vt=!0),vt&&ve<this.limit_&&Q(Ct,R)<=0?ve++:v=v.updateImmediateChild(Ct.name,yr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,v,f)}updatePriority(o,l){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,l,f,v,T){let R;if(this.reverse_){const Ct=this.index_.getCompare();R=(jt,on)=>Ct(on,jt)}else R=this.index_.getCompare();const Q=o;(0,te.hu)(Q.numChildren()===this.limit_,"");const oe=new Or(l,f),ve=this.reverse_?Q.getFirstChild(this.index_):Q.getLastChild(this.index_),vt=this.rangedFilter_.matches(oe);if(Q.hasChild(l)){const Ct=Q.getImmediateChild(l);let jt=v.getChildAfterChild(this.index_,ve,this.reverse_);for(;null!=jt&&(jt.name===l||Q.hasChild(jt.name));)jt=v.getChildAfterChild(this.index_,jt,this.reverse_);const on=null==jt?1:R(jt,oe);if(vt&&!f.isEmpty()&&on>=0)return null!=T&&T.trackChildChange(Sl(l,f,Ct)),Q.updateImmediateChild(l,f);{null!=T&&T.trackChildChange(Vo(l,Ct));const br=Q.updateImmediateChild(l,yr.EMPTY_NODE);return null!=jt&&this.rangedFilter_.matches(jt)?(null!=T&&T.trackChildChange(za(jt.name,jt.node)),br.updateImmediateChild(jt.name,jt.node)):br}}return f.isEmpty()?o:vt&&R(ve,oe)>=0?(null!=T&&(T.trackChildChange(Vo(ve.name,ve.node)),T.trackChildChange(za(l,f))),Q.updateImmediateChild(l,f).updateImmediateChild(ve.name,yr.EMPTY_NODE)):o}}class Qc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ar}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gs}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ds}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,te.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ar}copy(){const o=new Qc;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function I(u,o,l){const f=u.copy();return f.startSet_=!0,void 0===o&&(o=null),f.indexStartValue_=o,null!=l?(f.startNameSet_=!0,f.indexStartName_=l):(f.startNameSet_=!1,f.indexStartName_=""),f}function _(u,o,l){const f=u.copy();return f.endSet_=!0,void 0===o&&(o=null),f.indexEndValue_=o,void 0!==l?(f.endNameSet_=!0,f.indexEndName_=l):(f.endNameSet_=!1,f.indexEndName_=""),f}function K(u,o){const l=u.copy();return l.index_=o,l}function de(u){const o={};if(u.isDefault())return o;let l;return u.index_===Ar?l="$priority":u.index_===Os?l="$value":u.index_===Pr?l="$key":((0,te.hu)(u.index_ instanceof Yc,"Unrecognized index type!"),l=u.index_.toString()),o.orderBy=(0,te.Pz)(l),u.startSet_&&(o.startAt=(0,te.Pz)(u.indexStartValue_),u.startNameSet_&&(o.startAt+=","+(0,te.Pz)(u.indexStartName_))),u.endSet_&&(o.endAt=(0,te.Pz)(u.indexEndValue_),u.endNameSet_&&(o.endAt+=","+(0,te.Pz)(u.indexEndName_))),u.limitSet_&&(u.isViewFromLeft()?o.limitToFirst=u.limit_:o.limitToLast=u.limit_),o}function ht(u){const o={};if(u.startSet_&&(o.sp=u.indexStartValue_,u.startNameSet_&&(o.sn=u.indexStartName_)),u.endSet_&&(o.ep=u.indexEndValue_,u.endNameSet_&&(o.en=u.indexEndName_)),u.limitSet_){o.l=u.limit_;let l=u.viewFrom_;""===l&&(l=u.isViewFromLeft()?"l":"r"),o.vf=l}return u.index_!==Ar&&(o.i=u.index_.toString()),o}class Ht extends Ua{constructor(o,l,f,v){super(),this.repoInfo_=o,this.onDataUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=v,this.log_=Qu("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,l){return void 0!==l?"tag$"+l:((0,te.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,l,f,v){const T=o._path.toString();this.log_("Listen called for "+T+" "+o._queryIdentifier);const R=Ht.getListenId_(o,f),Q={};this.listens_[R]=Q;const oe=de(o._queryParams);this.restRequest_(T+".json",oe,(ve,vt)=>{let Ct=vt;if(404===ve&&(Ct=null,ve=null),null===ve&&this.onDataUpdate_(T,Ct,!1,f),(0,te.DV)(this.listens_,R)===Q){let jt;jt=ve?401===ve?"permission_denied":"rest_error:"+ve:"ok",v(jt,null)}})}unlisten(o,l){const f=Ht.getListenId_(o,l);delete this.listens_[f]}get(o){const l=de(o._queryParams),f=o._path.toString(),v=new te.BH;return this.restRequest_(f+".json",l,(T,R)=>{let Q=R;404===T&&(Q=null,T=null),null===T?(this.onDataUpdate_(f,Q,!1,null),v.resolve(Q)):v.reject(new Error(Q))}),v.promise}refreshAuthToken(o){}restRequest_(o,l={},f){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([v,T])=>{v&&v.accessToken&&(l.auth=v.accessToken),T&&T.token&&(l.ac=T.token);const R=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,te.xO)(l);this.log_("Sending REST request for "+R);const Q=new XMLHttpRequest;Q.onreadystatechange=()=>{if(f&&4===Q.readyState){this.log_("REST Response for "+R+" received. status:",Q.status,"response:",Q.responseText);let oe=null;if(Q.status>=200&&Q.status<300){try{oe=(0,te.cI)(Q.responseText)}catch(ve){xi("Failed to parse JSON response for "+R+": "+Q.responseText)}f(null,oe)}else 401!==Q.status&&404!==Q.status&&xi("Got unsuccessful REST response for "+R+" Status: "+Q.status),f(Q.status);f=null}},Q.open("GET",R,!0),Q.send()})}}class sn{constructor(){this.rootNode_=yr.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,l){this.rootNode_=this.rootNode_.updateChild(o,l)}}function wn(){return{value:null,children:new Map}}function Wn(u,o,l){if(pr(o))u.value=l,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(o,l);else{const f=Rr(o);u.children.has(f)||u.children.set(f,wn()),Wn(u.children.get(f),o=Ui(o),l)}}function qn(u,o){if(pr(o))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const l=u.value;return u.value=null,l.forEachChild(Ar,(f,v)=>{Wn(u,new Di(f),v)}),qn(u,o)}}if(u.children.size>0){const l=Rr(o);return o=Ui(o),u.children.has(l)&&qn(u.children.get(l),o)&&u.children.delete(l),0===u.children.size}return!0}function _s(u,o,l){null!==u.value?l(o,u.value):function da(u,o){u.children.forEach((l,f)=>{o(f,l)})}(u,(f,v)=>{_s(v,new Di(o.toString()+"/"+f),l)})}class Jc{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),l=Object.assign({},o);return this.last_&&qi(this.last_,(f,v)=>{l[f]=l[f]-v}),this.last_=o,l}}class Nh{constructor(o,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Jc(o);const f=1e4+2e4*Math.random();ql(this.reportStats_.bind(this),Math.floor(f))}reportStats_(){const o=this.statsListener_.get(),l={};let f=!1;qi(o,(v,T)=>{T>0&&(0,te.r3)(this.statsToReport_,v)&&(l[v]=T,f=!0)}),f&&this.server_.reportStats(l),ql(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qo=(()=>{return(u=Qo||(Qo={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Qo;var u})();function ed(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class td{constructor(o,l,f){this.path=o,this.affectedTree=l,this.revert=f,this.type=Qo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(pr(this.path)){if(null!=this.affectedTree.value)return(0,te.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new Di(o));return new td(Ei(),l,this.revert)}}return(0,te.hu)(Rr(this.path)===o,"operationForChild called for unrelated child."),new td(Ui(this.path),this.affectedTree,this.revert)}}class nd{constructor(o,l){this.source=o,this.path=l,this.type=Qo.LISTEN_COMPLETE}operationForChild(o){return pr(this.path)?new nd(this.source,Ei()):new nd(this.source,Ui(this.path))}}class Al{constructor(o,l,f){this.source=o,this.path=l,this.snap=f,this.type=Qo.OVERWRITE}operationForChild(o){return pr(this.path)?new Al(this.source,Ei(),this.snap.getImmediateChild(o)):new Al(this.source,Ui(this.path),this.snap)}}class hc{constructor(o,l,f){this.source=o,this.path=l,this.children=f,this.type=Qo.MERGE}operationForChild(o){if(pr(this.path)){const l=this.children.subtree(new Di(o));return l.isEmpty()?null:l.value?new Al(this.source,Ei(),l.value):new hc(this.source,Ei(),l)}return(0,te.hu)(Rr(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new hc(this.source,Ui(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ru{constructor(o,l,f){this.node_=o,this.fullyInitialized_=l,this.filtered_=f}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(pr(o))return this.isFullyInitialized()&&!this.filtered_;const l=Rr(o);return this.isCompleteForChild(l)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class Np{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function rd(u,o,l,f,v,T){const R=f.filter(Q=>Q.type===l);R.sort((Q,oe)=>function rm(u,o,l){if(null==o.childName||null==l.childName)throw(0,te.g5)("Should only compare child_ events.");const f=new Or(o.childName,o.snapshotNode),v=new Or(l.childName,l.snapshotNode);return u.index_.compare(f,v)}(u,Q,oe)),R.forEach(Q=>{const oe=function nm(u,o,l){return"value"===o.type||"child_removed"===o.type||(o.prevName=l.getPredecessorChildName(o.childName,o.snapshotNode,u.index_)),o}(u,Q,T);v.forEach(ve=>{ve.respondsTo(Q.type)&&o.push(ve.createEvent(oe,u.query_))})})}function $t(u,o){return{eventCache:u,serverCache:o}}function Ou(u,o,l,f){return $t(new ru(o,l,f),u.serverCache)}function Ao(u,o,l,f){return $t(u.eventCache,new ru(o,l,f))}function Fh(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function ll(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let Pu;class Ri{constructor(o,l=(()=>(Pu||(Pu=new To(aa)),Pu))()){this.value=o,this.children=l}static fromObject(o){let l=new Ri(null);return qi(o,(f,v)=>{l=l.set(new Di(f),v)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,l){if(null!=this.value&&l(this.value))return{path:Ei(),value:this.value};if(pr(o))return null;{const f=Rr(o),v=this.children.get(f);if(null!==v){const T=v.findRootMostMatchingPathAndValue(Ui(o),l);return null!=T?{path:Ni(new Di(f),T.path),value:T.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(pr(o))return this;{const l=Rr(o),f=this.children.get(l);return null!==f?f.subtree(Ui(o)):new Ri(null)}}set(o,l){if(pr(o))return new Ri(l,this.children);{const f=Rr(o),T=(this.children.get(f)||new Ri(null)).set(Ui(o),l),R=this.children.insert(f,T);return new Ri(this.value,R)}}remove(o){if(pr(o))return this.children.isEmpty()?new Ri(null):new Ri(null,this.children);{const l=Rr(o),f=this.children.get(l);if(f){const v=f.remove(Ui(o));let T;return T=v.isEmpty()?this.children.remove(l):this.children.insert(l,v),null===this.value&&T.isEmpty()?new Ri(null):new Ri(this.value,T)}return this}}get(o){if(pr(o))return this.value;{const l=Rr(o),f=this.children.get(l);return f?f.get(Ui(o)):null}}setTree(o,l){if(pr(o))return l;{const f=Rr(o),T=(this.children.get(f)||new Ri(null)).setTree(Ui(o),l);let R;return R=T.isEmpty()?this.children.remove(f):this.children.insert(f,T),new Ri(this.value,R)}}fold(o){return this.fold_(Ei(),o)}fold_(o,l){const f={};return this.children.inorderTraversal((v,T)=>{f[v]=T.fold_(Ni(o,v),l)}),l(o,this.value,f)}findOnPath(o,l){return this.findOnPath_(o,Ei(),l)}findOnPath_(o,l,f){const v=!!this.value&&f(l,this.value);if(v)return v;if(pr(o))return null;{const T=Rr(o),R=this.children.get(T);return R?R.findOnPath_(Ui(o),Ni(l,T),f):null}}foreachOnPath(o,l){return this.foreachOnPath_(o,Ei(),l)}foreachOnPath_(o,l,f){if(pr(o))return this;{this.value&&f(l,this.value);const v=Rr(o),T=this.children.get(v);return T?T.foreachOnPath_(Ui(o),Ni(l,v),f):new Ri(null)}}foreach(o){this.foreach_(Ei(),o)}foreach_(o,l){this.children.inorderTraversal((f,v)=>{v.foreach_(Ni(o,f),l)}),this.value&&l(o,this.value)}foreachChild(o){this.children.inorderTraversal((l,f)=>{f.value&&o(l,f.value)})}}class Wa{constructor(o){this.writeTree_=o}static empty(){return new Wa(new Ri(null))}}function fc(u,o,l){if(pr(o))return new Wa(new Ri(l));{const f=u.writeTree_.findRootMostValueAndPath(o);if(null!=f){const v=f.path;let T=f.value;const R=Ms(v,o);return T=T.updateChild(R,l),new Wa(u.writeTree_.set(v,T))}{const v=new Ri(l),T=u.writeTree_.setTree(o,v);return new Wa(T)}}}function Lh(u,o,l){let f=u;return qi(l,(v,T)=>{f=fc(f,Ni(o,v),T)}),f}function Zs(u,o){if(pr(o))return Wa.empty();{const l=u.writeTree_.setTree(o,new Ri(null));return new Wa(l)}}function Kd(u,o){return null!=ul(u,o)}function ul(u,o){const l=u.writeTree_.findRootMostValueAndPath(o);return null!=l?u.writeTree_.get(l.path).getChild(Ms(l.path,o)):null}function id(u){const o=[],l=u.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(Ar,(f,v)=>{o.push(new Or(f,v))}):u.writeTree_.children.inorderTraversal((f,v)=>{null!=v.value&&o.push(new Or(f,v.value))}),o}function Jo(u,o){if(pr(o))return u;{const l=ul(u,o);return new Wa(null!=l?new Ri(l):u.writeTree_.subtree(o))}}function qd(u){return u.writeTree_.isEmpty()}function sd(u,o){return Bh(Ei(),u.writeTree_,o)}function Bh(u,o,l){if(null!=o.value)return l.updateChild(u,o.value);{let f=null;return o.children.inorderTraversal((v,T)=>{".priority"===v?((0,te.hu)(null!==T.value,"Priority writes must always be leaf nodes"),f=T.value):l=Bh(Ni(u,v),T,l)}),!l.getChild(u).isEmpty()&&null!==f&&(l=l.updateChild(Ni(u,".priority"),f)),l}}function xl(u,o){return jp(o,u)}function Lp(u,o){if(u.snap)return mo(u.path,o);for(const l in u.children)if(u.children.hasOwnProperty(l)&&mo(Ni(u.path,l),o))return!0;return!1}function Gf(u){return u.visible}function im(u,o,l){let f=Wa.empty();for(let v=0;v<u.length;++v){const T=u[v];if(o(T)){const R=T.path;let Q;if(T.snap)mo(l,R)?(Q=Ms(l,R),f=fc(f,Q,T.snap)):mo(R,l)&&(Q=Ms(R,l),f=fc(f,Ei(),T.snap.getChild(Q)));else{if(!T.children)throw(0,te.g5)("WriteRecord should have .snap or .children");if(mo(l,R))Q=Ms(l,R),f=Lh(f,Q,T.children);else if(mo(R,l))if(Q=Ms(R,l),pr(Q))f=Lh(f,Ei(),T.children);else{const oe=(0,te.DV)(T.children,Rr(Q));if(oe){const ve=oe.getChild(Ui(Q));f=fc(f,Ei(),ve)}}}}}return f}function Bp(u,o,l,f,v){if(f||v){const T=Jo(u.visibleWrites,o);return!v&&qd(T)?l:v||null!=l||Kd(T,Ei())?sd(im(u.allWrites,function(ve){return(ve.visible||v)&&(!f||!~f.indexOf(ve.writeId))&&(mo(ve.path,o)||mo(o,ve.path))},o),l||yr.EMPTY_NODE):null}{const T=ul(u.visibleWrites,o);if(null!=T)return T;{const R=Jo(u.visibleWrites,o);return qd(R)?l:null!=l||Kd(R,Ei())?sd(R,l||yr.EMPTY_NODE):null}}}function Zd(u,o,l,f){return Bp(u.writeTree,u.treePath,o,l,f)}function $p(u,o){return function sm(u,o,l){let f=yr.EMPTY_NODE;const v=ul(u.visibleWrites,o);if(v)return v.isLeafNode()||v.forEachChild(Ar,(T,R)=>{f=f.updateImmediateChild(T,R)}),f;if(l){const T=Jo(u.visibleWrites,o);return l.forEachChild(Ar,(R,Q)=>{const oe=sd(Jo(T,new Di(R)),Q);f=f.updateImmediateChild(R,oe)}),id(T).forEach(R=>{f=f.updateImmediateChild(R.name,R.node)}),f}return id(Jo(u.visibleWrites,o)).forEach(R=>{f=f.updateImmediateChild(R.name,R.node)}),f}(u.writeTree,u.treePath,o)}function om(u,o,l,f){return function Vp(u,o,l,f,v){(0,te.hu)(f||v,"Either existingEventSnap or existingServerSnap must exist");const T=Ni(o,l);if(Kd(u.visibleWrites,T))return null;{const R=Jo(u.visibleWrites,T);return qd(R)?v.getChild(l):sd(R,v.getChild(l))}}(u.writeTree,u.treePath,o,l,f)}function zf(u,o){return function $h(u,o){return ul(u.visibleWrites,o)}(u.writeTree,Ni(u.treePath,o))}function iu(u,o,l){return function Up(u,o,l,f){const v=Ni(o,l),T=ul(u.visibleWrites,v);return null!=T?T:f.isCompleteForChild(l)?sd(Jo(u.visibleWrites,v),f.getNode().getImmediateChild(l)):null}(u.writeTree,u.treePath,o,l)}function gc(u,o){return jp(Ni(u.treePath,o),u.writeTree)}function jp(u,o){return{treePath:u,writeTree:o}}class ey{constructor(){this.changeMap=new Map}trackChildChange(o){const l=o.type,f=o.childName;(0,te.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,te.hu)(".priority"!==f,"Only non-priority child changes can be tracked.");const v=this.changeMap.get(f);if(v){const T=v.type;if("child_added"===l&&"child_removed"===T)this.changeMap.set(f,Sl(f,o.snapshotNode,v.snapshotNode));else if("child_removed"===l&&"child_added"===T)this.changeMap.delete(f);else if("child_removed"===l&&"child_changed"===T)this.changeMap.set(f,Vo(f,v.oldSnap));else if("child_changed"===l&&"child_added"===T)this.changeMap.set(f,za(f,o.snapshotNode));else{if("child_changed"!==l||"child_changed"!==T)throw(0,te.g5)("Illegal combination of changes: "+o+" occurred after "+v);this.changeMap.set(f,Sl(f,o.snapshotNode,v.oldSnap))}}else this.changeMap.set(f,o)}getChanges(){return Array.from(this.changeMap.values())}}const Hh=new class Lr{getCompleteChild(o){return null}getChildAfterChild(o,l,f){return null}};class ad{constructor(o,l,f=null){this.writes_=o,this.viewCache_=l,this.optCompleteServerCache_=f}getCompleteChild(o){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(o))return l.getNode().getImmediateChild(o);{const f=null!=this.optCompleteServerCache_?new ru(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iu(this.writes_,o,f)}}getChildAfterChild(o,l,f){const v=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ll(this.viewCache_),T=function jh(u,o,l,f,v,T){return function $o(u,o,l,f,v,T,R){let Q;const oe=Jo(u.visibleWrites,o),ve=ul(oe,Ei());if(null!=ve)Q=ve;else{if(null==l)return[];Q=sd(oe,l)}if(Q=Q.withIndex(R),Q.isEmpty()||Q.isLeafNode())return[];{const vt=[],Ct=R.getCompare(),jt=T?Q.getReverseIteratorFrom(f,R):Q.getIteratorFrom(f,R);let on=jt.getNext();for(;on&&vt.length<v;)0!==Ct(on,f)&&vt.push(on),on=jt.getNext();return vt}}(u.writeTree,u.treePath,o,l,f,v,T)}(this.writes_,v,l,1,f,o);return 0===T.length?null:T[0]}}function Wh(u,o,l,f,v,T){const R=o.eventCache;if(null!=zf(f,l))return o;{let Q,oe;if(pr(l))if((0,te.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const ve=ll(o),Ct=$p(f,ve instanceof yr?ve:yr.EMPTY_NODE);Q=u.filter.updateFullNode(o.eventCache.getNode(),Ct,T)}else{const ve=Zd(f,ll(o));Q=u.filter.updateFullNode(o.eventCache.getNode(),ve,T)}else{const ve=Rr(l);if(".priority"===ve){(0,te.hu)(1===Il(l),"Can't have a priority with additional path components");const vt=R.getNode();oe=o.serverCache.getNode();const Ct=om(f,l,vt,oe);Q=null!=Ct?u.filter.updatePriority(vt,Ct):R.getNode()}else{const vt=Ui(l);let Ct;if(R.isCompleteForChild(ve)){oe=o.serverCache.getNode();const jt=om(f,l,R.getNode(),oe);Ct=null!=jt?R.getNode().getImmediateChild(ve).updateChild(vt,jt):R.getNode().getImmediateChild(ve)}else Ct=iu(f,ve,o.serverCache);Q=null!=Ct?u.filter.updateChild(R.getNode(),ve,Ct,vt,v,T):R.getNode()}}return Ou(o,Q,R.isFullyInitialized()||pr(l),u.filter.filtersNodes())}}function ld(u,o,l,f,v,T,R,Q){const oe=o.serverCache;let ve;const vt=R?u.filter:u.filter.getIndexedFilter();if(pr(l))ve=vt.updateFullNode(oe.getNode(),f,null);else if(vt.filtersNodes()&&!oe.isFiltered()){const on=oe.getNode().updateChild(l,f);ve=vt.updateFullNode(oe.getNode(),on,null)}else{const on=Rr(l);if(!oe.isCompleteForPath(l)&&Il(l)>1)return o;const gn=Ui(l),qr=oe.getNode().getImmediateChild(on).updateChild(gn,f);ve=".priority"===on?vt.updatePriority(oe.getNode(),qr):vt.updateChild(oe.getNode(),on,qr,gn,Hh,null)}const Ct=Ao(o,ve,oe.isFullyInitialized()||pr(l),vt.filtersNodes());return Wh(u,Ct,l,v,new ad(v,Ct,T),Q)}function Ss(u,o,l,f,v,T,R){const Q=o.eventCache;let oe,ve;const vt=new ad(v,o,T);if(pr(l))ve=u.filter.updateFullNode(o.eventCache.getNode(),f,R),oe=Ou(o,ve,!0,u.filter.filtersNodes());else{const Ct=Rr(l);if(".priority"===Ct)ve=u.filter.updatePriority(o.eventCache.getNode(),f),oe=Ou(o,ve,Q.isFullyInitialized(),Q.isFiltered());else{const jt=Ui(l),on=Q.getNode().getImmediateChild(Ct);let gn;if(pr(jt))gn=f;else{const br=vt.getCompleteChild(Ct);gn=null!=br?".priority"===jc(jt)&&br.getChild(Bf(jt)).isEmpty()?br:br.updateChild(jt,f):yr.EMPTY_NODE}oe=on.equals(gn)?o:Ou(o,u.filter.updateChild(Q.getNode(),Ct,gn,jt,vt,R),Q.isFullyInitialized(),u.filter.filtersNodes())}}return oe}function Kh(u,o){return u.eventCache.isCompleteForChild(o)}function Xd(u,o,l){return l.foreach((f,v)=>{o=o.updateChild(f,v)}),o}function Hp(u,o,l,f,v,T,R,Q){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let ve,oe=o;ve=pr(l)?f:new Ri(null).setTree(l,f);const vt=o.serverCache.getNode();return ve.children.inorderTraversal((Ct,jt)=>{if(vt.hasChild(Ct)){const gn=Xd(0,o.serverCache.getNode().getImmediateChild(Ct),jt);oe=ld(u,oe,new Di(Ct),gn,v,T,R,Q)}}),ve.children.inorderTraversal((Ct,jt)=>{const on=!o.serverCache.isCompleteForChild(Ct)&&void 0===jt.value;if(!vt.hasChild(Ct)&&!on){const br=Xd(0,o.serverCache.getNode().getImmediateChild(Ct),jt);oe=ld(u,oe,new Di(Ct),br,v,T,R,Q)}}),oe}class su{constructor(o,l){this.query_=o,this.eventRegistrations_=[];const f=this.query_._queryParams,v=new Xc(f.getIndex()),T=function kp(u){return u.loadsAllData()?new Xc(u.getIndex()):u.hasLimit()?new kh(u):new uc(u)}(f);this.processor_=function am(u){return{filter:u}}(T);const R=l.serverCache,Q=l.eventCache,oe=v.updateFullNode(yr.EMPTY_NODE,R.getNode(),null),ve=T.updateFullNode(yr.EMPTY_NODE,Q.getNode(),null),vt=new ru(oe,R.isFullyInitialized(),v.filtersNodes()),Ct=new ru(ve,Q.isFullyInitialized(),T.filtersNodes());this.viewCache_=$t(Ct,vt),this.eventGenerator_=new Np(this.query_)}get query(){return this.query_}}function Wf(u,o){const l=ll(u.viewCache_);return l&&(u.query._queryParams.loadsAllData()||!pr(o)&&!l.getImmediateChild(Rr(o)).isEmpty())?l.getChild(o):null}function yc(u){return 0===u.eventRegistrations_.length}function Kf(u,o,l){const f=[];if(l){(0,te.hu)(null==o,"A cancel should cancel all event registrations.");const v=u.query._path;u.eventRegistrations_.forEach(T=>{const R=T.createCancelEvent(l,v);R&&f.push(R)})}if(o){let v=[];for(let T=0;T<u.eventRegistrations_.length;++T){const R=u.eventRegistrations_[T];if(R.matches(o)){if(o.hasAnyCallback()){v=v.concat(u.eventRegistrations_.slice(T+1));break}}else v.push(R)}u.eventRegistrations_=v}else u.eventRegistrations_=[];return f}function zp(u,o,l,f){o.type===Qo.MERGE&&null!==o.source.queryId&&((0,te.hu)(ll(u.viewCache_),"We should always have a full cache before handling merges"),(0,te.hu)(Fh(u.viewCache_),"Missing event cache, even though we have a server cache"));const v=u.viewCache_,T=function ha(u,o,l,f,v){const T=new ey;let R,Q;if(l.type===Qo.OVERWRITE){const ve=l;ve.source.fromUser?R=Ss(u,o,ve.path,ve.snap,f,v,T):((0,te.hu)(ve.source.fromServer,"Unknown source."),Q=ve.source.tagged||o.serverCache.isFiltered()&&!pr(ve.path),R=ld(u,o,ve.path,ve.snap,f,v,Q,T))}else if(l.type===Qo.MERGE){const ve=l;ve.source.fromUser?R=function qh(u,o,l,f,v,T,R){let Q=o;return f.foreach((oe,ve)=>{const vt=Ni(l,oe);Kh(o,Rr(vt))&&(Q=Ss(u,Q,vt,ve,v,T,R))}),f.foreach((oe,ve)=>{const vt=Ni(l,oe);Kh(o,Rr(vt))||(Q=Ss(u,Q,vt,ve,v,T,R))}),Q}(u,o,ve.path,ve.children,f,v,T):((0,te.hu)(ve.source.fromServer,"Unknown source."),Q=ve.source.tagged||o.serverCache.isFiltered(),R=Hp(u,o,ve.path,ve.children,f,v,Q,T))}else if(l.type===Qo.ACK_USER_WRITE){const ve=l;R=ve.revert?function Zh(u,o,l,f,v,T){let R;if(null!=zf(f,l))return o;{const Q=new ad(f,o,v),oe=o.eventCache.getNode();let ve;if(pr(l)||".priority"===Rr(l)){let vt;if(o.serverCache.isFullyInitialized())vt=Zd(f,ll(o));else{const Ct=o.serverCache.getNode();(0,te.hu)(Ct instanceof yr,"serverChildren would be complete if leaf node"),vt=$p(f,Ct)}vt=vt,ve=u.filter.updateFullNode(oe,vt,T)}else{const vt=Rr(l);let Ct=iu(f,vt,o.serverCache);null==Ct&&o.serverCache.isCompleteForChild(vt)&&(Ct=oe.getImmediateChild(vt)),ve=null!=Ct?u.filter.updateChild(oe,vt,Ct,Ui(l),Q,T):o.eventCache.getNode().hasChild(vt)?u.filter.updateChild(oe,vt,yr.EMPTY_NODE,Ui(l),Q,T):oe,ve.isEmpty()&&o.serverCache.isFullyInitialized()&&(R=Zd(f,ll(o)),R.isLeafNode()&&(ve=u.filter.updateFullNode(ve,R,T)))}return R=o.serverCache.isFullyInitialized()||null!=zf(f,Ei()),Ou(o,ve,R,u.filter.filtersNodes())}}(u,o,ve.path,f,v,T):function ku(u,o,l,f,v,T,R){if(null!=zf(v,l))return o;const Q=o.serverCache.isFiltered(),oe=o.serverCache;if(null!=f.value){if(pr(l)&&oe.isFullyInitialized()||oe.isCompleteForPath(l))return ld(u,o,l,oe.getNode().getChild(l),v,T,Q,R);if(pr(l)){let ve=new Ri(null);return oe.getNode().forEachChild(Pr,(vt,Ct)=>{ve=ve.set(new Di(vt),Ct)}),Hp(u,o,l,ve,v,T,Q,R)}return o}{let ve=new Ri(null);return f.foreach((vt,Ct)=>{const jt=Ni(l,vt);oe.isCompleteForPath(jt)&&(ve=ve.set(vt,oe.getNode().getChild(jt)))}),Hp(u,o,l,ve,v,T,Q,R)}}(u,o,ve.path,ve.affectedTree,f,v,T)}else{if(l.type!==Qo.LISTEN_COMPLETE)throw(0,te.g5)("Unknown operation type: "+l.type);R=function Yh(u,o,l,f,v){const T=o.serverCache;return Wh(u,Ao(o,T.getNode(),T.isFullyInitialized()||pr(l),T.isFiltered()),l,f,Hh,v)}(u,o,l.path,f,T)}const oe=T.getChanges();return function zh(u,o,l){const f=o.eventCache;if(f.isFullyInitialized()){const v=f.getNode().isLeafNode()||f.getNode().isEmpty(),T=Fh(u);(l.length>0||!u.eventCache.isFullyInitialized()||v&&!f.getNode().equals(T)||!f.getNode().getPriority().equals(T.getPriority()))&&l.push(Gd(Fh(o)))}}(o,R,oe),{viewCache:R,changes:oe}}(u.processor_,v,o,l,f);return function Gh(u,o){(0,te.hu)(o.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,te.hu)(o.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,T.viewCache),(0,te.hu)(T.viewCache.serverCache.isFullyInitialized()||!v.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=T.viewCache,Wp(u,T.changes,T.viewCache.eventCache.getNode(),null)}function Wp(u,o,l,f){return function Fp(u,o,l,f){const v=[],T=[];return o.forEach(R=>{"child_changed"===R.type&&u.index_.indexedValueChanged(R.oldSnap,R.snapshotNode)&&T.push(function Ph(u,o){return{type:"child_moved",snapshotNode:o,childName:u}}(R.childName,R.snapshotNode))}),rd(u,v,"child_removed",o,f,l),rd(u,v,"child_added",o,f,l),rd(u,v,"child_moved",T,f,l),rd(u,v,"child_changed",o,f,l),rd(u,v,"value",o,f,l),v}(u.eventGenerator_,o,l,f?[f]:u.eventRegistrations_)}let Kp,cd;class lm{constructor(){this.views=new Map}}function Zp(u,o,l,f){const v=o.source.queryId;if(null!==v){const T=u.views.get(v);return(0,te.hu)(null!=T,"SyncTree gave us an op for an invalid query."),zp(T,o,l,f)}{let T=[];for(const R of u.views.values())T=T.concat(zp(R,o,l,f));return T}}function Xh(u,o,l,f,v){const R=u.views.get(o._queryIdentifier);if(!R){let Q=Zd(l,v?f:null),oe=!1;Q?oe=!0:f instanceof yr?(Q=$p(l,f),oe=!1):(Q=yr.EMPTY_NODE,oe=!1);const ve=$t(new ru(Q,oe,!1),new ru(f,v,!1));return new su(o,ve)}return R}function cm(u){const o=[];for(const l of u.views.values())l.query._queryParams.loadsAllData()||o.push(l);return o}function _c(u,o){let l=null;for(const f of u.views.values())l=l||Wf(f,o);return l}function ny(u,o){return o._queryParams.loadsAllData()?Qh(u):u.views.get(o._queryIdentifier)}function dm(u,o){return null!=ny(u,o)}function Nu(u){return null!=Qh(u)}function Qh(u){for(const o of u.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let Qp=1;class Yf{constructor(o){this.listenProvider_=o,this.syncPointTree_=new Ri(null),this.pendingWriteTree_=function Jm(){return{visibleWrites:Wa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Jh(u,o,l,f,v){return function od(u,o,l,f,v){(0,te.hu)(f>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===v&&(v=!0),u.allWrites.push({path:o,snap:l,writeId:f,visible:v}),v&&(u.visibleWrites=fc(u.visibleWrites,o,l)),u.lastWriteId=f}(u.pendingWriteTree_,o,l,f,v),v?Ka(u,new Al({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,l)):[]}function au(u,o,l=!1){const f=function Yd(u,o){for(let l=0;l<u.allWrites.length;l++){const f=u.allWrites[l];if(f.writeId===o)return f}return null}(u.pendingWriteTree_,o);if(function Vh(u,o){const l=u.allWrites.findIndex(Q=>Q.writeId===o);(0,te.hu)(l>=0,"removeWrite called with nonexistent writeId.");const f=u.allWrites[l];u.allWrites.splice(l,1);let v=f.visible,T=!1,R=u.allWrites.length-1;for(;v&&R>=0;){const Q=u.allWrites[R];Q.visible&&(R>=l&&Lp(Q,f.path)?v=!1:mo(f.path,Q.path)&&(T=!0)),R--}return!!v&&(T?(function Uh(u){u.visibleWrites=im(u.allWrites,Gf,Ei()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(f.snap?u.visibleWrites=Zs(u.visibleWrites,f.path):qi(f.children,oe=>{u.visibleWrites=Zs(u.visibleWrites,Ni(f.path,oe))}),!0))}(u.pendingWriteTree_,o)){let T=new Ri(null);return null!=f.snap?T=T.set(Ei(),!0):qi(f.children,R=>{T=T.set(new Di(R),!0)}),Ka(u,new td(f.path,T,l))}return[]}function vc(u,o,l){return Ka(u,new Al({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,l))}function ng(u,o,l,f){const v=o._path,T=u.syncPointTree_.get(v);let R=[];if(T&&("default"===o._queryIdentifier||dm(T,o))){const Q=function qf(u,o,l,f){const v=o._queryIdentifier,T=[];let R=[];const Q=Nu(u);if("default"===v)for(const[oe,ve]of u.views.entries())R=R.concat(Kf(ve,l,f)),yc(ve)&&(u.views.delete(oe),ve.query._queryParams.loadsAllData()||T.push(ve.query));else{const oe=u.views.get(v);oe&&(R=R.concat(Kf(oe,l,f)),yc(oe)&&(u.views.delete(v),oe.query._queryParams.loadsAllData()||T.push(oe.query)))}return Q&&!Nu(u)&&T.push(new(function Yp(){return(0,te.hu)(Kp,"Reference.ts has not been loaded"),Kp}())(o._repo,o._path)),{removed:T,events:R}}(T,o,l,f);(function um(u){return 0===u.views.size})(T)&&(u.syncPointTree_=u.syncPointTree_.remove(v));const oe=Q.removed;R=Q.events;const ve=-1!==oe.findIndex(Ct=>Ct._queryParams.loadsAllData()),vt=u.syncPointTree_.findOnPath(v,(Ct,jt)=>Nu(jt));if(ve&&!vt){const Ct=u.syncPointTree_.subtree(v);if(!Ct.isEmpty()){const jt=function sg(u){return u.fold((o,l,f)=>{if(l&&Nu(l))return[Qh(l)];{let v=[];return l&&(v=cm(l)),qi(f,(T,R)=>{v=v.concat(R)}),v}})}(Ct);for(let on=0;on<jt.length;++on){const gn=jt[on],br=gn.query,qr=bc(u,gn);u.listenProvider_.startListening(Lu(br),Cc(u,br),qr.hashFn,qr.onComplete)}}}!vt&&oe.length>0&&!f&&(ve?u.listenProvider_.stopListening(Lu(o),null):oe.forEach(Ct=>{const jt=u.queryToTagMap.get(Ml(Ct));u.listenProvider_.stopListening(Lu(Ct),jt)})),function yo(u,o){for(let l=0;l<o.length;++l){const f=o[l];if(!f._queryParams.loadsAllData()){const v=Ml(f),T=u.queryToTagMap.get(v);u.queryToTagMap.delete(v),u.tagToQueryMap.delete(T)}}}(u,oe)}return R}function wc(u,o,l){const f=o._path;let v=null,T=!1;u.syncPointTree_.foreachOnPath(f,(Ct,jt)=>{const on=Ms(Ct,f);v=v||_c(jt,on),T=T||Nu(jt)});let Q,R=u.syncPointTree_.get(f);R?(T=T||Nu(R),v=v||_c(R,Ei())):(R=new lm,u.syncPointTree_=u.syncPointTree_.set(f,R)),null!=v?Q=!0:(Q=!1,v=yr.EMPTY_NODE,u.syncPointTree_.subtree(f).foreachChild((jt,on)=>{const gn=_c(on,Ei());gn&&(v=v.updateImmediateChild(jt,gn))}));const oe=dm(R,o);if(!oe&&!o._queryParams.loadsAllData()){const Ct=Ml(o);(0,te.hu)(!u.queryToTagMap.has(Ct),"View does not exist, but we have a tag");const jt=function Qf(){return Qp++}();u.queryToTagMap.set(Ct,jt),u.tagToQueryMap.set(jt,Ct)}let vt=function Qd(u,o,l,f,v,T){const R=Xh(u,o,f,v,T);return u.views.has(o._queryIdentifier)||u.views.set(o._queryIdentifier,R),function ud(u,o){u.eventRegistrations_.push(o)}(R,l),function ty(u,o){const l=u.viewCache_.eventCache,f=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(Ar,(T,R)=>{f.push(za(T,R))}),l.isFullyInitialized()&&f.push(Gd(l.getNode())),Wp(u,f,l.getNode(),o)}(R,l)}(R,o,l,xl(u.pendingWriteTree_,f),v,Q);if(!oe&&!T){const Ct=ny(R,o);vt=vt.concat(function iy(u,o,l){const f=o._path,v=Cc(u,o),T=bc(u,l),R=u.listenProvider_.startListening(Lu(o),v,T.hashFn,T.onComplete),Q=u.syncPointTree_.subtree(f);if(v)(0,te.hu)(!Nu(Q.value),"If we're adding a query, it shouldn't be shadowed");else{const oe=Q.fold((ve,vt,Ct)=>{if(!pr(ve)&&vt&&Nu(vt))return[Qh(vt).query];{let jt=[];return vt&&(jt=jt.concat(cm(vt).map(on=>on.query))),qi(Ct,(on,gn)=>{jt=jt.concat(gn)}),jt}});for(let ve=0;ve<oe.length;++ve){const vt=oe[ve];u.listenProvider_.stopListening(Lu(vt),Cc(u,vt))}}return R}(u,o,Ct))}return vt}function Fu(u,o,l){const v=u.pendingWriteTree_,T=u.syncPointTree_.findOnPath(o,(R,Q)=>{const ve=_c(Q,Ms(R,o));if(ve)return ve});return Bp(v,o,T,l,!0)}function Ka(u,o){return Ic(o,u.syncPointTree_,null,xl(u.pendingWriteTree_,Ei()))}function Ic(u,o,l,f){if(pr(u.path))return ef(u,o,l,f);{const v=o.get(Ei());null==l&&null!=v&&(l=_c(v,Ei()));let T=[];const R=Rr(u.path),Q=u.operationForChild(R),oe=o.children.get(R);if(oe&&Q){const ve=l?l.getImmediateChild(R):null,vt=gc(f,R);T=T.concat(Ic(Q,oe,ve,vt))}return v&&(T=T.concat(Zp(v,u,f,l))),T}}function ef(u,o,l,f){const v=o.get(Ei());null==l&&null!=v&&(l=_c(v,Ei()));let T=[];return o.children.inorderTraversal((R,Q)=>{const oe=l?l.getImmediateChild(R):null,ve=gc(f,R),vt=u.operationForChild(R);vt&&(T=T.concat(ef(vt,Q,oe,ve)))}),v&&(T=T.concat(Zp(v,u,f,l))),T}function bc(u,o){const l=o.query,f=Cc(u,l);return{hashFn:()=>(function Gp(u){return u.viewCache_.serverCache.getNode()}(o)||yr.EMPTY_NODE).hash(),onComplete:v=>{if("ok"===v)return f?function tg(u,o,l){const f=ig(u,l);if(f){const v=Jd(f),T=v.path,R=v.queryId,Q=Ms(T,o);return Xf(u,T,new nd(ed(R),Q))}return[]}(u,l._path,f):function Ec(u,o){return Ka(u,new nd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(u,l._path);{const T=function ua(u,o){let l="Unknown Error";"too_big"===u?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?l="Client doesn't have permission to access the desired data.":"unavailable"===u&&(l="The service is unavailable");const f=new Error(u+" at "+o._path.toString()+": "+l);return f.code=u.toUpperCase(),f}(v,l);return ng(u,l,null,T)}}}}function Cc(u,o){const l=Ml(o);return u.queryToTagMap.get(l)}function Ml(u){return u._path.toString()+"$"+u._queryIdentifier}function ig(u,o){return u.tagToQueryMap.get(o)}function Jd(u){const o=u.indexOf("$");return(0,te.hu)(-1!==o&&o<u.length-1,"Bad queryKey."),{queryId:u.substr(o+1),path:new Di(u.substr(0,o))}}function Xf(u,o,l){const f=u.syncPointTree_.get(o);return(0,te.hu)(f,"Missing sync point for query tag that we're tracking"),Zp(f,l,xl(u.pendingWriteTree_,o),null)}function Lu(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function ou(){return(0,te.hu)(cd,"Reference.ts has not been loaded"),cd}())(u._repo,u._path):u}class Jf{constructor(o){this.node_=o}getImmediateChild(o){const l=this.node_.getImmediateChild(o);return new Jf(l)}node(){return this.node_}}class hm{constructor(o,l){this.syncTree_=o,this.path_=l}getImmediateChild(o){const l=Ni(this.path_,o);return new hm(this.syncTree_,l)}node(){return Fu(this.syncTree_,this.path_)}}const og=function(u,o,l){return u&&"object"==typeof u?((0,te.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?ag(u[".sv"],o,l):"object"==typeof u[".sv"]?lg(u[".sv"],o):void(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},ag=function(u,o,l){if("timestamp"===u)return l.timestamp;(0,te.hu)(!1,"Unexpected server value: "+u)},lg=function(u,o,l){u.hasOwnProperty("increment")||(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const f=u.increment;"number"!=typeof f&&(0,te.hu)(!1,"Unexpected increment value: "+f);const v=o.node();if((0,te.hu)(null!=v,"Expected ChildrenNode.EMPTY_NODE for nulls"),!v.isLeafNode())return f;const R=v.getValue();return"number"!=typeof R?f:R+f},ug=function(u,o,l,f){return xo(o,new hm(l,u),f)},tf=function(u,o,l){return xo(u,new Jf(o),l)};function xo(u,o,l){const f=u.getPriority().val(),v=og(f,o.getImmediateChild(".priority"),l);let T;if(u.isLeafNode()){const R=u,Q=og(R.getValue(),o,l);return Q!==R.getValue()||v!==R.getPriority().val()?new ac(Q,zi(v)):u}{const R=u;return T=R,v!==R.getPriority().val()&&(T=T.updatePriority(new ac(v))),R.forEachChild(Ar,(Q,oe)=>{const ve=xo(oe,o.getImmediateChild(Q),l);ve!==oe&&(T=T.updateImmediateChild(Q,ve))}),T}}class dd{constructor(o="",l=null,f={children:{},childCount:0}){this.name=o,this.parent=l,this.node=f}}function hd(u,o){let l=o instanceof Di?o:new Di(o),f=u,v=Rr(l);for(;null!==v;){const T=(0,te.DV)(f.node.children,v)||{children:{},childCount:0};f=new dd(v,f,T),l=Ui(l),v=Rr(l)}return f}function Dc(u){return u.node.value}function ep(u,o){u.node.value=o,cg(u)}function nf(u){return u.node.childCount>0}function tp(u,o){qi(u.node.children,(l,f)=>{o(new dd(l,u,f))})}function rf(u,o,l,f){l&&!f&&o(u),tp(u,v=>{rf(v,o,!0,f)}),l&&f&&o(u)}function sf(u){return new Di(null===u.parent?u.name:sf(u.parent)+"/"+u.name)}function cg(u){null!==u.parent&&function gm(u,o,l){const f=function sy(u){return void 0===Dc(u)&&!nf(u)}(l),v=(0,te.r3)(u.node.children,o);f&&v?(delete u.node.children[o],u.node.childCount--,cg(u)):!f&&!v&&(u.node.children[o]=l.node,u.node.childCount++,cg(u))}(u.parent,u.name,u)}const af=/[\[\].#$\/\u0000-\u001F\u007F]/,lf=/[\[\].#$\u0000-\u001F\u007F]/,eh=10485760,uf=function(u){return"string"==typeof u&&0!==u.length&&!af.test(u)},mm=function(u){return"string"==typeof u&&0!==u.length&&!lf.test(u)},th=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!pl(u)||u&&"object"==typeof u&&(0,te.r3)(u,".sv")},lu=function(u,o,l,f){f&&void 0===o||ba((0,te.gK)(u,"value"),o,l)},ba=function(u,o,l){const f=l instanceof Di?new Vd(l,u):l;if(void 0===o)throw new Error(u+"contains undefined "+bl(f));if("function"==typeof o)throw new Error(u+"contains a function "+bl(f)+" with contents = "+o.toString());if(pl(o))throw new Error(u+"contains "+o.toString()+" "+bl(f));if("string"==typeof o&&o.length>eh/3&&(0,te.ug)(o)>eh)throw new Error(u+"contains a string greater than "+eh+" utf8 bytes "+bl(f)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let v=!1,T=!1;if(qi(o,(R,Q)=>{if(".value"===R)v=!0;else if(".priority"!==R&&".sv"!==R&&(T=!0,!uf(R)))throw new Error(u+" contains an invalid key ("+R+") "+bl(f)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Vf(u,o){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(o),u.byteLength_+=(0,te.ug)(o),rc(u)})(f,R),ba(u,Q,f),function Ys(u){const o=u.parts_.pop();u.byteLength_-=(0,te.ug)(o),u.parts_.length>0&&(u.byteLength_-=1)}(f)}),v&&T)throw new Error(u+' contains ".value" child '+bl(f)+" in addition to actual children.")}},np=function(u,o,l,f){if(f&&void 0===o)return;const v=(0,te.gK)(u,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(v+" must be an object containing the children to replace.");const T=[];qi(o,(R,Q)=>{const oe=new Di(R);if(ba(v,Q,Ni(l,oe)),".priority"===jc(oe)&&!th(Q))throw new Error(v+"contains an invalid value for '"+oe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");T.push(oe)}),function(u,o){let l,f;for(l=0;l<o.length;l++){f=o[l];const T=$a(f);for(let R=0;R<T.length;R++)if((".priority"!==T[R]||R!==T.length-1)&&!uf(T[R]))throw new Error(u+"contains an invalid key ("+T[R]+") in path "+f.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(ja);let v=null;for(l=0;l<o.length;l++){if(f=o[l],null!==v&&mo(v,f))throw new Error(u+"contains a path "+v.toString()+" that is ancestor of another path "+f.toString());v=f}}(v,T)},Tc=function(u,o,l){if(!l||void 0!==o){if(pl(o))throw new Error((0,te.gK)(u,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!th(o))throw new Error((0,te.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},nh=function(u,o,l,f){if(!(f&&void 0===l||uf(l)))throw new Error((0,te.gK)(u,o)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Bu=function(u,o,l,f){if(!(f&&void 0===l||mm(l)))throw new Error((0,te.gK)(u,o)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ca=function(u,o){if(".info"===Rr(o))throw new Error(u+" failed = Can't modify data under /.info/")},dg=function(u,o){const l=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!uf(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==l.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),mm(u)}(l))throw new Error((0,te.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class df{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rh(u,o){let l=null;for(let f=0;f<o.length;f++){const v=o[f],T=v.getPath();null!==l&&!ol(T,l.path)&&(u.eventLists_.push(l),l=null),null===l&&(l={events:[],path:T}),l.events.push(v)}l&&u.eventLists_.push(l)}function uu(u,o,l){rh(u,l),rp(u,f=>ol(f,o))}function ea(u,o,l){rh(u,l),rp(u,f=>mo(f,o)||mo(o,f))}function rp(u,o){u.recursionDepth_++;let l=!0;for(let f=0;f<u.eventLists_.length;f++){const v=u.eventLists_[f];v&&(o(v.path)?(hg(u.eventLists_[f]),u.eventLists_[f]=null):l=!1)}l&&(u.eventLists_=[]),u.recursionDepth_--}function hg(u){for(let o=0;o<u.events.length;o++){const l=u.events[o];if(null!==l){u.events[o]=null;const f=l.getEventRunner();Hi&&Fr("event: "+l.toString()),Na(f)}}}const ip="repo_interrupt";class _m{constructor(o,l,f,v){this.repoInfo_=o,this.forceRestClient_=l,this.authTokenProvider_=f,this.appCheckProvider_=v,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new df,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wn(),this.transactionQueueTree_=new dd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ff(u){const l=u.infoData_.getNode(new Di(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Vu(u){return function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u}({timestamp:ff(u)})}function vm(u,o,l,f,v){u.dataUpdateCount++;const T=new Di(o);l=u.interceptServerDataCallback_?u.interceptServerDataCallback_(o,l):l;let R=[];if(v)if(f){const oe=(0,te.UI)(l,ve=>zi(ve));R=function ry(u,o,l,f){const v=ig(u,f);if(v){const T=Jd(v),R=T.path,Q=T.queryId,oe=Ms(R,o),ve=Ri.fromObject(l);return Xf(u,R,new hc(ed(Q),oe,ve))}return[]}(u.serverSyncTree_,T,oe,v)}else{const oe=zi(l);R=function Zf(u,o,l,f){const v=ig(u,f);if(null!=v){const T=Jd(v),R=T.path,Q=T.queryId,oe=Ms(R,o);return Xf(u,R,new Al(ed(Q),oe,l))}return[]}(u.serverSyncTree_,T,oe,v)}else if(f){const oe=(0,te.UI)(l,ve=>zi(ve));R=function eg(u,o,l){const f=Ri.fromObject(l);return Ka(u,new hc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,f))}(u.serverSyncTree_,T,oe)}else{const oe=zi(l);R=vc(u.serverSyncTree_,T,oe)}let Q=T;R.length>0&&(Q=Pl(u,T)),ea(u.eventQueue_,Q,R)}function pd(u,o){op(u,"connected",o),!1===o&&function ih(u){cu(u,"onDisconnectEvents");const o=Vu(u),l=wn();_s(u.onDisconnect_,Ei(),(v,T)=>{const R=ug(v,T,u.serverSyncTree_,o);Wn(l,v,R)});let f=[];_s(l,Ei(),(v,T)=>{f=f.concat(vc(u.serverSyncTree_,v,T));const R=yf(u,v);Pl(u,R)}),u.onDisconnect_=wn(),ea(u.eventQueue_,Ei(),f)}(u)}function op(u,o,l){const f=new Di("/.info/"+o),v=zi(l);u.infoData_.updateSnapshot(f,v);const T=vc(u.infoSyncTree_,f,v);ea(u.eventQueue_,f,T)}function pf(u){return u.nextWriteId_++}function gf(u,o,l,f,v){cu(u,"set",{path:o.toString(),value:l,priority:f});const T=Vu(u),R=zi(l,f),Q=Fu(u.serverSyncTree_,o),oe=tf(R,Q,T),ve=pf(u),vt=Jh(u.serverSyncTree_,o,oe,ve,!0);rh(u.eventQueue_,vt),u.server_.put(o.toString(),R.val(!0),(jt,on)=>{const gn="ok"===jt;gn||xi("set at "+o+" failed: "+jt);const br=au(u.serverSyncTree_,ve,!gn);ea(u.eventQueue_,o,br),Rl(0,v,jt,on)});const Ct=yf(u,o);Pl(u,Ct),ea(u.eventQueue_,Ct,[])}function oy(u,o,l){u.server_.onDisconnectCancel(o.toString(),(f,v)=>{"ok"===f&&qn(u.onDisconnect_,o),Rl(0,l,f,v)})}function ap(u,o,l,f){const v=zi(l);u.server_.onDisconnectPut(o.toString(),v.val(!0),(T,R)=>{"ok"===T&&Wn(u.onDisconnect_,o,v),Rl(0,f,T,R)})}function gd(u,o,l){let f;f=".info"===Rr(o._path)?ng(u.infoSyncTree_,o,l):ng(u.serverSyncTree_,o,l),uu(u.eventQueue_,o._path,f)}function md(u){u.persistentConnection_&&u.persistentConnection_.interrupt(ip)}function cu(u,...o){let l="";u.persistentConnection_&&(l=u.persistentConnection_.id+":"),Fr(l,...o)}function Rl(u,o,l,f){o&&Na(()=>{if("ok"===l)o(null);else{const v=(l||"error").toUpperCase();let T=v;f&&(T+=": "+f);const R=new Error(T);R.code=v,o(R)}})}function Ol(u,o,l){return Fu(u.serverSyncTree_,o,l)||yr.EMPTY_NODE}function sh(u,o=u.transactionQueueTree_){if(o||oh(u,o),Dc(o)){const l=_d(u,o);(0,te.hu)(l.length>0,"Sending zero length transaction queue"),l.every(v=>0===v.status)&&function Sc(u,o,l){const f=l.map(ve=>ve.currentWriteId),v=Ol(u,o,f);let T=v;const R=v.hash();for(let ve=0;ve<l.length;ve++){const vt=l[ve];(0,te.hu)(0===vt.status,"tryToSendTransactionQueue_: items in queue should all be run."),vt.status=1,vt.retryCount++;const Ct=Ms(o,vt.path);T=T.updateChild(Ct,vt.currentOutputSnapshotRaw)}const Q=T.val(!0),oe=o;u.server_.put(oe.toString(),Q,ve=>{cu(u,"transaction put response",{path:oe.toString(),status:ve});let vt=[];if("ok"===ve){const Ct=[];for(let jt=0;jt<l.length;jt++)l[jt].status=2,vt=vt.concat(au(u.serverSyncTree_,l[jt].currentWriteId)),l[jt].onComplete&&Ct.push(()=>l[jt].onComplete(null,!0,l[jt].currentOutputSnapshotResolved)),l[jt].unwatcher();oh(u,hd(u.transactionQueueTree_,o)),sh(u,u.transactionQueueTree_),ea(u.eventQueue_,o,vt);for(let jt=0;jt<Ct.length;jt++)Na(Ct[jt])}else{if("datastale"===ve)for(let Ct=0;Ct<l.length;Ct++)l[Ct].status=3===l[Ct].status?4:0;else{xi("transaction at "+oe.toString()+" failed: "+ve);for(let Ct=0;Ct<l.length;Ct++)l[Ct].status=4,l[Ct].abortReason=ve}Pl(u,o)}},R)}(u,sf(o),l)}else nf(o)&&tp(o,l=>{sh(u,l)})}function Pl(u,o){const l=Ac(u,o),f=sf(l);return function wm(u,o,l){if(0===o.length)return;const f=[];let v=[];const R=o.filter(Q=>0===Q.status).map(Q=>Q.currentWriteId);for(let Q=0;Q<o.length;Q++){const oe=o[Q],ve=Ms(l,oe.path);let Ct,vt=!1;if((0,te.hu)(null!==ve,"rerunTransactionsUnderNode_: relativePath should not be null."),4===oe.status)vt=!0,Ct=oe.abortReason,v=v.concat(au(u.serverSyncTree_,oe.currentWriteId,!0));else if(0===oe.status)if(oe.retryCount>=25)vt=!0,Ct="maxretry",v=v.concat(au(u.serverSyncTree_,oe.currentWriteId,!0));else{const jt=Ol(u,oe.path,R);oe.currentInputSnapshot=jt;const on=o[Q].update(jt.val());if(void 0!==on){ba("transaction failed: Data returned ",on,oe.path);let gn=zi(on);"object"==typeof on&&null!=on&&(0,te.r3)(on,".priority")||(gn=gn.updatePriority(jt.getPriority()));const qr=oe.currentWriteId,lo=Vu(u),uo=tf(gn,jt,lo);oe.currentOutputSnapshotRaw=gn,oe.currentOutputSnapshotResolved=uo,oe.currentWriteId=pf(u),R.splice(R.indexOf(qr),1),v=v.concat(Jh(u.serverSyncTree_,oe.path,uo,oe.currentWriteId,oe.applyLocally)),v=v.concat(au(u.serverSyncTree_,qr,!0))}else vt=!0,Ct="nodata",v=v.concat(au(u.serverSyncTree_,oe.currentWriteId,!0))}ea(u.eventQueue_,l,v),v=[],vt&&(o[Q].status=2,setTimeout(o[Q].unwatcher,Math.floor(0)),o[Q].onComplete&&f.push("nodata"===Ct?()=>o[Q].onComplete(null,!1,o[Q].currentInputSnapshot):()=>o[Q].onComplete(new Error(Ct),!1,null)))}oh(u,u.transactionQueueTree_);for(let Q=0;Q<f.length;Q++)Na(f[Q]);sh(u,u.transactionQueueTree_)}(u,_d(u,l),f),f}function Ac(u,o){let l,f=u.transactionQueueTree_;for(l=Rr(o);null!==l&&void 0===Dc(f);)f=hd(f,l),l=Rr(o=Ui(o));return f}function _d(u,o){const l=[];return mg(u,o,l),l.sort((f,v)=>f.order-v.order),l}function mg(u,o,l){const f=Dc(o);if(f)for(let v=0;v<f.length;v++)l.push(f[v]);tp(o,v=>{mg(u,v,l)})}function oh(u,o){const l=Dc(o);if(l){let f=0;for(let v=0;v<l.length;v++)2!==l[v].status&&(l[f]=l[v],f++);l.length=f,ep(o,l.length>0?l:void 0)}tp(o,f=>{oh(u,f)})}function yf(u,o){const l=sf(Ac(u,o)),f=hd(u.transactionQueueTree_,o);return function pm(u,o,l){let f=l?u:u.parent;for(;null!==f;){if(o(f))return!0;f=f.parent}}(f,v=>{du(u,v)}),du(u,f),rf(f,v=>{du(u,v)}),l}function du(u,o){const l=Dc(o);if(l){const f=[];let v=[],T=-1;for(let R=0;R<l.length;R++)3===l[R].status||(1===l[R].status?((0,te.hu)(T===R-1,"All SENT items should be at beginning of queue."),T=R,l[R].status=3,l[R].abortReason="set"):((0,te.hu)(0===l[R].status,"Unexpected transaction status in abort"),l[R].unwatcher(),v=v.concat(au(u.serverSyncTree_,l[R].currentWriteId,!0)),l[R].onComplete&&f.push(l[R].onComplete.bind(null,new Error("set"),!1,null))));-1===T?ep(o,void 0):l.length=T+1,ea(u.eventQueue_,sf(o),v);for(let R=0;R<f.length;R++)Na(f[R])}}const _g=function(u,o){const l=vg(u),f=l.namespace;return"firebase.com"===l.domain&&ii(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!f||"undefined"===f)&&"localhost"!==l.domain&&ii("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&xi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ot(l.host,l.secure,f,"ws"===l.scheme||"wss"===l.scheme,o,"",f!==l.subdomain),path:new Di(l.pathString)}},vg=function(u){let o="",l="",f="",v="",T="",R=!0,Q="https",oe=443;if("string"==typeof u){let ve=u.indexOf("//");ve>=0&&(Q=u.substring(0,ve-1),u=u.substring(ve+2));let vt=u.indexOf("/");-1===vt&&(vt=u.length);let Ct=u.indexOf("?");-1===Ct&&(Ct=u.length),o=u.substring(0,Math.min(vt,Ct)),vt<Ct&&(v=function yg(u){let o="";const l=u.split("/");for(let f=0;f<l.length;f++)if(l[f].length>0){let v=l[f];try{v=decodeURIComponent(v.replace(/\+/g," "))}catch(T){}o+="/"+v}return o}(u.substring(vt,Ct)));const jt=function ay(u){const o={};"?"===u.charAt(0)&&(u=u.substring(1));for(const l of u.split("&")){if(0===l.length)continue;const f=l.split("=");2===f.length?o[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):xi(`Invalid query segment '${l}' in query '${u}'`)}return o}(u.substring(Math.min(u.length,Ct)));ve=o.indexOf(":"),ve>=0?(R="https"===Q||"wss"===Q,oe=parseInt(o.substring(ve+1),10)):ve=o.length;const on=o.slice(0,ve);if("localhost"===on.toLowerCase())l="localhost";else if(on.split(".").length<=2)l=on;else{const gn=o.indexOf(".");f=o.substring(0,gn).toLowerCase(),l=o.substring(gn+1),T=f}"ns"in jt&&(T=jt.ns)}return{host:o,port:oe,domain:l,subdomain:f,secure:R,scheme:Q,pathString:v,namespace:T}};class Da{constructor(o,l,f,v){this.eventType=o,this.eventRegistration=l,this.snapshot=f,this.prevName=v}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,te.Pz)(this.snapshot.exportVal())}}class lp{constructor(o,l,f){this.eventRegistration=o,this.error=l,this.path=f}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class up{constructor(o,l){this.snapshotCallback=o,this.cancelCallback=l}onValue(o,l){this.snapshotCallback.call(null,o,l)}onCancel(o){return(0,te.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class Eg{constructor(o,l){this._repo=o,this._path=l}cancel(){const o=new te.BH;return oy(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){Ca("OnDisconnect.remove",this._path);const o=new te.BH;return ap(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){Ca("OnDisconnect.set",this._path),lu("OnDisconnect.set",o,this._path,!1);const l=new te.BH;return ap(this._repo,this._path,o,l.wrapCallback(()=>{})),l.promise}setWithPriority(o,l){Ca("OnDisconnect.setWithPriority",this._path),lu("OnDisconnect.setWithPriority",o,this._path,!1),Tc("OnDisconnect.setWithPriority",l,!1);const f=new te.BH;return function qy(u,o,l,f,v){const T=zi(l,f);u.server_.onDisconnectPut(o.toString(),T.val(!0),(R,Q)=>{"ok"===R&&Wn(u.onDisconnect_,o,T),Rl(0,v,R,Q)})}(this._repo,this._path,o,l,f.wrapCallback(()=>{})),f.promise}update(o){Ca("OnDisconnect.update",this._path),np("OnDisconnect.update",o,this._path,!1);const l=new te.BH;return function mf(u,o,l,f){if((0,te.xb)(l))return Fr("onDisconnect().update() called with empty data.  Don't do anything."),void Rl(0,f,"ok",void 0);u.server_.onDisconnectMerge(o.toString(),l,(v,T)=>{"ok"===v&&qi(l,(R,Q)=>{const oe=zi(Q);Wn(u.onDisconnect_,Ni(o,R),oe)}),Rl(0,f,v,T)})}(this._repo,this._path,o,l.wrapCallback(()=>{})),l.promise}}class ta{constructor(o,l,f,v){this._repo=o,this._path=l,this._queryParams=f,this._orderByCalled=v}get key(){return pr(this._path)?null:jc(this._path)}get ref(){return new cl(this._repo,this._path)}get _queryIdentifier(){const o=ht(this._queryParams),l=un(o);return"{}"===l?"default":l}get _queryObject(){return ht(this._queryParams)}isEqual(o){if(!((o=(0,te.m9)(o))instanceof ta))return!1;const l=this._repo===o._repo,f=ol(this._path,o._path);return l&&f&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function nc(u){let o="";for(let l=u.pieceNum_;l<u.pieces_.length;l++)""!==u.pieces_[l]&&(o+="/"+encodeURIComponent(String(u.pieces_[l])));return o||"/"}(this._path)}}function ah(u,o){if(!0===u._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function $u(u){let o=null,l=null;if(u.hasStart()&&(o=u.getIndexStartValue()),u.hasEnd()&&(l=u.getIndexEndValue()),u.getIndex()===Pr){const f="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",v="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==gs)throw new Error(f);if("string"!=typeof o)throw new Error(v)}if(u.hasEnd()){if(u.getIndexEndName()!==ds)throw new Error(f);if("string"!=typeof l)throw new Error(v)}}else if(u.getIndex()===Ar){if(null!=o&&!th(o)||null!=l&&!th(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,te.hu)(u.getIndex()instanceof Yc||u.getIndex()===Os,"unknown index type."),null!=o&&"object"==typeof o||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _f(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class cl extends ta{constructor(o,l){super(o,l,new Qc,!1)}get parent(){const o=Bf(this._path);return null===o?null:new cl(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class vd{constructor(o,l,f){this._node=o,this.ref=l,this._index=f}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const l=new Di(o),f=hu(this.ref,o);return new vd(this._node.getChild(l),f,Ar)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(f,v)=>o(new vd(v,hu(this.ref,f),Ar)))}hasChild(o){const l=new Di(o);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wg(u,o){return(u=(0,te.m9)(u))._checkNotDeleted("ref"),void 0!==o?hu(u._root,o):u._root}function ly(u,o){(u=(0,te.m9)(u))._checkNotDeleted("refFromURL");const l=_g(o,u._repo.repoInfo_.nodeAdmin);dg("refFromURL",l);const f=l.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&f.host!==u._repo.repoInfo_.host&&ii("refFromURL: Host name does not match the current database: (found "+f.host+" but expected "+u._repo.repoInfo_.host+")"),wg(u,l.path.toString())}function hu(u,o){return null===Rr((u=(0,te.m9)(u))._path)?(l=o,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Bu("child","path",l,!1)):Bu("child","path",o,!1),new cl(u._repo,Ni(u._path,o));var l}function cp(u,o){u=(0,te.m9)(u),Ca("set",u._path),lu("set",o,u._path,!1);const l=new te.BH;return gf(u._repo,u._path,o,null,l.wrapCallback(()=>{})),l.promise}function Dg(u,o){np("update",o,u._path,!1);const l=new te.BH;return function Uu(u,o,l,f){cu(u,"update",{path:o.toString(),value:l});let v=!0;const T=Vu(u),R={};if(qi(l,(Q,oe)=>{v=!1,R[Q]=ug(Ni(o,Q),zi(oe),u.serverSyncTree_,T)}),v)Fr("update() called with empty data.  Don't do anything."),Rl(0,f,"ok",void 0);else{const Q=pf(u),oe=function Jp(u,o,l,f){!function pc(u,o,l,f){(0,te.hu)(f>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:o,children:l,writeId:f,visible:!0}),u.visibleWrites=Lh(u.visibleWrites,o,l),u.lastWriteId=f}(u.pendingWriteTree_,o,l,f);const v=Ri.fromObject(l);return Ka(u,new hc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,v))}(u.serverSyncTree_,o,R,Q);rh(u.eventQueue_,oe),u.server_.merge(o.toString(),l,(ve,vt)=>{const Ct="ok"===ve;Ct||xi("update at "+o+" failed: "+ve);const jt=au(u.serverSyncTree_,Q,!Ct),on=jt.length>0?Pl(u,o):o;ea(u.eventQueue_,on,jt),Rl(0,f,ve,vt)}),qi(l,ve=>{const vt=yf(u,Ni(o,ve));Pl(u,vt)}),ea(u.eventQueue_,o,[])}}(u._repo,u._path,o,l.wrapCallback(()=>{})),l.promise}function dp(u){return function pg(u,o){const l=function rg(u,o){const l=o._path;let f=null;u.syncPointTree_.foreachOnPath(l,(ve,vt)=>{const Ct=Ms(ve,l);f=f||_c(vt,Ct)});let v=u.syncPointTree_.get(l);v?f=f||_c(v,Ei()):(v=new lm,u.syncPointTree_=u.syncPointTree_.set(l,v));const T=null!=f,R=T?new ru(f,!0,!1):null;return function mc(u){return Fh(u.viewCache_)}(Xh(v,o,xl(u.pendingWriteTree_,o._path),T?R.getNode():yr.EMPTY_NODE,T))}(u.serverSyncTree_,o);return null!=l?Promise.resolve(l):u.server_.get(o).then(f=>{const v=zi(f).withIndex(o._queryParams.getIndex()),T=vc(u.serverSyncTree_,o._path,v);return uu(u.eventQueue_,o._path,T),Promise.resolve(v)},f=>(cu(u,"get for query "+(0,te.Pz)(o)+" failed: "+f),Promise.reject(new Error(f))))}((u=(0,te.m9)(u))._repo,u).then(o=>new vd(o,new cl(u._repo,u._path),u._queryParams.getIndex()))}class hp{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,l){const f=l._queryParams.getIndex();return new Da("value",this,new vd(o.snapshotNode,new cl(l._repo,l._path),f))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,l){return this.callbackContext.hasCancelCallback?new lp(this,o,l):null}matches(o){return o instanceof hp&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ta{constructor(o,l){this.eventType=o,this.callbackContext=l}respondsTo(o){let l="children_added"===o?"child_added":o;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(o,l){return this.callbackContext.hasCancelCallback?new lp(this,o,l):null}createEvent(o,l){(0,te.hu)(null!=o.childName,"Child events should have a childName.");const f=hu(new cl(l._repo,l._path),o.childName),v=l._queryParams.getIndex();return new Da(o.type,this,new vd(o.snapshotNode,f,v),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof Ta&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function lh(u,o,l,f,v){let T;if("object"==typeof f&&(T=void 0,v=f),"function"==typeof f&&(T=f),v&&v.onlyOnce){const oe=l,ve=(vt,Ct)=>{gd(u._repo,u,Q),oe(vt,Ct)};ve.userCallback=l.userCallback,ve.context=l.context,l=ve}const R=new up(l,T||void 0),Q="value"===o?new hp(R):new Ta(o,R);return function Em(u,o,l){let f;f=".info"===Rr(o._path)?wc(u.infoSyncTree_,o,l):wc(u.serverSyncTree_,o,l),uu(u.eventQueue_,o._path,f)}(u._repo,u,Q),()=>gd(u._repo,u,Q)}function bm(u,o,l,f){return lh(u,"value",o,l,f)}function vf(u,o,l,f){return lh(u,"child_added",o,l,f)}function Tg(u,o,l,f){return lh(u,"child_changed",o,l,f)}function Ef(u,o,l,f){return lh(u,"child_moved",o,l,f)}function Cm(u,o,l,f){return lh(u,"child_removed",o,l,f)}function Sg(u,o,l){let f=null;const v=l?new up(l):null;"value"===o?f=new hp(v):o&&(f=new Ta(o,v)),gd(u._repo,u,f)}class Sa{}class uh extends Sa{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){lu("endAt",this._value,o._path,!0);const l=_(o._queryParams,this._value,this._key);if(_f(l),$u(l),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ta(o._repo,o._path,l,o._orderByCalled)}}class fp extends Sa{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){lu("endBefore",this._value,o._path,!1);const l=function A(u,o,l){let f,v;return u.index_===Pr?("string"==typeof o&&(o=Hd(o)),v=_(u,o,l)):(f=null==l?gs:Hd(l),v=_(u,o,f)),v.endBeforeSet_=!0,v}(o._queryParams,this._value,this._key);if(_f(l),$u(l),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ta(o._repo,o._path,l,o._orderByCalled)}}class Dm extends Sa{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){lu("startAt",this._value,o._path,!0);const l=I(o._queryParams,this._value,this._key);if(_f(l),$u(l),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ta(o._repo,o._path,l,o._orderByCalled)}}class ju extends Sa{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){lu("startAfter",this._value,o._path,!1);const l=function g(u,o,l){let f;if(u.index_===Pr)"string"==typeof o&&(o=So(o)),f=I(u,o,l);else{let v;v=null==l?ds:So(l),f=I(u,o,v)}return f.startAfterSet_=!0,f}(o._queryParams,this._value,this._key);if(_f(l),$u(l),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ta(o._repo,o._path,l,o._orderByCalled)}}class uy extends Sa{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ta(o._repo,o._path,function cc(u,o){const l=u.copy();return l.limitSet_=!0,l.limit_=o,l.viewFrom_="l",l}(o._queryParams,this._limit),o._orderByCalled)}}class hh extends Sa{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ta(o._repo,o._path,function Uo(u,o){const l=u.copy();return l.limitSet_=!0,l.limit_=o,l.viewFrom_="r",l}(o._queryParams,this._limit),o._orderByCalled)}}class Ed extends Sa{constructor(o){super(),this._path=o}_apply(o){ah(o,"orderByChild");const l=new Di(this._path);if(pr(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const f=new Yc(l),v=K(o._queryParams,f);return $u(v),new ta(o._repo,o._path,v,!0)}}class Rg extends Sa{_apply(o){ah(o,"orderByKey");const l=K(o._queryParams,Pr);return $u(l),new ta(o._repo,o._path,l,!0)}}class dl extends Sa{_apply(o){ah(o,"orderByPriority");const l=K(o._queryParams,Ar);return $u(l),new ta(o._repo,o._path,l,!0)}}class Mo extends Sa{_apply(o){ah(o,"orderByValue");const l=K(o._queryParams,Os);return $u(l),new ta(o._repo,o._path,l,!0)}}class fh extends Sa{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){if(lu("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uh(this._value,this._key)._apply(new Dm(this._value,this._key)._apply(o))}}function Ya(u,...o){let l=(0,te.m9)(u);for(const f of o)l=f._apply(l);return l}(function qp(u){(0,te.hu)(!Kp,"__referenceConstructor has already been defined"),Kp=u})(cl),function Xp(u){(0,te.hu)(!cd,"__referenceConstructor has already been defined"),cd=u}(cl);const fu={};function Hu(u,o,l,f,v){let T=f||u.options.databaseURL;void 0===T&&(u.options.projectId||ii("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fr("Using default host for project ",u.options.projectId),T=`${u.options.projectId}-default-rtdb.firebaseio.com`);let oe,ve,R=_g(T,v),Q=R.repoInfo;"undefined"!=typeof process&&process.env&&(ve=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ve?(oe=!0,T=`http://${ve}?ns=${Q.namespace}`,R=_g(T,v),Q=R.repoInfo):oe=!R.repoInfo.secure;const vt=v&&oe?new Ks(Ks.OWNER):new yl(u.name,u.options,o);dg("Invalid Firebase Database URL",R),pr(R.path)||ii("Database URL must point to the root of a Firebase Database (not including a child path).");const Ct=function gh(u,o,l,f){let v=fu[o.name];v||(v={},fu[o.name]=v);let T=v[u.toURLString()];return T&&ii("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),T=new _m(u,false,l,f),v[u.toURLString()]=T,T}(Q,u,vt,new Ea(u.name,l));return new bd(Ct,u)}class bd{constructor(o,l){this._repoInternal=o,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function fg(u,o,l){if(u.stats_=Rn(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new Ht(u.repoInfo_,(f,v,T,R)=>{vm(u,f,v,T,R)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>pd(u,!0),0);else{if(null!=l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,te.Pz)(l)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}u.persistentConnection_=new Jl(u.repoInfo_,o,(f,v,T,R)=>{vm(u,f,v,T,R)},f=>{pd(u,f)},f=>{!function sp(u,o){qi(o,(l,f)=>{op(u,l,f)})}(u,f)},u.authTokenProvider_,u.appCheckProvider_,l),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(f=>{u.server_.refreshAuthToken(f)}),u.appCheckProvider_.addTokenChangeListener(f=>{u.server_.refreshAppCheckToken(f.token)}),u.statsReporter_=function qs(u,o){const l=u.toString();return Kr[l]||(Kr[l]=o()),Kr[l]}(u.repoInfo_,()=>new Nh(u.stats_,u.server_)),u.infoData_=new sn,u.infoSyncTree_=new Yf({startListening:(f,v,T,R)=>{let Q=[];const oe=u.infoData_.getNode(f._path);return oe.isEmpty()||(Q=vc(u.infoSyncTree_,f._path,oe),setTimeout(()=>{R("ok")},0)),Q},stopListening:()=>{}}),op(u,"connected",!1),u.serverSyncTree_=new Yf({startListening:(f,v,T,R)=>(u.server_.listen(f,T,v,(Q,oe)=>{const ve=R(Q,oe);ea(u.eventQueue_,f._path,ve)}),[]),stopListening:(f,v)=>{u.server_.unlisten(f,v)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cl(this._repo,Ei())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Rc(u,o){const l=fu[o];(!l||l[u.key]!==u)&&ii(`Database ${o}(${u.repoInfo_}) has already been deleted.`),md(u),delete l[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&ii("Cannot call "+o+" on a deleted database.")}}function Pg(){kd.IS_TRANSPORT_INITIALIZED&&xi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function pp(){Pg(),Xl.forceDisallow()}function kg(){Pg(),Zo.forceDisallow(),Xl.forceAllow()}function xm(u,o){wh(u,o)}const Fg={".sv":"timestamp"};class mp{constructor(o,l){this.committed=o,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Jl.prototype.simpleListen=function(u,o){this.sendRequest("q",{p:u},o)},Jl.prototype.echo=function(u,o){this.sendRequest("echo",{d:u},o)},function Ng(u){_a(Gn.SDK_VERSION),(0,Gn._registerComponent)(new cn.wA("database",(o,{instanceIdentifier:l})=>Hu(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,Gn.registerVersion)(Co,"0.13.0",u),(0,Gn.registerVersion)(Co,"0.13.0","esm2017")}();const jg=new cs.Yd("@firebase/database-compat"),_p=function(u){jg.warn("FIREBASE WARNING: "+u)};class hy{constructor(o){this._delegate=o}cancel(o){(0,te.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,te.Wj)("OnDisconnect.cancel","onComplete",o,!0);const l=this._delegate.cancel();return o&&l.then(()=>o(null),f=>o(f)),l}remove(o){(0,te.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,te.Wj)("OnDisconnect.remove","onComplete",o,!0);const l=this._delegate.remove();return o&&l.then(()=>o(null),f=>o(f)),l}set(o,l){(0,te.Dv)("OnDisconnect.set",1,2,arguments.length),(0,te.Wj)("OnDisconnect.set","onComplete",l,!0);const f=this._delegate.set(o);return l&&f.then(()=>l(null),v=>l(v)),f}setWithPriority(o,l,f){(0,te.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,te.Wj)("OnDisconnect.setWithPriority","onComplete",f,!0);const v=this._delegate.setWithPriority(o,l);return f&&v.then(()=>f(null),T=>f(T)),v}update(o,l){if((0,te.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const v={};for(let T=0;T<o.length;++T)v[""+T]=o[T];o=v,_p("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,te.Wj)("OnDisconnect.update","onComplete",l,!0);const f=this._delegate.update(o);return l&&f.then(()=>l(null),v=>l(v)),f}}class Hg{constructor(o,l){this.committed=o,this.snapshot=l}toJSON(){return(0,te.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class pu{constructor(o,l){this._database=o,this._delegate=l}val(){return(0,te.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,te.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,te.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,te.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,te.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),Bu("DataSnapshot.child","path",o,!1),new pu(this._database,this._delegate.child(o))}hasChild(o){return(0,te.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Bu("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,te.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,te.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,te.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(l=>o(new pu(this._database,l)))}hasChildren(){return(0,te.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,te.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,te.Dv)("DataSnapshot.ref",0,0,arguments.length),new hl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ro{constructor(o,l){this.database=o,this._delegate=l}on(o,l,f,v){var T;(0,te.Dv)("Query.on",2,4,arguments.length),(0,te.Wj)("Query.on","callback",l,!1);const R=Ro.getCancelAndContextArgs_("Query.on",f,v),Q=(ve,vt)=>{l.call(R.context,new pu(this.database,ve),vt)};Q.userCallback=l,Q.context=R.context;const oe=null===(T=R.cancel)||void 0===T?void 0:T.bind(R.context);switch(o){case"value":return bm(this._delegate,Q,oe),l;case"child_added":return vf(this._delegate,Q,oe),l;case"child_removed":return Cm(this._delegate,Q,oe),l;case"child_changed":return Tg(this._delegate,Q,oe),l;case"child_moved":return Ef(this._delegate,Q,oe),l;default:throw new Error((0,te.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,l,f){if((0,te.Dv)("Query.off",0,3,arguments.length),function(u,o,l){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,te.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,te.Wj)("Query.off","callback",l,!0),(0,te.lb)("Query.off","context",f,!0),l){const v=()=>{};v.userCallback=l,v.context=f,Sg(this._delegate,o,v)}else Sg(this._delegate,o)}get(){return dp(this._delegate).then(o=>new pu(this.database,o))}once(o,l,f,v){(0,te.Dv)("Query.once",1,4,arguments.length),(0,te.Wj)("Query.once","callback",l,!0);const T=Ro.getCancelAndContextArgs_("Query.once",f,v),R=new te.BH,Q=(ve,vt)=>{const Ct=new pu(this.database,ve);l&&l.call(T.context,Ct,vt),R.resolve(Ct)};Q.userCallback=l,Q.context=T.context;const oe=ve=>{T.cancel&&T.cancel.call(T.context,ve),R.reject(ve)};switch(o){case"value":bm(this._delegate,Q,oe,{onlyOnce:!0});break;case"child_added":vf(this._delegate,Q,oe,{onlyOnce:!0});break;case"child_removed":Cm(this._delegate,Q,oe,{onlyOnce:!0});break;case"child_changed":Tg(this._delegate,Q,oe,{onlyOnce:!0});break;case"child_moved":Ef(this._delegate,Q,oe,{onlyOnce:!0});break;default:throw new Error((0,te.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return R.promise}limitToFirst(o){return(0,te.Dv)("Query.limitToFirst",1,1,arguments.length),new Ro(this.database,Ya(this._delegate,function dh(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new uy(u)}(o)))}limitToLast(o){return(0,te.Dv)("Query.limitToLast",1,1,arguments.length),new Ro(this.database,Ya(this._delegate,function cy(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new hh(u)}(o)))}orderByChild(o){return(0,te.Dv)("Query.orderByChild",1,1,arguments.length),new Ro(this.database,Ya(this._delegate,function dy(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Bu("orderByChild","path",u,!1),new Ed(u)}(o)))}orderByKey(){return(0,te.Dv)("Query.orderByKey",0,0,arguments.length),new Ro(this.database,Ya(this._delegate,function Og(){return new Rg}()))}orderByPriority(){return(0,te.Dv)("Query.orderByPriority",0,0,arguments.length),new Ro(this.database,Ya(this._delegate,function wf(){return new dl}()))}orderByValue(){return(0,te.Dv)("Query.orderByValue",0,0,arguments.length),new Ro(this.database,Ya(this._delegate,function xc(){return new Mo}()))}startAt(o=null,l){return(0,te.Dv)("Query.startAt",0,2,arguments.length),new Ro(this.database,Ya(this._delegate,function xg(u=null,o){return nh("startAt","key",o,!0),new Dm(u,o)}(o,l)))}startAfter(o=null,l){return(0,te.Dv)("Query.startAfter",0,2,arguments.length),new Ro(this.database,Ya(this._delegate,function Mg(u,o){return nh("startAfter","key",o,!0),new ju(u,o)}(o,l)))}endAt(o=null,l){return(0,te.Dv)("Query.endAt",0,2,arguments.length),new Ro(this.database,Ya(this._delegate,function ch(u,o){return nh("endAt","key",o,!0),new uh(u,o)}(o,l)))}endBefore(o=null,l){return(0,te.Dv)("Query.endBefore",0,2,arguments.length),new Ro(this.database,Ya(this._delegate,function Ag(u,o){return nh("endBefore","key",o,!0),new fp(u,o)}(o,l)))}equalTo(o,l){return(0,te.Dv)("Query.equalTo",1,2,arguments.length),new Ro(this.database,Ya(this._delegate,function qa(u,o){return nh("equalTo","key",o,!0),new fh(u,o)}(o,l)))}toString(){return(0,te.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,te.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,te.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof Ro))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,l,f){const v={cancel:void 0,context:void 0};if(l&&f)v.cancel=l,(0,te.Wj)(o,"cancel",v.cancel,!0),v.context=f,(0,te.lb)(o,"context",v.context,!0);else if(l)if("object"==typeof l&&null!==l)v.context=l;else{if("function"!=typeof l)throw new Error((0,te.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");v.cancel=l}return v}get ref(){return new hl(this.database,new cl(this._delegate._repo,this._delegate._path))}}class hl extends Ro{constructor(o,l){super(o,new ta(l._repo,l._path,new Qc,!1)),this.database=o,this._delegate=l}getKey(){return(0,te.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,te.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new hl(this.database,hu(this._delegate,o))}getParent(){(0,te.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new hl(this.database,o):null}getRoot(){return(0,te.Dv)("Reference.root",0,0,arguments.length),new hl(this.database,this._delegate.root)}set(o,l){(0,te.Dv)("Reference.set",1,2,arguments.length),(0,te.Wj)("Reference.set","onComplete",l,!0);const f=cp(this._delegate,o);return l&&f.then(()=>l(null),v=>l(v)),f}update(o,l){if((0,te.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const v={};for(let T=0;T<o.length;++T)v[""+T]=o[T];o=v,_p("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ca("Reference.update",this._delegate._path),(0,te.Wj)("Reference.update","onComplete",l,!0);const f=Dg(this._delegate,o);return l&&f.then(()=>l(null),v=>l(v)),f}setWithPriority(o,l,f){(0,te.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,te.Wj)("Reference.setWithPriority","onComplete",f,!0);const v=function Cg(u,o,l){if(Ca("setWithPriority",u._path),lu("setWithPriority",o,u._path,!1),Tc("setWithPriority",l,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const f=new te.BH;return gf(u._repo,u._path,o,l,f.wrapCallback(()=>{})),f.promise}(this._delegate,o,l);return f&&v.then(()=>f(null),T=>f(T)),v}remove(o){(0,te.Dv)("Reference.remove",0,1,arguments.length),(0,te.Wj)("Reference.remove","onComplete",o,!0);const l=function Yy(u){return Ca("remove",u._path),cp(u,null)}(this._delegate);return o&&l.then(()=>o(null),f=>o(f)),l}transaction(o,l,f){(0,te.Dv)("Reference.transaction",1,3,arguments.length),(0,te.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,te.Wj)("Reference.transaction","onComplete",l,!0),function(u,o,l,f){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,te.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,f);const v=function yp(u,o,l){var f;if(u=(0,te.m9)(u),Ca("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const v=null===(f=null==l?void 0:l.applyLocally)||void 0===f||f,T=new te.BH,Q=bm(u,()=>{});return function yd(u,o,l,f,v,T){cu(u,"transaction on "+o);const R={path:o,update:l,onComplete:f,status:null,order:Zu(),applyLocally:T,retryCount:0,unwatcher:v,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},Q=Ol(u,o,void 0);R.currentInputSnapshot=Q;const oe=R.update(Q.val());if(void 0===oe)R.unwatcher(),R.currentOutputSnapshotRaw=null,R.currentOutputSnapshotResolved=null,R.onComplete&&R.onComplete(null,!1,R.currentInputSnapshot);else{ba("transaction failed: Data returned ",oe,R.path),R.status=0;const ve=hd(u.transactionQueueTree_,o),vt=Dc(ve)||[];let Ct;vt.push(R),ep(ve,vt),"object"==typeof oe&&null!==oe&&(0,te.r3)(oe,".priority")?(Ct=(0,te.DV)(oe,".priority"),(0,te.hu)(th(Ct),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ct=(Fu(u.serverSyncTree_,o)||yr.EMPTY_NODE).getPriority().val();const jt=Vu(u),on=zi(oe,Ct),gn=tf(on,Q,jt);R.currentOutputSnapshotRaw=on,R.currentOutputSnapshotResolved=gn,R.currentWriteId=pf(u);const br=Jh(u.serverSyncTree_,o,gn,R.currentWriteId,R.applyLocally);ea(u.eventQueue_,o,br),sh(u,u.transactionQueueTree_)}}(u._repo,u._path,o,(oe,ve,vt)=>{let Ct=null;oe?T.reject(oe):(Ct=new vd(vt,new cl(u._repo,u._path),Ar),T.resolve(new mp(ve,Ct)))},Q,v),T.promise}(this._delegate,o,{applyLocally:f}).then(T=>new Hg(T.committed,new pu(this.database,T.snapshot)));return l&&v.then(T=>l(null,T.committed,T.snapshot),T=>l(T,!1,null)),v}setPriority(o,l){(0,te.Dv)("Reference.setPriority",1,2,arguments.length),(0,te.Wj)("Reference.setPriority","onComplete",l,!0);const f=function bg(u,o){u=(0,te.m9)(u),Ca("setPriority",u._path),Tc("setPriority",o,!1);const l=new te.BH;return gf(u._repo,Ni(u._path,".priority"),o,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,o);return l&&f.then(()=>l(null),v=>l(v)),f}push(o,l){(0,te.Dv)("Reference.push",0,2,arguments.length),(0,te.Wj)("Reference.push","onComplete",l,!0);const f=function Ig(u,o){u=(0,te.m9)(u),Ca("push",u._path),lu("push",o,u._path,!0);const l=ff(u._repo),f=Oh(l),v=hu(u,f),T=hu(u,f);let R;return R=null!=o?cp(T,o).then(()=>T):Promise.resolve(T),v.then=R.then.bind(R),v.catch=R.then.bind(R,void 0),v}(this._delegate,o),v=f.then(R=>new hl(this.database,R));l&&v.then(()=>l(null),R=>l(R));const T=new hl(this.database,f);return T.then=v.then.bind(v),T.catch=v.catch.bind(v,void 0),T}onDisconnect(){return Ca("Reference.onDisconnect",this._delegate._path),new hy(new Eg(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class If{constructor(o,l){this._delegate=o,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:pp,forceLongPolling:kg}}useEmulator(o,l,f={}){!function Tm(u,o,l,f={}){(u=(0,te.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&ii("Cannot call useEmulator() after instance has already been initialized.");const v=u._repoInternal;let T;if(v.repoInfo_.nodeAdmin)f.mockUserToken&&ii('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),T=new Ks(Ks.OWNER);else if(f.mockUserToken){const R="string"==typeof f.mockUserToken?f.mockUserToken:(0,te.Sg)(f.mockUserToken,u.app.options.projectId);T=new Ks(R)}!function Mc(u,o,l,f){u.repoInfo_=new Ot(`${o}:${l}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams),f&&(u.authTokenProvider_=f)}(v,o,l,T)}(this._delegate,o,l,f)}ref(o){if((0,te.Dv)("database.ref",0,1,arguments.length),o instanceof hl){const l=ly(this._delegate,o.toString());return new hl(this,l)}{const l=wg(this._delegate,o);return new hl(this,l)}}refFromURL(o){(0,te.Dv)("database.refFromURL",1,1,arguments.length);const f=ly(this._delegate,o);return new hl(this,f)}goOffline(){return(0,te.Dv)("database.goOffline",0,0,arguments.length),function Sm(u){(u=(0,te.m9)(u))._checkNotDeleted("goOffline"),md(u._repo)}(this._delegate)}goOnline(){return(0,te.Dv)("database.goOnline",0,0,arguments.length),function Am(u){(u=(0,te.m9)(u))._checkNotDeleted("goOnline"),function gg(u){u.persistentConnection_&&u.persistentConnection_.resume(ip)}(u._repo)}(this._delegate)}}If.ServerValue={TIMESTAMP:function Lg(){return Fg}(),increment:u=>function Bg(u){return{".sv":{increment:u}}}(u)};var fy=Object.freeze({__proto__:null,initStandalone:function Zy({app:u,url:o,version:l,customAuthImpl:f,namespace:v,nodeAdmin:T=!1}){_a(l);const R=new cn.zt("auth-internal",new cn.H0("database-standalone"));return R.setComponent(new cn.wA("auth-internal",()=>f,"PRIVATE")),{instance:new If(Hu(u,R,void 0,o,T),u),namespace:v}}});const Om=If.ServerValue;!function Xy(u){u.INTERNAL.registerComponent(new cn.wA("database-compat",(o,{instanceIdentifier:l})=>{const f=o.getProvider("app-compat").getImmediate(),v=o.getProvider("database").getImmediate({identifier:l});return new If(v,f)},"PUBLIC").setServiceProps({Reference:hl,Query:Ro,Database:If,DataSnapshot:pu,enableLogging:xm,INTERNAL:fy,ServerValue:Om}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.2.0")}(Br.Z);var gu=P(1205);function vp(u){return null==u}function Gg(u){return"function"==typeof u.set}function yh(u,o){return Gg(o)?o:u.ref(o)}function Qr(u,o){if(function Oc(u){return"string"==typeof u}(u))return o.stringCase();if(Gg(u))return o.firebaseCase();if(function Pm(u){return"function"==typeof u.exportVal}(u))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function _h(u,o,l="on",f=$i.z){return new wi.y(v=>{let T=null;return T=u[l](o,(R,Q)=>{f.schedule(()=>{v.next({snapshot:R,prevKey:Q})}),"once"===l&&f.schedule(()=>v.complete())},R=>{f.schedule(()=>v.error(R))}),"on"===l?{unsubscribe(){null!=T&&u.off(o,T)}}:{unsubscribe(){}}}).pipe((0,gi.U)(v=>{const{snapshot:T,prevKey:R}=v;let Q=null;return T.exists()&&(Q=T.key),{type:o,payload:T,prevKey:R,key:Q}}),(0,He.B)())}function vh(u,o){const l=u.length;for(let f=0;f<l;f++)if(u[f].payload.key===o)return f;return-1}function vs(u,o){const{payload:l,prevKey:f,key:v}=o,T=vh(u,v),R=function py(u,o){if(vp(o))return 0;{const l=vh(u,o);return-1===l?u.length:l+1}}(u,f);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let Q=null;o.payload.forEach(oe=>{const ve={payload:oe,type:"value",prevKey:Q,key:oe.key};return Q=oe.key,u=[...u,ve],!1})}return u;case"child_added":if(T>-1){const Q=u[T-1];(Q&&Q.key||null)!==f&&(u=u.filter(oe=>oe.payload.key!==l.key)).splice(R,0,o)}else{if(null==f)return[o,...u];(u=u.slice()).splice(R,0,o)}return u;case"child_removed":return u.filter(Q=>Q.payload.key!==l.key);case"child_changed":return u.map(Q=>Q.payload.key===v?o:Q);case"child_moved":if(T>-1){const Q=u.splice(T,1)[0];return(u=u.slice()).splice(R,0,Q),u}return u;default:return u}}function jo(u){return(vp(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function kl(u,o,l){return function zg(u,o,l){return _h(u,"value","once",l).pipe((0,yi.w)(f=>{const v=[(0,Yr.of)(f)];return o.forEach(T=>v.push(_h(u,T,"on",l))),(0,le.T)(...v).pipe((0,Ut.R)(vs,[]))}),(0,bn.x)())}(u,o=jo(o),l)}function Ep(u,o,l){const f=(o=jo(o)).map(v=>_h(u,v,"on",l));return(0,le.T)(...f)}function Cf(u,o){return function(f,v){return Qr(f,{stringCase:()=>u.child(f)[o](v),firebaseCase:()=>f[o](v),snapshotCase:()=>f.ref[o](v)})}}function Qy(u){return function(l){return l?Qr(l,{stringCase:()=>u.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):u.remove()}}function km(u,o){return function(){return _h(u,"value","on",o)}}const Yi=new J.OlP("angularfire2.realtimeDatabaseURL"),my=new J.OlP("angularfire2.database.use-emulator");let Nm=(()=>{class u{constructor(l,f,v,T,R,Q,oe,ve,vt,Ct,jt,on,gn,br,qr){this.schedulers=Q;const lo=oe,uo=(0,Gr.on)(l,R,f);ve&&(0,gu.nw)(uo,R,vt,jt,on,gn,Ct,br),this.database=(0,Gr.cc)(`${uo.name}.database.${v}`,"AngularFireDatabase",uo.name,()=>{const As=R.runOutsideAngular(()=>uo.database(v||void 0));return lo&&As.useEmulator(...lo),As},[lo])}list(l,f){const v=this.schedulers.ngZone.runOutsideAngular(()=>yh(this.database,l));let T=v;return f&&(T=f(v)),function Df(u,o){const l=o.schedulers.outsideAngular,f=o.schedulers.ngZone.run(()=>u.ref);return{query:u,update:Cf(f,"update"),set:Cf(f,"set"),push:v=>f.push(v),remove:Qy(f),snapshotChanges:v=>kl(u,v,l).pipe(Sr.iC),stateChanges:v=>Ep(u,v,l).pipe(Sr.iC),auditTrail:v=>function gy(u,o,l){return function Wg(u,o,l){return function bf(u,o){return _h(u,"value","on",o).pipe((0,gi.U)(l=>{let f;return l.payload.forEach(v=>(f=v.key,!1)),{data:l,lastKeyToLoad:f}}))}(u,l).pipe(function Fs(...u){const o=(0,Xr.jO)(u);return(0,Nr.e)((l,f)=>{const v=u.length,T=new Array(v);let R=u.map(()=>!1),Q=!1;for(let oe=0;oe<v;oe++)(0,vr.Xf)(u[oe]).subscribe((0,pi.x)(f,ve=>{T[oe]=ve,!Q&&!R[oe]&&(R[oe]=!0,(Q=R.every(Vn.y))&&(R=null))},Wr.Z));l.subscribe((0,pi.x)(f,oe=>{if(Q){const ve=[oe,...T];f.next(o?o(...ve):ve)}}))})}(o),(0,gi.U)(([v,T])=>{const R=v.lastKeyToLoad,Q=T.map(oe=>oe.key);return{actions:T,lastKeyToLoad:R,loadedKeys:Q}}),function qo(u){return(0,Nr.e)((o,l)=>{let f=!1,v=0;o.subscribe((0,pi.x)(l,T=>(f||(f=!u(T,v++)))&&l.next(T)))})}(v=>-1===v.loadedKeys.indexOf(v.lastKeyToLoad)),(0,gi.U)(v=>v.actions))}(u,Ep(u,o).pipe((0,Ut.R)((v,T)=>[...v,T],[])),l)}(u,v,l).pipe(Sr.iC),valueChanges:(v,T)=>kl(u,v,l).pipe((0,gi.U)(Q=>Q.map(oe=>T&&T.idField?Object.assign(Object.assign({},oe.payload.val()),{[T.idField]:oe.key}):oe.payload.val())),Sr.iC)}}(T,this)}object(l){return function Jy(u,o){return{query:u,snapshotChanges:()=>km(u,o.schedulers.outsideAngular)().pipe(Sr.iC),update:l=>u.ref.update(l),set:l=>u.ref.set(l),remove:()=>u.ref.remove(),valueChanges:()=>km(u,o.schedulers.outsideAngular)().pipe(Sr.iC,(0,gi.U)(f=>f.payload.exists()?f.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>yh(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(l){return new(l||u)(J.LFG(Gr.Dh),J.LFG(Gr.xv,8),J.LFG(Yi,8),J.LFG(J.Lbi),J.LFG(J.R0b),J.LFG(Sr.HU),J.LFG(my,8),J.LFG(gu.zQ,8),J.LFG(gu.Qv,8),J.LFG(gu.L6,8),J.LFG(gu._Q,8),J.LFG(gu.rT,8),J.LFG(gu.lh,8),J.LFG(gu.f7,8),J.LFG(Ko.nm,8))},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Us=(()=>{class u{constructor(){bo.Z.registerVersion("angularfire",Sr.q4.full,"rtdb-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=J.oAB({type:u}),u.\u0275inj=J.cJS({providers:[Nm]}),u})();var Tf=P(8161);const Sf_firebase={apiKey:"AIzaSyBY3Sfork3oMSXgDsmymDelMcku9ctk3MA",authDomain:"harware-8f5e9.firebaseapp.com",projectId:"harware-8f5e9",storageBucket:"harware-8f5e9.appspot.com",messagingSenderId:"162423168685",appId:"1:162423168685:web:23de3cfbe4e6b35fcdb024",measurementId:"G-VECW99Z6VL"};var wp=P(1328);let Gu=(()=>{class u{constructor(l,f){this.authService=l,this.router=f}canActivate(){const l=JSON.parse(localStorage.getItem("user")||"null");return!(!l||!l.emailVerified)||this.router.parseUrl("/login")}}return u.\u0275fac=function(l){return new(l||u)(J.LFG(wp.u),J.LFG(Bn.F0))},u.\u0275prov=J.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const e_=[{path:"",loadChildren:()=>P.e(8388).then(P.bind(P,8388)).then(u=>u.IndexPageModule)},{path:"",loadChildren:()=>Promise.all([P.e(8592),P.e(4851)]).then(P.bind(P,4851)).then(u=>u.HomePageModule),canActivate:[Gu]},{path:"order",loadChildren:()=>Promise.all([P.e(8592),P.e(8838)]).then(P.bind(P,8838)).then(u=>u.OrderPageModule),canActivate:[Gu]},{path:"order-menu",loadChildren:()=>Promise.all([P.e(8592),P.e(2818)]).then(P.bind(P,2818)).then(u=>u.OrderMenuPageModule),canActivate:[Gu]},{path:"forgot",loadChildren:()=>Promise.all([P.e(8592),P.e(4479)]).then(P.bind(P,4479)).then(u=>u.ForgotPageModule)},{path:"products",loadChildren:()=>Promise.all([P.e(8592),P.e(1240)]).then(P.bind(P,1240)).then(u=>u.ProductsPageModule),canActivate:[Gu]},{path:"verify-email",loadChildren:()=>P.e(5640).then(P.bind(P,5640)).then(u=>u.VerifyEmailPageModule)},{path:"cart-modal",loadChildren:()=>P.e(1671).then(P.bind(P,1671)).then(u=>u.CartModalPageModule),canActivate:[Gu]},{path:"cart",loadChildren:()=>Promise.all([P.e(8592),P.e(5213)]).then(P.bind(P,5213)).then(u=>u.CartPageModule),canActivate:[Gu]},{path:"checkout",loadChildren:()=>Promise.all([P.e(8592),P.e(7313)]).then(P.bind(P,7313)).then(u=>u.CheckoutPageModule)},{path:"checkout",loadChildren:()=>Promise.all([P.e(8592),P.e(7313)]).then(P.bind(P,7313)).then(u=>u.CheckoutPageModule)}];let yy=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=J.oAB({type:u}),u.\u0275inj=J.cJS({imports:[[Bn.Bz.forRoot(e_,{preloadingStrategy:Bn.wm})],Bn.Bz]}),u})(),Ip=(()=>{class u{constructor(){}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275cmp=J.Xpm({type:u,selectors:[["app-root"]],decls:2,vars:0,template:function(l,f){1&l&&(J.TgZ(0,"ion-app"),J._UZ(1,"ion-router-outlet"),J.qZA())},directives:[Tf.dr,Tf.jP],styles:[""]}),u})();var bp=P(520),Fm=P(2382);let Lm=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=J.oAB({type:u,bootstrap:[Ip]}),u.\u0275inj=J.cJS({providers:[{provide:Bn.wN,useClass:Tf.r4}],imports:[[lr,Fm.u5,gu.ww,W,Us,Gr.hO.initializeApp(Sf_firebase),bp.JF,Tf.Pc.forRoot(),yy]]}),u})();(0,J.G48)(),jn().bootstrapModule(Lm).catch(u=>console.log(u))},5867:(Xt,ut,P)=>{"use strict";P.d(ut,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=P(9681);(0,c.registerVersion)("firebase","9.8.2","app")},127:(Xt,ut,P)=>{"use strict";P.d(ut,{Z:()=>c.Z});var c=P(3942);c.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Xt,ut,P)=>{"use strict";P.r(ut);var c=P(5861),J=P(3942),q=P(2090),Se=P(9681),Ae=P(655),Ee=P(1877),be=P(4859);const tt=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},De=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ce=new Ee.Yd("@firebase/auth");function nt(I,...g){Ce.logLevel<=Ee.in.ERROR&&Ce.error(`Auth (${Se.SDK_VERSION}): ${I}`,...g)}function ot(I,...g){throw Ke(I,...g)}function Ye(I,...g){return Ke(I,...g)}function We(I,g,_){const A=Object.assign(Object.assign({},Le()),{[g]:_});return new q.LL("auth","Firebase",A).create(g,{appName:I.name})}function $e(I,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&ot(I,"argument-error"),We(I,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(I,...g){if("string"!=typeof I){const _=g[0],A=[...g.slice(1)];return A[0]&&(A[0].appName=I.name),I._errorFactory.create(_,...A)}return De.create(I,...g)}function ee(I,g,..._){if(!I)throw Ke(g,..._)}function Qe(I){const g="INTERNAL ASSERTION FAILED: "+I;throw nt(g),new Error(g)}function he(I,g){I||Qe(g)}const me=new Map;function ge(I){he(I instanceof Function,"Expected a class definition");let g=me.get(I);return g?(he(g instanceof I,"Instance stored in cache mismatched with class"),g):(g=new I,me.set(I,g),g)}function _t(){var I;return"undefined"!=typeof self&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function xt(){return"http:"===ct()||"https:"===ct()}function ct(){var I;return"undefined"!=typeof self&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class It{constructor(g,_){this.shortDelay=g,this.longDelay=_,he(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xt()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dt(I,g){he(I.emulator,"Emulator should always be set here");const{url:_}=I.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class gt{static initialize(g,_,A){this.fetchImpl=g,_&&(this.headersImpl=_),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const at={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gt=new It(3e4,6e4);function Nt(I,g){return I.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:I.tenantId}):g}function wt(I,g,_,A){return kn.apply(this,arguments)}function kn(){return(kn=(0,c.Z)(function*(I,g,_,A,K={}){return Sn(I,K,(0,c.Z)(function*(){let de={},ht={};A&&("GET"===g?ht=A:de={body:JSON.stringify(A)});const Ht=(0,q.xO)(Object.assign({key:I.config.apiKey},ht)).slice(1),sn=yield I._getAdditionalHeaders();return sn["Content-Type"]="application/json",I.languageCode&&(sn["X-Firebase-Locale"]=I.languageCode),gt.fetch()(Yn(I,I.config.apiHost,_,Ht),Object.assign({method:g,headers:sn,referrerPolicy:"no-referrer"},de))}))})).apply(this,arguments)}function Sn(I,g,_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,c.Z)(function*(I,g,_){I._canInitEmulator=!1;const A=Object.assign(Object.assign({},at),g);try{const K=new lr(I),de=yield Promise.race([_(),K.promise]);K.clearNetworkTimeout();const ht=yield de.json();if("needConfirmation"in ht)throw Hn(I,"account-exists-with-different-credential",ht);if(de.ok&&!("errorMessage"in ht))return ht;{const Ht=de.ok?ht.errorMessage:ht.error.message,[sn,wn]=Ht.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===sn)throw Hn(I,"credential-already-in-use",ht);if("EMAIL_EXISTS"===sn)throw Hn(I,"email-already-in-use",ht);if("USER_DISABLED"===sn)throw Hn(I,"user-disabled",ht);const Wn=A[sn]||sn.toLowerCase().replace(/[_\s]+/g,"-");if(wn)throw We(I,Wn,wn);ot(I,Wn)}}catch(K){if(K instanceof q.ZR)throw K;ot(I,"network-request-failed")}})).apply(this,arguments)}function mn(I,g,_,A){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(I,g,_,A,K={}){const de=yield wt(I,g,_,A,K);return"mfaPendingCredential"in de&&ot(I,"multi-factor-auth-required",{_serverResponse:de}),de})).apply(this,arguments)}function Yn(I,g,_,A){const K=`${g}${_}?${A}`;return I.config.emulator?dt(I.config,K):`${I.config.apiScheme}://${K}`}class lr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,A)=>{this.timer=setTimeout(()=>A(Ye(this.auth,"network-request-failed")),Gt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(I,g,_){const A={appName:I.name};_.email&&(A.email=_.email),_.phoneNumber&&(A.phoneNumber=_.phoneNumber);const K=Ye(I,g,A);return K.customData._tokenResponse=_,K}function Qn(){return(Qn=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function On(I,g){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function jr(I,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Bt(I){if(I)try{const g=new Date(Number(I));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function At(){return(At=(0,c.Z)(function*(I,g=!1){const _=(0,q.m9)(I),A=yield _.getIdToken(g),K=Kt(A);ee(K&&K.exp&&K.auth_time&&K.iat,_.auth,"internal-error");const de="object"==typeof K.firebase?K.firebase:void 0,ht=null==de?void 0:de.sign_in_provider;return{claims:K,token:A,authTime:Bt(Et(K.auth_time)),issuedAtTime:Bt(Et(K.iat)),expirationTime:Bt(Et(K.exp)),signInProvider:ht||null,signInSecondFactor:(null==de?void 0:de.sign_in_second_factor)||null}})).apply(this,arguments)}function Et(I){return 1e3*Number(I)}function Kt(I){const[g,_,A]=I.split(".");if(void 0===g||void 0===_||void 0===A)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,q.tV)(_);return K?JSON.parse(K):(nt("Failed to decode base64 JWT payload"),null)}catch(K){return nt("Caught error parsing JWT payload as JSON",K),null}}function Un(I,g){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,c.Z)(function*(I,g,_=!1){if(_)return g;try{return yield g}catch(A){throw A instanceof q.ZR&&fn(A)&&I.auth.currentUser===I&&(yield I.auth.signOut()),A}})).apply(this,arguments)}function fn({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}class ei{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const K=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const A=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),A)}iteration(){var g=this;return(0,c.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class fr{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bt(this.lastLoginAt),this.creationTime=Bt(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xr(I){return we.apply(this,arguments)}function we(){return(we=(0,c.Z)(function*(I){var g;const _=I.auth,A=yield I.getIdToken(),K=yield Un(I,jr(_,{idToken:A}));ee(null==K?void 0:K.users.length,_,"internal-error");const de=K.users[0];I._notifyReloadListener(de);const ht=(null===(g=de.providerUserInfo)||void 0===g?void 0:g.length)?Fe(de.providerUserInfo):[],Ht=Mt(I.providerData,ht),Wn=!!I.isAnonymous&&!(I.email&&de.passwordHash||(null==Ht?void 0:Ht.length)),qn={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:Ht,metadata:new fr(de.createdAt,de.lastLoginAt),isAnonymous:Wn};Object.assign(I,qn)})).apply(this,arguments)}function Ze(){return(Ze=(0,c.Z)(function*(I){const g=(0,q.m9)(I);yield xr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Mt(I,g){return[...I.filter(A=>!g.some(K=>K.providerId===A.providerId)),...g]}function Fe(I){return I.map(g=>{var{providerId:_}=g,A=(0,Ae._T)(g,["providerId"]);return{providerId:_,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function zt(){return(zt=(0,c.Z)(function*(I,g){const _=yield Sn(I,{},(0,c.Z)(function*(){const A=(0,q.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:K,apiKey:de}=I.config,ht=Yn(I,K,"/v1/token",`key=${de}`),Ht=yield I._getAdditionalHeaders();return Ht["Content-Type"]="application/x-www-form-urlencoded",gt.fetch()(ht,{method:"POST",headers:Ht,body:A})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class rn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ee(g.idToken,"internal-error"),ee(void 0!==g.idToken,"internal-error"),ee(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function bt(I){const g=Kt(I);return ee(g,"internal-error"),ee(void 0!==g.exp,"internal-error"),ee(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var A=this;return(0,c.Z)(function*(){return ee(!A.accessToken||A.refreshToken,g,"user-token-expired"),_||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(g,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var A=this;return(0,c.Z)(function*(){const{accessToken:K,refreshToken:de,expiresIn:ht}=yield function mt(I,g){return zt.apply(this,arguments)}(g,_);A.updateTokensAndExpiration(K,de,Number(ht))})()}updateTokensAndExpiration(g,_,A){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(g,_){const{refreshToken:A,accessToken:K,expirationTime:de}=_,ht=new rn;return A&&(ee("string"==typeof A,"internal-error",{appName:g}),ht.refreshToken=A),K&&(ee("string"==typeof K,"internal-error",{appName:g}),ht.accessToken=K),de&&(ee("number"==typeof de,"internal-error",{appName:g}),ht.expirationTime=de),ht}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new rn,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function yn(I,g){ee("string"==typeof I||void 0===I,"internal-error",{appName:g})}class vn{constructor(g){var{uid:_,auth:A,stsTokenManager:K}=g,de=(0,Ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ei(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=A,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=de.displayName||null,this.email=de.email||null,this.emailVerified=de.emailVerified||!1,this.phoneNumber=de.phoneNumber||null,this.photoURL=de.photoURL||null,this.isAnonymous=de.isAnonymous||!1,this.tenantId=de.tenantId||null,this.providerData=de.providerData?[...de.providerData]:[],this.metadata=new fr(de.createdAt||void 0,de.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,c.Z)(function*(){const A=yield Un(_,_.stsTokenManager.getToken(_.auth,g));return ee(A,_.auth,"internal-error"),_.accessToken!==A&&(_.accessToken=A,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),A})()}getIdTokenResult(g){return function Je(I){return At.apply(this,arguments)}(this,g)}reload(){return function je(I){return Ze.apply(this,arguments)}(this)}_assign(g){this!==g&&(ee(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new vn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var A=this;return(0,c.Z)(function*(){let K=!1;g.idToken&&g.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(g),K=!0),_&&(yield xr(A)),yield A.auth._persistUserIfCurrent(A),K&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var g=this;return(0,c.Z)(function*(){const _=yield g.getIdToken();return yield Un(g,function In(I,g){return Qn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var A,K,de,ht,Ht,sn,wn,Wn;const qn=null!==(A=_.displayName)&&void 0!==A?A:void 0,_s=null!==(K=_.email)&&void 0!==K?K:void 0,da=null!==(de=_.phoneNumber)&&void 0!==de?de:void 0,Jc=null!==(ht=_.photoURL)&&void 0!==ht?ht:void 0,jf=null!==(Ht=_.tenantId)&&void 0!==Ht?Ht:void 0,nu=null!==(sn=_._redirectEventId)&&void 0!==sn?sn:void 0,zd=null!==(wn=_.createdAt)&&void 0!==wn?wn:void 0,Nh=null!==(Wn=_.lastLoginAt)&&void 0!==Wn?Wn:void 0,{uid:Qo,emailVerified:dc,isAnonymous:Wd,providerData:ed,stsTokenManager:td}=_;ee(Qo&&td,g,"internal-error");const nd=rn.fromJSON(this.name,td);ee("string"==typeof Qo,g,"internal-error"),yn(qn,g.name),yn(_s,g.name),ee("boolean"==typeof dc,g,"internal-error"),ee("boolean"==typeof Wd,g,"internal-error"),yn(da,g.name),yn(Jc,g.name),yn(jf,g.name),yn(nu,g.name),yn(zd,g.name),yn(Nh,g.name);const Al=new vn({uid:Qo,auth:g,email:_s,emailVerified:dc,displayName:qn,isAnonymous:Wd,photoURL:Jc,phoneNumber:da,tenantId:jf,stsTokenManager:nd,createdAt:zd,lastLoginAt:Nh});return ed&&Array.isArray(ed)&&(Al.providerData=ed.map(hc=>Object.assign({},hc))),nu&&(Al._redirectEventId=nu),Al}static _fromIdTokenResponse(g,_,A=!1){return(0,c.Z)(function*(){const K=new rn;K.updateFromServerResponse(_);const de=new vn({uid:_.localId,auth:g,stsTokenManager:K,isAnonymous:A});return yield xr(de),de})()}}const En=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,A){var K=this;return(0,c.Z)(function*(){K.storage[_]=A})()}_get(_){var A=this;return(0,c.Z)(function*(){const K=A.storage[_];return void 0===K?null:K})()}_remove(_){var A=this;return(0,c.Z)(function*(){delete A.storage[_]})()}_addListener(_,A){}_removeListener(_,A){}}return I.type="NONE",I})();function rr(I,g,_){return`firebase:${I}:${g}:${_}`}class kr{constructor(g,_,A){this.persistence=g,this.auth=_,this.userKey=A;const{config:K,name:de}=this.auth;this.fullUserKey=rr(this.userKey,K.apiKey,de),this.fullPersistenceKey=rr("persistence",K.apiKey,de),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?vn._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,c.Z)(function*(){if(_.persistence===g)return;const A=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,A?_.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,A="authUser"){return(0,c.Z)(function*(){if(!_.length)return new kr(ge(En),g,A);const K=(yield Promise.all(_.map(function(){var wn=(0,c.Z)(function*(Wn){if(yield Wn._isAvailable())return Wn});return function(Wn){return wn.apply(this,arguments)}}()))).filter(wn=>wn);let de=K[0]||ge(En);const ht=rr(A,g.config.apiKey,g.name);let Ht=null;for(const wn of _)try{const Wn=yield wn._get(ht);if(Wn){const qn=vn._fromJSON(g,Wn);wn!==de&&(Ht=qn),de=wn;break}}catch(Wn){}const sn=K.filter(wn=>wn._shouldAllowMigration);return de._shouldAllowMigration&&sn.length?(de=sn[0],Ht&&(yield de._set(ht,Ht.toJSON())),yield Promise.all(_.map(function(){var wn=(0,c.Z)(function*(Wn){if(Wn!==de)try{yield Wn._remove(ht)}catch(qn){}});return function(Wn){return wn.apply(this,arguments)}}())),new kr(de,g,A)):new kr(de,g,A)})()}}function Fi(I){const g=I.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Yr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Gr(g))return"Firefox";if(g.includes("silk/"))return"Silk";if($i(g))return"Blackberry";if(Nr(g))return"Webos";if(Bn(g))return"Safari";if((g.includes("chrome/")||wi(g))&&!g.includes("edge/"))return"Chrome";if(Hr(g))return"Android";{const A=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function Gr(I=(0,q.z$)()){return/firefox\//i.test(I)}function Bn(I=(0,q.z$)()){const g=I.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function wi(I=(0,q.z$)()){return/crios\//i.test(I)}function Yr(I=(0,q.z$)()){return/iemobile/i.test(I)}function Hr(I=(0,q.z$)()){return/android/i.test(I)}function $i(I=(0,q.z$)()){return/blackberry/i.test(I)}function Nr(I=(0,q.z$)()){return/webos/i.test(I)}function pi(I=(0,q.z$)()){return/iphone|ipad|ipod/i.test(I)}function Sr(I=(0,q.z$)()){return pi(I)||Hr(I)||Nr(I)||$i(I)||/windows phone/i.test(I)||Yr(I)}function oi(I,g=[]){let _;switch(I){case"Browser":_=Fi((0,q.z$)());break;case"Worker":_=`${Fi((0,q.z$)())}-${I}`;break;default:_=I}const A=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${Se.SDK_VERSION}/${A}`}class Gn{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const A=de=>new Promise((ht,Ht)=>{try{ht(g(de))}catch(sn){Ht(sn)}});A.onAbort=_,this.queue.push(A);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,c.Z)(function*(){if(_.auth.currentUser===g)return;const A=[];try{for(const K of _.queue)yield K(g),K.onAbort&&A.push(K.onAbort)}catch(K){A.reverse();for(const de of A)try{de()}catch(ht){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:K.message})}})()}}class te{constructor(g,_,A){this.app=g,this.heartbeatServiceProvider=_,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zn(this),this.idTokenSubscription=new Zn(this),this.beforeStateQueue=new Gn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=De,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(g,_){var A=this;return _&&(this._popupRedirectResolver=ge(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var K,de;if(!A._deleted&&(A.persistenceManager=yield kr.create(A,g),!A._deleted)){if(null===(K=A._popupRedirectResolver)||void 0===K?void 0:K._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(ht){}yield A.initializeCurrentUser(_),A.lastNotifiedUid=(null===(de=A.currentUser)||void 0===de?void 0:de.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,c.Z)(function*(){var A;const K=yield _.assertedPersistence.getCurrentUser();let de=K,ht=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ht=null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId,sn=null==de?void 0:de._redirectEventId,wn=yield _.tryRedirectSignIn(g);(!Ht||Ht===sn)&&(null==wn?void 0:wn.user)&&(de=wn.user,ht=!0)}if(!de)return _.directlySetCurrentUser(null);if(!de._redirectEventId){if(ht)try{yield _.beforeStateQueue.runMiddleware(de)}catch(Ht){de=K,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ht))}return de?_.reloadAndSetCurrentUserOrClear(de):_.directlySetCurrentUser(null)}return ee(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===de._redirectEventId?_.directlySetCurrentUser(de):_.reloadAndSetCurrentUserOrClear(de)})()}tryRedirectSignIn(g){var _=this;return(0,c.Z)(function*(){let A=null;try{A=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(K){yield _._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,c.Z)(function*(){try{yield xr(g)}catch(A){if("auth/network-request-failed"!==A.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ve(){if("undefined"==typeof navigator)return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,c.Z)(function*(){const A=g?(0,q.m9)(g):null;return A&&ee(A.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(A&&A._clone(_))})()}_updateCurrentUser(g,_=!1){var A=this;return(0,c.Z)(function*(){if(!A._deleted)return g&&ee(A.tenantId===g.tenantId,A,"tenant-id-mismatch"),_||(yield A.beforeStateQueue.runMiddleware(g)),A.queue((0,c.Z)(function*(){yield A.directlySetCurrentUser(g),A.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(ge(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new q.LL("auth","Firebase",g())}onAuthStateChanged(g,_,A){return this.registerStateListener(this.authStateSubscription,g,_,A)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,A){return this.registerStateListener(this.idTokenSubscription,g,_,A)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var A=this;return(0,c.Z)(function*(){const K=yield A.getOrInitRedirectPersistenceManager(_);return null===g?K.removeCurrentUser():K.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const A=g&&ge(g)||_._popupRedirectResolver;ee(A,_,"argument-error"),_.redirectPersistenceManager=yield kr.create(_,[ge(A._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,c.Z)(function*(){var A,K;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(A=_._currentUser)||void 0===A?void 0:A._redirectEventId)===g?_._currentUser:(null===(K=_.redirectUser)||void 0===K?void 0:K._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,c.Z)(function*(){if(g===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,A,K){if(this._deleted)return()=>{};const de="function"==typeof _?_:_.next.bind(_),ht=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(ht,this,"internal-error"),ht.then(()=>de(this.currentUser)),"function"==typeof _?g.addObserver(_,A,K):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=oi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,c.Z)(function*(){var _;const A={"X-Client-Version":g.clientVersion};g.app.options.appId&&(A["X-Firebase-gmpid"]=g.app.options.appId);const K=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return K&&(A["X-Firebase-Client"]=K),A})()}}function cn(I){return(0,q.m9)(I)}class Zn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,q.ne)(_=>this.observer=_)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ai(I){const g=I.indexOf(":");return g<0?"":I.substr(0,g+1)}function or(I){if(!I)return null;const g=Number(I);return isNaN(g)?null:g}class mi{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Qe("not implemented")}_getIdTokenResponse(g){return Qe("not implemented")}_linkToIdToken(g,_){return Qe("not implemented")}_getReauthenticationResolver(g){return Qe("not implemented")}}function Mr(I,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:resetPassword",Nt(I,g))})).apply(this,arguments)}function Li(I,g){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Zi(I,g){return li.apply(this,arguments)}function li(){return(li=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:update",Nt(I,g))})).apply(this,arguments)}function ui(){return(ui=(0,c.Z)(function*(I,g){return mn(I,"POST","/v1/accounts:signInWithPassword",Nt(I,g))})).apply(this,arguments)}function Si(I,g){return re.apply(this,arguments)}function re(){return(re=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:sendOobCode",Nt(I,g))})).apply(this,arguments)}function fe(I,g){return et.apply(this,arguments)}function et(){return(et=(0,c.Z)(function*(I,g){return Si(I,g)})).apply(this,arguments)}function ft(I,g){return _e.apply(this,arguments)}function _e(){return(_e=(0,c.Z)(function*(I,g){return Si(I,g)})).apply(this,arguments)}function Te(I,g){return pt.apply(this,arguments)}function pt(){return(pt=(0,c.Z)(function*(I,g){return Si(I,g)})).apply(this,arguments)}function Vt(I,g){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,c.Z)(function*(I,g){return Si(I,g)})).apply(this,arguments)}function ln(){return(ln=(0,c.Z)(function*(I,g){return mn(I,"POST","/v1/accounts:signInWithEmailLink",Nt(I,g))})).apply(this,arguments)}function Xn(){return(Xn=(0,c.Z)(function*(I,g){return mn(I,"POST","/v1/accounts:signInWithEmailLink",Nt(I,g))})).apply(this,arguments)}class nr extends mi{constructor(g,_,A,K=null){super("password",A),this._email=g,this._password=_,this._tenantId=K}static _fromEmailAndPassword(g,_){return new nr(g,_,"password")}static _fromEmailAndCode(g,_,A=null){return new nr(g,_,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,c.Z)(function*(){switch(_.signInMethod){case"password":return function Cr(I,g){return ui.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ft(I,g){return ln.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:ot(g,"internal-error")}})()}_linkToIdToken(g,_){var A=this;return(0,c.Z)(function*(){switch(A.signInMethod){case"password":return Li(g,{idToken:_,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function An(I,g){return Xn.apply(this,arguments)}(g,{idToken:_,email:A._email,oobCode:A._password});default:ot(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ci(I,g){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,c.Z)(function*(I,g){return mn(I,"POST","/v1/accounts:signInWithIdp",Nt(I,g))})).apply(this,arguments)}class Ge extends mi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ge(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):ot("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K}=_,de=(0,Ae._T)(_,["providerId","signInMethod"]);if(!A||!K)return null;const ht=new Ge(A,K);return ht.idToken=de.idToken||void 0,ht.accessToken=de.accessToken||void 0,ht.secret=de.secret,ht.nonce=de.nonce,ht.pendingToken=de.pendingToken||null,ht}_getIdTokenResponse(g){return ci(g,this.buildRequest())}_linkToIdToken(g,_){const A=this.buildRequest();return A.idToken=_,ci(g,A)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ci(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,q.xO)(_)}return g}}function Dt(I,g){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:sendVerificationCode",Nt(I,g))})).apply(this,arguments)}function pn(){return(pn=(0,c.Z)(function*(I,g){return mn(I,"POST","/v1/accounts:signInWithPhoneNumber",Nt(I,g))})).apply(this,arguments)}function bi(){return(bi=(0,c.Z)(function*(I,g){const _=yield mn(I,"POST","/v1/accounts:signInWithPhoneNumber",Nt(I,g));if(_.temporaryProof)throw Hn(I,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Dr={USER_NOT_FOUND:"user-not-found"};function js(){return(js=(0,c.Z)(function*(I,g){return mn(I,"POST","/v1/accounts:signInWithPhoneNumber",Nt(I,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Dr)})).apply(this,arguments)}class Ai extends mi{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Ai({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Ai({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Zt(I,g){return pn.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function cr(I,g){return bi.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function is(I,g){return js.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:A,verificationCode:K}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:A,code:K}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:A,phoneNumber:K,temporaryProof:de}=g;return A||_||K||de?new Ai({verificationId:_,verificationCode:A,phoneNumber:K,temporaryProof:de}):null}}class Qs{constructor(g){var _,A,K,de,ht,Ht;const sn=(0,q.zd)((0,q.pd)(g)),wn=null!==(_=sn.apiKey)&&void 0!==_?_:null,Wn=null!==(A=sn.oobCode)&&void 0!==A?A:null,qn=function na(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=sn.mode)&&void 0!==K?K:null);ee(wn&&Wn&&qn,"argument-error"),this.apiKey=wn,this.operation=qn,this.code=Wn,this.continueUrl=null!==(de=sn.continueUrl)&&void 0!==de?de:null,this.languageCode=null!==(ht=sn.languageCode)&&void 0!==ht?ht:null,this.tenantId=null!==(Ht=sn.tenantId)&&void 0!==Ht?Ht:null}static parseLink(g){const _=function Es(I){const g=(0,q.zd)((0,q.pd)(I)).link,_=g?(0,q.zd)((0,q.pd)(g)).deep_link_id:null,A=(0,q.zd)((0,q.pd)(I)).deep_link_id;return(A?(0,q.zd)((0,q.pd)(A)).link:null)||A||_||g||I}(g);try{return new Qs(_)}catch(A){return null}}}let Ho=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(_,A){return nr._fromEmailAndPassword(_,A)}static credentialWithLink(_,A){const K=Qs.parseLink(A);return ee(K,"argument-error"),nr._fromEmailAndCode(_,K.code,K.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class Pi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Jr extends Pi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ss extends Jr{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ee("providerId"in _&&"signInMethod"in _,"argument-error"),Ge._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ee(g.idToken||g.accessToken,"argument-error"),Ge._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ss.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ss.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:A,oauthTokenSecret:K,pendingToken:de,nonce:ht,providerId:Ht}=g;if(!A&&!K&&!_&&!de||!Ht)return null;try{return new ss(Ht)._credential({idToken:_,accessToken:A,nonce:ht,pendingToken:de})}catch(sn){return null}}}let ws=(()=>{class I extends Jr{constructor(){super("facebook.com")}static credential(_){return Ge._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return I.credential(_.oauthAccessToken)}catch(A){return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),Is=(()=>{class I extends Jr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,A){return Ge._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:A})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:A,oauthAccessToken:K}=_;if(!A&&!K)return null;try{return I.credential(A,K)}catch(de){return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),Go=(()=>{class I extends Jr{constructor(){super("github.com")}static credential(_){return Ge._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return I.credential(_.oauthAccessToken)}catch(A){return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class os extends mi{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return ci(g,this.buildRequest())}_linkToIdToken(g,_){const A=this.buildRequest();return A.idToken=_,ci(g,A)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ci(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:K,pendingToken:de}=_;return A&&K&&de&&A===K?new os(A,de):null}static _create(g,_){return new os(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bi extends Pi{constructor(g){ee(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Bi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Bi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=os.fromJSON(g);return ee(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:A}=g;if(!_||!A)return null;try{return os._create(A,_)}catch(K){return null}}}let eo=(()=>{class I extends Jr{constructor(){super("twitter.com")}static credential(_,A){return Ge._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:A})}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:A,oauthTokenSecret:K}=_;if(!A||!K)return null;try{return I.credential(A,K)}catch(de){return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function Tr(I,g){return bs.apply(this,arguments)}function bs(){return(bs=(0,c.Z)(function*(I,g){return mn(I,"POST","/v1/accounts:signUp",Nt(I,g))})).apply(this,arguments)}class as{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,A,K=!1){return(0,c.Z)(function*(){const de=yield vn._fromIdTokenResponse(g,A,K),ht=Xi(A);return new as({user:de,providerId:ht,_tokenResponse:A,operationType:_})})()}static _forOperation(g,_,A){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(A,!0);const K=Xi(A);return new as({user:g,providerId:K,_tokenResponse:A,operationType:_})})()}}function Xi(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function Oo(){return(Oo=(0,c.Z)(function*(I){var g;const _=cn(I);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new as({user:_.currentUser,providerId:null,operationType:"signIn"});const A=yield Tr(_,{returnSecureToken:!0}),K=yield as._fromIdTokenResponse(_,"signIn",A,!0);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class zr extends q.ZR{constructor(g,_,A,K){var de;super(_.code,_.message),this.operationType=A,this.user=K,Object.setPrototypeOf(this,zr.prototype),this.customData={appName:g.name,tenantId:null!==(de=g.tenantId)&&void 0!==de?de:void 0,_serverResponse:_.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(g,_,A,K){return new zr(g,_,A,K)}}function Ji(I,g,_,A){return("reauthenticate"===g?_._getReauthenticationResolver(I):_._getIdTokenResponse(I)).catch(de=>{throw"auth/multi-factor-auth-required"===de.code?zr._fromErrorAndOperation(I,de,g,A):de})}function ls(I){return new Set(I.map(({providerId:g})=>g).filter(g=>!!g))}function _r(){return(_r=(0,c.Z)(function*(I,g){const _=(0,q.m9)(I);yield U(!0,_,g);const{providerUserInfo:A}=yield On(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),K=ls(A||[]);return _.providerData=_.providerData.filter(de=>K.has(de.providerId)),K.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function V(I,g){return se.apply(this,arguments)}function se(){return(se=(0,c.Z)(function*(I,g,_=!1){const A=yield Un(I,g._linkToIdToken(I.auth,yield I.getIdToken()),_);return as._forOperation(I,"link",A)})).apply(this,arguments)}function U(I,g,_){return ue.apply(this,arguments)}function ue(){return(ue=(0,c.Z)(function*(I,g,_){yield xr(g);const K=!1===I?"provider-already-linked":"no-such-provider";ee(ls(g.providerData).has(_)===I,g.auth,K)})).apply(this,arguments)}function Be(I,g){return kt.apply(this,arguments)}function kt(){return(kt=(0,c.Z)(function*(I,g,_=!1){const{auth:A}=I,K="reauthenticate";try{const de=yield Un(I,Ji(A,K,g,I),_);ee(de.idToken,A,"internal-error");const ht=Kt(de.idToken);ee(ht,A,"internal-error");const{sub:Ht}=ht;return ee(I.uid===Ht,A,"user-mismatch"),as._forOperation(I,K,de)}catch(de){throw"auth/user-not-found"===(null==de?void 0:de.code)&&ot(A,"user-mismatch"),de}})).apply(this,arguments)}function qt(I,g){return xn.apply(this,arguments)}function xn(){return(xn=(0,c.Z)(function*(I,g,_=!1){const A="signIn",K=yield Ji(I,A,g),de=yield as._fromIdTokenResponse(I,A,K);return _||(yield I._updateCurrentUser(de.user)),de})).apply(this,arguments)}function Pn(I,g){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,c.Z)(function*(I,g){return qt(cn(I),g)})).apply(this,arguments)}function ir(I,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(I,g){const _=(0,q.m9)(I);return yield U(!1,_,g.providerId),V(_,g)})).apply(this,arguments)}function di(I,g){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,c.Z)(function*(I,g){return Be((0,q.m9)(I),g)})).apply(this,arguments)}function Ur(I,g){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,c.Z)(function*(I,g){return mn(I,"POST","/v1/accounts:signInWithCustomToken",Nt(I,g))})).apply(this,arguments)}function Tn(){return(Tn=(0,c.Z)(function*(I,g){const _=cn(I),A=yield Ur(_,{token:g,returnSecureToken:!0}),K=yield as._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class xs{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?zo._fromServerResponse(g,_):ot(g,"internal-error")}}class zo extends xs{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new zo(_)}}function Po(I,g,_){var A;ee((null===(A=_.url)||void 0===A?void 0:A.length)>0,I,"invalid-continue-uri"),ee(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ee(_.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ee(_.android.packageName.length>0,I,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function z(){return(z=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I),K={requestType:"PASSWORD_RESET",email:g};_&&Po(A,K,_),yield ft(A,K)})).apply(this,arguments)}function N(){return(N=(0,c.Z)(function*(I,g,_){yield Mr((0,q.m9)(I),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Tt(){return(Tt=(0,c.Z)(function*(I,g){yield Zi((0,q.m9)(I),{oobCode:g})})).apply(this,arguments)}function _n(I,g){return E.apply(this,arguments)}function E(){return(E=(0,c.Z)(function*(I,g){const _=(0,q.m9)(I),A=yield Mr(_,{oobCode:g}),K=A.requestType;switch(ee(K,_,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(A.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(A.mfaInfo,_,"internal-error");default:ee(A.email,_,"internal-error")}let de=null;return A.mfaInfo&&(de=xs._fromServerResponse(cn(_),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:de},operation:K}})).apply(this,arguments)}function w(){return(w=(0,c.Z)(function*(I,g){const{data:_}=yield _n((0,q.m9)(I),g);return _.email})).apply(this,arguments)}function ce(){return(ce=(0,c.Z)(function*(I,g,_){const A=cn(I),K=yield Tr(A,{returnSecureToken:!0,email:g,password:_}),de=yield as._fromIdTokenResponse(A,"signIn",K);return yield A._updateCurrentUser(de.user),de})).apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I),K={requestType:"EMAIL_SIGNIN",email:g};ee(_.handleCodeInApp,A,"argument-error"),_&&Po(A,K,_),yield Te(A,K)})).apply(this,arguments)}function tr(){return(tr=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I),K=Ho.credentialWithLink(g,_||_t());return ee(K._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),Pn(A,K)})).apply(this,arguments)}function ti(I,g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:createAuthUri",Nt(I,g))})).apply(this,arguments)}function ji(){return(ji=(0,c.Z)(function*(I,g){const A={identifier:g,continueUri:xt()?_t():"http://localhost"},{signinMethods:K}=yield ti((0,q.m9)(I),A);return K||[]})).apply(this,arguments)}function ni(){return(ni=(0,c.Z)(function*(I,g){const _=(0,q.m9)(I),K={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};g&&Po(_.auth,K,g);const{email:de}=yield fe(_.auth,K);de!==I.email&&(yield I.reload())})).apply(this,arguments)}function Bl(){return(Bl=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I),de={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:g};_&&Po(A.auth,de,_);const{email:ht}=yield Vt(A.auth,de);ht!==I.email&&(yield I.reload())})).apply(this,arguments)}function Qa(I,g){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,c.Z)(function*(I,g){return wt(I,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ma(){return(Ma=(0,c.Z)(function*(I,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const A=(0,q.m9)(I),de={idToken:yield A.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},ht=yield Un(A,Qa(A.auth,de));A.displayName=ht.displayName||null,A.photoURL=ht.photoUrl||null;const Ht=A.providerData.find(({providerId:sn})=>"password"===sn);Ht&&(Ht.displayName=A.displayName,Ht.photoURL=A.photoURL),yield A._updateTokensIfNecessary(ht)})).apply(this,arguments)}function ko(I,g,_){return el.apply(this,arguments)}function el(){return(el=(0,c.Z)(function*(I,g,_){const{auth:A}=I,de={idToken:yield I.getIdToken(),returnSecureToken:!0};g&&(de.email=g),_&&(de.password=_);const ht=yield Un(I,Li(A,de));yield I._updateTokensIfNecessary(ht,!0)})).apply(this,arguments)}class pa{constructor(g,_,A={}){this.isNewUser=g,this.providerId=_,this.profile=A}}class Eu extends pa{constructor(g,_,A,K){super(g,_,A),this.username=K}}class ra extends pa{constructor(g,_){super(g,"facebook.com",_)}}class Ra extends Eu{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Ul extends pa{constructor(g,_){super(g,"google.com",_)}}class ts extends Eu{constructor(g,_,A){super(g,"twitter.com",_,A)}}function No(I){const{user:g,_tokenResponse:_}=I;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Wo(I){var g,_;if(!I)return null;const{providerId:A}=I,K=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},de=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!A&&(null==I?void 0:I.idToken)){const ht=null===(_=null===(g=Kt(I.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(ht)return new pa(de,"anonymous"!==ht&&"custom"!==ht?ht:null)}if(!A)return null;switch(A){case"facebook.com":return new ra(de,K);case"github.com":return new Ra(de,K);case"google.com":return new Ul(de,K);case"twitter.com":return new ts(de,K,I.screenName||null);case"custom":case"anonymous":return new pa(de,null);default:return new pa(de,A,K)}}(_)}class Eo{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Eo("enroll",g)}static _fromMfaPendingCredential(g){return new Eo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,A;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Eo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(A=g.multiFactorSession)||void 0===A?void 0:A.idToken)return Eo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class us{constructor(g,_,A){this.session=g,this.hints=_,this.signInResolver=A}static _fromError(g,_){const A=cn(g),K=_.customData._serverResponse,de=(K.mfaInfo||[]).map(Ht=>xs._fromServerResponse(A,Ht));ee(K.mfaPendingCredential,A,"internal-error");const ht=Eo._fromMfaPendingCredential(K.mfaPendingCredential);return new us(ht,de,function(){var Ht=(0,c.Z)(function*(sn){const wn=yield sn._process(A,ht);delete K.mfaInfo,delete K.mfaPendingCredential;const Wn=Object.assign(Object.assign({},K),{idToken:wn.idToken,refreshToken:wn.refreshToken});switch(_.operationType){case"signIn":const qn=yield as._fromIdTokenResponse(A,_.operationType,Wn);return yield A._updateCurrentUser(qn.user),qn;case"reauthenticate":return ee(_.user,A,"internal-error"),as._forOperation(_.user,_.operationType,Wn);default:ot(A,"internal-error")}});return function(sn){return Ht.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,c.Z)(function*(){return _.signInResolver(g)})()}}function jl(I,g){return wt(I,"POST","/v2/accounts/mfaEnrollment:start",Nt(I,g))}class ia{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(A=>xs._fromServerResponse(g.auth,A)))})}static _fromUser(g){return new ia(g)}getSession(){var g=this;return(0,c.Z)(function*(){return Eo._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var A=this;return(0,c.Z)(function*(){const K=g,de=yield A.getSession(),ht=yield Un(A.user,K._process(A.user.auth,de,_));return yield A.user._updateTokensIfNecessary(ht),A.user.reload()})()}unenroll(g){var _=this;return(0,c.Z)(function*(){const A="string"==typeof g?g:g.uid,K=yield _.user.getIdToken(),de=yield Un(_.user,function po(I,g){return wt(I,"POST","/v2/accounts/mfaEnrollment:withdraw",Nt(I,g))}(_.user.auth,{idToken:K,mfaEnrollmentId:A}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ht})=>ht!==A),yield _.user._updateTokensIfNecessary(de);try{yield _.user.reload()}catch(ht){if("auth/user-token-expired"!==ht.code)throw ht}})()}}const Pa=new WeakMap,sa="__sak";class nl{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(sa,"1"),this.storage.removeItem(sa),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const no=(()=>{class I extends nl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,A)=>this.onStorageEvent(_,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function go(){const I=(0,q.z$)();return Bn(I)||pi(I)}()&&function Br(){try{return!(!window||window===window.top)}catch(I){return!1}}(),this.fallbackToPolling=Sr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const A of Object.keys(this.listeners)){const K=this.storage.getItem(A),de=this.localCache[A];K!==de&&_(A,de,K)}}onStorageEvent(_,A=!1){if(!_.key)return void this.forAllChangedKeys((Ht,sn,wn)=>{this.notifyListeners(Ht,wn)});const K=_.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ht=this.storage.getItem(K);if(_.newValue!==Ht)null!==_.newValue?this.storage.setItem(K,_.newValue):this.storage.removeItem(K);else if(this.localCache[K]===_.newValue&&!A)return}const de=()=>{const Ht=this.storage.getItem(K);!A&&this.localCache[K]===Ht||this.notifyListeners(K,Ht)},ht=this.storage.getItem(K);!function yi(){return(0,q.w1)()&&10===document.documentMode}()||ht===_.newValue||_.newValue===_.oldValue?de():setTimeout(de,10)}notifyListeners(_,A){this.localCache[_]=A;const K=this.listeners[_];if(K)for(const de of Array.from(K))de(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,A,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:A,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,A){var K=()=>super._set,de=this;return(0,c.Z)(function*(){yield K().call(de,_,A),de.localCache[_]=JSON.stringify(A)})()}_get(_){var A=()=>super._get,K=this;return(0,c.Z)(function*(){const de=yield A().call(K,_);return K.localCache[_]=JSON.stringify(de),de})()}_remove(_){var A=()=>super._remove,K=this;return(0,c.Z)(function*(){yield A().call(K,_),delete K.localCache[_]})()}}return I.type="LOCAL",I})(),ro=(()=>{class I extends nl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,A){}_removeListener(_,A){}}return I.type="SESSION",I})();let bu=(()=>{class I{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const A=this.receivers.find(de=>de.isListeningto(_));if(A)return A;const K=new I(_);return this.receivers.push(K),K}isListeningto(_){return this.eventTarget===_}handleEvent(_){var A=this;return(0,c.Z)(function*(){const K=_,{eventId:de,eventType:ht,data:Ht}=K.data,sn=A.handlersMap[ht];if(!(null==sn?void 0:sn.size))return;K.ports[0].postMessage({status:"ack",eventId:de,eventType:ht});const wn=Array.from(sn).map(function(){var qn=(0,c.Z)(function*(_s){return _s(K.origin,Ht)});return function(_s){return qn.apply(this,arguments)}}()),Wn=yield function Fo(I){return Promise.all(I.map(function(){var g=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(A){return{fulfilled:!1,reason:A}}});return function(_){return g.apply(this,arguments)}}()))}(wn);K.ports[0].postMessage({status:"done",eventId:de,eventType:ht,response:Wn})})()}_subscribe(_,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(A)}_unsubscribe(_,A){this.handlersMap[_]&&A&&this.handlersMap[_].delete(A),(!A||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function Io(I="",g=10){let _="";for(let A=0;A<g;A++)_+=Math.floor(10*Math.random());return I+_}class Cu{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,A=50){var K=this;return(0,c.Z)(function*(){const de="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!de)throw new Error("connection_unavailable");let ht,Ht;return new Promise((sn,wn)=>{const Wn=Io("",20);de.port1.start();const qn=setTimeout(()=>{wn(new Error("unsupported_event"))},A);Ht={messageChannel:de,onMessage(_s){const da=_s;if(da.data.eventId===Wn)switch(da.data.status){case"ack":clearTimeout(qn),ht=setTimeout(()=>{wn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ht),sn(da.data.response);break;default:clearTimeout(qn),clearTimeout(ht),wn(new Error("invalid_response"))}}},K.handlers.add(Ht),de.port1.addEventListener("message",Ht.onMessage),K.target.postMessage({eventType:g,eventId:Wn,data:_},[de.port2])}).finally(()=>{Ht&&K.removeMessageHandler(Ht)})})()}}function Ci(){return window}function ya(){return void 0!==Ci().WorkerGlobalScope&&"function"==typeof Ci().importScripts}function Ko(){return(Ko=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(I){return null}})).apply(this,arguments)}const Tu="firebaseLocalStorageDb",ki="firebaseLocalStorage",oa="fbase_key";class M{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function S(I,g){return I.transaction([ki],g?"readwrite":"readonly").objectStore(ki)}function $(){const I=indexedDB.open(Tu,1);return new Promise((g,_)=>{I.addEventListener("error",()=>{_(I.error)}),I.addEventListener("upgradeneeded",()=>{const A=I.result;try{A.createObjectStore(ki,{keyPath:oa})}catch(K){_(K)}}),I.addEventListener("success",(0,c.Z)(function*(){const A=I.result;A.objectStoreNames.contains(ki)?g(A):(A.close(),yield function D(){const I=indexedDB.deleteDatabase(Tu);return new M(I).toPromise()}(),g(yield $()))}))})}function j(I,g,_){return W.apply(this,arguments)}function W(){return(W=(0,c.Z)(function*(I,g,_){const A=S(I,!0).put({[oa]:g,value:_});return new M(A).toPromise()})).apply(this,arguments)}function He(){return(He=(0,c.Z)(function*(I,g){const _=S(I,!1).get(g),A=yield new M(_).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function Ut(I,g){const _=S(I,!0).delete(g);return new M(_).toPromise()}const Wr=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield $()),_.db})()}_withRetries(_){var A=this;return(0,c.Z)(function*(){let K=0;for(;;)try{const de=yield A._openDb();return yield _(de)}catch(de){if(K++>3)throw de;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return ya()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=bu._getInstance(function Du(){return ya()?self:null}()),_.receiver._subscribe("keyChanged",function(){var A=(0,c.Z)(function*(K,de){return{keyProcessed:(yield _._poll()).includes(de.key)}});return function(K,de){return A.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var A=(0,c.Z)(function*(K,de){return["keyChanged"]});return function(K,de){return A.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var A,K;if(_.activeServiceWorker=yield function Ts(){return Ko.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Cu(_.activeServiceWorker);const de=yield _.sender._send("ping",{},800);!de||(null===(A=de[0])||void 0===A?void 0:A.fulfilled)&&(null===(K=de[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var A=this;return(0,c.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function bo(){var I;return(null===(I=null==navigator?void 0:navigator.serviceWorker)||void 0===I?void 0:I.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:_},A.serviceWorkerReceiverAvailable?800:50)}catch(K){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield $();return yield j(_,sa,"1"),yield Ut(_,sa),!0}catch(_){}return!1})()}_withPendingWrite(_){var A=this;return(0,c.Z)(function*(){A.pendingWrites++;try{yield _()}finally{A.pendingWrites--}})()}_set(_,A){var K=this;return(0,c.Z)(function*(){return K._withPendingWrite((0,c.Z)(function*(){return yield K._withRetries(de=>j(de,_,A)),K.localCache[_]=A,K.notifyServiceWorker(_)}))})()}_get(_){var A=this;return(0,c.Z)(function*(){const K=yield A._withRetries(de=>function le(I,g){return He.apply(this,arguments)}(de,_));return A.localCache[_]=K,K})()}_remove(_){var A=this;return(0,c.Z)(function*(){return A._withPendingWrite((0,c.Z)(function*(){return yield A._withRetries(K=>Ut(K,_)),delete A.localCache[_],A.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const A=yield _._withRetries(ht=>{const Ht=S(ht,!1).getAll();return new M(Ht).toPromise()});if(!A)return[];if(0!==_.pendingWrites)return[];const K=[],de=new Set;for(const{fbase_key:ht,value:Ht}of A)de.add(ht),JSON.stringify(_.localCache[ht])!==JSON.stringify(Ht)&&(_.notifyListeners(ht,Ht),K.push(ht));for(const ht of Object.keys(_.localCache))_.localCache[ht]&&!de.has(ht)&&(_.notifyListeners(ht,null),K.push(ht));return K})()}notifyListeners(_,A){this.localCache[_]=A;const K=this.listeners[_];if(K)for(const de of Array.from(K))de(A)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})();function Xr(I,g){return wt(I,"POST","/v2/accounts/mfaSignIn:start",Nt(I,g))}function fl(){return(fl=(0,c.Z)(function*(I){return(yield wt(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Co(I){return new Promise((g,_)=>{const A=document.createElement("script");A.setAttribute("src",I),A.onload=g,A.onerror=K=>{const de=Ye("internal-error");de.customData=K,_(de)},A.type="text/javascript",A.charset="UTF-8",function cs(){var I,g;return null!==(g=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==g?g:document}().appendChild(A)})}function Lo(I){return`__${I}${Math.floor(1e6*Math.random())}`}const Gl=1e12;class Vi{constructor(g){this.auth=g,this.counter=Gl,this._widgets=new Map}render(g,_){const A=this.counter;return this._widgets.set(A,new ar(g,this.auth.name,_||{})),this.counter++,A}reset(g){var _;const A=g||Gl;null===(_=this._widgets.get(A))||void 0===_||_.delete(),this._widgets.delete(A)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Gl))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,c.Z)(function*(){var A;return null===(A=_._widgets.get(g||Gl))||void 0===A||A.execute(),""})()}}class ar{constructor(g,_,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof g?document.getElementById(g):g;ee(K,"argument-error",{appName:_}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function va(I){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<I;A++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _i=Lo("rcb"),zl=new It(3e4,6e4);class ri{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ci().grecaptcha}load(g,_=""){return ee(function Xu(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Ci().grecaptcha):new Promise((A,K)=>{const de=Ci().setTimeout(()=>{K(Ye(g,"network-request-failed"))},zl.get());Ci()[_i]=()=>{Ci().clearTimeout(de),delete Ci()[_i];const Ht=Ci().grecaptcha;if(!Ht)return void K(Ye(g,"internal-error"));const sn=Ht.render;Ht.render=(wn,Wn)=>{const qn=sn(wn,Wn);return this.counter++,qn},this.hostLanguage=_,A(Ht)},Co(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:_i,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(de),K(Ye(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Ci().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hi{load(g){return(0,c.Z)(function*(){return new Vi(g)})()}clearedOneInstance(){}}const il="recaptcha",wh={theme:"light",type:"image"};class Fr{constructor(g,_=Object.assign({},wh),A){this.parameters=_,this.type=il,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(A),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof g?document.getElementById(g):g;ee(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hi:new ri,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),A=g.getAssertedRecaptcha();return A.getResponse(_)||new Promise(de=>{const ht=Ht=>{!Ht||(g.tokenChangeListeners.delete(ht),de(Ht))};g.tokenChangeListeners.add(ht),g.isInvisible&&A.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(A=>A(_)),"function"==typeof g)g(_);else if("string"==typeof g){const A=Ci()[g];"function"==typeof A&&A(_)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const A=document.createElement("div");_.appendChild(A),_=A}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){ee(xt()&&!ya(),g.auth,"internal-error"),yield function Qu(){let I=null;return new Promise(g=>{"complete"!==document.readyState?(I=()=>g(),window.addEventListener("load",I)):g()}).catch(g=>{throw I&&window.removeEventListener("load",I),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function qo(I){return fl.apply(this,arguments)}(g.auth);ee(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vi{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Ai._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function xi(){return(xi=(0,c.Z)(function*(I,g,_){const A=cn(I),K=yield ds(A,g,(0,q.m9)(_));return new vi(K,de=>Pn(A,de))})).apply(this,arguments)}function pl(){return(pl=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I);yield U(!1,A,"phone");const K=yield ds(A.auth,g,(0,q.m9)(_));return new vi(K,de=>ir(A,de))})).apply(this,arguments)}function gs(){return(gs=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I),K=yield ds(A.auth,g,(0,q.m9)(_));return new vi(K,de=>di(A,de))})).apply(this,arguments)}function ds(I,g,_){return so.apply(this,arguments)}function so(){return(so=(0,c.Z)(function*(I,g,_){var A;const K=yield _.verify();try{let de;if(ee("string"==typeof K,I,"argument-error"),ee(_.type===il,I,"argument-error"),de="string"==typeof g?{phoneNumber:g}:g,"session"in de){const ht=de.session;if("phoneNumber"in de)return ee("enroll"===ht.type,I,"internal-error"),(yield jl(I,{idToken:ht.credential,phoneEnrollmentInfo:{phoneNumber:de.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{ee("signin"===ht.type,I,"internal-error");const Ht=(null===(A=de.multiFactorHint)||void 0===A?void 0:A.uid)||de.multiFactorUid;return ee(Ht,I,"missing-multi-factor-info"),(yield Xr(I,{mfaPendingCredential:ht.credential,mfaEnrollmentId:Ht,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ht}=yield Dt(I,{phoneNumber:de.phoneNumber,recaptchaToken:K});return ht}}finally{_._reset()}})).apply(this,arguments)}function la(){return(la=(0,c.Z)(function*(I,g){yield V((0,q.m9)(I),g)})).apply(this,arguments)}let un=(()=>{class I{constructor(_){this.providerId=I.PROVIDER_ID,this.auth=cn(_)}verifyPhoneNumber(_,A){return ds(this.auth,_,(0,q.m9)(A))}static credential(_,A){return Ai._fromVerification(_,A)}static credentialFromResult(_){return I.credentialFromTaggedObject(_)}static credentialFromError(_){return I.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:A,temporaryProof:K}=_;return A&&K?Ai._fromTokenResponse(A,K):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function zs(I,g){return g?ge(g):(ee(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class qi extends mi{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ci(g,this._buildIdpRequest())}_linkToIdToken(g,_){return ci(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return ci(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function ka(I){return qt(I.auth,new qi(I),I.bypassAuthState)}function Bo(I){const{auth:g,user:_}=I;return ee(_,g,"internal-error"),Be(_,new qi(I),I.bypassAuthState)}function oo(I){return ua.apply(this,arguments)}function ua(){return(ua=(0,c.Z)(function*(I){const{auth:g,user:_}=I;return ee(_,g,"internal-error"),V(_,new qi(I),I.bypassAuthState)})).apply(this,arguments)}class gl{constructor(g,_,A,K,de=!1){this.auth=g,this.resolver=A,this.user=K,this.bypassAuthState=de,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,c.Z)(function*(A,K){g.pendingPromise={resolve:A,reject:K};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(de){g.reject(de)}});return function(A,K){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,c.Z)(function*(){const{urlResponse:A,sessionId:K,postBody:de,tenantId:ht,error:Ht,type:sn}=g;if(Ht)return void _.reject(Ht);const wn={auth:_.auth,requestUri:A,sessionId:K,tenantId:ht||void 0,postBody:de||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(sn)(wn))}catch(Wn){_.reject(Wn)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ka;case"linkViaPopup":case"linkViaRedirect":return oo;case"reauthViaPopup":case"reauthViaRedirect":return Bo;default:ot(this.auth,"internal-error")}}resolve(g){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wl=new It(2e3,1e4);function Ws(){return(Ws=(0,c.Z)(function*(I,g,_){const A=cn(I);$e(I,g,Pi);const K=zs(A,_);return new yl(A,"signInViaPopup",g,K).executeNotNull()})).apply(this,arguments)}function ml(){return(ml=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I);$e(A.auth,g,Pi);const K=zs(A.auth,_);return new yl(A.auth,"reauthViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}function Ea(){return(Ea=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I);$e(A.auth,g,Pi);const K=zs(A.auth,_);return new yl(A.auth,"linkViaPopup",g,K,A).executeNotNull()})).apply(this,arguments)}let yl=(()=>{class I extends gl{constructor(_,A,K,de,ht){super(_,A,de,ht),this.provider=K,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const A=yield _.execute();return ee(A,_.auth,"internal-error"),A})()}onExecution(){var _=this;return(0,c.Z)(function*(){he(1===_.filter.length,"Popup operations only handle one event");const A=Io();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],A),_.authWindow.associatedEvent=A,_.resolver._originValidation(_.auth).catch(K=>{_.reject(K)}),_.resolver._isIframeWebStorageSupported(_.auth,K=>{K||_.reject(Ye(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const _=()=>{var A,K;this.pollId=(null===(K=null===(A=this.authWindow)||void 0===A?void 0:A.window)||void 0===K?void 0:K.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Wl.get())};_()}}return I.currentPopupAction=null,I})();const Yo=new Map;class Pf extends gl{constructor(g,_,A=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,A),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,c.Z)(function*(){let A=Yo.get(_.auth._key());if(!A){try{const de=(yield function _l(I,g){return vl.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;A=()=>Promise.resolve(de)}catch(K){A=()=>Promise.reject(K)}Yo.set(_.auth._key(),A)}return _.bypassAuthState||Yo.set(_.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,A=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(A,g);if("unknown"!==g.type){if(g.eventId){const K=yield A.auth._redirectUserForId(g.eventId);if(K)return A.user=K,_().call(A,g);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function vl(){return(vl=(0,c.Z)(function*(I,g){const _=Pe(g),A=ae(I);if(!(yield A._isAvailable()))return!1;const K="true"===(yield A._get(_));return yield A._remove(_),K})).apply(this,arguments)}function sl(I,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,c.Z)(function*(I,g){return ae(I)._set(Pe(g),"true")})).apply(this,arguments)}function H(I,g){Yo.set(I._key(),g)}function ae(I){return ge(I._redirectPersistence)}function Pe(I){return rr("pendingRedirect",I.config.apiKey,I.name)}function tn(){return(tn=(0,c.Z)(function*(I,g,_){const A=cn(I);$e(I,g,Pi);const K=zs(A,_);return yield sl(K,A),K._openRedirect(A,g,"signInViaRedirect")})).apply(this,arguments)}function $n(){return($n=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I);$e(A.auth,g,Pi);const K=zs(A.auth,_);yield sl(K,A.auth);const de=yield Fa(A);return K._openRedirect(A.auth,g,"reauthViaRedirect",de)})).apply(this,arguments)}function qs(){return(qs=(0,c.Z)(function*(I,g,_){const A=(0,q.m9)(I);$e(A.auth,g,Pi);const K=zs(A.auth,_);yield U(!1,A,g.providerId),yield sl(K,A.auth);const de=yield Fa(A);return K._openRedirect(A.auth,g,"linkViaRedirect",de)})).apply(this,arguments)}function hi(){return(hi=(0,c.Z)(function*(I,g){return yield cn(I)._initializationPromise,wa(I,g,!1)})).apply(this,arguments)}function wa(I,g){return ao.apply(this,arguments)}function ao(){return(ao=(0,c.Z)(function*(I,g,_=!1){const A=cn(I),K=zs(A,g),ht=yield new Pf(A,K,_).execute();return ht&&!_&&(delete ht.user._redirectEventId,yield A._persistUserIfCurrent(ht.user),yield A._setRedirectUser(null,g)),ht})).apply(this,arguments)}function Fa(I){return Do.apply(this,arguments)}function Do(){return(Do=(0,c.Z)(function*(I){const g=Io(`${I.uid}:::`);return I._redirectEventId=g,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),g})).apply(this,arguments)}class Rd{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(g,A)&&(_=!0,this.sendToConsumer(g,A),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Vc(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zl(I);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var A;if(g.error&&!Zl(g)){const K=(null===(A=g.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";_.onError(Ye(this.auth,K))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const A=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&A}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yl(g))}saveEventToCache(g){this.cachedEventUids.add(Yl(g)),this.lastProcessedEventTime=Date.now()}}function Yl(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(g=>g).join("-")}function Zl({type:I,error:g}){return"unknown"===I&&"auth/no-auth-event"===(null==g?void 0:g.code)}function bh(I){return Od.apply(this,arguments)}function Od(){return(Od=(0,c.Z)(function*(I,g={}){return wt(I,"GET","/v1/projects",g)})).apply(this,arguments)}const ms=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ju=/^https?/;function kf(){return(kf=(0,c.Z)(function*(I){if(I.config.emulator)return;const{authorizedDomains:g}=yield bh(I);for(const _ of g)try{if(Ch(_))return}catch(A){}ot(I,"unauthorized-domain")})).apply(this,arguments)}function Ch(I){const g=_t(),{protocol:_,hostname:A}=new URL(g);if(I.startsWith("chrome-extension://")){const ht=new URL(I);return""===ht.hostname&&""===A?"chrome-extension:"===_&&I.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&ht.hostname===A}if(!Ju.test(_))return!1;if(ms.test(I))return A===I;const K=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(A)}const Xl=new It(3e4,6e4);function Dh(){const I=Ci().___jsl;if(null==I?void 0:I.H)for(const g of Object.keys(I.H))if(I.H[g].r=I.H[g].r||[],I.H[g].L=I.H[g].L||[],I.H[g].r=[...I.H[g].L],I.CP)for(let _=0;_<I.CP.length;_++)I.CP[_]=null}let Pd=null;function Ba(I){return Pd=Pd||function Rp(I){return new Promise((g,_)=>{var A,K,de;function ht(){Dh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Dh(),_(Ye(I,"network-request-failed"))},timeout:Xl.get()})}if(null===(K=null===(A=Ci().gapi)||void 0===A?void 0:A.iframes)||void 0===K?void 0:K.Iframe)g(gapi.iframes.getContext());else{if(!(null===(de=Ci().gapi)||void 0===de?void 0:de.load)){const Ht=Lo("iframefcb");return Ci()[Ht]=()=>{gapi.load?ht():_(Ye(I,"network-request-failed"))},Co(`https://apis.google.com/js/api.js?onload=${Ht}`).catch(sn=>_(sn))}ht()}}).catch(g=>{throw Pd=null,g})}(I),Pd}const Zo=new It(5e3,15e3),Nf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},El=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Op(I){const g=I.config;ee(g.authDomain,I,"auth-domain-config-required");const _=g.emulator?dt(g,"emulator/auth/iframe"):`https://${I.config.authDomain}/__/auth/iframe`,A={apiKey:g.apiKey,appName:I.name,v:Se.SDK_VERSION},K=El.get(I.config.apiHost);K&&(A.eid=K);const de=I._getFrameworks();return de.length&&(A.fw=de.join(",")),`${_}?${(0,q.xO)(A).slice(1)}`}function ec(){return ec=(0,c.Z)(function*(I){const g=yield Ba(I),_=Ci().gapi;return ee(_,I,"internal-error"),g.open({where:document.body,url:Op(I),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nf,dontclear:!0},A=>new Promise(function(){var K=(0,c.Z)(function*(de,ht){yield A.restyle({setHideOnLeave:!1});const Ht=Ye(I,"network-request-failed"),sn=Ci().setTimeout(()=>{ht(Ht)},Zo.get());function wn(){Ci().clearTimeout(sn),de(A)}A.ping(wn).then(wn,()=>{ht(Ht)})});return function(de,ht){return K.apply(this,arguments)}}()))}),ec.apply(this,arguments)}const Nd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ld{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function wl(I,g,_,A,K,de){ee(I.config.authDomain,I,"auth-domain-config-required"),ee(I.config.apiKey,I,"invalid-api-key");const ht={apiKey:I.config.apiKey,appName:I.name,authType:_,redirectUrl:A,v:Se.SDK_VERSION,eventId:K};if(g instanceof Pi){g.setDefaultLanguage(I.languageCode),ht.providerId=g.providerId||"",(0,q.xb)(g.getCustomParameters())||(ht.customParameters=JSON.stringify(g.getCustomParameters()));for(const[sn,wn]of Object.entries(de||{}))ht[sn]=wn}if(g instanceof Jr){const sn=g.getScopes().filter(wn=>""!==wn);sn.length>0&&(ht.scopes=sn.join(","))}I.tenantId&&(ht.tid=I.tenantId);const Ht=ht;for(const sn of Object.keys(Ht))void 0===Ht[sn]&&delete Ht[sn];return`${function $c({config:I}){return I.emulator?dt(I,"emulator/auth/handler"):`https://${I.authDomain}/__/auth/handler`}(I)}?${(0,q.xO)(Ht).slice(1)}`}const Th="webStorageSupport";class Rr extends class Ei{constructor(g){this.factorId=g}_process(g,_,A){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,A);case"signin":return this._finalizeSignIn(g,_.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Rr(g)}_finalizeEnroll(g,_,A){return function wo(I,g){return wt(I,"POST","/v2/accounts/mfaEnrollment:finalize",Nt(I,g))}(g,{idToken:_,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Fs(I,g){return wt(I,"POST","/v2/accounts/mfaSignIn:finalize",Nt(I,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Il=(()=>{class I{constructor(){}static assertion(_){return Rr._fromCredential(_)}}return I.FACTOR_ID="phone",I})();var Ui="@firebase/auth";class nc{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(A=>{var K;g((null===(K=A)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pr(){return window}function ol(){return(ol=(0,c.Z)(function*(I,g,_){var A;const{BuildInfo:K}=pr();he(g.sessionId,"AuthEvent did not contain a session ID");const de=yield Hc(g.sessionId),ht={};return pi()?ht.ibi=K.packageName:Hr()?ht.apn=K.packageName:ot(I,"operation-not-supported-in-this-environment"),K.displayName&&(ht.appDisplayName=K.displayName),ht.sessionId=de,wl(I,_,g.type,void 0,null!==(A=g.eventId)&&void 0!==A?A:void 0,ht)})).apply(this,arguments)}function Vd(){return(Vd=(0,c.Z)(function*(I){const{BuildInfo:g}=pr(),_={};pi()?_.iosBundleId=g.packageName:Hr()?_.androidPackageName=g.packageName:ot(I,"operation-not-supported-in-this-environment"),yield bh(I,_)})).apply(this,arguments)}function rc(){return(rc=(0,c.Z)(function*(I,g,_){const{cordova:A}=pr();let K=()=>{};try{yield new Promise((de,ht)=>{let Ht=null;function sn(){var qn;de();const _s=null===(qn=A.plugins.browsertab)||void 0===qn?void 0:qn.close;"function"==typeof _s&&_s(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function wn(){Ht||(Ht=window.setTimeout(()=>{ht(Ye(I,"redirect-cancelled-by-user"))},2e3))}function Wn(){"visible"===(null==document?void 0:document.visibilityState)&&wn()}g.addPassiveListener(sn),document.addEventListener("resume",wn,!1),Hr()&&document.addEventListener("visibilitychange",Wn,!1),K=()=>{g.removePassiveListener(sn),document.removeEventListener("resume",wn,!1),document.removeEventListener("visibilitychange",Wn,!1),Ht&&window.clearTimeout(Ht)}})}finally{K()}})).apply(this,arguments)}function Hc(I){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,c.Z)(function*(I){const g=Sh(I),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Sh(I){if(he(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(I);const g=new ArrayBuffer(I.length),_=new Uint8Array(g);for(let A=0;A<I.length;A++)_[A]=I.charCodeAt(A);return _}!function Bf(I){(0,Se._registerComponent)(new be.wA("auth",(g,{options:_})=>{const A=g.getProvider("app").getImmediate(),K=g.getProvider("heartbeat"),{apiKey:de,authDomain:ht}=A.options;return((Ht,sn)=>{ee(de&&!de.includes(":"),"invalid-api-key",{appName:Ht.name}),ee(!(null==ht?void 0:ht.includes(":")),"argument-error",{appName:Ht.name});const wn={apiKey:de,authDomain:ht,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oi(I)},Wn=new te(Ht,sn,wn);return function Xe(I,g){const _=(null==g?void 0:g.persistence)||[],A=(Array.isArray(_)?_:[_]).map(ge);(null==g?void 0:g.errorMap)&&I._updateErrorMap(g.errorMap),I._initializeWithPersistence(A,null==g?void 0:g.popupRedirectResolver)}(Wn,_),Wn})(A,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,A)=>{g.getProvider("auth-internal").initialize()})),(0,Se._registerComponent)(new be.wA("auth-internal",g=>{const _=cn(g.getProvider("auth").getImmediate());return new nc(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Se.registerVersion)(Ui,"0.20.2",function $a(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(I)),(0,Se.registerVersion)(Ui,"0.20.2","esm2017")}("Browser");class Uf extends Rd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,c.Z)(function*(){yield g.initPromise})()}}function Ah(I){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,c.Z)(function*(I){const g=yield Ga()._get(sc(I));return g&&(yield Ga()._remove(sc(I))),g})).apply(this,arguments)}function Or(){const I=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const A=Math.floor(Math.random()*g.length);I.push(g.charAt(A))}return I.join("")}function Ga(){return ge(no)}function sc(I){return rr("authEvent",I.config.apiKey,I.name)}function Gi(I){if(!(null==I?void 0:I.includes("?")))return{};const[g,..._]=I.split("?");return(0,q.zd)(_.join("?"))}function Xo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ye("no-auth-event")}}function oc(){var I;return(null===(I=null==self?void 0:self.location)||void 0===I?void 0:I.protocol)||null}function ac(I=(0,q.z$)()){return!("file:"!==oc()&&"ionic:"!==oc()&&"capacitor:"!==oc()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ud(){try{const I=self.localStorage,g=Io();if(I)return I.setItem(g,"1"),I.removeItem(g),!function Kc(I=(0,q.z$)()){return function Bs(){return(0,q.w1)()&&11===(null==document?void 0:document.documentMode)}()||function xu(I=(0,q.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,q.hl)()}catch(I){return Ar()&&(0,q.hl)()}return!1}function Ar(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function tu(){return(function Mi(){return"http:"===oc()||"https:"===oc()}()||(0,q.ru)()||ac())&&!function Cl(){return(0,q.b$)()||(0,q.UG)()}()&&Ud()&&!Ar()}function $d(){return ac()&&"undefined"!=typeof document}function lc(){return(lc=(0,c.Z)(function*(){return!!$d()&&new Promise(I=>{const g=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),I(!0)})})})).apply(this,arguments)}const Rs={LOCAL:"local",NONE:"none",SESSION:"session"},al=ee,yr="persistence";function Ru(I){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(I){yield I._initializationPromise;const g=Yc(),_=rr(yr,I.config.apiKey,I.name);g&&g.setItem(_,I._getPersistence())})).apply(this,arguments)}function Yc(){var I;try{return(null===(I=function Mu(){return"undefined"!=typeof window?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch(g){return null}}const Zc=ee;class Os{constructor(){this.browserResolver=ge(class Lf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=wa,this._overrideRedirectResult=H}_openPopup(g,_,A,K){var de=this;return(0,c.Z)(function*(){var ht;he(null===(ht=de.eventManagers[g._key()])||void 0===ht?void 0:ht.manager,"_initialize() not called before _openPopup()");const Ht=wl(g,_,A,_t(),K);return function tc(I,g,_,A=500,K=600){const de=Math.max((window.screen.availHeight-K)/2,0).toString(),ht=Math.max((window.screen.availWidth-A)/2,0).toString();let Ht="";const sn=Object.assign(Object.assign({},Nd),{width:A.toString(),height:K.toString(),top:de,left:ht}),wn=(0,q.z$)().toLowerCase();_&&(Ht=wi(wn)?"_blank":_),Gr(wn)&&(g=g||"http://localhost",sn.scrollbars="yes");const Wn=Object.entries(sn).reduce((_s,[da,Jc])=>`${_s}${da}=${Jc},`,"");if(function gi(I=(0,q.z$)()){var g;return pi(I)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(wn)&&"_self"!==Ht)return function Ff(I,g){const _=document.createElement("a");_.href=I,_.target=g;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(A)}(g||"",Ht),new Ld(null);const qn=window.open(g||"",Ht,Wn);ee(qn,I,"popup-blocked");try{qn.focus()}catch(_s){}return new Ld(qn)}(g,Ht,Io())})()}_openRedirect(g,_,A,K){var de=this;return(0,c.Z)(function*(){return yield de._originValidation(g),function rl(I){Ci().location.href=I}(wl(g,_,A,_t(),K)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:K,promise:de}=this.eventManagers[_];return K?Promise.resolve(K):(he(de,"If manager is not set, promise should be"),de)}const A=this.initAndGetManager(g);return this.eventManagers[_]={promise:A},A.catch(()=>{delete this.eventManagers[_]}),A}initAndGetManager(g){var _=this;return(0,c.Z)(function*(){const A=yield function Va(I){return ec.apply(this,arguments)}(g),K=new Rd(g);return A.register("authEvent",de=>(ee(null==de?void 0:de.authEvent,g,"invalid-auth-event"),{status:K.onEvent(de.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:K},_.iframes[g._key()]=A,K})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Th,{type:Th},K=>{var de;const ht=null===(de=null==K?void 0:K[0])||void 0===de?void 0:de[Th];void 0!==ht&&_(!!ht),ot(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Mp(I){return kf.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Sr()||Bn()||pi()}}),this.cordovaResolver=ge(class eu{constructor(){this._redirectPersistence=ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wa,this._overrideRedirectResult=H}_initialize(g){var _=this;return(0,c.Z)(function*(){const A=g._key();let K=_.eventManagers.get(A);return K||(K=new Uf(g),_.eventManagers.set(A,K),_.attachCallbackListeners(g,K)),K})()}_openPopup(g){ot(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,A,K){var de=this;return(0,c.Z)(function*(){!function bl(I){var g,_,A,K,de,ht,Ht,sn,wn,Wn;const qn=pr();ee("function"==typeof(null===(g=null==qn?void 0:qn.universalLinks)||void 0===g?void 0:g.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(_=null==qn?void 0:qn.BuildInfo)||void 0===_?void 0:_.packageName),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(de=null===(K=null===(A=null==qn?void 0:qn.cordova)||void 0===A?void 0:A.plugins)||void 0===K?void 0:K.browsertab)||void 0===de?void 0:de.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(sn=null===(Ht=null===(ht=null==qn?void 0:qn.cordova)||void 0===ht?void 0:ht.plugins)||void 0===Ht?void 0:Ht.browsertab)||void 0===sn?void 0:sn.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Wn=null===(wn=null==qn?void 0:qn.cordova)||void 0===wn?void 0:wn.InAppBrowser)||void 0===Wn?void 0:Wn.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const ht=yield de._initialize(g);yield ht.initialized(),ht.resetRedirect(),function F(){Yo.clear()}(),yield de._originValidation(g);const Ht=function ic(I,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:Or(),postBody:null,tenantId:I.tenantId,error:Ye(I,"no-auth-event")}}(g,A,K);yield function Au(I,g){return Ga()._set(sc(I),g)}(g,Ht);const sn=yield function ja(I,g,_){return ol.apply(this,arguments)}(g,Ht,_),wn=yield function Vf(I){const{cordova:g}=pr();return new Promise(_=>{g.plugins.browsertab.isAvailable(A=>{let K=null;A?g.plugins.browsertab.openUrl(I):K=g.InAppBrowser.open(I,function fs(I=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}()?"_blank":"_system","location=yes"),_(K)})})}(sn);return function Ys(I,g,_){return rc.apply(this,arguments)}(g,ht,wn)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function mo(I){return Vd.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:A,handleOpenURL:K,BuildInfo:de}=pr(),ht=setTimeout((0,c.Z)(function*(){yield Ah(g),_.onEvent(Xo())}),500),Ht=function(){var Wn=(0,c.Z)(function*(qn){clearTimeout(ht);const _s=yield Ah(g);let da=null;_s&&(null==qn?void 0:qn.url)&&(da=function Jl(I,g){var _,A;const K=function Pr(I){const g=Gi(I),_=g.link?decodeURIComponent(g.link):void 0,A=Gi(_).link,K=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Gi(K).link||K||A||_||I}(g);if(K.includes("/__/auth/callback")){const de=Gi(K),ht=de.firebaseError?function ys(I){try{return JSON.parse(I)}catch(g){return null}}(decodeURIComponent(de.firebaseError)):null,Ht=null===(A=null===(_=null==ht?void 0:ht.code)||void 0===_?void 0:_.split("auth/"))||void 0===A?void 0:A[1],sn=Ht?Ye(Ht):null;return sn?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:sn,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:K,postBody:null}}return null}(_s,qn.url)),_.onEvent(da||Xo())});return function(_s){return Wn.apply(this,arguments)}}();void 0!==A&&"function"==typeof A.subscribe&&A.subscribe(null,Ht);const sn=K,wn=`${de.packageName.toLowerCase()}://`;pr().handleOpenURL=function(){var Wn=(0,c.Z)(function*(qn){if(qn.toLowerCase().startsWith(wn)&&Ht({url:qn}),"function"==typeof sn)try{sn(qn)}catch(_s){console.error(_s)}});return function(qn){return Wn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ro,this._completeRedirectFn=wa,this._overrideRedirectResult=H}_initialize(g){var _=this;return(0,c.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,A,K){var de=this;return(0,c.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openPopup(g,_,A,K)})()}_openRedirect(g,_,A,K){var de=this;return(0,c.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openRedirect(g,_,A,K)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return $d()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,c.Z)(function*(){if(g.underlyingResolver)return;const _=yield function qc(){return lc.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function Dl(I){return I.unwrap()}function Tl(I){return Oh(I)}function Oh(I){const{_tokenResponse:g}=I instanceof q.ZR?I.customData:I;if(!g)return null;if(!(I instanceof q.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return un.credentialFromResult(I);const _=g.providerId;if(!_||"password"===_)return null;let A;switch(_){case"google.com":A=Is;break;case"facebook.com":A=ws;break;case"github.com":A=Go;break;case"twitter.com":A=eo;break;default:const{oauthIdToken:K,oauthAccessToken:de,oauthTokenSecret:ht,pendingToken:Ht,nonce:sn}=g;return de||ht||K||Ht?Ht?_.startsWith("saml.")?os._create(_,Ht):Ge._fromParams({providerId:_,signInMethod:_,pendingToken:Ht,idToken:K,accessToken:de}):new ss(_).credential({idToken:K,accessToken:de,rawNonce:sn}):null}return I instanceof q.ZR?A.credentialFromError(I):A.credentialFromResult(I)}function So(I,g){return g.catch(_=>{throw _ instanceof q.ZR&&function Rh(I,g){var _;const A=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new za(I,function ns(I,g){var _;const A=(0,q.m9)(I),K=g;return ee(g.customData.operationType,A,"argument-error"),ee(null===(_=K.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,A,"argument-error"),us._fromError(A,K)}(I,g));else if(A){const K=Oh(g),de=g;K&&(de.credential=K,de.tenantId=A.tenantId||void 0,de.email=A.email||void 0,de.phoneNumber=A.phoneNumber||void 0)}}(I,_),_}).then(_=>{const K=_.user;return{operationType:_.operationType,credential:Tl(_),additionalUserInfo:No(_),user:Vo.getOrCreate(K)}})}function Hd(I,g){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,c.Z)(function*(I,g){const _=yield g;return{verificationId:_.verificationId,confirm:A=>So(I,_.confirm(A))}})).apply(this,arguments)}class za{constructor(g,_){this.resolver=_,this.auth=function jd(I){return I.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return So(Dl(this.auth),this.resolver.resolveSignIn(g))}}class Vo{constructor(g){this._delegate=g,this.multiFactor=function tl(I){const g=(0,q.m9)(I);return Pa.has(g)||Pa.set(g,ia._fromUser(g)),Pa.get(g)}(g)}static getOrCreate(g){return Vo.USER_MAP.has(g)||Vo.USER_MAP.set(g,new Vo(g)),Vo.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,c.Z)(function*(){return So(_.auth,ir(_._delegate,g))})()}linkWithPhoneNumber(g,_){var A=this;return(0,c.Z)(function*(){return Hd(A.auth,function Ih(I,g,_){return pl.apply(this,arguments)}(A._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,c.Z)(function*(){return So(_.auth,function ql(I,g,_){return Ea.apply(this,arguments)}(_._delegate,g,Os))})()}linkWithRedirect(g){var _=this;return(0,c.Z)(function*(){return yield Ru(cn(_.auth)),function Kr(I,g,_){return function Rn(I,g,_){return qs.apply(this,arguments)}(I,g,_)}(_._delegate,g,Os)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,c.Z)(function*(){return So(_.auth,di(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return Hd(this.auth,function io(I,g,_){return gs.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return So(this.auth,function Na(I,g,_){return ml.apply(this,arguments)}(this._delegate,g,Os))}reauthenticateWithRedirect(g){var _=this;return(0,c.Z)(function*(){return yield Ru(cn(_.auth)),function dn(I,g,_){return function mr(I,g,_){return $n.apply(this,arguments)}(I,g,_)}(_._delegate,g,Os)})()}sendEmailVerification(g){return function to(I,g){return ni.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,c.Z)(function*(){return yield function Cs(I,g){return _r.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Vl(I,g){return ko((0,q.m9)(I),g,null)}(this._delegate,g)}updatePassword(g){return function fa(I,g){return ko((0,q.m9)(I),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function aa(I,g){return la.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function vu(I,g){return Ma.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function Xa(I,g,_){return Bl.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vo.USER_MAP=new WeakMap;const Sl=ee;let Ph=(()=>{class I{constructor(_,A){if(this.app=_,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=_.options;Sl(K,"invalid-api-key",{appName:_.name}),Sl(K,"invalid-api-key",{appName:_.name});const de="undefined"!=typeof window?Os:void 0;this._delegate=A.initialize({options:{persistence:uc(K,_.name),popupRedirectResolver:de}}),this._delegate._updateErrorMap(tt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,A){!function Zr(I,g,_){const A=cn(I);ee(A._canInitEmulator,A,"emulator-config-failed"),ee(/^https?:\/\//.test(g),A,"invalid-emulator-scheme");const K=!!(null==_?void 0:_.disableWarnings),de=ai(g),{host:ht,port:Ht}=function ur(I){const g=ai(I),_=/(\/\/)?([^?#/]+)/.exec(I.substr(g.length));if(!_)return{host:"",port:null};const A=_[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(A);if(K){const de=K[1];return{host:de,port:or(A.substr(de.length+1))}}{const[de,ht]=A.split(":");return{host:de,port:or(ht)}}}(g);A.config.emulator={url:`${de}//${ht}${null===Ht?"":`:${Ht}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:ht,port:Ht,protocol:de.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function Ir(){function I(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}(this._delegate,_,A)}applyActionCode(_){return function Y(I,g){return Tt.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return _n(this._delegate,_)}confirmPasswordReset(_,A){return function L(I,g,_){return N.apply(this,arguments)}(this._delegate,_,A)}createUserWithEmailAndPassword(_,A){var K=this;return(0,c.Z)(function*(){return So(K._delegate,function B(I,g,_){return ce.apply(this,arguments)}(K._delegate,_,A))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Wi(I,g){return ji.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function er(I,g){const _=Qs.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,c.Z)(function*(){Sl(tu(),_._delegate,"operation-not-supported-in-this-environment");const A=yield function si(I,g){return hi.apply(this,arguments)}(_._delegate,Os);return A?So(_._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function xh(I,g){cn(I)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,A,K){const{next:de,error:ht,complete:Ht}=Xc(_,A,K);return this._delegate.onAuthStateChanged(de,ht,Ht)}onIdTokenChanged(_,A,K){const{next:de,error:ht,complete:Ht}=Xc(_,A,K);return this._delegate.onIdTokenChanged(de,ht,Ht)}sendSignInLinkToEmail(_,A){return function an(I,g,_){return Mn.apply(this,arguments)}(this._delegate,_,A)}sendPasswordResetEmail(_,A){return function Gs(I,g,_){return z.apply(this,arguments)}(this._delegate,_,A||void 0)}setPersistence(_){var A=this;return(0,c.Z)(function*(){let K;switch(function Mh(I,g){al(Object.values(Rs).includes(g),I,"invalid-persistence-type"),(0,q.b$)()?al(g!==Rs.SESSION,I,"unsupported-persistence-type"):(0,q.UG)()?al(g===Rs.NONE,I,"unsupported-persistence-type"):Ar()?al(g===Rs.NONE||g===Rs.LOCAL&&(0,q.hl)(),I,"unsupported-persistence-type"):al(g===Rs.NONE||Ud(),I,"unsupported-persistence-type")}(A._delegate,_),_){case Rs.SESSION:K=ro;break;case Rs.LOCAL:K=(yield ge(Wr)._isAvailable())?Wr:no;break;case Rs.NONE:K=En;break;default:return ot("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return So(this._delegate,function Qi(I){return Oo.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return So(this._delegate,Pn(this._delegate,_))}signInWithCustomToken(_){return So(this._delegate,function es(I,g){return Tn.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,A){return So(this._delegate,function Pt(I,g,_){return Pn((0,q.m9)(I),Ho.credential(g,_))}(this._delegate,_,A))}signInWithEmailLink(_,A){return So(this._delegate,function $r(I,g,_){return tr.apply(this,arguments)}(this._delegate,_,A))}signInWithPhoneNumber(_,A){return Hd(this._delegate,function ii(I,g,_){return xi.apply(this,arguments)}(this._delegate,_,A))}signInWithPopup(_){var A=this;return(0,c.Z)(function*(){return Sl(tu(),A._delegate,"operation-not-supported-in-this-environment"),So(A._delegate,function Kl(I,g,_){return Ws.apply(this,arguments)}(A._delegate,_,Os))})()}signInWithRedirect(_){var A=this;return(0,c.Z)(function*(){return Sl(tu(),A._delegate,"operation-not-supported-in-this-environment"),yield Ru(A._delegate),function yt(I,g,_){return function Ot(I,g,_){return tn.apply(this,arguments)}(I,g,_)}(A._delegate,_,Os)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function G(I,g){return w.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=Rs,I})();function Xc(I,g,_){let A=I;"function"!=typeof I&&({next:A,error:g,complete:_}=I);const K=A;return{next:ht=>K(ht&&Vo.getOrCreate(ht)),error:g,complete:_}}function uc(I,g){const _=function zi(I,g){const _=Yc();if(!_)return[];const A=rr(yr,I,g);switch(_.getItem(A)){case Rs.NONE:return[En];case Rs.LOCAL:return[Wr,ro];case Rs.SESSION:return[ro];default:return[]}}(I,g);if("undefined"!=typeof self&&!_.includes(Wr)&&_.push(Wr),"undefined"!=typeof window)for(const A of[no,ro])_.includes(A)||_.push(A);return _.includes(En)||_.push(En),_}class kh{constructor(){this.providerId="phone",this._delegate=new un(Dl(J.Z.auth()))}static credential(g,_){return un.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}kh.PHONE_SIGN_IN_METHOD=un.PHONE_SIGN_IN_METHOD,kh.PROVIDER_ID=un.PROVIDER_ID;const Qc=ee;class kp{constructor(g,_,A=J.Z.app()){var K;Qc(null===(K=A.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Fr(g,_,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Uo(I){I.INTERNAL.registerComponent(new be.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),A=g.getProvider("auth");return new Ph(_,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ho,FacebookAuthProvider:ws,GithubAuthProvider:Go,GoogleAuthProvider:Is,OAuthProvider:ss,SAMLAuthProvider:Bi,PhoneAuthProvider:kh,PhoneMultiFactorGenerator:Il,RecaptchaVerifier:kp,TwitterAuthProvider:eo,Auth:Ph,AuthCredential:mi,Error:q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.2.15")}(J.Z)},1135:(Xt,ut,P)=>{"use strict";P.d(ut,{X:()=>J});var c=P(7579);class J extends c.x{constructor(Se){super(),this._value=Se}get value(){return this.getValue()}_subscribe(Se){const Ae=super._subscribe(Se);return!Ae.closed&&Se.next(this._value),Ae}getValue(){const{hasError:Se,thrownError:Ae,_value:Ee}=this;if(Se)throw Ae;return this._throwIfClosed(),Ee}next(Se){super.next(this._value=Se)}}},8306:(Xt,ut,P)=>{"use strict";P.d(ut,{y:()=>pe});var c=P(930),J=P(727),q=P(8822),Se=P(4671);var be=P(2416),Re=P(576),ze=P(2806);let pe=(()=>{class Ue{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const De=new Ue;return De.source=this,De.operator=Le,De}subscribe(Le,De,ke){const Ce=function Oe(Ue){return Ue&&Ue instanceof c.Lv||function Me(Ue){return Ue&&(0,Re.m)(Ue.next)&&(0,Re.m)(Ue.error)&&(0,Re.m)(Ue.complete)}(Ue)&&(0,J.Nn)(Ue)}(Le)?Le:new c.Hp(Le,De,ke);return(0,ze.x)(()=>{const{operator:nt,source:ot}=this;Ce.add(nt?nt.call(Ce,ot):ot?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Le){try{return this._subscribe(Le)}catch(De){Le.error(De)}}forEach(Le,De){return new(De=ye(De))((ke,Ce)=>{const nt=new c.Hp({next:ot=>{try{Le(ot)}catch(Ye){Ce(Ye),nt.unsubscribe()}},error:Ce,complete:ke});this.subscribe(nt)})}_subscribe(Le){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(Le)}[q.L](){return this}pipe(...Le){return function Ee(Ue){return 0===Ue.length?Se.y:1===Ue.length?Ue[0]:function(Le){return Ue.reduce((De,ke)=>ke(De),Le)}}(Le)(this)}toPromise(Le){return new(Le=ye(Le))((De,ke)=>{let Ce;this.subscribe(nt=>Ce=nt,nt=>ke(nt),()=>De(Ce))})}}return Ue.create=tt=>new Ue(tt),Ue})();function ye(Ue){var tt;return null!==(tt=null!=Ue?Ue:be.v.Promise)&&void 0!==tt?tt:Promise}},7579:(Xt,ut,P)=>{"use strict";P.d(ut,{x:()=>be});var c=P(8306),J=P(727);const Se=(0,P(3888).d)(ze=>function(){ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=P(8737),Ee=P(2806);let be=(()=>{class ze extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ye){const Me=new Re(this,this);return Me.operator=ye,Me}_throwIfClosed(){if(this.closed)throw new Se}next(ye){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Me of this.currentObservers)Me.next(ye)}})}error(ye){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ye;const{observers:Me}=this;for(;Me.length;)Me.shift().error(ye)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ye}=this;for(;ye.length;)ye.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ye;return(null===(ye=this.observers)||void 0===ye?void 0:ye.length)>0}_trySubscribe(ye){return this._throwIfClosed(),super._trySubscribe(ye)}_subscribe(ye){return this._throwIfClosed(),this._checkFinalizedStatuses(ye),this._innerSubscribe(ye)}_innerSubscribe(ye){const{hasError:Me,isStopped:Oe,observers:Ue}=this;return Me||Oe?J.Lc:(this.currentObservers=null,Ue.push(ye),new J.w0(()=>{this.currentObservers=null,(0,Ae.P)(Ue,ye)}))}_checkFinalizedStatuses(ye){const{hasError:Me,thrownError:Oe,isStopped:Ue}=this;Me?ye.error(Oe):Ue&&ye.complete()}asObservable(){const ye=new c.y;return ye.source=this,ye}}return ze.create=(pe,ye)=>new Re(pe,ye),ze})();class Re extends be{constructor(pe,ye){super(),this.destination=pe,this.source=ye}next(pe){var ye,Me;null===(Me=null===(ye=this.destination)||void 0===ye?void 0:ye.next)||void 0===Me||Me.call(ye,pe)}error(pe){var ye,Me;null===(Me=null===(ye=this.destination)||void 0===ye?void 0:ye.error)||void 0===Me||Me.call(ye,pe)}complete(){var pe,ye;null===(ye=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===ye||ye.call(pe)}_subscribe(pe){var ye,Me;return null!==(Me=null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(pe))&&void 0!==Me?Me:J.Lc}}},930:(Xt,ut,P)=>{"use strict";P.d(ut,{Hp:()=>Le,Lv:()=>Me});var c=P(576),J=P(727),q=P(2416),Se=P(7849),Ae=P(5032);const Ee=ze("C",void 0,void 0);function ze(ot,Ye,We){return{kind:ot,value:Ye,error:We}}var pe=P(3410),ye=P(2806);class Me extends J.w0{constructor(Ye){super(),this.isStopped=!1,Ye?(this.destination=Ye,(0,J.Nn)(Ye)&&Ye.add(this)):this.destination=nt}static create(Ye,We,$e){return new Le(Ye,We,$e)}next(Ye){this.isStopped?Ce(function Re(ot){return ze("N",ot,void 0)}(Ye),this):this._next(Ye)}error(Ye){this.isStopped?Ce(function be(ot){return ze("E",void 0,ot)}(Ye),this):(this.isStopped=!0,this._error(Ye))}complete(){this.isStopped?Ce(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ye){this.destination.next(Ye)}_error(Ye){try{this.destination.error(Ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Ue(ot,Ye){return Oe.call(ot,Ye)}class tt{constructor(Ye){this.partialObserver=Ye}next(Ye){const{partialObserver:We}=this;if(We.next)try{We.next(Ye)}catch($e){De($e)}}error(Ye){const{partialObserver:We}=this;if(We.error)try{We.error(Ye)}catch($e){De($e)}else De(Ye)}complete(){const{partialObserver:Ye}=this;if(Ye.complete)try{Ye.complete()}catch(We){De(We)}}}class Le extends Me{constructor(Ye,We,$e){let Ke;if(super(),(0,c.m)(Ye)||!Ye)Ke={next:null!=Ye?Ye:void 0,error:null!=We?We:void 0,complete:null!=$e?$e:void 0};else{let ee;this&&q.v.useDeprecatedNextContext?(ee=Object.create(Ye),ee.unsubscribe=()=>this.unsubscribe(),Ke={next:Ye.next&&Ue(Ye.next,ee),error:Ye.error&&Ue(Ye.error,ee),complete:Ye.complete&&Ue(Ye.complete,ee)}):Ke=Ye}this.destination=new tt(Ke)}}function De(ot){q.v.useDeprecatedSynchronousErrorHandling?(0,ye.O)(ot):(0,Se.h)(ot)}function Ce(ot,Ye){const{onStoppedNotification:We}=q.v;We&&pe.z.setTimeout(()=>We(ot,Ye))}const nt={closed:!0,next:Ae.Z,error:function ke(ot){throw ot},complete:Ae.Z}},727:(Xt,ut,P)=>{"use strict";P.d(ut,{Lc:()=>Ee,w0:()=>Ae,Nn:()=>be});var c=P(576);const q=(0,P(3888).d)(ze=>function(ye){ze(this),this.message=ye?`${ye.length} errors occurred during unsubscription:\n${ye.map((Me,Oe)=>`${Oe+1}) ${Me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ye});var Se=P(8737);class Ae{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:ye}=this;if(ye)if(this._parentage=null,Array.isArray(ye))for(const Ue of ye)Ue.remove(this);else ye.remove(this);const{initialTeardown:Me}=this;if((0,c.m)(Me))try{Me()}catch(Ue){pe=Ue instanceof q?Ue.errors:[Ue]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const Ue of Oe)try{Re(Ue)}catch(tt){pe=null!=pe?pe:[],tt instanceof q?pe=[...pe,...tt.errors]:pe.push(tt)}}if(pe)throw new q(pe)}}add(pe){var ye;if(pe&&pe!==this)if(this.closed)Re(pe);else{if(pe instanceof Ae){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(ye=this._finalizers)&&void 0!==ye?ye:[]).push(pe)}}_hasParent(pe){const{_parentage:ye}=this;return ye===pe||Array.isArray(ye)&&ye.includes(pe)}_addParent(pe){const{_parentage:ye}=this;this._parentage=Array.isArray(ye)?(ye.push(pe),ye):ye?[ye,pe]:pe}_removeParent(pe){const{_parentage:ye}=this;ye===pe?this._parentage=null:Array.isArray(ye)&&(0,Se.P)(ye,pe)}remove(pe){const{_finalizers:ye}=this;ye&&(0,Se.P)(ye,pe),pe instanceof Ae&&pe._removeParent(this)}}Ae.EMPTY=(()=>{const ze=new Ae;return ze.closed=!0,ze})();const Ee=Ae.EMPTY;function be(ze){return ze instanceof Ae||ze&&"closed"in ze&&(0,c.m)(ze.remove)&&(0,c.m)(ze.add)&&(0,c.m)(ze.unsubscribe)}function Re(ze){(0,c.m)(ze)?ze():ze.unsubscribe()}},2416:(Xt,ut,P)=>{"use strict";P.d(ut,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Xt,ut,P)=>{"use strict";P.d(ut,{z:()=>Ae});var c=P(8189),q=P(7669),Se=P(8996);function Ae(...Ee){return function J(){return(0,c.J)(1)}()((0,Se.D)(Ee,(0,q.yG)(Ee)))}},515:(Xt,ut,P)=>{"use strict";P.d(ut,{E:()=>J});const J=new(P(8306).y)(Ae=>Ae.complete())},8996:(Xt,ut,P)=>{"use strict";P.d(ut,{D:()=>Ye});var c=P(8421),J=P(5363),q=P(9468),Ee=P(8306),Re=P(2202),ze=P(576),pe=P(9672);function Me(We,$e){if(!We)throw new Error("Iterable cannot be null");return new Ee.y(Ke=>{(0,pe.f)(Ke,$e,()=>{const ee=We[Symbol.asyncIterator]();(0,pe.f)(Ke,$e,()=>{ee.next().then(Qe=>{Qe.done?Ke.complete():Ke.next(Qe.value)})},0,!0)})})}var Oe=P(3670),Ue=P(8239),tt=P(1144),Le=P(6495),De=P(2206),ke=P(4532),Ce=P(3260);function Ye(We,$e){return $e?function ot(We,$e){if(null!=We){if((0,Oe.c)(We))return function Se(We,$e){return(0,c.Xf)(We).pipe((0,q.R)($e),(0,J.Q)($e))}(We,$e);if((0,tt.z)(We))return function be(We,$e){return new Ee.y(Ke=>{let ee=0;return $e.schedule(function(){ee===We.length?Ke.complete():(Ke.next(We[ee++]),Ke.closed||this.schedule())})})}(We,$e);if((0,Ue.t)(We))return function Ae(We,$e){return(0,c.Xf)(We).pipe((0,q.R)($e),(0,J.Q)($e))}(We,$e);if((0,De.D)(We))return Me(We,$e);if((0,Le.T)(We))return function ye(We,$e){return new Ee.y(Ke=>{let ee;return(0,pe.f)(Ke,$e,()=>{ee=We[Re.h](),(0,pe.f)(Ke,$e,()=>{let Qe,he;try{({value:Qe,done:he}=ee.next())}catch(me){return void Ke.error(me)}he?Ke.complete():Ke.next(Qe)},0,!0)}),()=>(0,ze.m)(null==ee?void 0:ee.return)&&ee.return()})}(We,$e);if((0,Ce.L)(We))return function nt(We,$e){return Me((0,Ce.Q)(We),$e)}(We,$e)}throw(0,ke.z)(We)}(We,$e):(0,c.Xf)(We)}},8421:(Xt,ut,P)=>{"use strict";P.d(ut,{Xf:()=>Oe});var c=P(655),J=P(1144),q=P(8239),Se=P(8306),Ae=P(3670),Ee=P(2206),be=P(4532),Re=P(6495),ze=P(3260),pe=P(576),ye=P(7849),Me=P(8822);function Oe(ot){if(ot instanceof Se.y)return ot;if(null!=ot){if((0,Ae.c)(ot))return function Ue(ot){return new Se.y(Ye=>{const We=ot[Me.L]();if((0,pe.m)(We.subscribe))return We.subscribe(Ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ot);if((0,J.z)(ot))return function tt(ot){return new Se.y(Ye=>{for(let We=0;We<ot.length&&!Ye.closed;We++)Ye.next(ot[We]);Ye.complete()})}(ot);if((0,q.t)(ot))return function Le(ot){return new Se.y(Ye=>{ot.then(We=>{Ye.closed||(Ye.next(We),Ye.complete())},We=>Ye.error(We)).then(null,ye.h)})}(ot);if((0,Ee.D)(ot))return ke(ot);if((0,Re.T)(ot))return function De(ot){return new Se.y(Ye=>{for(const We of ot)if(Ye.next(We),Ye.closed)return;Ye.complete()})}(ot);if((0,ze.L)(ot))return function Ce(ot){return ke((0,ze.Q)(ot))}(ot)}throw(0,be.z)(ot)}function ke(ot){return new Se.y(Ye=>{(function nt(ot,Ye){var We,$e,Ke,ee;return(0,c.mG)(this,void 0,void 0,function*(){try{for(We=(0,c.KL)(ot);!($e=yield We.next()).done;)if(Ye.next($e.value),Ye.closed)return}catch(Qe){Ke={error:Qe}}finally{try{$e&&!$e.done&&(ee=We.return)&&(yield ee.call(We))}finally{if(Ke)throw Ke.error}}Ye.complete()})})(ot,Ye).catch(We=>Ye.error(We))})}},6451:(Xt,ut,P)=>{"use strict";P.d(ut,{T:()=>Ee});var c=P(8189),J=P(8421),q=P(515),Se=P(7669),Ae=P(8996);function Ee(...be){const Re=(0,Se.yG)(be),ze=(0,Se._6)(be,1/0),pe=be;return pe.length?1===pe.length?(0,J.Xf)(pe[0]):(0,c.J)(ze)((0,Ae.D)(pe,Re)):q.E}},9646:(Xt,ut,P)=>{"use strict";P.d(ut,{of:()=>q});var c=P(7669),J=P(8996);function q(...Se){const Ae=(0,c.yG)(Se);return(0,J.D)(Se,Ae)}},2843:(Xt,ut,P)=>{"use strict";P.d(ut,{_:()=>q});var c=P(8306),J=P(576);function q(Se,Ae){const Ee=(0,J.m)(Se)?Se:()=>Se,be=Re=>Re.error(Ee());return new c.y(Ae?Re=>Ae.schedule(be,0,Re):be)}},5403:(Xt,ut,P)=>{"use strict";P.d(ut,{x:()=>J});var c=P(930);function J(Se,Ae,Ee,be,Re){return new q(Se,Ae,Ee,be,Re)}class q extends c.Lv{constructor(Ae,Ee,be,Re,ze,pe){super(Ae),this.onFinalize=ze,this.shouldUnsubscribe=pe,this._next=Ee?function(ye){try{Ee(ye)}catch(Me){Ae.error(Me)}}:super._next,this._error=Re?function(ye){try{Re(ye)}catch(Me){Ae.error(Me)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(ye){Ae.error(ye)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(Ae=this.onFinalize)||void 0===Ae||Ae.call(this))}}}},262:(Xt,ut,P)=>{"use strict";P.d(ut,{K:()=>Se});var c=P(8421),J=P(5403),q=P(4482);function Se(Ae){return(0,q.e)((Ee,be)=>{let pe,Re=null,ze=!1;Re=Ee.subscribe((0,J.x)(be,void 0,void 0,ye=>{pe=(0,c.Xf)(Ae(ye,Se(Ae)(Ee))),Re?(Re.unsubscribe(),Re=null,pe.subscribe(be)):ze=!0})),ze&&(Re.unsubscribe(),Re=null,pe.subscribe(be))})}},4351:(Xt,ut,P)=>{"use strict";P.d(ut,{b:()=>q});var c=P(5577),J=P(576);function q(Se,Ae){return(0,J.m)(Ae)?(0,c.z)(Se,Ae,1):(0,c.z)(Se,1)}},6590:(Xt,ut,P)=>{"use strict";P.d(ut,{d:()=>q});var c=P(4482),J=P(5403);function q(Se){return(0,c.e)((Ae,Ee)=>{let be=!1;Ae.subscribe((0,J.x)(Ee,Re=>{be=!0,Ee.next(Re)},()=>{be||Ee.next(Se),Ee.complete()}))})}},1884:(Xt,ut,P)=>{"use strict";P.d(ut,{x:()=>Se});var c=P(4671),J=P(4482),q=P(5403);function Se(Ee,be=c.y){return Ee=null!=Ee?Ee:Ae,(0,J.e)((Re,ze)=>{let pe,ye=!0;Re.subscribe((0,q.x)(ze,Me=>{const Oe=be(Me);(ye||!Ee(pe,Oe))&&(ye=!1,pe=Oe,ze.next(Me))}))})}function Ae(Ee,be){return Ee===be}},9300:(Xt,ut,P)=>{"use strict";P.d(ut,{h:()=>q});var c=P(4482),J=P(5403);function q(Se,Ae){return(0,c.e)((Ee,be)=>{let Re=0;Ee.subscribe((0,J.x)(be,ze=>Se.call(Ae,ze,Re++)&&be.next(ze)))})}},590:(Xt,ut,P)=>{"use strict";P.d(ut,{P:()=>be});var c=P(6805),J=P(9300),q=P(5698),Se=P(6590),Ae=P(8068),Ee=P(4671);function be(Re,ze){const pe=arguments.length>=2;return ye=>ye.pipe(Re?(0,J.h)((Me,Oe)=>Re(Me,Oe,ye)):Ee.y,(0,q.q)(1),pe?(0,Se.d)(ze):(0,Ae.T)(()=>new c.K))}},4004:(Xt,ut,P)=>{"use strict";P.d(ut,{U:()=>q});var c=P(4482),J=P(5403);function q(Se,Ae){return(0,c.e)((Ee,be)=>{let Re=0;Ee.subscribe((0,J.x)(be,ze=>{be.next(Se.call(Ae,ze,Re++))}))})}},8189:(Xt,ut,P)=>{"use strict";P.d(ut,{J:()=>q});var c=P(5577),J=P(4671);function q(Se=1/0){return(0,c.z)(J.y,Se)}},5577:(Xt,ut,P)=>{"use strict";P.d(ut,{z:()=>Re});var c=P(4004),J=P(8421),q=P(4482),Se=P(9672),Ae=P(5403),be=P(576);function Re(ze,pe,ye=1/0){return(0,be.m)(pe)?Re((Me,Oe)=>(0,c.U)((Ue,tt)=>pe(Me,Ue,Oe,tt))((0,J.Xf)(ze(Me,Oe))),ye):("number"==typeof pe&&(ye=pe),(0,q.e)((Me,Oe)=>function Ee(ze,pe,ye,Me,Oe,Ue,tt,Le){const De=[];let ke=0,Ce=0,nt=!1;const ot=()=>{nt&&!De.length&&!ke&&pe.complete()},Ye=$e=>ke<Me?We($e):De.push($e),We=$e=>{Ue&&pe.next($e),ke++;let Ke=!1;(0,J.Xf)(ye($e,Ce++)).subscribe((0,Ae.x)(pe,ee=>{null==Oe||Oe(ee),Ue?Ye(ee):pe.next(ee)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(ke--;De.length&&ke<Me;){const ee=De.shift();tt?(0,Se.f)(pe,tt,()=>We(ee)):We(ee)}ot()}catch(ee){pe.error(ee)}}))};return ze.subscribe((0,Ae.x)(pe,Ye,()=>{nt=!0,ot()})),()=>{null==Le||Le()}}(Me,Oe,ze,ye)))}},5363:(Xt,ut,P)=>{"use strict";P.d(ut,{Q:()=>Se});var c=P(9672),J=P(4482),q=P(5403);function Se(Ae,Ee=0){return(0,J.e)((be,Re)=>{be.subscribe((0,q.x)(Re,ze=>(0,c.f)(Re,Ae,()=>Re.next(ze),Ee),()=>(0,c.f)(Re,Ae,()=>Re.complete(),Ee),ze=>(0,c.f)(Re,Ae,()=>Re.error(ze),Ee)))})}},5026:(Xt,ut,P)=>{"use strict";P.d(ut,{R:()=>Se});var c=P(4482),J=P(5403);function q(Ae,Ee,be,Re,ze){return(pe,ye)=>{let Me=be,Oe=Ee,Ue=0;pe.subscribe((0,J.x)(ye,tt=>{const Le=Ue++;Oe=Me?Ae(Oe,tt,Le):(Me=!0,tt),Re&&ye.next(Oe)},ze&&(()=>{Me&&ye.next(Oe),ye.complete()})))}}function Se(Ae,Ee){return(0,c.e)(q(Ae,Ee,arguments.length>=2,!0))}},3099:(Xt,ut,P)=>{"use strict";P.d(ut,{B:()=>Ae});var c=P(8421),J=P(7579),q=P(930),Se=P(4482);function Ae(be={}){const{connector:Re=(()=>new J.x),resetOnError:ze=!0,resetOnComplete:pe=!0,resetOnRefCountZero:ye=!0}=be;return Me=>{let Oe,Ue,tt,Le=0,De=!1,ke=!1;const Ce=()=>{null==Ue||Ue.unsubscribe(),Ue=void 0},nt=()=>{Ce(),Oe=tt=void 0,De=ke=!1},ot=()=>{const Ye=Oe;nt(),null==Ye||Ye.unsubscribe()};return(0,Se.e)((Ye,We)=>{Le++,!ke&&!De&&Ce();const $e=tt=null!=tt?tt:Re();We.add(()=>{Le--,0===Le&&!ke&&!De&&(Ue=Ee(ot,ye))}),$e.subscribe(We),!Oe&&Le>0&&(Oe=new q.Hp({next:Ke=>$e.next(Ke),error:Ke=>{ke=!0,Ce(),Ue=Ee(nt,ze,Ke),$e.error(Ke)},complete:()=>{De=!0,Ce(),Ue=Ee(nt,pe),$e.complete()}}),(0,c.Xf)(Ye).subscribe(Oe))})(Me)}}function Ee(be,Re,...ze){if(!0===Re)return void be();if(!1===Re)return;const pe=new q.Hp({next:()=>{pe.unsubscribe(),be()}});return(0,c.Xf)(Re(...ze)).subscribe(pe)}},8675:(Xt,ut,P)=>{"use strict";P.d(ut,{O:()=>Se});var c=P(7272),J=P(7669),q=P(4482);function Se(...Ae){const Ee=(0,J.yG)(Ae);return(0,q.e)((be,Re)=>{(Ee?(0,c.z)(Ae,be,Ee):(0,c.z)(Ae,be)).subscribe(Re)})}},9468:(Xt,ut,P)=>{"use strict";P.d(ut,{R:()=>J});var c=P(4482);function J(q,Se=0){return(0,c.e)((Ae,Ee)=>{Ee.add(q.schedule(()=>Ae.subscribe(Ee),Se))})}},3900:(Xt,ut,P)=>{"use strict";P.d(ut,{w:()=>Se});var c=P(8421),J=P(4482),q=P(5403);function Se(Ae,Ee){return(0,J.e)((be,Re)=>{let ze=null,pe=0,ye=!1;const Me=()=>ye&&!ze&&Re.complete();be.subscribe((0,q.x)(Re,Oe=>{null==ze||ze.unsubscribe();let Ue=0;const tt=pe++;(0,c.Xf)(Ae(Oe,tt)).subscribe(ze=(0,q.x)(Re,Le=>Re.next(Ee?Ee(Oe,Le,tt,Ue++):Le),()=>{ze=null,Me()}))},()=>{ye=!0,Me()}))})}},5698:(Xt,ut,P)=>{"use strict";P.d(ut,{q:()=>Se});var c=P(515),J=P(4482),q=P(5403);function Se(Ae){return Ae<=0?()=>c.E:(0,J.e)((Ee,be)=>{let Re=0;Ee.subscribe((0,q.x)(be,ze=>{++Re<=Ae&&(be.next(ze),Ae<=Re&&be.complete())}))})}},8505:(Xt,ut,P)=>{"use strict";P.d(ut,{b:()=>Ae});var c=P(576),J=P(4482),q=P(5403),Se=P(4671);function Ae(Ee,be,Re){const ze=(0,c.m)(Ee)||be||Re?{next:Ee,error:be,complete:Re}:Ee;return ze?(0,J.e)((pe,ye)=>{var Me;null===(Me=ze.subscribe)||void 0===Me||Me.call(ze);let Oe=!0;pe.subscribe((0,q.x)(ye,Ue=>{var tt;null===(tt=ze.next)||void 0===tt||tt.call(ze,Ue),ye.next(Ue)},()=>{var Ue;Oe=!1,null===(Ue=ze.complete)||void 0===Ue||Ue.call(ze),ye.complete()},Ue=>{var tt;Oe=!1,null===(tt=ze.error)||void 0===tt||tt.call(ze,Ue),ye.error(Ue)},()=>{var Ue,tt;Oe&&(null===(Ue=ze.unsubscribe)||void 0===Ue||Ue.call(ze)),null===(tt=ze.finalize)||void 0===tt||tt.call(ze)}))}):Se.y}},8068:(Xt,ut,P)=>{"use strict";P.d(ut,{T:()=>Se});var c=P(6805),J=P(4482),q=P(5403);function Se(Ee=Ae){return(0,J.e)((be,Re)=>{let ze=!1;be.subscribe((0,q.x)(Re,pe=>{ze=!0,Re.next(pe)},()=>ze?Re.complete():Re.error(Ee())))})}function Ae(){return new c.K}},4408:(Xt,ut,P)=>{"use strict";P.d(ut,{o:()=>Ae});var c=P(727);class J extends c.w0{constructor(be,Re){super()}schedule(be,Re=0){return this}}const q={setInterval(Ee,be,...Re){const{delegate:ze}=q;return(null==ze?void 0:ze.setInterval)?ze.setInterval(Ee,be,...Re):setInterval(Ee,be,...Re)},clearInterval(Ee){const{delegate:be}=q;return((null==be?void 0:be.clearInterval)||clearInterval)(Ee)},delegate:void 0};var Se=P(8737);class Ae extends J{constructor(be,Re){super(be,Re),this.scheduler=be,this.work=Re,this.pending=!1}schedule(be,Re=0){var ze;if(this.closed)return this;this.state=be;const pe=this.id,ye=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(ye,pe,Re)),this.pending=!0,this.delay=Re,this.id=null!==(ze=this.id)&&void 0!==ze?ze:this.requestAsyncId(ye,this.id,Re),this}requestAsyncId(be,Re,ze=0){return q.setInterval(be.flush.bind(be,this),ze)}recycleAsyncId(be,Re,ze=0){if(null!=ze&&this.delay===ze&&!1===this.pending)return Re;null!=Re&&q.clearInterval(Re)}execute(be,Re){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ze=this._execute(be,Re);if(ze)return ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,Re){let pe,ze=!1;try{this.work(be)}catch(ye){ze=!0,pe=ye||new Error("Scheduled action threw falsy error")}if(ze)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:be,scheduler:Re}=this,{actions:ze}=Re;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Se.P)(ze,this),null!=be&&(this.id=this.recycleAsyncId(Re,be,null)),this.delay=null,super.unsubscribe()}}}},7565:(Xt,ut,P)=>{"use strict";P.d(ut,{v:()=>q});var c=P(6063);class J{constructor(Ae,Ee=J.now){this.schedulerActionCtor=Ae,this.now=Ee}schedule(Ae,Ee=0,be){return new this.schedulerActionCtor(this,Ae).schedule(be,Ee)}}J.now=c.l.now;class q extends J{constructor(Ae,Ee=J.now){super(Ae,Ee),this.actions=[],this._active=!1}flush(Ae){const{actions:Ee}=this;if(this._active)return void Ee.push(Ae);let be;this._active=!0;do{if(be=Ae.execute(Ae.state,Ae.delay))break}while(Ae=Ee.shift());if(this._active=!1,be){for(;Ae=Ee.shift();)Ae.unsubscribe();throw be}}}},4986:(Xt,ut,P)=>{"use strict";P.d(ut,{z:()=>q});var c=P(4408);const q=new(P(7565).v)(c.o)},6063:(Xt,ut,P)=>{"use strict";P.d(ut,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(Xt,ut,P)=>{"use strict";P.d(ut,{z:()=>c});const c={setTimeout(J,q,...Se){const{delegate:Ae}=c;return(null==Ae?void 0:Ae.setTimeout)?Ae.setTimeout(J,q,...Se):setTimeout(J,q,...Se)},clearTimeout(J){const{delegate:q}=c;return((null==q?void 0:q.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(Xt,ut,P)=>{"use strict";P.d(ut,{h:()=>J});const J=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Xt,ut,P)=>{"use strict";P.d(ut,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Xt,ut,P)=>{"use strict";P.d(ut,{K:()=>J});const J=(0,P(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Xt,ut,P)=>{"use strict";P.d(ut,{_6:()=>Ee,jO:()=>Se,yG:()=>Ae});var c=P(576);function q(be){return be[be.length-1]}function Se(be){return(0,c.m)(q(be))?be.pop():void 0}function Ae(be){return function J(be){return be&&(0,c.m)(be.schedule)}(q(be))?be.pop():void 0}function Ee(be,Re){return"number"==typeof q(be)?be.pop():Re}},4742:(Xt,ut,P)=>{"use strict";P.d(ut,{D:()=>Ae});const{isArray:c}=Array,{getPrototypeOf:J,prototype:q,keys:Se}=Object;function Ae(be){if(1===be.length){const Re=be[0];if(c(Re))return{args:Re,keys:null};if(function Ee(be){return be&&"object"==typeof be&&J(be)===q}(Re)){const ze=Se(Re);return{args:ze.map(pe=>Re[pe]),keys:ze}}}return{args:be,keys:null}}},8737:(Xt,ut,P)=>{"use strict";function c(J,q){if(J){const Se=J.indexOf(q);0<=Se&&J.splice(Se,1)}}P.d(ut,{P:()=>c})},3888:(Xt,ut,P)=>{"use strict";function c(J){const Se=J(Ae=>{Error.call(Ae),Ae.stack=(new Error).stack});return Se.prototype=Object.create(Error.prototype),Se.prototype.constructor=Se,Se}P.d(ut,{d:()=>c})},1810:(Xt,ut,P)=>{"use strict";function c(J,q){return J.reduce((Se,Ae,Ee)=>(Se[Ae]=q[Ee],Se),{})}P.d(ut,{n:()=>c})},2806:(Xt,ut,P)=>{"use strict";P.d(ut,{x:()=>q,O:()=>Se});var c=P(2416);let J=null;function q(Ae){if(c.v.useDeprecatedSynchronousErrorHandling){const Ee=!J;if(Ee&&(J={errorThrown:!1,error:null}),Ae(),Ee){const{errorThrown:be,error:Re}=J;if(J=null,be)throw Re}}else Ae()}function Se(Ae){c.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=Ae)}},9672:(Xt,ut,P)=>{"use strict";function c(J,q,Se,Ae=0,Ee=!1){const be=q.schedule(function(){Se(),Ee?J.add(this.schedule(null,Ae)):this.unsubscribe()},Ae);if(J.add(be),!Ee)return be}P.d(ut,{f:()=>c})},4671:(Xt,ut,P)=>{"use strict";function c(J){return J}P.d(ut,{y:()=>c})},1144:(Xt,ut,P)=>{"use strict";P.d(ut,{z:()=>c});const c=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(Xt,ut,P)=>{"use strict";P.d(ut,{D:()=>J});var c=P(576);function J(q){return Symbol.asyncIterator&&(0,c.m)(null==q?void 0:q[Symbol.asyncIterator])}},576:(Xt,ut,P)=>{"use strict";function c(J){return"function"==typeof J}P.d(ut,{m:()=>c})},3670:(Xt,ut,P)=>{"use strict";P.d(ut,{c:()=>q});var c=P(8822),J=P(576);function q(Se){return(0,J.m)(Se[c.L])}},6495:(Xt,ut,P)=>{"use strict";P.d(ut,{T:()=>q});var c=P(2202),J=P(576);function q(Se){return(0,J.m)(null==Se?void 0:Se[c.h])}},8239:(Xt,ut,P)=>{"use strict";P.d(ut,{t:()=>J});var c=P(576);function J(q){return(0,c.m)(null==q?void 0:q.then)}},3260:(Xt,ut,P)=>{"use strict";P.d(ut,{Q:()=>q,L:()=>Se});var c=P(655),J=P(576);function q(Ae){return(0,c.FC)(this,arguments,function*(){const be=Ae.getReader();try{for(;;){const{value:Re,done:ze}=yield(0,c.qq)(be.read());if(ze)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Re)}}finally{be.releaseLock()}})}function Se(Ae){return(0,J.m)(null==Ae?void 0:Ae.getReader)}},4482:(Xt,ut,P)=>{"use strict";P.d(ut,{A:()=>J,e:()=>q});var c=P(576);function J(Se){return(0,c.m)(null==Se?void 0:Se.lift)}function q(Se){return Ae=>{if(J(Ae))return Ae.lift(function(Ee){try{return Se(Ee,this)}catch(be){this.error(be)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Xt,ut,P)=>{"use strict";P.d(ut,{Z:()=>Se});var c=P(4004);const{isArray:J}=Array;function Se(Ae){return(0,c.U)(Ee=>function q(Ae,Ee){return J(Ee)?Ae(...Ee):Ae(Ee)}(Ae,Ee))}},5032:(Xt,ut,P)=>{"use strict";function c(){}P.d(ut,{Z:()=>c})},7849:(Xt,ut,P)=>{"use strict";P.d(ut,{h:()=>q});var c=P(2416),J=P(3410);function q(Se){J.z.setTimeout(()=>{const{onUnhandledError:Ae}=c.v;if(!Ae)throw Se;Ae(Se)})}},4532:(Xt,ut,P)=>{"use strict";function c(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(ut,{z:()=>c})},863:(Xt,ut,P)=>{var c={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,8592,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,8592,5652],"./ion-card_5.entry.js":[388,8592,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,8592,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime_3.entry.js":[4959,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,8592,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,8592,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,8592,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function J(q){if(!P.o(c,q))return Promise.resolve().then(()=>{var Ee=new Error("Cannot find module '"+q+"'");throw Ee.code="MODULE_NOT_FOUND",Ee});var Se=c[q],Ae=Se[0];return Promise.all(Se.slice(1).map(P.e)).then(()=>P(Ae))}J.keys=()=>Object.keys(c),J.id=863,Xt.exports=J},655:(Xt,ut,P)=>{"use strict";function Se(he,me){var ge={};for(var Ne in he)Object.prototype.hasOwnProperty.call(he,Ne)&&me.indexOf(Ne)<0&&(ge[Ne]=he[Ne]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Xe=0;for(Ne=Object.getOwnPropertySymbols(he);Xe<Ne.length;Xe++)me.indexOf(Ne[Xe])<0&&Object.prototype.propertyIsEnumerable.call(he,Ne[Xe])&&(ge[Ne[Xe]]=he[Ne[Xe]])}return ge}function Ae(he,me,ge,Ne){var xt,Xe=arguments.length,_t=Xe<3?me:null===Ne?Ne=Object.getOwnPropertyDescriptor(me,ge):Ne;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_t=Reflect.decorate(he,me,ge,Ne);else for(var ct=he.length-1;ct>=0;ct--)(xt=he[ct])&&(_t=(Xe<3?xt(_t):Xe>3?xt(me,ge,_t):xt(me,ge))||_t);return Xe>3&&_t&&Object.defineProperty(me,ge,_t),_t}function Re(he,me,ge,Ne){return new(ge||(ge=Promise))(function(_t,xt){function ct(It){try{Ve(Ne.next(It))}catch(dt){xt(dt)}}function lt(It){try{Ve(Ne.throw(It))}catch(dt){xt(dt)}}function Ve(It){It.done?_t(It.value):function Xe(_t){return _t instanceof ge?_t:new ge(function(xt){xt(_t)})}(It.value).then(ct,lt)}Ve((Ne=Ne.apply(he,me||[])).next())})}function De(he){return this instanceof De?(this.v=he,this):new De(he)}function ke(he,me,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xe,Ne=ge.apply(he,me||[]),_t=[];return Xe={},xt("next"),xt("throw"),xt("return"),Xe[Symbol.asyncIterator]=function(){return this},Xe;function xt(gt){Ne[gt]&&(Xe[gt]=function(at){return new Promise(function(Gt,Nt){_t.push([gt,at,Gt,Nt])>1||ct(gt,at)})})}function ct(gt,at){try{!function lt(gt){gt.value instanceof De?Promise.resolve(gt.value.v).then(Ve,It):dt(_t[0][2],gt)}(Ne[gt](at))}catch(Gt){dt(_t[0][3],Gt)}}function Ve(gt){ct("next",gt)}function It(gt){ct("throw",gt)}function dt(gt,at){gt(at),_t.shift(),_t.length&&ct(_t[0][0],_t[0][1])}}function nt(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,me=he[Symbol.asyncIterator];return me?me.call(he):(he=function Me(he){var me="function"==typeof Symbol&&Symbol.iterator,ge=me&&he[me],Ne=0;if(ge)return ge.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Ne>=he.length&&(he=void 0),{value:he&&he[Ne++],done:!he}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),ge={},Ne("next"),Ne("throw"),Ne("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function Ne(_t){ge[_t]=he[_t]&&function(xt){return new Promise(function(ct,lt){!function Xe(_t,xt,ct,lt){Promise.resolve(lt).then(function(Ve){_t({value:Ve,done:ct})},xt)}(ct,lt,(xt=he[_t](xt)).done,xt.value)})}}}P.d(ut,{_T:()=>Se,gn:()=>Ae,mG:()=>Re,qq:()=>De,FC:()=>ke,KL:()=>nt})},9808:(Xt,ut,P)=>{"use strict";P.d(ut,{mr:()=>Ce,ez:()=>Hs,H9:()=>Jr,K0:()=>be,JJ:()=>Ho,Do:()=>ot,V_:()=>pe,Ye:()=>Ye,S$:()=>De,mk:()=>Oi,sg:()=>Cr,O5:()=>re,PC:()=>ln,tP:()=>An,b0:()=>nt,lw:()=>Re,EM:()=>Oo,JF:()=>_r,PM:()=>bs,w_:()=>Ee,bD:()=>os,q:()=>q,Mx:()=>Li,HT:()=>Ae});var c=P(5e3);let J=null;function q(){return J}function Ae(V){J||(J=V)}class Ee{}const be=new c.OlP("DocumentToken");let Re=(()=>{class V{historyGo(U){throw new Error("Not implemented")}}return V.\u0275fac=function(U){return new(U||V)},V.\u0275prov=c.Yz7({token:V,factory:function(){return function ze(){return(0,c.LFG)(ye)}()},providedIn:"platform"}),V})();const pe=new c.OlP("Location Initialized");let ye=(()=>{class V extends Re{constructor(U){super(),this._doc=U,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(U){const ue=q().getGlobalEventTarget(this._doc,"window");return ue.addEventListener("popstate",U,!1),()=>ue.removeEventListener("popstate",U)}onHashChange(U){const ue=q().getGlobalEventTarget(this._doc,"window");return ue.addEventListener("hashchange",U,!1),()=>ue.removeEventListener("hashchange",U)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(U){this.location.pathname=U}pushState(U,ue,Be){Me()?this._history.pushState(U,ue,Be):this.location.hash=Be}replaceState(U,ue,Be){Me()?this._history.replaceState(U,ue,Be):this.location.hash=Be}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return V.\u0275fac=function(U){return new(U||V)(c.LFG(be))},V.\u0275prov=c.Yz7({token:V,factory:function(){return function Oe(){return new ye((0,c.LFG)(be))}()},providedIn:"platform"}),V})();function Me(){return!!window.history.pushState}function Ue(V,se){if(0==V.length)return se;if(0==se.length)return V;let U=0;return V.endsWith("/")&&U++,se.startsWith("/")&&U++,2==U?V+se.substring(1):1==U?V+se:V+"/"+se}function tt(V){const se=V.match(/#|\?|$/),U=se&&se.index||V.length;return V.slice(0,U-("/"===V[U-1]?1:0))+V.slice(U)}function Le(V){return V&&"?"!==V[0]?"?"+V:V}let De=(()=>{class V{historyGo(U){throw new Error("Not implemented")}}return V.\u0275fac=function(U){return new(U||V)},V.\u0275prov=c.Yz7({token:V,factory:function(){return function ke(V){const se=(0,c.LFG)(be).location;return new nt((0,c.LFG)(Re),se&&se.origin||"")}()},providedIn:"root"}),V})();const Ce=new c.OlP("appBaseHref");let nt=(()=>{class V extends De{constructor(U,ue){if(super(),this._platformLocation=U,this._removeListenerFns=[],null==ue&&(ue=this._platformLocation.getBaseHrefFromDOM()),null==ue)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ue}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return Ue(this._baseHref,U)}path(U=!1){const ue=this._platformLocation.pathname+Le(this._platformLocation.search),Be=this._platformLocation.hash;return Be&&U?`${ue}${Be}`:ue}pushState(U,ue,Be,kt){const qt=this.prepareExternalUrl(Be+Le(kt));this._platformLocation.pushState(U,ue,qt)}replaceState(U,ue,Be,kt){const qt=this.prepareExternalUrl(Be+Le(kt));this._platformLocation.replaceState(U,ue,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(U=0){var ue,Be;null===(Be=(ue=this._platformLocation).historyGo)||void 0===Be||Be.call(ue,U)}}return V.\u0275fac=function(U){return new(U||V)(c.LFG(Re),c.LFG(Ce,8))},V.\u0275prov=c.Yz7({token:V,factory:V.\u0275fac}),V})(),ot=(()=>{class V extends De{constructor(U,ue){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=ue&&(this._baseHref=ue)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let ue=this._platformLocation.hash;return null==ue&&(ue="#"),ue.length>0?ue.substring(1):ue}prepareExternalUrl(U){const ue=Ue(this._baseHref,U);return ue.length>0?"#"+ue:ue}pushState(U,ue,Be,kt){let qt=this.prepareExternalUrl(Be+Le(kt));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.pushState(U,ue,qt)}replaceState(U,ue,Be,kt){let qt=this.prepareExternalUrl(Be+Le(kt));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.replaceState(U,ue,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(U=0){var ue,Be;null===(Be=(ue=this._platformLocation).historyGo)||void 0===Be||Be.call(ue,U)}}return V.\u0275fac=function(U){return new(U||V)(c.LFG(Re),c.LFG(Ce,8))},V.\u0275prov=c.Yz7({token:V,factory:V.\u0275fac}),V})(),Ye=(()=>{class V{constructor(U,ue){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=U;const Be=this._platformStrategy.getBaseHref();this._platformLocation=ue,this._baseHref=tt(Ke(Be)),this._platformStrategy.onPopState(kt=>{this._subject.emit({url:this.path(!0),pop:!0,state:kt.state,type:kt.type})})}path(U=!1){return this.normalize(this._platformStrategy.path(U))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(U,ue=""){return this.path()==this.normalize(U+Le(ue))}normalize(U){return V.stripTrailingSlash(function $e(V,se){return V&&se.startsWith(V)?se.substring(V.length):se}(this._baseHref,Ke(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._platformStrategy.prepareExternalUrl(U)}go(U,ue="",Be=null){this._platformStrategy.pushState(Be,"",U,ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Le(ue)),Be)}replaceState(U,ue="",Be=null){this._platformStrategy.replaceState(Be,"",U,ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Le(ue)),Be)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(U=0){var ue,Be;null===(Be=(ue=this._platformStrategy).historyGo)||void 0===Be||Be.call(ue,U)}onUrlChange(U){this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ue=>{this._notifyUrlChangeListeners(ue.url,ue.state)}))}_notifyUrlChangeListeners(U="",ue){this._urlChangeListeners.forEach(Be=>Be(U,ue))}subscribe(U,ue,Be){return this._subject.subscribe({next:U,error:ue,complete:Be})}}return V.normalizeQueryParams=Le,V.joinWithSlash=Ue,V.stripTrailingSlash=tt,V.\u0275fac=function(U){return new(U||V)(c.LFG(De),c.LFG(Re))},V.\u0275prov=c.Yz7({token:V,factory:function(){return function We(){return new Ye((0,c.LFG)(De),(0,c.LFG)(Re))}()},providedIn:"root"}),V})();function Ke(V){return V.replace(/\/index.html$/,"")}const ee={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Qe=(()=>((Qe=Qe||{})[Qe.Decimal=0]="Decimal",Qe[Qe.Percent=1]="Percent",Qe[Qe.Currency=2]="Currency",Qe[Qe.Scientific=3]="Scientific",Qe))(),Xe=(()=>((Xe=Xe||{})[Xe.Decimal=0]="Decimal",Xe[Xe.Group=1]="Group",Xe[Xe.List=2]="List",Xe[Xe.PercentSign=3]="PercentSign",Xe[Xe.PlusSign=4]="PlusSign",Xe[Xe.MinusSign=5]="MinusSign",Xe[Xe.Exponential=6]="Exponential",Xe[Xe.SuperscriptingExponent=7]="SuperscriptingExponent",Xe[Xe.PerMille=8]="PerMille",Xe[Xe.Infinity=9]="Infinity",Xe[Xe.NaN=10]="NaN",Xe[Xe.TimeSeparator=11]="TimeSeparator",Xe[Xe.CurrencyDecimal=12]="CurrencyDecimal",Xe[Xe.CurrencyGroup=13]="CurrencyGroup",Xe))();function wt(V,se){const U=(0,c.cg1)(V),ue=U[c.wAp.NumberSymbols][se];if(void 0===ue){if(se===Xe.CurrencyDecimal)return U[c.wAp.NumberSymbols][Xe.Decimal];if(se===Xe.CurrencyGroup)return U[c.wAp.NumberSymbols][Xe.Group]}return ue}function kn(V,se){return(0,c.cg1)(V)[c.wAp.NumberFormats][se]}const Hr=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function oi(V,se,U,ue,Be,kt,qt=!1){let xn="",Pn=!1;if(isFinite(V)){let Jn=function ai(V){let ue,Be,kt,qt,xn,se=Math.abs(V)+"",U=0;for((Be=se.indexOf("."))>-1&&(se=se.replace(".","")),(kt=se.search(/e/i))>0?(Be<0&&(Be=kt),Be+=+se.slice(kt+1),se=se.substring(0,kt)):Be<0&&(Be=se.length),kt=0;"0"===se.charAt(kt);kt++);if(kt===(xn=se.length))ue=[0],Be=1;else{for(xn--;"0"===se.charAt(xn);)xn--;for(Be-=kt,ue=[],qt=0;kt<=xn;kt++,qt++)ue[qt]=Number(se.charAt(kt))}return Be>22&&(ue=ue.splice(0,21),U=Be-1,Be=1),{digits:ue,exponent:U,integerLen:Be}}(V);qt&&(Jn=function Zr(V){if(0===V.digits[0])return V;const se=V.digits.length-V.integerLen;return V.exponent?V.exponent+=2:(0===se?V.digits.push(0,0):1===se&&V.digits.push(0),V.integerLen+=2),V}(Jn));let ir=se.minInt,dr=se.minFrac,di=se.maxFrac;if(kt){const xs=kt.match(Hr);if(null===xs)throw new Error(`${kt} is not a valid digit info`);const zo=xs[1],Po=xs[3],Gs=xs[5];null!=zo&&(ir=or(zo)),null!=Po&&(dr=or(Po)),null!=Gs?di=or(Gs):null!=Po&&dr>di&&(di=dr)}!function ur(V,se,U){if(se>U)throw new Error(`The minimum number of digits after fraction (${se}) is higher than the maximum (${U}).`);let ue=V.digits,Be=ue.length-V.integerLen;const kt=Math.min(Math.max(se,Be),U);let qt=kt+V.integerLen,xn=ue[qt];if(qt>0){ue.splice(Math.max(V.integerLen,qt));for(let dr=qt;dr<ue.length;dr++)ue[dr]=0}else{Be=Math.max(0,Be),V.integerLen=1,ue.length=Math.max(1,qt=kt+1),ue[0]=0;for(let dr=1;dr<qt;dr++)ue[dr]=0}if(xn>=5)if(qt-1<0){for(let dr=0;dr>qt;dr--)ue.unshift(0),V.integerLen++;ue.unshift(1),V.integerLen++}else ue[qt-1]++;for(;Be<Math.max(0,kt);Be++)ue.push(0);let Pn=0!==kt;const Jn=se+V.integerLen,ir=ue.reduceRight(function(dr,di,Vr,Ur){return Ur[Vr]=(di+=dr)<10?di:di-10,Pn&&(0===Ur[Vr]&&Vr>=Jn?Ur.pop():Pn=!1),di>=10?1:0},0);ir&&(ue.unshift(ir),V.integerLen++)}(Jn,dr,di);let Vr=Jn.digits,Ur=Jn.integerLen;const Ns=Jn.exponent;let es=[];for(Pn=Vr.every(xs=>!xs);Ur<ir;Ur++)Vr.unshift(0);for(;Ur<0;Ur++)Vr.unshift(0);Ur>0?es=Vr.splice(Ur,Vr.length):(es=Vr,Vr=[0]);const Tn=[];for(Vr.length>=se.lgSize&&Tn.unshift(Vr.splice(-se.lgSize,Vr.length).join(""));Vr.length>se.gSize;)Tn.unshift(Vr.splice(-se.gSize,Vr.length).join(""));Vr.length&&Tn.unshift(Vr.join("")),xn=Tn.join(wt(U,ue)),es.length&&(xn+=wt(U,Be)+es.join("")),Ns&&(xn+=wt(U,Xe.Exponential)+"+"+Ns)}else xn=wt(U,Xe.Infinity);return xn=V<0&&!Pn?se.negPre+xn+se.negSuf:se.posPre+xn+se.posSuf,xn}function Zn(V,se="-"){const U={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},ue=V.split(";"),Be=ue[0],kt=ue[1],qt=-1!==Be.indexOf(".")?Be.split("."):[Be.substring(0,Be.lastIndexOf("0")+1),Be.substring(Be.lastIndexOf("0")+1)],xn=qt[0],Pn=qt[1]||"";U.posPre=xn.substr(0,xn.indexOf("#"));for(let ir=0;ir<Pn.length;ir++){const dr=Pn.charAt(ir);"0"===dr?U.minFrac=U.maxFrac=ir+1:"#"===dr?U.maxFrac=ir+1:U.posSuf+=dr}const Jn=xn.split(",");if(U.gSize=Jn[1]?Jn[1].length:0,U.lgSize=Jn[2]||Jn[1]?(Jn[2]||Jn[1]).length:0,kt){const ir=Be.length-U.posPre.length-U.posSuf.length,dr=kt.indexOf("#");U.negPre=kt.substr(0,dr).replace(/'/g,""),U.negSuf=kt.substr(dr+ir).replace(/'/g,"")}else U.negPre=se+U.posPre,U.negSuf=U.posSuf;return U}function or(V){const se=parseInt(V);if(isNaN(se))throw new Error("Invalid integer literal when parsing "+V);return se}function Li(V,se){se=encodeURIComponent(se);for(const U of V.split(";")){const ue=U.indexOf("="),[Be,kt]=-1==ue?[U,""]:[U.slice(0,ue),U.slice(ue+1)];if(Be.trim()===se)return decodeURIComponent(kt)}return null}let Oi=(()=>{class V{constructor(U,ue,Be,kt){this._iterableDiffers=U,this._keyValueDiffers=ue,this._ngEl=Be,this._renderer=kt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(U){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof U?U.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(U){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof U?U.split(/\s+/):U,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const U=this._iterableDiffer.diff(this._rawClass);U&&this._applyIterableChanges(U)}else if(this._keyValueDiffer){const U=this._keyValueDiffer.diff(this._rawClass);U&&this._applyKeyValueChanges(U)}}_applyKeyValueChanges(U){U.forEachAddedItem(ue=>this._toggleClass(ue.key,ue.currentValue)),U.forEachChangedItem(ue=>this._toggleClass(ue.key,ue.currentValue)),U.forEachRemovedItem(ue=>{ue.previousValue&&this._toggleClass(ue.key,!1)})}_applyIterableChanges(U){U.forEachAddedItem(ue=>{if("string"!=typeof ue.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(ue.item)}`);this._toggleClass(ue.item,!0)}),U.forEachRemovedItem(ue=>this._toggleClass(ue.item,!1))}_applyClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(ue=>this._toggleClass(ue,!0)):Object.keys(U).forEach(ue=>this._toggleClass(ue,!!U[ue])))}_removeClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(ue=>this._toggleClass(ue,!1)):Object.keys(U).forEach(ue=>this._toggleClass(ue,!1)))}_toggleClass(U,ue){(U=U.trim())&&U.split(/\s+/g).forEach(Be=>{ue?this._renderer.addClass(this._ngEl.nativeElement,Be):this._renderer.removeClass(this._ngEl.nativeElement,Be)})}}return V.\u0275fac=function(U){return new(U||V)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},V.\u0275dir=c.lG2({type:V,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),V})();class li{constructor(se,U,ue,Be){this.$implicit=se,this.ngForOf=U,this.index=ue,this.count=Be}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cr=(()=>{class V{constructor(U,ue,Be){this._viewContainer=U,this._template=ue,this._differs=Be,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const ue=this._viewContainer;U.forEachOperation((Be,kt,qt)=>{if(null==Be.previousIndex)ue.createEmbeddedView(this._template,new li(Be.item,this._ngForOf,-1,-1),null===qt?void 0:qt);else if(null==qt)ue.remove(null===kt?void 0:kt);else if(null!==kt){const xn=ue.get(kt);ue.move(xn,qt),ui(xn,Be)}});for(let Be=0,kt=ue.length;Be<kt;Be++){const xn=ue.get(Be).context;xn.index=Be,xn.count=kt,xn.ngForOf=this._ngForOf}U.forEachIdentityChange(Be=>{ui(ue.get(Be.currentIndex),Be)})}static ngTemplateContextGuard(U,ue){return!0}}return V.\u0275fac=function(U){return new(U||V)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},V.\u0275dir=c.lG2({type:V,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),V})();function ui(V,se){V.context.$implicit=se.item}let re=(()=>{class V{constructor(U,ue){this._viewContainer=U,this._context=new fe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ue}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){et("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){et("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,ue){return!0}}return V.\u0275fac=function(U){return new(U||V)(c.Y36(c.s_b),c.Y36(c.Rgc))},V.\u0275dir=c.lG2({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),V})();class fe{constructor(){this.$implicit=null,this.ngIf=null}}function et(V,se){if(se&&!se.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,c.AaK)(se)}'.`)}let ln=(()=>{class V{constructor(U,ue,Be){this._ngEl=U,this._differs=ue,this._renderer=Be,this._ngStyle=null,this._differ=null}set ngStyle(U){this._ngStyle=U,!this._differ&&U&&(this._differ=this._differs.find(U).create())}ngDoCheck(){if(this._differ){const U=this._differ.diff(this._ngStyle);U&&this._applyChanges(U)}}_setStyle(U,ue){const[Be,kt]=U.split(".");null!=(ue=null!=ue&&kt?`${ue}${kt}`:ue)?this._renderer.setStyle(this._ngEl.nativeElement,Be,ue):this._renderer.removeStyle(this._ngEl.nativeElement,Be)}_applyChanges(U){U.forEachRemovedItem(ue=>this._setStyle(ue.key,null)),U.forEachAddedItem(ue=>this._setStyle(ue.key,ue.currentValue)),U.forEachChangedItem(ue=>this._setStyle(ue.key,ue.currentValue))}}return V.\u0275fac=function(U){return new(U||V)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},V.\u0275dir=c.lG2({type:V,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),V})(),An=(()=>{class V{constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(U){if(U.ngTemplateOutlet){const ue=this._viewContainerRef;this._viewRef&&ue.remove(ue.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?ue.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return V.\u0275fac=function(U){return new(U||V)(c.Y36(c.s_b))},V.\u0275dir=c.lG2({type:V,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[c.TTD]}),V})();function nr(V,se){return new c.vHH(2100,"")}let Ho=(()=>{class V{constructor(U){this._locale=U}transform(U,ue,Be){if(!ss(U))return null;Be=Be||this._locale;try{return function cn(V,se,U){return oi(V,Zn(kn(se,Qe.Decimal),wt(se,Xe.MinusSign)),se,Xe.Group,Xe.Decimal,U)}(ws(U),Be,ue)}catch(kt){throw nr()}}}return V.\u0275fac=function(U){return new(U||V)(c.Y36(c.soG,16))},V.\u0275pipe=c.Yjl({name:"number",type:V,pure:!0}),V})(),Jr=(()=>{class V{constructor(U,ue="USD"){this._locale=U,this._defaultCurrencyCode=ue}transform(U,ue=this._defaultCurrencyCode,Be="symbol",kt,qt){if(!ss(U))return null;qt=qt||this._locale,"boolean"==typeof Be&&(Be=Be?"symbol":"code");let xn=ue||this._defaultCurrencyCode;"code"!==Be&&(xn="symbol"===Be||"symbol-narrow"===Be?function jr(V,se,U="en"){const ue=function jn(V){return(0,c.cg1)(V)[c.wAp.Currencies]}(U)[V]||ee[V]||[],Be=ue[1];return"narrow"===se&&"string"==typeof Be?Be:ue[0]||V}(xn,"symbol"===Be?"wide":"narrow",qt):Be);try{return function Gn(V,se,U,ue,Be){const qt=Zn(kn(se,Qe.Currency),wt(se,Xe.MinusSign));return qt.minFrac=function Bt(V){let se;const U=ee[V];return U&&(se=U[2]),"number"==typeof se?se:2}(ue),qt.maxFrac=qt.minFrac,oi(V,qt,se,Xe.CurrencyGroup,Xe.CurrencyDecimal,Be).replace("\xa4",U).replace("\xa4","").trim()}(ws(U),qt,xn,ue,kt)}catch(Pn){throw nr()}}}return V.\u0275fac=function(U){return new(U||V)(c.Y36(c.soG,16),c.Y36(c.EJc,16))},V.\u0275pipe=c.Yjl({name:"currency",type:V,pure:!0}),V})();function ss(V){return!(null==V||""===V||V!=V)}function ws(V){if("string"==typeof V&&!isNaN(Number(V)-parseFloat(V)))return Number(V);if("number"!=typeof V)throw new Error(`${V} is not a number`);return V}let Hs=(()=>{class V{}return V.\u0275fac=function(U){return new(U||V)},V.\u0275mod=c.oAB({type:V}),V.\u0275inj=c.cJS({}),V})();const os="browser";function bs(V){return"server"===V}let Oo=(()=>{class V{}return V.\u0275prov=(0,c.Yz7)({token:V,providedIn:"root",factory:()=>new zr((0,c.LFG)(be),window)}),V})();class zr{constructor(se,U){this.document=se,this.window=U,this.offset=()=>[0,0]}setOffset(se){this.offset=Array.isArray(se)?()=>se:se}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(se){this.supportsScrolling()&&this.window.scrollTo(se[0],se[1])}scrollToAnchor(se){if(!this.supportsScrolling())return;const U=function ls(V,se){const U=V.getElementById(se)||V.getElementsByName(se)[0];if(U)return U;if("function"==typeof V.createTreeWalker&&V.body&&(V.body.createShadowRoot||V.body.attachShadow)){const ue=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let Be=ue.currentNode;for(;Be;){const kt=Be.shadowRoot;if(kt){const qt=kt.getElementById(se)||kt.querySelector(`[name="${se}"]`);if(qt)return qt}Be=ue.nextNode()}}return null}(this.document,se);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(se){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=se)}}scrollToElement(se){const U=se.getBoundingClientRect(),ue=U.left+this.window.pageXOffset,Be=U.top+this.window.pageYOffset,kt=this.offset();this.window.scrollTo(ue-kt[0],Be-kt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const se=Ji(this.window.history)||Ji(Object.getPrototypeOf(this.window.history));return!(!se||!se.writable&&!se.set)}catch(se){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(se){return!1}}}function Ji(V){return Object.getOwnPropertyDescriptor(V,"scrollRestoration")}class _r{}},520:(Xt,ut,P)=>{"use strict";P.d(ut,{eN:()=>Xe,JF:()=>Nn,WM:()=>pe});var c=P(9808),J=P(5e3),q=P(9646),Se=P(8306),Ae=P(4351),Ee=P(9300),be=P(4004);class Re{}class ze{}class pe{constructor(qe){this.normalizedNames=new Map,this.lazyUpdate=null,qe?this.lazyInit="string"==typeof qe?()=>{this.headers=new Map,qe.split("\n").forEach(Je=>{const At=Je.indexOf(":");if(At>0){const Et=Je.slice(0,At),Kt=Et.toLowerCase(),bt=Je.slice(At+1).trim();this.maybeSetNormalizedName(Et,Kt),this.headers.has(Kt)?this.headers.get(Kt).push(bt):this.headers.set(Kt,[bt])}})}:()=>{this.headers=new Map,Object.keys(qe).forEach(Je=>{let At=qe[Je];const Et=Je.toLowerCase();"string"==typeof At&&(At=[At]),At.length>0&&(this.headers.set(Et,At),this.maybeSetNormalizedName(Je,Et))})}:this.headers=new Map}has(qe){return this.init(),this.headers.has(qe.toLowerCase())}get(qe){this.init();const Je=this.headers.get(qe.toLowerCase());return Je&&Je.length>0?Je[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(qe){return this.init(),this.headers.get(qe.toLowerCase())||null}append(qe,Je){return this.clone({name:qe,value:Je,op:"a"})}set(qe,Je){return this.clone({name:qe,value:Je,op:"s"})}delete(qe,Je){return this.clone({name:qe,value:Je,op:"d"})}maybeSetNormalizedName(qe,Je){this.normalizedNames.has(Je)||this.normalizedNames.set(Je,qe)}init(){this.lazyInit&&(this.lazyInit instanceof pe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(qe=>this.applyUpdate(qe)),this.lazyUpdate=null))}copyFrom(qe){qe.init(),Array.from(qe.headers.keys()).forEach(Je=>{this.headers.set(Je,qe.headers.get(Je)),this.normalizedNames.set(Je,qe.normalizedNames.get(Je))})}clone(qe){const Je=new pe;return Je.lazyInit=this.lazyInit&&this.lazyInit instanceof pe?this.lazyInit:this,Je.lazyUpdate=(this.lazyUpdate||[]).concat([qe]),Je}applyUpdate(qe){const Je=qe.name.toLowerCase();switch(qe.op){case"a":case"s":let At=qe.value;if("string"==typeof At&&(At=[At]),0===At.length)return;this.maybeSetNormalizedName(qe.name,Je);const Et=("a"===qe.op?this.headers.get(Je):void 0)||[];Et.push(...At),this.headers.set(Je,Et);break;case"d":const Kt=qe.value;if(Kt){let bt=this.headers.get(Je);if(!bt)return;bt=bt.filter(Un=>-1===Kt.indexOf(Un)),0===bt.length?(this.headers.delete(Je),this.normalizedNames.delete(Je)):this.headers.set(Je,bt)}else this.headers.delete(Je),this.normalizedNames.delete(Je)}}forEach(qe){this.init(),Array.from(this.normalizedNames.keys()).forEach(Je=>qe(this.normalizedNames.get(Je),this.headers.get(Je)))}}class ye{encodeKey(qe){return tt(qe)}encodeValue(qe){return tt(qe)}decodeKey(qe){return decodeURIComponent(qe)}decodeValue(qe){return decodeURIComponent(qe)}}const Oe=/%(\d[a-f0-9])/gi,Ue={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function tt(Bt){return encodeURIComponent(Bt).replace(Oe,(qe,Je)=>{var At;return null!==(At=Ue[Je])&&void 0!==At?At:qe})}function Le(Bt){return`${Bt}`}class De{constructor(qe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=qe.encoder||new ye,qe.fromString){if(qe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Me(Bt,qe){const Je=new Map;return Bt.length>0&&Bt.replace(/^\?/,"").split("&").forEach(Et=>{const Kt=Et.indexOf("="),[bt,Un]=-1==Kt?[qe.decodeKey(Et),""]:[qe.decodeKey(Et.slice(0,Kt)),qe.decodeValue(Et.slice(Kt+1))],Fn=Je.get(bt)||[];Fn.push(Un),Je.set(bt,Fn)}),Je}(qe.fromString,this.encoder)}else qe.fromObject?(this.map=new Map,Object.keys(qe.fromObject).forEach(Je=>{const At=qe.fromObject[Je];this.map.set(Je,Array.isArray(At)?At:[At])})):this.map=null}has(qe){return this.init(),this.map.has(qe)}get(qe){this.init();const Je=this.map.get(qe);return Je?Je[0]:null}getAll(qe){return this.init(),this.map.get(qe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(qe,Je){return this.clone({param:qe,value:Je,op:"a"})}appendAll(qe){const Je=[];return Object.keys(qe).forEach(At=>{const Et=qe[At];Array.isArray(Et)?Et.forEach(Kt=>{Je.push({param:At,value:Kt,op:"a"})}):Je.push({param:At,value:Et,op:"a"})}),this.clone(Je)}set(qe,Je){return this.clone({param:qe,value:Je,op:"s"})}delete(qe,Je){return this.clone({param:qe,value:Je,op:"d"})}toString(){return this.init(),this.keys().map(qe=>{const Je=this.encoder.encodeKey(qe);return this.map.get(qe).map(At=>Je+"="+this.encoder.encodeValue(At)).join("&")}).filter(qe=>""!==qe).join("&")}clone(qe){const Je=new De({encoder:this.encoder});return Je.cloneFrom=this.cloneFrom||this,Je.updates=(this.updates||[]).concat(qe),Je}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(qe=>this.map.set(qe,this.cloneFrom.map.get(qe))),this.updates.forEach(qe=>{switch(qe.op){case"a":case"s":const Je=("a"===qe.op?this.map.get(qe.param):void 0)||[];Je.push(Le(qe.value)),this.map.set(qe.param,Je);break;case"d":if(void 0===qe.value){this.map.delete(qe.param);break}{let At=this.map.get(qe.param)||[];const Et=At.indexOf(Le(qe.value));-1!==Et&&At.splice(Et,1),At.length>0?this.map.set(qe.param,At):this.map.delete(qe.param)}}}),this.cloneFrom=this.updates=null)}}class Ce{constructor(){this.map=new Map}set(qe,Je){return this.map.set(qe,Je),this}get(qe){return this.map.has(qe)||this.map.set(qe,qe.defaultValue()),this.map.get(qe)}delete(qe){return this.map.delete(qe),this}has(qe){return this.map.has(qe)}keys(){return this.map.keys()}}function ot(Bt){return"undefined"!=typeof ArrayBuffer&&Bt instanceof ArrayBuffer}function Ye(Bt){return"undefined"!=typeof Blob&&Bt instanceof Blob}function We(Bt){return"undefined"!=typeof FormData&&Bt instanceof FormData}class Ke{constructor(qe,Je,At,Et){let Kt;if(this.url=Je,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=qe.toUpperCase(),function nt(Bt){switch(Bt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Et?(this.body=void 0!==At?At:null,Kt=Et):Kt=At,Kt&&(this.reportProgress=!!Kt.reportProgress,this.withCredentials=!!Kt.withCredentials,Kt.responseType&&(this.responseType=Kt.responseType),Kt.headers&&(this.headers=Kt.headers),Kt.context&&(this.context=Kt.context),Kt.params&&(this.params=Kt.params)),this.headers||(this.headers=new pe),this.context||(this.context=new Ce),this.params){const bt=this.params.toString();if(0===bt.length)this.urlWithParams=Je;else{const Un=Je.indexOf("?");this.urlWithParams=Je+(-1===Un?"?":Un<Je.length-1?"&":"")+bt}}else this.params=new De,this.urlWithParams=Je}serializeBody(){return null===this.body?null:ot(this.body)||Ye(this.body)||We(this.body)||function $e(Bt){return"undefined"!=typeof URLSearchParams&&Bt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof De?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||We(this.body)?null:Ye(this.body)?this.body.type||null:ot(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof De?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(qe={}){var Je;const At=qe.method||this.method,Et=qe.url||this.url,Kt=qe.responseType||this.responseType,bt=void 0!==qe.body?qe.body:this.body,Un=void 0!==qe.withCredentials?qe.withCredentials:this.withCredentials,Fn=void 0!==qe.reportProgress?qe.reportProgress:this.reportProgress;let fn=qe.headers||this.headers,ei=qe.params||this.params;const fr=null!==(Je=qe.context)&&void 0!==Je?Je:this.context;return void 0!==qe.setHeaders&&(fn=Object.keys(qe.setHeaders).reduce((xr,we)=>xr.set(we,qe.setHeaders[we]),fn)),qe.setParams&&(ei=Object.keys(qe.setParams).reduce((xr,we)=>xr.set(we,qe.setParams[we]),ei)),new Ke(At,Et,bt,{params:ei,headers:fn,context:fr,reportProgress:Fn,responseType:Kt,withCredentials:Un})}}var ee=(()=>((ee=ee||{})[ee.Sent=0]="Sent",ee[ee.UploadProgress=1]="UploadProgress",ee[ee.ResponseHeader=2]="ResponseHeader",ee[ee.DownloadProgress=3]="DownloadProgress",ee[ee.Response=4]="Response",ee[ee.User=5]="User",ee))();class Qe{constructor(qe,Je=200,At="OK"){this.headers=qe.headers||new pe,this.status=void 0!==qe.status?qe.status:Je,this.statusText=qe.statusText||At,this.url=qe.url||null,this.ok=this.status>=200&&this.status<300}}class he extends Qe{constructor(qe={}){super(qe),this.type=ee.ResponseHeader}clone(qe={}){return new he({headers:qe.headers||this.headers,status:void 0!==qe.status?qe.status:this.status,statusText:qe.statusText||this.statusText,url:qe.url||this.url||void 0})}}class me extends Qe{constructor(qe={}){super(qe),this.type=ee.Response,this.body=void 0!==qe.body?qe.body:null}clone(qe={}){return new me({body:void 0!==qe.body?qe.body:this.body,headers:qe.headers||this.headers,status:void 0!==qe.status?qe.status:this.status,statusText:qe.statusText||this.statusText,url:qe.url||this.url||void 0})}}class ge extends Qe{constructor(qe){super(qe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${qe.url||"(unknown url)"}`:`Http failure response for ${qe.url||"(unknown url)"}: ${qe.status} ${qe.statusText}`,this.error=qe.error||null}}function Ne(Bt,qe){return{body:qe,headers:Bt.headers,context:Bt.context,observe:Bt.observe,params:Bt.params,reportProgress:Bt.reportProgress,responseType:Bt.responseType,withCredentials:Bt.withCredentials}}let Xe=(()=>{class Bt{constructor(Je){this.handler=Je}request(Je,At,Et={}){let Kt;if(Je instanceof Ke)Kt=Je;else{let Fn,fn;Fn=Et.headers instanceof pe?Et.headers:new pe(Et.headers),Et.params&&(fn=Et.params instanceof De?Et.params:new De({fromObject:Et.params})),Kt=new Ke(Je,At,void 0!==Et.body?Et.body:null,{headers:Fn,context:Et.context,params:fn,reportProgress:Et.reportProgress,responseType:Et.responseType||"json",withCredentials:Et.withCredentials})}const bt=(0,q.of)(Kt).pipe((0,Ae.b)(Fn=>this.handler.handle(Fn)));if(Je instanceof Ke||"events"===Et.observe)return bt;const Un=bt.pipe((0,Ee.h)(Fn=>Fn instanceof me));switch(Et.observe||"body"){case"body":switch(Kt.responseType){case"arraybuffer":return Un.pipe((0,be.U)(Fn=>{if(null!==Fn.body&&!(Fn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Fn.body}));case"blob":return Un.pipe((0,be.U)(Fn=>{if(null!==Fn.body&&!(Fn.body instanceof Blob))throw new Error("Response is not a Blob.");return Fn.body}));case"text":return Un.pipe((0,be.U)(Fn=>{if(null!==Fn.body&&"string"!=typeof Fn.body)throw new Error("Response is not a string.");return Fn.body}));default:return Un.pipe((0,be.U)(Fn=>Fn.body))}case"response":return Un;default:throw new Error(`Unreachable: unhandled observe type ${Et.observe}}`)}}delete(Je,At={}){return this.request("DELETE",Je,At)}get(Je,At={}){return this.request("GET",Je,At)}head(Je,At={}){return this.request("HEAD",Je,At)}jsonp(Je,At){return this.request("JSONP",Je,{params:(new De).append(At,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Je,At={}){return this.request("OPTIONS",Je,At)}patch(Je,At,Et={}){return this.request("PATCH",Je,Ne(Et,At))}post(Je,At,Et={}){return this.request("POST",Je,Ne(Et,At))}put(Je,At,Et={}){return this.request("PUT",Je,Ne(Et,At))}}return Bt.\u0275fac=function(Je){return new(Je||Bt)(J.LFG(Re))},Bt.\u0275prov=J.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})();class _t{constructor(qe,Je){this.next=qe,this.interceptor=Je}handle(qe){return this.interceptor.intercept(qe,this.next)}}const xt=new J.OlP("HTTP_INTERCEPTORS");let ct=(()=>{class Bt{intercept(Je,At){return At.handle(Je)}}return Bt.\u0275fac=function(Je){return new(Je||Bt)},Bt.\u0275prov=J.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})();const wt=/^\)\]\}',?\n/;let Sn=(()=>{class Bt{constructor(Je){this.xhrFactory=Je}handle(Je){if("JSONP"===Je.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Se.y(At=>{const Et=this.xhrFactory.build();if(Et.open(Je.method,Je.urlWithParams),Je.withCredentials&&(Et.withCredentials=!0),Je.headers.forEach((we,je)=>Et.setRequestHeader(we,je.join(","))),Je.headers.has("Accept")||Et.setRequestHeader("Accept","application/json, text/plain, */*"),!Je.headers.has("Content-Type")){const we=Je.detectContentTypeHeader();null!==we&&Et.setRequestHeader("Content-Type",we)}if(Je.responseType){const we=Je.responseType.toLowerCase();Et.responseType="json"!==we?we:"text"}const Kt=Je.serializeBody();let bt=null;const Un=()=>{if(null!==bt)return bt;const we=Et.statusText||"OK",je=new pe(Et.getAllResponseHeaders()),Ze=function kn(Bt){return"responseURL"in Bt&&Bt.responseURL?Bt.responseURL:/^X-Request-URL:/m.test(Bt.getAllResponseHeaders())?Bt.getResponseHeader("X-Request-URL"):null}(Et)||Je.url;return bt=new he({headers:je,status:Et.status,statusText:we,url:Ze}),bt},Fn=()=>{let{headers:we,status:je,statusText:Ze,url:Mt}=Un(),Fe=null;204!==je&&(Fe=void 0===Et.response?Et.responseText:Et.response),0===je&&(je=Fe?200:0);let mt=je>=200&&je<300;if("json"===Je.responseType&&"string"==typeof Fe){const zt=Fe;Fe=Fe.replace(wt,"");try{Fe=""!==Fe?JSON.parse(Fe):null}catch(rn){Fe=zt,mt&&(mt=!1,Fe={error:rn,text:Fe})}}mt?(At.next(new me({body:Fe,headers:we,status:je,statusText:Ze,url:Mt||void 0})),At.complete()):At.error(new ge({error:Fe,headers:we,status:je,statusText:Ze,url:Mt||void 0}))},fn=we=>{const{url:je}=Un(),Ze=new ge({error:we,status:Et.status||0,statusText:Et.statusText||"Unknown Error",url:je||void 0});At.error(Ze)};let ei=!1;const fr=we=>{ei||(At.next(Un()),ei=!0);let je={type:ee.DownloadProgress,loaded:we.loaded};we.lengthComputable&&(je.total=we.total),"text"===Je.responseType&&!!Et.responseText&&(je.partialText=Et.responseText),At.next(je)},xr=we=>{let je={type:ee.UploadProgress,loaded:we.loaded};we.lengthComputable&&(je.total=we.total),At.next(je)};return Et.addEventListener("load",Fn),Et.addEventListener("error",fn),Et.addEventListener("timeout",fn),Et.addEventListener("abort",fn),Je.reportProgress&&(Et.addEventListener("progress",fr),null!==Kt&&Et.upload&&Et.upload.addEventListener("progress",xr)),Et.send(Kt),At.next({type:ee.Sent}),()=>{Et.removeEventListener("error",fn),Et.removeEventListener("abort",fn),Et.removeEventListener("load",Fn),Et.removeEventListener("timeout",fn),Je.reportProgress&&(Et.removeEventListener("progress",fr),null!==Kt&&Et.upload&&Et.upload.removeEventListener("progress",xr)),Et.readyState!==Et.DONE&&Et.abort()}})}}return Bt.\u0275fac=function(Je){return new(Je||Bt)(J.LFG(c.JF))},Bt.\u0275prov=J.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})();const Dn=new J.OlP("XSRF_COOKIE_NAME"),mn=new J.OlP("XSRF_HEADER_NAME");class jn{}let Yn=(()=>{class Bt{constructor(Je,At,Et){this.doc=Je,this.platform=At,this.cookieName=Et,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Je=this.doc.cookie||"";return Je!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,c.Mx)(Je,this.cookieName),this.lastCookieString=Je),this.lastToken}}return Bt.\u0275fac=function(Je){return new(Je||Bt)(J.LFG(c.K0),J.LFG(J.Lbi),J.LFG(Dn))},Bt.\u0275prov=J.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})(),lr=(()=>{class Bt{constructor(Je,At){this.tokenService=Je,this.headerName=At}intercept(Je,At){const Et=Je.url.toLowerCase();if("GET"===Je.method||"HEAD"===Je.method||Et.startsWith("http://")||Et.startsWith("https://"))return At.handle(Je);const Kt=this.tokenService.getToken();return null!==Kt&&!Je.headers.has(this.headerName)&&(Je=Je.clone({headers:Je.headers.set(this.headerName,Kt)})),At.handle(Je)}}return Bt.\u0275fac=function(Je){return new(Je||Bt)(J.LFG(jn),J.LFG(mn))},Bt.\u0275prov=J.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})(),Hn=(()=>{class Bt{constructor(Je,At){this.backend=Je,this.injector=At,this.chain=null}handle(Je){if(null===this.chain){const At=this.injector.get(xt,[]);this.chain=At.reduceRight((Et,Kt)=>new _t(Et,Kt),this.backend)}return this.chain.handle(Je)}}return Bt.\u0275fac=function(Je){return new(Je||Bt)(J.LFG(ze),J.LFG(J.zs3))},Bt.\u0275prov=J.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})(),On=(()=>{class Bt{static disable(){return{ngModule:Bt,providers:[{provide:lr,useClass:ct}]}}static withOptions(Je={}){return{ngModule:Bt,providers:[Je.cookieName?{provide:Dn,useValue:Je.cookieName}:[],Je.headerName?{provide:mn,useValue:Je.headerName}:[]]}}}return Bt.\u0275fac=function(Je){return new(Je||Bt)},Bt.\u0275mod=J.oAB({type:Bt}),Bt.\u0275inj=J.cJS({providers:[lr,{provide:xt,useExisting:lr,multi:!0},{provide:jn,useClass:Yn},{provide:Dn,useValue:"XSRF-TOKEN"},{provide:mn,useValue:"X-XSRF-TOKEN"}]}),Bt})(),Nn=(()=>{class Bt{}return Bt.\u0275fac=function(Je){return new(Je||Bt)},Bt.\u0275mod=J.oAB({type:Bt}),Bt.\u0275inj=J.cJS({providers:[Xe,{provide:Re,useClass:Hn},Sn,{provide:ze,useExisting:Sn}],imports:[[On.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Bt})()},5e3:(Xt,ut,P)=>{"use strict";P.d(ut,{deG:()=>zl,tb:()=>pE,AFp:()=>cE,ip1:()=>uE,CZH:()=>xv,hGG:()=>ab,z2F:()=>Fv,sBO:()=>zI,Sil:()=>DI,_Vd:()=>T_,EJc:()=>bI,SBq:()=>jy,qLn:()=>Tl,vpe:()=>Eh,tBr:()=>wa,XFs:()=>In,OlP:()=>_i,zs3:()=>Da,ZZ4:()=>jv,aQg:()=>Hv,soG:()=>Rv,YKP:()=>w0,h0i:()=>Zm,PXZ:()=>LI,R0b:()=>Sd,FiY:()=>ao,Lbi:()=>fE,g9A:()=>hE,Qsj:()=>ww,FYo:()=>m0,JOm:()=>K,tp0:()=>Do,Rgc:()=>Wy,dDg:()=>_E,q4F:()=>_0,GfV:()=>y0,s_b:()=>x_,ifc:()=>Et,eFA:()=>wE,G48:()=>GI,Gpc:()=>ye,X6Q:()=>HI,_c5:()=>ob,VLi:()=>kI,c2e:()=>gE,zSh:()=>gd,wAp:()=>sr,vHH:()=>tt,cg1:()=>Mf,kL8:()=>Aa,dqk:()=>fn,sIi:()=>Ed,CqO:()=>l,QGY:()=>u,F4k:()=>o,RDi:()=>Ji,AaK:()=>Re,qOj:()=>uh,TTD:()=>ss,_Bn:()=>f0,xp6:()=>Hh,uIk:()=>Ya,ekj:()=>Pc,Suo:()=>$0,Xpm:()=>yn,lG2:()=>Bn,Yz7:()=>at,cJS:()=>Nt,oAB:()=>kr,Yjl:()=>wi,Y36:()=>Yi,_UZ:()=>Gu,GkF:()=>Fm,BQk:()=>bp,ynx:()=>Ip,qZA:()=>wp,TgZ:()=>Sf,EpF:()=>Lm,n5z:()=>qo,LFG:()=>dn,$8M:()=>cs,$Z:()=>my,NdJ:()=>f,CRH:()=>j0,oxw:()=>ve,ALo:()=>R0,xi3:()=>O0,gM2:()=>P0,Hsn:()=>jt,F$t:()=>Ct,Q6J:()=>Nm,s9C:()=>on,MGl:()=>gn,WLB:()=>D0,iGM:()=>V0,MAs:()=>mp,CHM:()=>_n,LSH:()=>To,YNc:()=>Lg,W1O:()=>W0,_uU:()=>Td,Oqu:()=>Ty,hij:()=>Fc,AsE:()=>Sy,lnq:()=>Ay,Gf:()=>U0});var c=P(7579),J=P(727),q=P(8306),Se=P(6451),Ae=P(3099);function Ee(n){for(let r in n)if(n[r]===Ee)return r;throw Error("Could not find renamed property on target object.")}function be(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Re(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Re).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ze(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const pe=Ee({__forward_ref__:Ee});function ye(n){return n.__forward_ref__=ye,n.toString=function(){return Re(this())},n}function Me(n){return Oe(n)?n():n}function Oe(n){return"function"==typeof n&&n.hasOwnProperty(pe)&&n.__forward_ref__===ye}class tt extends Error{constructor(r,s){super(function Le(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function De(n){return"string"==typeof n?n:null==n?"":String(n)}function ke(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():De(n)}function Ye(n,r){const s=r?` in ${r}`:"";throw new tt(-201,`No provider for ${ke(n)} found${s}`)}function lt(n,r){null==n&&function Ve(n,r,s,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${s} ${d} ${r} <=Actual]`))}(r,n,null,"!=")}function at(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Nt(n){return{providers:n.providers||[],imports:n.imports||[]}}function wt(n){return kn(n,jn)||kn(n,lr)}function kn(n,r){return n.hasOwnProperty(r)?n[r]:null}function mn(n){return n&&(n.hasOwnProperty(Yn)||n.hasOwnProperty(Hn))?n[Yn]:null}const jn=Ee({\u0275prov:Ee}),Yn=Ee({\u0275inj:Ee}),lr=Ee({ngInjectableDef:Ee}),Hn=Ee({ngInjectorDef:Ee});var In=(()=>((In=In||{})[In.Default=0]="Default",In[In.Host=1]="Host",In[In.Self=2]="Self",In[In.SkipSelf=4]="SkipSelf",In[In.Optional=8]="Optional",In))();let Qn;function Nn(n){const r=Qn;return Qn=n,r}function jr(n,r,s){const d=wt(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:s&In.Optional?null:void 0!==r?r:void Ye(Re(n),"Injector")}function Bt(n){return{toString:n}.toString()}var qe=(()=>((qe=qe||{})[qe.OnPush=0]="OnPush",qe[qe.Default=1]="Default",qe))(),Et=(()=>{return(n=Et||(Et={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Et;var n})();const Kt="undefined"!=typeof globalThis&&globalThis,bt="undefined"!=typeof window&&window,Un="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,fn=Kt||"undefined"!=typeof global&&global||bt||Un,xr={},we=[],je=Ee({\u0275cmp:Ee}),Ze=Ee({\u0275dir:Ee}),Mt=Ee({\u0275pipe:Ee}),Fe=Ee({\u0275mod:Ee}),mt=Ee({\u0275fac:Ee}),zt=Ee({__NG_ELEMENT_ID__:Ee});let rn=0;function yn(n){return Bt(()=>{const s={},d={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===qe.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||we,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Et.Emulated,id:"c",styles:n.styles||we,_:null,setInput:null,schemas:n.schemas||null,tView:null},p=n.directives,y=n.features,C=n.pipes;return d.id+=rn++,d.inputs=Gr(n.inputs,s),d.outputs=Gr(n.outputs),y&&y.forEach(x=>x(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(wr):null,d.pipeDefs=C?()=>("function"==typeof C?C():C).map(En):null,d})}function wr(n){return Yr(n)||function Hr(n){return n[Ze]||null}(n)}function En(n){return function $i(n){return n[Mt]||null}(n)}const rr={};function kr(n){return Bt(()=>{const r={type:n.type,bootstrap:n.bootstrap||we,declarations:n.declarations||we,imports:n.imports||we,exports:n.exports||we,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(rr[n.id]=n.type),r})}function Gr(n,r){if(null==n)return xr;const s={};for(const d in n)if(n.hasOwnProperty(d)){let p=n[d],y=p;Array.isArray(p)&&(y=p[1],p=p[0]),s[p]=d,r&&(r[p]=y)}return s}const Bn=yn;function wi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Yr(n){return n[je]||null}function Nr(n,r){const s=n[Fe]||null;if(!s&&!0===r)throw new Error(`Type ${Re(n)} does not have '\u0275mod' property.`);return s}function _e(n){return Array.isArray(n)&&"object"==typeof n[1]}function Te(n){return Array.isArray(n)&&!0===n[1]}function pt(n){return 0!=(8&n.flags)}function Vt(n){return 2==(2&n.flags)}function Rt(n){return 1==(1&n.flags)}function Ft(n){return null!==n.template}function ln(n){return 0!=(512&n[2])}function Pi(n,r){return n.hasOwnProperty(mt)?n[mt]:null}class Jr{constructor(r,s,d){this.previousValue=r,this.currentValue=s,this.firstChange=d}isFirstChange(){return this.firstChange}}function ss(){return ws}function ws(n){return n.type.prototype.ngOnChanges&&(n.setInput=Go),Is}function Is(){const n=os(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===xr)n.previous=r;else for(let d in r)s[d]=r[d];n.current=null,this.ngOnChanges(r)}}function Go(n,r,s,d){const p=os(n)||function Js(n,r){return n[Hs]=r}(n,{previous:xr,current:null}),y=p.current||(p.current={}),C=p.previous,x=this.declaredInputs[s],k=C[x];y[x]=new Jr(k&&k.currentValue,r,C===xr),n[d]=r}ss.ngInherit=!0;const Hs="__ngSimpleChanges__";function os(n){return n[Hs]||null}let zr;function Ji(n){zr=n}function _r(n){return!!n.listen}const V={createRenderer:(n,r)=>function ls(){return void 0!==zr?zr:"undefined"!=typeof document?document:void 0}()};function U(n){for(;Array.isArray(n);)n=n[0];return n}function kt(n,r){return U(r[n])}function qt(n,r){return U(r[n.index])}function Pn(n,r){return n.data[r]}function Jn(n,r){return n[r]}function ir(n,r){const s=r[n];return _e(s)?s:s[0]}function dr(n){return 4==(4&n[2])}function di(n){return 128==(128&n[2])}function Ur(n,r){return null==r?null:n[r]}function Ns(n){n[18]=0}function es(n,r){n[5]+=r;let s=n,d=n[3];for(;null!==d&&(1===r&&1===s[5]||-1===r&&0===s[5]);)d[5]+=r,s=d,d=d[3]}const Tn={lFrame:Wo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function z(){return Tn.bindingsEnabled}function Y(){return Tn.lFrame.lView}function Tt(){return Tn.lFrame.tView}function _n(n){return Tn.lFrame.contextLView=n,n[8]}function E(){let n=G();for(;null!==n&&64===n.type;)n=n.parent;return n}function G(){return Tn.lFrame.currentTNode}function B(n,r){const s=Tn.lFrame;s.currentTNode=n,s.isParent=r}function ce(){return Tn.lFrame.isParent}function Pt(){Tn.lFrame.isParent=!1}function er(){return Tn.isInCheckNoChangesMode}function $r(n){Tn.isInCheckNoChangesMode=n}function tr(){const n=Tn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function ti(){return Tn.lFrame.bindingIndex}function Wi(){return Tn.lFrame.bindingIndex++}function ji(n){const r=Tn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Xa(n,r){const s=Tn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Qa(r)}function Qa(n){Tn.lFrame.currentDirectiveIndex=n}function vu(){return Tn.lFrame.currentQueryIndex}function Ma(n){Tn.lFrame.currentQueryIndex=n}function Vl(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function fa(n,r,s){if(s&In.SkipSelf){let p=r,y=n;for(;!(p=p.parent,null!==p||s&In.Host||(p=Vl(y),null===p||(y=y[15],10&p.type))););if(null===p)return!1;r=p,n=y}const d=Tn.lFrame=el();return d.currentTNode=r,d.lView=n,!0}function ko(n){const r=el(),s=n[1];Tn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function el(){const n=Tn.lFrame,r=null===n?null:n.child;return null===r?Wo(n):r}function Wo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function pa(){const n=Tn.lFrame;return Tn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Eu=pa;function ra(){const n=pa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ts(){return Tn.lFrame.selectedIndex}function No(n){Tn.lFrame.selectedIndex=n}function Ki(){const n=Tn.lFrame;return Pn(n.tView,n.selectedIndex)}function $l(n,r){for(let s=r.directiveStart,d=r.directiveEnd;s<d;s++){const y=n.data[s].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:x,ngAfterViewInit:k,ngAfterViewChecked:Z,ngOnDestroy:ie}=y;C&&(n.contentHooks||(n.contentHooks=[])).push(-s,C),x&&((n.contentHooks||(n.contentHooks=[])).push(s,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,x)),k&&(n.viewHooks||(n.viewHooks=[])).push(-s,k),Z&&((n.viewHooks||(n.viewHooks=[])).push(s,Z),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,Z)),null!=ie&&(n.destroyHooks||(n.destroyHooks=[])).push(s,ie)}}function Oa(n,r,s){ns(n,r,3,s)}function Eo(n,r,s,d){(3&n[2])===s&&ns(n,r,s,d)}function us(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function ns(n,r,s,d){const y=null!=d?d:-1,C=r.length-1;let x=0;for(let k=void 0!==d?65535&n[18]:0;k<C;k++)if("number"==typeof r[k+1]){if(x=r[k],null!=d&&x>=d)break}else r[k]<0&&(n[18]+=65536),(x<y||-1==y)&&(jl(n,s,r,k),n[18]=(4294901760&n[18])+k+2),k++}function jl(n,r,s,d){const p=s[d]<0,y=s[d+1],x=n[p?-s[d]:s[d]];if(p){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{y.call(x)}finally{}}}else try{y.call(x)}finally{}}class po{constructor(r,s,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=d}}function ps(n,r,s){const d=_r(n);let p=0;for(;p<s.length;){const y=s[p];if("number"==typeof y){if(0!==y)break;p++;const C=s[p++],x=s[p++],k=s[p++];d?n.setAttribute(r,x,k,C):r.setAttributeNS(C,x,k)}else{const C=y,x=s[++p];Hl(C)?d&&n.setProperty(r,C,x):d?n.setAttribute(r,C,x):r.setAttribute(C,x),p++}}return p}function no(n){return 3===n||4===n||6===n}function Hl(n){return 64===n.charCodeAt(0)}function ro(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let d=0;d<r.length;d++){const p=r[d];"number"==typeof p?s=p:0===s||Fo(n,s,p,null,-1===s||2===s?r[++d]:null)}}return n}function Fo(n,r,s,d,p){let y=0,C=n.length;if(-1===r)C=-1;else for(;y<n.length;){const x=n[y++];if("number"==typeof x){if(x===r){C=-1;break}if(x>r){C=y-1;break}}}for(;y<n.length;){const x=n[y];if("number"==typeof x)break;if(x===s){if(null===d)return void(null!==p&&(n[y+1]=p));if(d===n[y+1])return void(n[y+2]=p)}y++,null!==d&&y++,null!==p&&y++}-1!==C&&(n.splice(C,0,r),y=C+1),n.splice(y++,0,s),null!==d&&n.splice(y++,0,d),null!==p&&n.splice(y++,0,p)}function bu(n){return-1!==n}function Io(n){return 32767&n}function Ci(n,r){let s=function Cu(n){return n>>16}(n),d=r;for(;s>0;)d=d[15],s--;return d}let rl=!0;function ya(n){const r=rl;return rl=n,r}let Du=0;function Qt(n,r){const s=oa(n,r);if(-1!==s)return s;const d=r[1];d.firstCreatePass&&(n.injectorIndex=r.length,ki(d.data,n),ki(r,null),ki(d.blueprint,null));const p=M(n,r),y=n.injectorIndex;if(bu(p)){const C=Io(p),x=Ci(p,r),k=x[1].data;for(let Z=0;Z<8;Z++)r[y+Z]=x[C+Z]|k[C+Z]}return r[y+8]=p,y}function ki(n,r){n.push(0,0,0,0,0,0,0,0,r)}function oa(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function M(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,d=null,p=r;for(;null!==p;){const y=p[1],C=y.type;if(d=2===C?y.declTNode:1===C?p[6]:null,null===d)return-1;if(s++,p=p[15],-1!==d.injectorIndex)return d.injectorIndex|s<<16}return-1}function S(n,r,s){!function Tu(n,r,s){let d;"string"==typeof s?d=s.charCodeAt(0)||0:s.hasOwnProperty(zt)&&(d=s[zt]),null==d&&(d=s[zt]=Du++);const p=255&d;r.data[n+(p>>5)]|=1<<p}(n,r,s)}function $(n,r,s){if(s&In.Optional)return n;Ye(r,"NodeInjector")}function j(n,r,s,d){if(s&In.Optional&&void 0===d&&(d=null),0==(s&(In.Self|In.Host))){const p=n[9],y=Nn(void 0);try{return p?p.get(r,d,s&In.Optional):jr(r,d,s&In.Optional)}finally{Nn(y)}}return $(d,r,s)}function W(n,r,s,d=In.Default,p){if(null!==n){const y=function Vn(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(zt)?n[zt]:void 0;return"number"==typeof r?r>=0?255&r:He:r}(s);if("function"==typeof y){if(!fa(r,n,d))return d&In.Host?$(p,s,d):j(r,s,d,p);try{const C=y(d);if(null!=C||d&In.Optional)return C;Ye(s)}finally{Eu()}}else if("number"==typeof y){let C=null,x=oa(n,r),k=-1,Z=d&In.Host?r[16][6]:null;for((-1===x||d&In.SkipSelf)&&(k=-1===x?M(n,r):r[x+8],-1!==k&&Xr(d,!1)?(C=r[1],x=Io(k),r=Ci(k,r)):x=-1);-1!==x;){const ie=r[1];if(Wr(y,x,ie.data)){const Ie=Ut(x,r,s,C,d,Z);if(Ie!==le)return Ie}k=r[x+8],-1!==k&&Xr(d,r[1].data[x+8]===Z)&&Wr(y,x,r)?(C=ie,x=Io(k),r=Ci(k,r)):x=-1}}}return j(r,s,d,p)}const le={};function He(){return new Fs(E(),Y())}function Ut(n,r,s,d,p,y){const C=r[1],x=C.data[n+8],ie=bn(x,C,s,null==d?Vt(x)&&rl:d!=C&&0!=(3&x.type),p&In.Host&&y===x);return null!==ie?vr(r,C,ie,x):le}function bn(n,r,s,d,p){const y=n.providerIndexes,C=r.data,x=1048575&y,k=n.directiveStart,ie=y>>20,it=p?x+ie:n.directiveEnd;for(let St=d?x:x+ie;St<it;St++){const Yt=C[St];if(St<k&&s===Yt||St>=k&&Yt.type===s)return St}if(p){const St=C[k];if(St&&Ft(St)&&St.type===s)return k}return null}function vr(n,r,s,d){let p=n[s];const y=r.data;if(function ia(n){return n instanceof po}(p)){const C=p;C.resolving&&function Ce(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new tt(-200,`Circular dependency in DI detected for ${n}${s}`)}(ke(y[s]));const x=ya(C.canSeeViewProviders);C.resolving=!0;const k=C.injectImpl?Nn(C.injectImpl):null;fa(n,d,In.Default);try{p=n[s]=C.factory(void 0,y,n,d),r.firstCreatePass&&s>=d.directiveStart&&function Md(n,r,s){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:y}=r.type.prototype;if(d){const C=ws(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,C),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,C)}p&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,p),y&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y))}(s,y[s],r)}finally{null!==k&&Nn(k),ya(x),C.resolving=!1,Eu()}}return p}function Wr(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Xr(n,r){return!(n&In.Self||n&In.Host&&r)}class Fs{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,d){return W(this._tNode,this._lView,r,d,s)}}function qo(n){return Bt(()=>{const r=n.prototype.constructor,s=r[mt]||fl(r),d=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==d;){const y=p[mt]||fl(p);if(y&&y!==s)return y;p=Object.getPrototypeOf(p)}return y=>new y})}function fl(n){return Oe(n)?()=>{const r=fl(Me(n));return r&&r()}:Pi(n)}function cs(n){return function D(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const d=s.length;let p=0;for(;p<d;){const y=s[p];if(no(y))break;if(0===y)p+=2;else if("number"==typeof y)for(p++;p<d&&"string"==typeof s[p];)p++;else{if(y===r)return s[p+1];p+=2}}}return null}(E(),n)}const Lo="__parameters__";function Vi(n,r,s){return Bt(()=>{const d=function Gl(n){return function(...s){if(n){const d=n(...s);for(const p in d)this[p]=d[p]}}}(r);function p(...y){if(this instanceof p)return d.apply(this,y),this;const C=new p(...y);return x.annotation=C,x;function x(k,Z,ie){const Ie=k.hasOwnProperty(Lo)?k[Lo]:Object.defineProperty(k,Lo,{value:[]})[Lo];for(;Ie.length<=ie;)Ie.push(null);return(Ie[ie]=Ie[ie]||[]).push(C),k}}return s&&(p.prototype=Object.create(s.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class _i{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=at({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const zl=new _i("AnalyzeForEntryComponents");function io(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let d=n[s];Array.isArray(d)?(r===n&&(r=n.slice(0,s)),io(d,r)):r!==n&&r.push(d)}return r}function gs(n,r){n.forEach(s=>Array.isArray(s)?gs(s,r):r(s))}function ds(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function so(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function aa(n,r){const s=[];for(let d=0;d<n;d++)s.push(r);return s}function oo(n,r,s){let d=gl(n,r);return d>=0?n[1|d]=s:(d=~d,function zs(n,r,s,d){let p=n.length;if(p==r)n.push(s,d);else if(1===p)n.push(d,n[0]),n[0]=s;else{for(p--,n.push(n[p-1],n[p]);p>r;)n[p]=n[p-2],p--;n[r]=s,n[r+1]=d}}(n,d,r,s)),d}function ua(n,r){const s=gl(n,r);if(s>=0)return n[1|s]}function gl(n,r){return function Kl(n,r,s){let d=0,p=n.length>>s;for(;p!==d;){const y=d+(p-d>>1),C=n[y<<s];if(r===C)return y<<s;C>r?p=y:d=y+1}return~(p<<s)}(n,r,1)}const _l={},vl="__NG_DI_FLAG__",sl="ngTempTokenPath",F=/\n/gm,ae="__source",Pe=Ee({provide:String,useValue:Ee});let yt;function Ot(n){const r=yt;return yt=n,r}function tn(n,r=In.Default){if(void 0===yt)throw new tt(203,"");return null===yt?jr(n,void 0,r):yt.get(n,r&In.Optional?null:void 0,r)}function dn(n,r=In.Default){return(function On(){return Qn}()||tn)(Me(n),r)}const $n=dn;function Kr(n){const r=[];for(let s=0;s<n.length;s++){const d=Me(n[s]);if(Array.isArray(d)){if(0===d.length)throw new tt(900,"");let p,y=In.Default;for(let C=0;C<d.length;C++){const x=d[C],k=qs(x);"number"==typeof k?-1===k?p=x.token:y|=k:p=x}r.push(dn(p,y))}else r.push(dn(d))}return r}function Rn(n,r){return n[vl]=r,n.prototype[vl]=r,n}function qs(n){return n[vl]}const wa=Rn(Vi("Inject",n=>({token:n})),-1),ao=Rn(Vi("Optional"),8),Do=Rn(Vi("SkipSelf"),4);class Ql{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ua(n){return n instanceof Ql?n.changingThisBreaksApplicationSecurity:n}const $a=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ni=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Gi=(()=>((Gi=Gi||{})[Gi.NONE=0]="NONE",Gi[Gi.HTML=1]="HTML",Gi[Gi.STYLE=2]="STYLE",Gi[Gi.SCRIPT=3]="SCRIPT",Gi[Gi.URL=4]="URL",Gi[Gi.RESOURCE_URL=5]="RESOURCE_URL",Gi))();function To(n){const r=function Cl(){const n=Y();return n&&n[12]}();return r?r.sanitize(Gi.URL,n)||"":function wl(n,r){const s=function $c(n){return n instanceof Ql&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?Ua(n):function pr(n){return(n=String(n)).match($a)||n.match(Ni)?n:"unsafe:"+n}(De(n))}const Ud="__ngContext__";function Ar(n,r){n[Ud]=r}function $d(n){const r=function tu(n){return n[Ud]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Os(n){return n.ngOriginalError}function jd(n,...r){n.error(...r)}class Tl{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),d=function Dl(n){return n&&n.ngErrorLogger||jd}(r);d(this._console,"ERROR",r),s&&d(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Os(r);for(;s&&Os(s);)s=Os(s);return s||null}}const uc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(fn))();function Uo(n){return n instanceof Function?n():n}var K=(()=>((K=K||{})[K.Important=1]="Important",K[K.DashCase=2]="DashCase",K))();function ht(n,r){return undefined(n,r)}function wn(n){const r=n[3];return Te(r)?r[3]:r}function _s(n){return Jc(n[13])}function da(n){return Jc(n[4])}function Jc(n){for(;null!==n&&!Te(n);)n=n[4];return n}function nu(n,r,s,d,p){if(null!=d){let y,C=!1;Te(d)?y=d:_e(d)&&(C=!0,d=d[0]);const x=U(d);0===n&&null!==s?null==p?Fh(r,s,x):Ao(r,s,x,p||null,!0):1===n&&null!==s?Ao(r,s,x,p||null,!0):2===n?function sd(n,r,s){const d=Hf(n,r);d&&function Pu(n,r,s,d){_r(n)?n.removeChild(r,s,d):r.removeChild(s)}(n,d,r,s)}(r,x,C):3===n&&r.destroyNode(x),null!=y&&function Yd(n,r,s,d,p){const y=s[7];y!==U(s)&&nu(r,n,d,y,p);for(let x=10;x<s.length;x++){const k=s[x];xl(k[1],k,n,r,d,y)}}(r,n,y,s,p)}}function dc(n,r,s){if(_r(n))return n.createElement(r,s);{const d=null!==s?function Oo(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===d?n.createElement(r):n.createElementNS(d,r)}}function ru(n,r){const s=n[9],d=s.indexOf(r),p=r[3];1024&r[2]&&(r[2]&=-1025,es(p,-1)),s.splice(d,1)}function Np(n,r){if(n.length<=10)return;const s=10+r,d=n[s];if(d){const p=d[17];null!==p&&p!==n&&ru(p,d),r>0&&(n[s-1][4]=d[4]);const y=so(n,10+r);!function Wd(n,r){xl(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(d[1],d);const C=y[19];null!==C&&C.detachView(y[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Fp(n,r){if(!(256&r[2])){const s=r[11];_r(s)&&s.destroyNode&&xl(n,r,s,3,null,null),function nd(n){let r=n[13];if(!r)return rd(n[1],n);for(;r;){let s=null;if(_e(r))s=r[13];else{const d=r[10];d&&(s=d)}if(!s){for(;r&&!r[4]&&r!==n;)_e(r)&&rd(r[1],r),r=r[3];null===r&&(r=n),_e(r)&&rd(r[1],r),s=r&&r[4]}r=s}}(r)}}function rd(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function rm(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let d=0;d<s.length;d+=2){const p=r[s[d]];if(!(p instanceof po)){const y=s[d+1];if(Array.isArray(y))for(let C=0;C<y.length;C+=2){const x=p[y[C]],k=y[C+1];try{k.call(x)}finally{}}else try{y.call(p)}finally{}}}}(n,r),function nm(n,r){const s=n.cleanup,d=r[7];let p=-1;if(null!==s)for(let y=0;y<s.length-1;y+=2)if("string"==typeof s[y]){const C=s[y+1],x="function"==typeof C?C(r):U(r[C]),k=d[p=s[y+2]],Z=s[y+3];"boolean"==typeof Z?x.removeEventListener(s[y],k,Z):Z>=0?d[p=Z]():d[p=-Z].unsubscribe(),y+=2}else{const C=d[p=s[y+1]];s[y].call(C)}if(null!==d){for(let y=p+1;y<d.length;y++)d[y]();r[7]=null}}(n,r),1===r[1].type&&_r(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&Te(r[3])){s!==r[3]&&ru(s,r);const d=r[19];null!==d&&d.detachView(n)}}}function $t(n,r,s){return function Ou(n,r,s){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return s[0];if(2&d.flags){const p=n.data[d.directiveStart].encapsulation;if(p===Et.None||p===Et.Emulated)return null}return qt(d,s)}(n,r.parent,s)}function Ao(n,r,s,d,p){_r(n)?n.insertBefore(r,s,d,p):r.insertBefore(s,d,p)}function Fh(n,r,s){_r(n)?n.appendChild(r,s):r.appendChild(s)}function ll(n,r,s,d,p){null!==d?Ao(n,r,s,d,p):Fh(n,r,s)}function Hf(n,r){return _r(n)?n.parentNode(r):r.parentNode}function Wa(n,r,s){return Lh(n,r,s)}let Lh=function fc(n,r,s){return 40&n.type?qt(n,s):null};function ul(n,r,s,d){const p=$t(n,d,r),y=r[11],x=Wa(d.parent||r[6],d,r);if(null!=p)if(Array.isArray(s))for(let k=0;k<s.length;k++)ll(y,p,s[k],x,!1);else ll(y,p,s,x,!1)}function id(n,r){if(null!==r){const s=r.type;if(3&s)return qt(r,n);if(4&s)return qd(-1,n[r.index]);if(8&s){const d=r.child;if(null!==d)return id(n,d);{const p=n[r.index];return Te(p)?qd(-1,p):U(p)}}if(32&s)return ht(r,n)()||U(n[r.index]);{const d=Jo(n,r);return null!==d?Array.isArray(d)?d[0]:id(wn(n[16]),d):id(n,r.next)}}return null}function Jo(n,r){return null!==r?n[16][6].projection[r.projection]:null}function qd(n,r){const s=10+n+1;if(s<r.length){const d=r[s],p=d[1].firstChild;if(null!==p)return id(d,p)}return r[7]}function Bh(n,r,s,d,p,y,C){for(;null!=s;){const x=d[s.index],k=s.type;if(C&&0===r&&(x&&Ar(U(x),d),s.flags|=4),64!=(64&s.flags))if(8&k)Bh(n,r,s.child,d,p,y,!1),nu(r,n,p,x,y);else if(32&k){const Z=ht(s,d);let ie;for(;ie=Z();)nu(r,n,p,ie,y);nu(r,n,p,x,y)}else 16&k?pc(n,r,d,s,p,y):nu(r,n,p,x,y);s=C?s.projectionNext:s.next}}function xl(n,r,s,d,p,y){Bh(s,d,n.firstChild,r,p,y,!1)}function pc(n,r,s,d,p,y){const C=s[16],k=C[6].projection[d.projection];if(Array.isArray(k))for(let Z=0;Z<k.length;Z++)nu(r,n,p,k[Z],y);else Bh(n,r,k,C[3],p,y,!0)}function Lp(n,r,s){_r(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Uh(n,r,s){_r(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Gf(n,r,s){let d=n.length;for(;;){const p=n.indexOf(r,s);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const y=r.length;if(p+y===d||n.charCodeAt(p+y)<=32)return p}s=p+1}}const Bp="ng-template";function sm(n,r,s){let d=0;for(;d<n.length;){let p=n[d++];if(s&&"class"===p){if(p=n[d],-1!==Gf(p.toLowerCase(),r,0))return!0}else if(1===p){for(;d<n.length&&"string"==typeof(p=n[d++]);)if(p.toLowerCase()===r)return!0;return!1}}return!1}function Vp(n){return 4===n.type&&n.value!==Bp}function Up(n,r,s){return r===(4!==n.type||s?n.value:Bp)}function $h(n,r,s){let d=4;const p=n.attrs||[],y=function om(n){for(let r=0;r<n.length;r++)if(no(n[r]))return r;return n.length}(p);let C=!1;for(let x=0;x<r.length;x++){const k=r[x];if("number"!=typeof k){if(!C)if(4&d){if(d=2|1&d,""!==k&&!Up(n,k,s)||""===k&&1===r.length){if($o(d))return!1;C=!0}}else{const Z=8&d?k:r[++x];if(8&d&&null!==n.attrs){if(!sm(n.attrs,Z,s)){if($o(d))return!1;C=!0}continue}const Ie=Jm(8&d?"class":k,p,Vp(n),s);if(-1===Ie){if($o(d))return!1;C=!0;continue}if(""!==Z){let it;it=Ie>y?"":p[Ie+1].toLowerCase();const St=8&d?it:null;if(St&&-1!==Gf(St,Z,0)||2&d&&Z!==it){if($o(d))return!1;C=!0}}}}else{if(!C&&!$o(d)&&!$o(k))return!1;if(C&&$o(k))continue;C=!1,d=k|1&d}}return $o(d)||C}function $o(n){return 0==(1&n)}function Jm(n,r,s,d){if(null===r)return-1;let p=0;if(d||!s){let y=!1;for(;p<r.length;){const C=r[p];if(C===n)return p;if(3===C||6===C)y=!0;else{if(1===C||2===C){let x=r[++p];for(;"string"==typeof x;)x=r[++p];continue}if(4===C)break;if(0===C){p+=4;continue}}p+=y?1:2}return-1}return function zf(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const d=n[s];if("number"==typeof d)return-1;if(d===r)return s;s++}return-1}(r,n)}function Zd(n,r,s=!1){for(let d=0;d<r.length;d++)if($h(n,r[d],s))return!0;return!1}function jh(n,r){e:for(let s=0;s<r.length;s++){const d=r[s];if(n.length===d.length){for(let p=0;p<n.length;p++)if(n[p]!==d[p])continue e;return!0}}return!1}function iu(n,r){return n?":not("+r.trim()+")":r}function gc(n){let r=n[0],s=1,d=2,p="",y=!1;for(;s<n.length;){let C=n[s];if("string"==typeof C)if(2&d){const x=n[++s];p+="["+C+(x.length>0?'="'+x+'"':"")+"]"}else 8&d?p+="."+C:4&d&&(p+=" "+C);else""!==p&&!$o(C)&&(r+=iu(y,p),p=""),d=C,y=y||!$o(d);s++}return""!==p&&(r+=iu(y,p)),r}const Lr={};function Hh(n){ad(Tt(),Y(),ts()+n,er())}function ad(n,r,s,d){if(!d)if(3==(3&r[2])){const y=n.preOrderCheckHooks;null!==y&&Oa(r,y,s)}else{const y=n.preOrderHooks;null!==y&&Eo(r,y,0,s)}No(s)}function Gh(n,r){return n<<17|r<<2}function ha(n){return n>>17&32767}function ld(n){return 2|n}function Ss(n){return(131068&n)>>2}function Kh(n,r){return-131069&n|r<<2}function Xd(n){return 1|n}function wc(n,r){const s=n.contentQueries;if(null!==s)for(let d=0;d<s.length;d+=2){const p=s[d],y=s[d+1];if(-1!==y){const C=n.data[y];Ma(p),C.contentQueries(2,r[y],y)}}}function Ka(n,r,s,d,p,y,C,x,k,Z){const ie=r.blueprint.slice();return ie[0]=p,ie[2]=140|d,Ns(ie),ie[3]=ie[15]=n,ie[8]=s,ie[10]=C||n&&n[10],ie[11]=x||n&&n[11],ie[12]=k||n&&n[12]||null,ie[9]=Z||n&&n[9]||null,ie[6]=y,ie[16]=2==r.type?n[16]:ie,ie}function Ic(n,r,s,d,p){let y=n.data[r];if(null===y)y=function ef(n,r,s,d,p){const y=G(),C=ce(),k=n.data[r]=function ag(n,r,s,d,p,y){return{type:s,index:d,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?y:y&&y.parent,s,r,d,p);return null===n.firstChild&&(n.firstChild=k),null!==y&&(C?null==y.child&&null!==k.parent&&(y.child=k):null===y.next&&(y.next=k)),k}(n,r,s,d,p),function to(){return Tn.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=s,y.value=d,y.attrs=p;const C=function w(){const n=Tn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===C?-1:C.injectorIndex}return B(y,!0),y}function bc(n,r,s,d){if(0===s)return-1;const p=r.length;for(let y=0;y<s;y++)r.push(d),n.blueprint.push(d),n.data.push(null);return p}function Cc(n,r,s){ko(r);try{const d=n.viewQuery;null!==d&&Vu(1,d,s);const p=n.template;null!==p&&Jd(n,r,p,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&wc(n,r),n.staticViewQueries&&Vu(2,n.viewQuery,s);const y=n.components;null!==y&&function rg(n,r){for(let s=0;s<r.length;s++)rh(n,r[s])}(r,y)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{r[2]&=-5,ra()}}function Ml(n,r,s,d){const p=r[2];if(256==(256&p))return;ko(r);const y=er();try{Ns(r),function Ds(n){return Tn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Jd(n,r,s,2,d);const C=3==(3&p);if(!y)if(C){const Z=n.preOrderCheckHooks;null!==Z&&Oa(r,Z,null)}else{const Z=n.preOrderHooks;null!==Z&&Eo(r,Z,0,null),us(r,0)}if(function Ca(n){for(let r=_s(n);null!==r;r=da(r)){if(!r[2])continue;const s=r[9];for(let d=0;d<s.length;d++){const p=s[d],y=p[3];0==(1024&p[2])&&es(y,1),p[2]|=1024}}}(r),function cf(n){for(let r=_s(n);null!==r;r=da(r))for(let s=10;s<r.length;s++){const d=r[s],p=d[1];di(d)&&Ml(p,d,p.template,d[8])}}(r),null!==n.contentQueries&&wc(n,r),!y)if(C){const Z=n.contentCheckHooks;null!==Z&&Oa(r,Z)}else{const Z=n.contentHooks;null!==Z&&Eo(r,Z,1),us(r,1)}!function ry(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let d=0;d<s.length;d++){const p=s[d];if(p<0)No(~p);else{const y=p,C=s[++d],x=s[++d];Xa(C,y),x(2,r[y])}}}finally{No(-1)}}(n,r);const x=n.components;null!==x&&function Fu(n,r){for(let s=0;s<r.length;s++)dg(n,r[s])}(r,x);const k=n.viewQuery;if(null!==k&&Vu(2,k,d),!y)if(C){const Z=n.viewCheckHooks;null!==Z&&Oa(r,Z)}else{const Z=n.viewHooks;null!==Z&&Eo(r,Z,2),us(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),y||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,es(r[3],-1))}finally{ra()}}function ig(n,r,s,d){const p=r[10],y=!er(),C=dr(r);try{y&&!C&&p.begin&&p.begin(),C&&Cc(n,r,d),Ml(n,r,s,d)}finally{y&&!C&&p.end&&p.end()}}function Jd(n,r,s,d,p){const y=ts(),C=2&d;try{No(-1),C&&r.length>20&&ad(n,r,20,er()),s(d,p)}finally{No(y)}}function Xf(n,r,s){if(pt(r)){const p=r.directiveEnd;for(let y=r.directiveStart;y<p;y++){const C=n.data[y];C.contentQueries&&C.contentQueries(1,s[y],y)}}}function sg(n,r,s){!z()||(function cg(n,r,s,d){const p=s.directiveStart,y=s.directiveEnd;n.firstCreatePass||Qt(s,r),Ar(d,r);const C=s.initialInputs;for(let x=p;x<y;x++){const k=n.data[x],Z=Ft(k);Z&&lu(r,s,k);const ie=vr(r,n,x,s);Ar(ie,r),null!==C&&np(0,x-p,ie,k,0,C),Z&&(ir(s.index,r)[8]=ie)}}(n,r,s,qt(s,r)),128==(128&s.flags)&&function gm(n,r,s){const d=s.directiveStart,p=s.directiveEnd,C=s.index,x=function Bl(){return Tn.lFrame.currentDirectiveIndex}();try{No(C);for(let k=d;k<p;k++){const Z=n.data[k],ie=r[k];Qa(k),(null!==Z.hostBindings||0!==Z.hostVars||null!==Z.hostAttrs)&&af(Z,ie)}}finally{No(-1),Qa(x)}}(n,r,s))}function Lu(n,r,s=qt){const d=r.localNames;if(null!==d){let p=r.index+1;for(let y=0;y<d.length;y+=2){const C=d[y+1],x=-1===C?s(r,n):n[C];n[p++]=x}}}function yo(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Qf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Qf(n,r,s,d,p,y,C,x,k,Z){const ie=20+d,Ie=ie+p,it=function iy(n,r){const s=[];for(let d=0;d<r;d++)s.push(d<n?null:Lr);return s}(ie,Ie),St="function"==typeof Z?Z():Z;return it[1]={type:n,blueprint:it,template:s,queries:null,viewQuery:x,declTNode:r,data:it.slice().fill(null,ie),bindingStartIndex:ie,expandoStartIndex:Ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:k,consts:St,incompleteFirstPass:!1}}function og(n,r,s,d){const p=sp(r);null===s?p.push(d):(p.push(s),n.firstCreatePass&&op(n).push(d,p.length-1))}function lg(n,r,s){for(let d in n)if(n.hasOwnProperty(d)){const p=n[d];(s=null===s?{}:s).hasOwnProperty(d)?s[d].push(r,p):s[d]=[r,p]}return s}function xo(n,r,s,d,p,y,C,x){const k=qt(r,s);let ie,Z=r.inputs;!x&&null!=Z&&(ie=Z[d])?(gf(n,s,ie,d,p),Vt(r)&&function dd(n,r){const s=ir(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(d=function tf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),p=null!=C?C(p,r.value||"",d):p,_r(y)?y.setProperty(k,d,p):Hl(d)||(k.setProperty?k.setProperty(d,p):k[d]=p))}function rf(n,r,s,d){let p=!1;if(z()){const y=function lf(n,r,s){const d=n.directiveRegistry;let p=null;if(d)for(let y=0;y<d.length;y++){const C=d[y];Zd(s,C.selectors,!1)&&(p||(p=[]),S(Qt(s,r),n,C.type),Ft(C)?(eh(n,s),p.unshift(C)):p.push(C))}return p}(n,r,s),C=null===d?null:{"":-1};if(null!==y){p=!0,ym(s,n.data.length,y.length);for(let ie=0;ie<y.length;ie++){const Ie=y[ie];Ie.providersResolver&&Ie.providersResolver(Ie)}let x=!1,k=!1,Z=bc(n,r,y.length,null);for(let ie=0;ie<y.length;ie++){const Ie=y[ie];s.mergedAttrs=ro(s.mergedAttrs,Ie.hostAttrs),th(n,s,r,Z,Ie),mm(Z,Ie,C),null!==Ie.contentQueries&&(s.flags|=8),(null!==Ie.hostBindings||null!==Ie.hostAttrs||0!==Ie.hostVars)&&(s.flags|=128);const it=Ie.type.prototype;!x&&(it.ngOnChanges||it.ngOnInit||it.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),x=!0),!k&&(it.ngOnChanges||it.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),k=!0),Z++}!function ug(n,r){const d=r.directiveEnd,p=n.data,y=r.attrs,C=[];let x=null,k=null;for(let Z=r.directiveStart;Z<d;Z++){const ie=p[Z],Ie=ie.inputs,it=null===y||Vp(r)?null:Tc(Ie,y);C.push(it),x=lg(Ie,Z,x),k=lg(ie.outputs,Z,k)}null!==x&&(x.hasOwnProperty("class")&&(r.flags|=16),x.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=C,r.inputs=x,r.outputs=k}(n,s)}C&&function uf(n,r,s){if(r){const d=n.localNames=[];for(let p=0;p<r.length;p+=2){const y=s[r[p+1]];if(null==y)throw new tt(-301,!1);d.push(r[p],y)}}}(s,d,C)}return s.mergedAttrs=ro(s.mergedAttrs,s.attrs),p}function pm(n,r,s,d,p,y){const C=y.hostBindings;if(C){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const k=~r.index;(function sf(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(x)!=k&&x.push(k),x.push(d,p,C)}}function af(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function eh(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function mm(n,r,s){if(s){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)s[r.exportAs[d]]=n;Ft(r)&&(s[""]=n)}}function ym(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function th(n,r,s,d,p){n.data[d]=p;const y=p.factory||(p.factory=Pi(p.type)),C=new po(y,Ft(p),null);n.blueprint[d]=C,s[d]=C,pm(n,r,0,d,bc(n,s,p.hostVars,Lr),p)}function lu(n,r,s){const d=qt(r,n),p=yo(s),y=n[10],C=ea(n,Ka(n,p,null,s.onPush?64:16,d,r,y,y.createRenderer(d,s),null,null));n[r.index]=C}function ba(n,r,s,d,p,y){const C=qt(n,r);!function fd(n,r,s,d,p,y,C){if(null==y)_r(n)?n.removeAttribute(r,p,s):r.removeAttribute(p);else{const x=null==C?De(y):C(y,d||"",p);_r(n)?n.setAttribute(r,p,x,s):s?r.setAttributeNS(s,p,x):r.setAttribute(p,x)}}(r[11],C,y,n.value,s,d,p)}function np(n,r,s,d,p,y){const C=y[r];if(null!==C){const x=d.setInput;for(let k=0;k<C.length;){const Z=C[k++],ie=C[k++],Ie=C[k++];null!==x?d.setInput(s,Ie,Z,ie):s[ie]=Ie}}}function Tc(n,r){let s=null,d=0;for(;d<r.length;){const p=r[d];if(0!==p)if(5!==p){if("number"==typeof p)break;n.hasOwnProperty(p)&&(null===s&&(s=[]),s.push(p,n[p],r[d+1])),d+=2}else d+=2;else d+=4}return s}function Bu(n,r,s,d){return new Array(n,!0,!1,r,null,0,d,s,null,null)}function dg(n,r){const s=ir(r,n);if(di(s)){const d=s[1];80&s[2]?Ml(d,s,d.template,s[8]):s[5]>0&&df(s)}}function df(n){for(let d=_s(n);null!==d;d=da(d))for(let p=10;p<d.length;p++){const y=d[p];if(1024&y[2]){const C=y[1];Ml(C,y,C.template,y[8])}else y[5]>0&&df(y)}const s=n[1].components;if(null!==s)for(let d=0;d<s.length;d++){const p=ir(s[d],n);di(p)&&p[5]>0&&df(p)}}function rh(n,r){const s=ir(r,n),d=s[1];(function uu(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(d,s),Cc(d,s,s[8])}function ea(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function rp(n){for(;n;){n[2]|=64;const r=wn(n);if(ln(n)&&!r)return n;n=r}return null}function hf(n,r,s){const d=r[10];d.begin&&d.begin();try{Ml(n,r,n.template,s)}catch(p){throw pg(r,p),p}finally{d.end&&d.end()}}function _m(n){!function ip(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],d=$d(s),p=d[1];ig(p,d,p.template,s)}}(n[8])}function Vu(n,r,s){Ma(0),r(n,s)}const pd=(()=>Promise.resolve(null))();function sp(n){return n[7]||(n[7]=[])}function op(n){return n.cleanup||(n.cleanup=[])}function pg(n,r){const s=n[9],d=s?s.get(Tl,null):null;d&&d.handleError(r)}function gf(n,r,s,d,p){for(let y=0;y<s.length;){const C=s[y++],x=s[y++],k=r[C],Z=n.data[C];null!==Z.setInput?Z.setInput(k,p,d,x):k[x]=p}}function Uu(n,r,s){const d=kt(r,n);!function Nh(n,r,s){_r(n)?n.setValue(r,s):r.textContent=s}(n[11],d,s)}function ih(n,r,s){let d=s?n.styles:null,p=s?n.classes:null,y=0;if(null!==r)for(let C=0;C<r.length;C++){const x=r[C];"number"==typeof x?y=x:1==y?p=ze(p,x):2==y&&(d=ze(d,x+": "+r[++C]+";"))}s?n.styles=d:n.stylesWithoutHost=d,s?n.classes=p:n.classesWithoutHost=p}const mf=new _i("INJECTOR",-1);class Em{get(r,s=_l){if(s===_l){const d=new Error(`NullInjectorError: No provider for ${Re(r)}!`);throw d.name="NullInjectorError",d}return s}}const gd=new _i("Set Injector scope."),md={},gg={};let cu;function Rl(){return void 0===cu&&(cu=new Em),cu}function yd(n,r=null,s=null,d){const p=Ol(n,r,s,d);return p._resolveInjectorDefTypes(),p}function Ol(n,r=null,s=null,d){return new sh(n,s,r||Rl(),d)}class sh{constructor(r,s,d,p=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];s&&gs(s,x=>this.processProvider(x,r,s)),gs([r],x=>this.processInjectorType(x,[],y)),this.records.set(mf,_d(void 0,this));const C=this.records.get(gd);this.scope=null!=C?C.value:null,this.source=p||("object"==typeof r?null:Re(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=_l,d=In.Default){this.assertNotDestroyed();const p=Ot(this),y=Nn(void 0);try{if(!(d&In.SkipSelf)){let x=this.records.get(r);if(void 0===x){const k=function vg(n){return"function"==typeof n||"object"==typeof n&&n instanceof _i}(r)&&wt(r);x=k&&this.injectableDefInScope(k)?_d(Sc(r),md):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(d&In.Self?Rl():this.parent).get(r,s=d&In.Optional&&s===_l?null:s)}catch(C){if("NullInjectorError"===C.name){if((C[sl]=C[sl]||[]).unshift(Re(r)),p)throw C;return function si(n,r,s,d){const p=n[sl];throw r[ae]&&p.unshift(r[ae]),n.message=function hi(n,r,s,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let p=Re(r);if(Array.isArray(r))p=r.map(Re).join(" -> ");else if("object"==typeof r){let y=[];for(let C in r)if(r.hasOwnProperty(C)){let x=r[C];y.push(C+":"+("string"==typeof x?JSON.stringify(x):Re(x)))}p=`{${y.join(", ")}}`}return`${s}${d?"("+d+")":""}[${p}]: ${n.replace(F,"\n  ")}`}("\n"+n.message,p,s,d),n.ngTokenPath=p,n[sl]=null,n}(C,r,"R3InjectorError",this.source)}throw C}finally{Nn(y),Ot(p)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((d,p)=>r.push(Re(p))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new tt(205,!1)}processInjectorType(r,s,d){if(!(r=Me(r)))return!1;let p=mn(r);const y=null==p&&r.ngModule||void 0,C=void 0===y?r:y,x=-1!==d.indexOf(C);if(void 0!==y&&(p=mn(y)),null==p)return!1;if(null!=p.imports&&!x){let ie;d.push(C);try{gs(p.imports,Ie=>{this.processInjectorType(Ie,s,d)&&(void 0===ie&&(ie=[]),ie.push(Ie))})}finally{}if(void 0!==ie)for(let Ie=0;Ie<ie.length;Ie++){const{ngModule:it,providers:St}=ie[Ie];gs(St,Yt=>this.processProvider(Yt,it,St||we))}}this.injectorDefTypes.add(C);const k=Pi(C)||(()=>new C);this.records.set(C,_d(k,md));const Z=p.providers;if(null!=Z&&!x){const ie=r;gs(Z,Ie=>this.processProvider(Ie,ie,Z))}return void 0!==y&&void 0!==r.providers}processProvider(r,s,d){let p=du(r=Me(r))?r:Me(r&&r.provide);const y=function wm(n,r,s){return mg(n)?_d(void 0,n.useValue):_d(Ac(n),md)}(r);if(du(r)||!0!==r.multi)this.records.get(p);else{let C=this.records.get(p);C||(C=_d(void 0,md,!0),C.factory=()=>Kr(C.multi),this.records.set(p,C)),p=r,C.multi.push(r)}this.records.set(p,y)}hydrate(r,s){return s.value===md&&(s.value=gg,s.value=s.factory()),"object"==typeof s.value&&s.value&&function _g(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Me(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Sc(n){const r=wt(n),s=null!==r?r.factory:Pi(n);if(null!==s)return s;if(n instanceof _i)throw new tt(204,!1);if(n instanceof Function)return function Pl(n){const r=n.length;if(r>0)throw aa(r,"?"),new tt(204,!1);const s=function Sn(n){const r=n&&(n[jn]||n[lr]);if(r){const s=function Dn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new tt(204,!1)}function Ac(n,r,s){let d;if(du(n)){const p=Me(n);return Pi(p)||Sc(p)}if(mg(n))d=()=>Me(n.useValue);else if(function yf(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Kr(n.deps||[]));else if(function oh(n){return!(!n||!n.useExisting)}(n))d=()=>dn(Me(n.useExisting));else{const p=Me(n&&(n.useClass||n.provide));if(!function ay(n){return!!n.deps}(n))return Pi(p)||Sc(p);d=()=>new p(...Kr(n.deps))}return d}function _d(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function mg(n){return null!==n&&"object"==typeof n&&Pe in n}function du(n){return"function"==typeof n}let Da=(()=>{class n{static create(s,d){var p;if(Array.isArray(s))return yd({name:""},d,s,"");{const y=null!==(p=s.name)&&void 0!==p?p:"";return yd({name:y},s.parent,s.providers,y)}}}return n.THROW_IF_NOT_FOUND=_l,n.NULL=new Em,n.\u0275prov=at({token:n,providedIn:"any",factory:()=>dn(mf)}),n.__NG_ELEMENT_ID__=-1,n})();function Cm(n,r){$l($d(n)[1],E())}function uh(n){let r=function Sa(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const d=[n];for(;r;){let p;if(Ft(n))p=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new tt(903,"");p=r.\u0275dir}if(p){if(s){d.push(p);const C=n;C.inputs=fp(n.inputs),C.declaredInputs=fp(n.declaredInputs),C.outputs=fp(n.outputs);const x=p.hostBindings;x&&xg(n,x);const k=p.viewQuery,Z=p.contentQueries;if(k&&Ag(n,k),Z&&Dm(n,Z),be(n.inputs,p.inputs),be(n.declaredInputs,p.declaredInputs),be(n.outputs,p.outputs),Ft(p)&&p.data.animation){const ie=n.data;ie.animation=(ie.animation||[]).concat(p.data.animation)}}const y=p.features;if(y)for(let C=0;C<y.length;C++){const x=y[C];x&&x.ngInherit&&x(n),x===uh&&(s=!1)}}r=Object.getPrototypeOf(r)}!function ch(n){let r=0,s=null;for(let d=n.length-1;d>=0;d--){const p=n[d];p.hostVars=r+=p.hostVars,p.hostAttrs=ro(p.hostAttrs,s=ro(s,p.hostAttrs))}}(d)}function fp(n){return n===xr?{}:n===we?[]:n}function Ag(n,r){const s=n.viewQuery;n.viewQuery=s?(d,p)=>{r(d,p),s(d,p)}:r}function Dm(n,r){const s=n.contentQueries;n.contentQueries=s?(d,p,y)=>{r(d,p,y),s(d,p,y)}:r}function xg(n,r){const s=n.hostBindings;n.hostBindings=s?(d,p)=>{r(d,p),s(d,p)}:r}let dh=null;function hh(){if(!dh){const n=fn.Symbol;if(n&&n.iterator)dh=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const d=r[s];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(dh=d)}}}return dh}function Ed(n){return!!Og(n)&&(Array.isArray(n)||!(n instanceof Map)&&hh()in n)}function Og(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function dl(n,r,s){return n[r]=s}function Mo(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function xc(n,r,s,d){const p=Mo(n,r,s);return Mo(n,r+1,d)||p}function Ya(n,r,s,d){const p=Y();return Mo(p,Wi(),r)&&(Tt(),ba(Ki(),p,n,r,s,d)),Ya}function fu(n,r,s,d){return Mo(n,Wi(),s)?r+De(s)+d:Lr}function Mc(n,r,s,d,p,y,C,x){const Z=function fh(n,r,s,d,p){const y=xc(n,r,s,d);return Mo(n,r+2,p)||y}(n,ti(),s,p,C);return ji(3),Z?r+De(s)+d+De(p)+y+De(C)+x:Lr}function Lg(n,r,s,d,p,y,C,x){const k=Y(),Z=Tt(),ie=n+20,Ie=Z.firstCreatePass?function Fg(n,r,s,d,p,y,C,x,k){const Z=r.consts,ie=Ic(r,n,4,C||null,Ur(Z,x));rf(r,s,ie,Ur(Z,k)),$l(r,ie);const Ie=ie.tViews=Qf(2,ie,d,p,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Z);return null!==r.queries&&(r.queries.template(r,ie),Ie.queries=r.queries.embeddedTView(ie)),ie}(ie,Z,k,r,s,d,p,y,C):Z.data[ie];B(Ie,!1);const it=k[11].createComment("");ul(Z,k,it,Ie),Ar(it,k),ea(k,k[ie]=Bu(it,k,it,Ie)),Rt(Ie)&&sg(Z,k,Ie),null!=C&&Lu(k,Ie,x)}function mp(n){return Jn(function Mn(){return Tn.lFrame.contextLView}(),20+n)}function Yi(n,r=In.Default){const s=Y();return null===s?dn(n,r):W(E(),s,Me(n),r)}function my(){throw new Error("invalid")}function Nm(n,r,s){const d=Y();return Mo(d,Wi(),r)&&xo(Tt(),Ki(),d,n,r,d[11],s,!1),Nm}function Us(n,r,s,d,p){const C=p?"class":"style";gf(n,s,r.inputs[C],C,d)}function Sf(n,r,s,d){const p=Y(),y=Tt(),C=20+n,x=p[11],k=p[C]=dc(x,r,function ma(){return Tn.lFrame.currentNamespace}()),Z=y.firstCreatePass?function Tf(n,r,s,d,p,y,C){const x=r.consts,Z=Ic(r,n,2,p,Ur(x,y));return rf(r,s,Z,Ur(x,C)),null!==Z.attrs&&ih(Z,Z.attrs,!1),null!==Z.mergedAttrs&&ih(Z,Z.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Z),Z}(C,y,p,0,r,s,d):y.data[C];B(Z,!0);const ie=Z.mergedAttrs;null!==ie&&ps(x,k,ie);const Ie=Z.classes;null!==Ie&&Uh(x,k,Ie);const it=Z.styles;return null!==it&&Lp(x,k,it),64!=(64&Z.flags)&&ul(y,p,k,Z),0===function zo(){return Tn.lFrame.elementDepthCount}()&&Ar(k,p),function Po(){Tn.lFrame.elementDepthCount++}(),Rt(Z)&&(sg(y,p,Z),Xf(y,Z,p)),null!==d&&Lu(p,Z),Sf}function wp(){let n=E();ce()?Pt():(n=n.parent,B(n,!1));const r=n;!function Gs(){Tn.lFrame.elementDepthCount--}();const s=Tt();return s.firstCreatePass&&($l(s,n),pt(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function nl(n){return 0!=(16&n.flags)}(r)&&Us(s,r,Y(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function go(n){return 0!=(32&n.flags)}(r)&&Us(s,r,Y(),r.stylesWithoutHost,!1),wp}function Gu(n,r,s,d){return Sf(n,r,s,d),wp(),Gu}function Ip(n,r,s){const d=Y(),p=Tt(),y=n+20,C=p.firstCreatePass?function yy(n,r,s,d,p){const y=r.consts,C=Ur(y,d),x=Ic(r,n,8,"ng-container",C);return null!==C&&ih(x,C,!0),rf(r,s,x,Ur(y,p)),null!==r.queries&&r.queries.elementStart(r,x),x}(y,p,d,r,s):p.data[y];B(C,!0);const x=d[y]=d[11].createComment("");return ul(p,d,x,C),Ar(x,d),Rt(C)&&(sg(p,d,C),Xf(p,C,d)),null!=s&&Lu(d,C),Ip}function bp(){let n=E();const r=Tt();return ce()?Pt():(n=n.parent,B(n,!1)),r.firstCreatePass&&($l(r,n),pt(n)&&r.queries.elementEnd(n)),bp}function Fm(n,r,s){return Ip(n,r,s),bp(),Fm}function Lm(){return Y()}function u(n){return!!n&&"function"==typeof n.then}function o(n){return!!n&&"function"==typeof n.subscribe}const l=o;function f(n,r,s,d){const p=Y(),y=Tt(),C=E();return function R(n,r,s,d,p,y,C,x){const k=Rt(d),ie=n.firstCreatePass&&op(n),Ie=r[8],it=sp(r);let St=!0;if(3&d.type||x){const Cn=qt(d,r),Kn=x?x(Cn):Cn,en=it.length,gr=x?Ti=>x(U(Ti[d.index])):d.index;if(_r(s)){let Ti=null;if(!x&&k&&(Ti=function T(n,r,s,d){const p=n.cleanup;if(null!=p)for(let y=0;y<p.length-1;y+=2){const C=p[y];if(C===s&&p[y+1]===d){const x=r[7],k=p[y+2];return x.length>k?x[k]:null}"string"==typeof C&&(y+=2)}return null}(n,r,p,d.index)),null!==Ti)(Ti.__ngLastListenerFn__||Ti).__ngNextListenerFn__=y,Ti.__ngLastListenerFn__=y,St=!1;else{y=oe(d,r,Ie,y,!1);const hs=s.listen(Kn,p,y);it.push(y,hs),ie&&ie.push(p,gr,en,en+1)}}else y=oe(d,r,Ie,y,!0),Kn.addEventListener(p,y,C),it.push(y),ie&&ie.push(p,gr,en,C)}else y=oe(d,r,Ie,y,!1);const Yt=d.outputs;let hn;if(St&&null!==Yt&&(hn=Yt[p])){const Cn=hn.length;if(Cn)for(let Kn=0;Kn<Cn;Kn+=2){const Yu=r[hn[Kn]][hn[Kn+1]].subscribe(y),tm=it.length;it.push(y,Yu),ie&&ie.push(p,d.index,tm,-(tm+1))}}}(y,p,p[11],C,n,r,!!s,d),f}function Q(n,r,s,d){try{return!1!==s(d)}catch(p){return pg(n,p),!1}}function oe(n,r,s,d,p){return function y(C){if(C===Function)return d;const x=2&n.flags?ir(n.index,r):r;0==(32&r[2])&&rp(x);let k=Q(r,0,d,C),Z=y.__ngNextListenerFn__;for(;Z;)k=Q(r,0,Z,C)&&k,Z=Z.__ngNextListenerFn__;return p&&!1===k&&(C.preventDefault(),C.returnValue=!1),k}}function ve(n=1){return function Ra(n){return(Tn.lFrame.contextLView=function Ul(n,r){for(;n>0;)r=r[15],n--;return r}(n,Tn.lFrame.contextLView))[8]}(n)}function vt(n,r){let s=null;const d=function $p(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let p=0;p<r.length;p++){const y=r[p];if("*"!==y){if(null===d?Zd(n,y,!0):jh(d,y))return p}else s=p}return s}function Ct(n){const r=Y()[16][6];if(!r.projection){const d=r.projection=aa(n?n.length:1,null),p=d.slice();let y=r.child;for(;null!==y;){const C=n?vt(y,n):0;null!==C&&(p[C]?p[C].projectionNext=y:d[C]=y,p[C]=y),y=y.next}}}function jt(n,r=0,s){const d=Y(),p=Tt(),y=Ic(p,20+n,16,null,s||null);null===y.projection&&(y.projection=r),Pt(),64!=(64&y.flags)&&function od(n,r,s){pc(r[11],0,r,s,$t(n,s,r),Wa(s.parent||r[6],s,r))}(p,d,y)}function on(n,r,s){return gn(n,"",r,"",s),on}function gn(n,r,s,d,p){const y=Y(),C=fu(y,r,s,d);return C!==Lr&&xo(Tt(),Ki(),y,n,C,y[11],p,!1),gn}function _y(n,r,s,d,p){const y=n[s+1],C=null===r;let x=d?ha(y):Ss(y),k=!1;for(;0!==x&&(!1===k||C);){const ie=n[x+1];vy(n[x],r)&&(k=!0,n[x+1]=d?Xd(ie):ld(ie)),x=d?ha(ie):Ss(ie)}k&&(n[s+1]=d?ld(y):Xd(y))}function vy(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&gl(n,r)>=0}function Pc(n,r){return function yu(n,r,s,d){const p=Y(),y=Tt(),C=ji(2);y.firstUpdatePass&&function Iy(n,r,s,d){const p=n.data;if(null===p[s+1]){const y=p[ts()],C=function r_(n,r){return r>=n.expandoStartIndex}(n,s);(function Dy(n,r){return 0!=(n.flags&(r?16:32))})(y,d)&&null===r&&!C&&(r=!1),r=function V_(n,r,s,d){const p=function Ja(n){const r=Tn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let y=d?r.residualClasses:r.residualStyles;if(null===p)0===(d?r.classBindings:r.styleBindings)&&(s=Tp(s=by(null,n,r,s,d),r.attrs,d),y=null);else{const C=r.directiveStylingLast;if(-1===C||n[C]!==p)if(s=by(p,n,r,s,d),null===y){let k=function U_(n,r,s){const d=s?r.classBindings:r.styleBindings;if(0!==Ss(d))return n[ha(d)]}(n,r,d);void 0!==k&&Array.isArray(k)&&(k=by(null,n,r,k[1],d),k=Tp(k,r.attrs,d),function i_(n,r,s,d){n[ha(s?r.classBindings:r.styleBindings)]=d}(n,r,d,k))}else y=function $_(n,r,s){let d;const p=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<p;y++)d=Tp(d,n[y].hostAttrs,s);return Tp(d,r.attrs,s)}(n,r,d)}return void 0!==y&&(d?r.residualClasses=y:r.residualStyles=y),s}(p,y,r,d),function Nl(n,r,s,d,p,y){let C=y?r.classBindings:r.styleBindings,x=ha(C),k=Ss(C);n[d]=s;let ie,Z=!1;if(Array.isArray(s)){const Ie=s;ie=Ie[1],(null===ie||gl(Ie,ie)>0)&&(Z=!0)}else ie=s;if(p)if(0!==k){const it=ha(n[x+1]);n[d+1]=Gh(it,x),0!==it&&(n[it+1]=Kh(n[it+1],d)),n[x+1]=function Wh(n,r){return 131071&n|r<<17}(n[x+1],d)}else n[d+1]=Gh(x,0),0!==x&&(n[x+1]=Kh(n[x+1],d)),x=d;else n[d+1]=Gh(k,0),0===x?x=d:n[k+1]=Kh(n[k+1],d),k=d;Z&&(n[d+1]=ld(n[d+1])),_y(n,ie,d,!0),_y(n,ie,d,!1),function Cp(n,r,s,d,p){const y=p?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&gl(y,r)>=0&&(s[d+1]=Xd(s[d+1]))}(r,ie,n,d,y),C=Gh(x,k),y?r.classBindings=C:r.styleBindings=C}(p,y,r,s,C,d)}}(y,n,C,d),r!==Lr&&Mo(p,C,r)&&function a_(n,r,s,d,p,y,C,x){if(!(3&r.type))return;const k=n.data,Z=k[x+1];Af(function qh(n){return 1==(1&n)}(Z)?Um(k,r,s,p,Ss(Z),C):void 0)||(Af(y)||function zh(n){return 2==(2&n)}(Z)&&(y=Um(k,null,s,p,x,C)),function Vh(n,r,s,d,p){const y=_r(n);if(r)p?y?n.addClass(s,d):s.classList.add(d):y?n.removeClass(s,d):s.classList.remove(d);else{let C=-1===d.indexOf("-")?void 0:K.DashCase;if(null==p)y?n.removeStyle(s,d,C):s.style.removeProperty(d);else{const x="string"==typeof p&&p.endsWith("!important");x&&(p=p.slice(0,-10),C|=K.Important),y?n.setStyle(s,d,p,C):s.style.setProperty(d,p,x?"important":"")}}}(d,C,kt(ts(),s),p,y))}(y,y.data[ts()],p,p[11],n,p[C+1]=function j_(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Re(Ua(n)))),n}(r,s),d,C)}(n,r,null,!0),Pc}function by(n,r,s,d,p){let y=null;const C=s.directiveEnd;let x=s.directiveStylingLast;for(-1===x?x=s.directiveStart:x++;x<C&&(y=r[x],d=Tp(d,y.hostAttrs,p),y!==n);)x++;return null!==n&&(s.directiveStylingLast=x),d}function Tp(n,r,s){const d=s?1:2;let p=-1;if(null!==r)for(let y=0;y<r.length;y++){const C=r[y];"number"==typeof C?p=C:p===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),oo(n,C,!!s||r[++y]))}return void 0===n?null:n}function Um(n,r,s,d,p,y){const C=null===r;let x;for(;p>0;){const k=n[p],Z=Array.isArray(k),ie=Z?k[1]:k,Ie=null===ie;let it=s[p+1];it===Lr&&(it=Ie?we:void 0);let St=Ie?ua(it,d):ie===d?it:void 0;if(Z&&!Af(St)&&(St=ua(k,d)),Af(St)&&(x=St,C))return x;const Yt=n[p+1];p=C?ha(Yt):Ss(Yt)}if(null!==r){let k=y?r.residualClasses:r.residualStyles;null!=k&&(x=ua(k,d))}return x}function Af(n){return void 0!==n}function Td(n,r=""){const s=Y(),d=Tt(),p=n+20,y=d.firstCreatePass?Ic(d,p,1,r,null):d.data[p],C=s[p]=function zd(n,r){return _r(n)?n.createText(r):n.createTextNode(r)}(s[11],r);ul(d,s,C,y),B(y,!1)}function Ty(n){return Fc("",n,""),Ty}function Fc(n,r,s){const d=Y(),p=fu(d,n,r,s);return p!==Lr&&Uu(d,ts(),p),Fc}function Sy(n,r,s,d,p){const y=Y(),C=function wd(n,r,s,d,p,y){const x=xc(n,ti(),s,p);return ji(2),x?r+De(s)+d+De(p)+y:Lr}(y,n,r,s,d,p);return C!==Lr&&Uu(y,ts(),C),Sy}function Ay(n,r,s,d,p,y,C){const x=Y(),k=Mc(x,n,r,s,d,p,y,C);return k!==Lr&&Uu(x,ts(),k),Ay}const Fl=void 0;var Za=["en",[["a","p"],["AM","PM"],Fl],[["AM","PM"],Fl,Fl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fl,"{1} 'at' {0}",Fl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _u(n){const s=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===d?1:5}];let xf={};function Mf(n){const r=function Rf(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=y_(r);if(s)return s;const d=r.split("-")[0];if(s=y_(d),s)return s;if("en"===d)return Za;throw new Error(`Missing locale data for the locale "${n}".`)}function Aa(n){return Mf(n)[sr.PluralCase]}function y_(n){return n in xf||(xf[n]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[n]),xf[n]}var sr=(()=>((sr=sr||{})[sr.LocaleId=0]="LocaleId",sr[sr.DayPeriodsFormat=1]="DayPeriodsFormat",sr[sr.DayPeriodsStandalone=2]="DayPeriodsStandalone",sr[sr.DaysFormat=3]="DaysFormat",sr[sr.DaysStandalone=4]="DaysStandalone",sr[sr.MonthsFormat=5]="MonthsFormat",sr[sr.MonthsStandalone=6]="MonthsStandalone",sr[sr.Eras=7]="Eras",sr[sr.FirstDayOfWeek=8]="FirstDayOfWeek",sr[sr.WeekendRange=9]="WeekendRange",sr[sr.DateFormat=10]="DateFormat",sr[sr.TimeFormat=11]="TimeFormat",sr[sr.DateTimeFormat=12]="DateTimeFormat",sr[sr.NumberSymbols=13]="NumberSymbols",sr[sr.NumberFormats=14]="NumberFormats",sr[sr.CurrencyCode=15]="CurrencyCode",sr[sr.CurrencySymbol=16]="CurrencySymbol",sr[sr.CurrencyName=17]="CurrencyName",sr[sr.Currencies=18]="Currencies",sr[sr.Directionality=19]="Directionality",sr[sr.PluralCase=20]="PluralCase",sr[sr.ExtraData=21]="ExtraData",sr))();const Hm="en-US";let v_=Hm;function uv(n,r,s,d,p){if(n=Me(n),Array.isArray(n))for(let y=0;y<n.length;y++)uv(n[y],r,s,d,p);else{const y=Tt(),C=Y();let x=du(n)?n:Me(n.provide),k=Ac(n);const Z=E(),ie=1048575&Z.providerIndexes,Ie=Z.directiveStart,it=Z.providerIndexes>>20;if(du(n)||!n.multi){const St=new po(k,p,Yi),Yt=dv(x,r,p?ie:ie+it,Ie);-1===Yt?(S(Qt(Z,C),y,x),cv(y,n,r.length),r.push(x),Z.directiveStart++,Z.directiveEnd++,p&&(Z.providerIndexes+=1048576),s.push(St),C.push(St)):(s[Yt]=St,C[Yt]=St)}else{const St=dv(x,r,ie+it,Ie),Yt=dv(x,r,ie,ie+it),hn=St>=0&&s[St],Cn=Yt>=0&&s[Yt];if(p&&!Cn||!p&&!hn){S(Qt(Z,C),y,x);const Kn=function gw(n,r,s,d,p){const y=new po(n,s,Yi);return y.multi=[],y.index=r,y.componentProviders=0,h0(y,p,d&&!s),y}(p?pw:fw,s.length,p,d,k);!p&&Cn&&(s[Yt].providerFactory=Kn),cv(y,n,r.length,0),r.push(x),Z.directiveStart++,Z.directiveEnd++,p&&(Z.providerIndexes+=1048576),s.push(Kn),C.push(Kn)}else cv(y,n,St>-1?St:Yt,h0(s[p?Yt:St],k,!p&&d));!p&&d&&Cn&&s[Yt].componentProviders++}}}function cv(n,r,s,d){const p=du(r),y=function yg(n){return!!n.useClass}(r);if(p||y){const k=(y?Me(r.useClass):r).prototype.ngOnDestroy;if(k){const Z=n.destroyHooks||(n.destroyHooks=[]);if(!p&&r.multi){const ie=Z.indexOf(s);-1===ie?Z.push(s,[d,k]):Z[ie+1].push(d,k)}else Z.push(s,k)}}}function h0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function dv(n,r,s,d){for(let p=s;p<d;p++)if(r[p]===n)return p;return-1}function fw(n,r,s,d){return hv(this.multi,[])}function pw(n,r,s,d){const p=this.multi;let y;if(this.providerFactory){const C=this.providerFactory.componentProviders,x=vr(s,s[1],this.providerFactory.index,d);y=x.slice(0,C),hv(p,y);for(let k=C;k<x.length;k++)y.push(x[k])}else y=[],hv(p,y);return y}function hv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function f0(n,r=[]){return s=>{s.providersResolver=(d,p)=>function hw(n,r,s){const d=Tt();if(d.firstCreatePass){const p=Ft(n);uv(s,d.data,d.blueprint,p,!0),uv(r,d.data,d.blueprint,p,!1)}}(d,p?p(n):n,r)}}class p0{}class _w{resolveComponentFactory(r){throw function yw(n){const r=Error(`No component factory found for ${Re(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let T_=(()=>{class n{}return n.NULL=new _w,n})();function vw(){return Ym(E(),Y())}function Ym(n,r){return new jy(qt(n,r))}let jy=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=vw,n})();function Ew(n){return n instanceof jy?n.nativeElement:n}class m0{}let ww=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function bw(){const n=Y(),s=ir(E().index,n);return function Iw(n){return n[11]}(_e(s)?s:n)}(),n})(),Cw=(()=>{class n{}return n.\u0275prov=at({token:n,providedIn:"root",factory:()=>null}),n})();class y0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const _0=new y0("13.2.7"),fv={};function S_(n,r,s,d,p=!1){for(;null!==s;){const y=r[s.index];if(null!==y&&d.push(U(y)),Te(y))for(let x=10;x<y.length;x++){const k=y[x],Z=k[1].firstChild;null!==Z&&S_(k[1],k,Z,d)}const C=s.type;if(8&C)S_(n,r,s.child,d);else if(32&C){const x=ht(s,r);let k;for(;k=x();)d.push(k)}else if(16&C){const x=Jo(r,s);if(Array.isArray(x))d.push(...x);else{const k=wn(r[16]);S_(k[1],k,x,d,!0)}}s=p?s.projectionNext:s.next}return d}class Hy{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return S_(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Te(r)){const s=r[8],d=s?s.indexOf(this):-1;d>-1&&(Np(r,d),so(s,d))}this._attachedToViewContainer=!1}Fp(this._lView[1],this._lView)}onDestroy(r){og(this._lView[1],this._lView,null,r)}markForCheck(){rp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){hf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function fg(n,r,s){$r(!0);try{hf(n,r,s)}finally{$r(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new tt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function td(n,r){xl(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new tt(902,"");this._appRef=r}}class Dw extends Hy{constructor(r){super(r),this._view=r}detectChanges(){_m(this._view)}checkNoChanges(){!function ff(n){$r(!0);try{_m(n)}finally{$r(!1)}}(this._view)}get context(){return null}}class v0 extends T_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Yr(r);return new pv(s,this.ngModule)}}function E0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class pv extends p0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function jp(n){return n.map(gc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return E0(this.componentDef.inputs)}get outputs(){return E0(this.componentDef.outputs)}create(r,s,d,p){const y=(p=p||this.ngModule)?function Sw(n,r){return{get:(s,d,p)=>{const y=n.get(s,fv,p);return y!==fv||d===fv?y:r.get(s,d,p)}}}(r,p.injector):r,C=y.get(m0,V),x=y.get(Cw,null),k=C.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",ie=d?function fm(n,r,s){if(_r(n))return n.selectRootElement(r,s===Et.ShadowDom);let d="string"==typeof r?n.querySelector(r):r;return d.textContent="",d}(k,d,this.componentDef.encapsulation):dc(C.createRenderer(null,this.componentDef),Z,function Tw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),Ie=this.componentDef.onPush?576:528,it=function Ef(n,r){return{components:[],scheduler:n||uc,clean:pd,playerHandler:r||null,flags:0}}(),St=Qf(0,null,null,1,0,null,null,null,null,null),Yt=Ka(null,St,it,Ie,null,null,C,k,x,y);let hn,Cn;ko(Yt);try{const Kn=function vf(n,r,s,d,p,y){const C=s[1];s[20]=n;const k=Ic(C,20,2,"#host",null),Z=k.mergedAttrs=r.hostAttrs;null!==Z&&(ih(k,Z,!0),null!==n&&(ps(p,n,Z),null!==k.classes&&Uh(p,n,k.classes),null!==k.styles&&Lp(p,n,k.styles)));const ie=d.createRenderer(n,r),Ie=Ka(s,yo(r),null,r.onPush?64:16,s[20],k,d,ie,y||null,null);return C.firstCreatePass&&(S(Qt(k,s),C,r.type),eh(C,k),ym(k,s.length,1)),ea(s,Ie),s[20]=Ie}(ie,this.componentDef,Yt,C,k);if(ie)if(d)ps(k,ie,["ng-version",_0.full]);else{const{attrs:en,classes:gr}=function ey(n){const r=[],s=[];let d=1,p=2;for(;d<n.length;){let y=n[d];if("string"==typeof y)2===p?""!==y&&r.push(y,n[++d]):8===p&&s.push(y);else{if(!$o(p))break;p=y}d++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);en&&ps(k,ie,en),gr&&gr.length>0&&Uh(k,ie,gr.join(" "))}if(Cn=Pn(St,20),void 0!==s){const en=Cn.projection=[];for(let gr=0;gr<this.ngContentSelectors.length;gr++){const Ti=s[gr];en.push(null!=Ti?Array.from(Ti):null)}}hn=function Tg(n,r,s,d,p){const y=s[1],C=function tp(n,r,s){const d=E();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),th(n,d,r,bc(n,r,1,null),s));const p=vr(r,n,d.directiveStart,d);Ar(p,r);const y=qt(d,r);return y&&Ar(y,r),p}(y,s,r);if(d.components.push(C),n[8]=C,p&&p.forEach(k=>k(C,r)),r.contentQueries){const k=E();r.contentQueries(1,C,k.directiveStart)}const x=E();return!y.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(No(x.index),pm(s[1],x,0,x.directiveStart,x.directiveEnd,r),af(r,C)),C}(Kn,this.componentDef,Yt,it,[Cm]),Cc(St,Yt,null)}finally{ra()}return new xw(this.componentType,hn,Ym(Cn,Yt),Yt,Cn)}}class xw extends class mw{}{constructor(r,s,d,p,y){super(),this.location=d,this._rootLView=p,this._tNode=y,this.instance=s,this.hostView=this.changeDetectorRef=new Dw(p),this.componentType=r}get injector(){return new Fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Zm{}class w0{}const Xm=new Map;class C0 extends Zm{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new v0(this);const d=Nr(r);this._bootstrapComponents=Uo(d.bootstrap),this._r3Injector=Ol(r,s,[{provide:Zm,useValue:this},{provide:T_,useValue:this.componentFactoryResolver}],Re(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=Da.THROW_IF_NOT_FOUND,d=In.Default){return r===Da||r===Zm||r===mf?this:this._r3Injector.get(r,s,d)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class gv extends w0{constructor(r){super(),this.moduleType=r,null!==Nr(r)&&function Rw(n){const r=new Set;!function s(d){const p=Nr(d,!0),y=p.id;null!==y&&(function I0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Re(r)} vs ${Re(r.name)}`)}(y,Xm.get(y),d),Xm.set(y,d));const C=Uo(p.imports);for(const x of C)r.has(x)||(r.add(x),s(x))}(n)}(r)}create(r){return new C0(this.moduleType,r)}}function D0(n,r,s,d,p){return S0(Y(),tr(),n,r,s,d,p)}function Gy(n,r){const s=n[r];return s===Lr?void 0:s}function S0(n,r,s,d,p,y,C){const x=r+s;return xc(n,x,p,y)?dl(n,x+2,C?d.call(C,p,y):d(p,y)):Gy(n,x+2)}function x0(n,r,s,d,p,y,C,x,k){const Z=r+s;return function qa(n,r,s,d,p,y){const C=xc(n,r,s,d);return xc(n,r+2,p,y)||C}(n,Z,p,y,C,x)?dl(n,Z+4,k?d.call(k,p,y,C,x):d(p,y,C,x)):Gy(n,Z+4)}function R0(n,r){const s=Tt();let d;const p=n+20;s.firstCreatePass?(d=function $w(n,r){if(r)for(let s=r.length-1;s>=0;s--){const d=r[s];if(n===d.name)return d}}(r,s.pipeRegistry),s.data[p]=d,d.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(p,d.onDestroy)):d=s.data[p];const y=d.factory||(d.factory=Pi(d.type)),C=Nn(Yi);try{const x=ya(!1),k=y();return ya(x),function Bg(n,r,s,d){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=d}(s,Y(),p,k),k}finally{Nn(C)}}function O0(n,r,s,d){const p=n+20,y=Y(),C=Jn(y,p);return zy(y,p)?S0(y,tr(),r,C.transform,s,d,C):C.transform(s,d)}function P0(n,r,s,d,p,y){const C=n+20,x=Y(),k=Jn(x,C);return zy(x,C)?x0(x,tr(),r,k.transform,s,d,p,y,k):k.transform(s,d,p,y)}function zy(n,r){return n[1].data[r].pure}function mv(n){return r=>{setTimeout(n,void 0,r)}}const Eh=class zw extends c.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,d){var p,y,C;let x=r,k=s||(()=>null),Z=d;if(r&&"object"==typeof r){const Ie=r;x=null===(p=Ie.next)||void 0===p?void 0:p.bind(Ie),k=null===(y=Ie.error)||void 0===y?void 0:y.bind(Ie),Z=null===(C=Ie.complete)||void 0===C?void 0:C.bind(Ie)}this.__isAsync&&(k=mv(k),x&&(x=mv(x)),Z&&(Z=mv(Z)));const ie=super.subscribe({next:x,error:k,complete:Z});return r instanceof J.w0&&r.add(ie),ie}};function Ww(){return this._results[hh()]()}class yv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=hh(),d=yv.prototype;d[s]||(d[s]=Ww)}get changes(){return this._changes||(this._changes=new Eh)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const d=this;d.dirty=!1;const p=io(r);(this._changesDetected=!function pl(n,r,s){if(n.length!==r.length)return!1;for(let d=0;d<n.length;d++){let p=n[d],y=r[d];if(s&&(p=s(p),y=s(y)),y!==p)return!1}return!0}(d._results,p,s))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Wy=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yw,n})();const Kw=Wy,qw=class extends Kw{constructor(r,s,d){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=d}createEmbeddedView(r){const s=this._declarationTContainer.tViews,d=Ka(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(s)),Cc(s,d,r),new Hy(d)}};function Yw(){return A_(E(),Y())}function A_(n,r){return 4&n.type?new qw(r,n,Ym(n,r)):null}let x_=(()=>{class n{}return n.__NG_ELEMENT_ID__=Zw,n})();function Zw(){return F0(E(),Y())}const Xw=x_,k0=class extends Xw{constructor(r,s,d){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=d}get element(){return Ym(this._hostTNode,this._hostLView)}get injector(){return new Fs(this._hostTNode,this._hostLView)}get parentInjector(){const r=M(this._hostTNode,this._hostLView);if(bu(r)){const s=Ci(r,this._hostLView),d=Io(r);return new Fs(s[1].data[d+8],s)}return new Fs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=N0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,d){const p=r.createEmbeddedView(s||{});return this.insert(p,d),p}createComponent(r,s,d,p,y){const C=r&&!function xi(n){return"function"==typeof n}(r);let x;if(C)x=s;else{const Ie=s||{};x=Ie.index,d=Ie.injector,p=Ie.projectableNodes,y=Ie.ngModuleRef}const k=C?r:new pv(Yr(r)),Z=d||this.parentInjector;if(!y&&null==k.ngModule){const it=(C?Z:this.parentInjector).get(Zm,null);it&&(y=it)}const ie=k.create(Z,p,void 0,y);return this.insert(ie.hostView,x),ie}insert(r,s){const d=r._lView,p=d[1];if(function Vr(n){return Te(n[3])}(d)){const ie=this.indexOf(r);if(-1!==ie)this.detach(ie);else{const Ie=d[3],it=new k0(Ie,Ie[6],Ie[3]);it.detach(it.indexOf(r))}}const y=this._adjustIndex(s),C=this._lContainer;!function Al(n,r,s,d){const p=10+d,y=s.length;d>0&&(s[p-1][4]=r),d<y-10?(r[4]=s[p],ds(s,10+d,r)):(s.push(r),r[4]=null),r[3]=s;const C=r[17];null!==C&&s!==C&&function hc(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(C,r);const x=r[19];null!==x&&x.insertView(n),r[2]|=128}(p,d,C,y);const x=qd(y,C),k=d[11],Z=Hf(k,C[7]);return null!==Z&&function ed(n,r,s,d,p,y){d[0]=p,d[6]=r,xl(n,d,s,1,p,y)}(p,C[6],k,d,Z,x),r.attachToViewContainerRef(),ds(_v(C),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=N0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),d=Np(this._lContainer,s);d&&(so(_v(this._lContainer),s),Fp(d[1],d))}detach(r){const s=this._adjustIndex(r,-1),d=Np(this._lContainer,s);return d&&null!=so(_v(this._lContainer),s)?new Hy(d):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function N0(n){return n[8]}function _v(n){return n[8]||(n[8]=[])}function F0(n,r){let s;const d=r[n.index];if(Te(d))s=d;else{let p;if(8&n.type)p=U(d);else{const y=r[11];p=y.createComment("");const C=qt(n,r);Ao(y,Hf(y,C),p,function Ri(n,r){return _r(n)?n.nextSibling(r):r.nextSibling}(y,C),!1)}r[n.index]=s=Bu(d,r,p,n),ea(r,s)}return new k0(s,n,r)}class vv{constructor(r){this.queryList=r,this.matches=null}clone(){return new vv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ev{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const d=null!==r.contentQueries?r.contentQueries[0]:s.length,p=[];for(let y=0;y<d;y++){const C=s.getByIndex(y);p.push(this.queries[C.indexInDeclarationView].clone())}return new Ev(p)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==z0(r,s).matches&&this.queries[s].setDirty()}}class L0{constructor(r,s,d=null){this.predicate=r,this.flags=s,this.read=d}}class wv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let d=0;d<this.length;d++){const p=null!==s?s.length:0,y=this.getByIndex(d).embeddedTView(r,p);y&&(y.indexInDeclarationView=d,null!==s?s.push(y):s=[y])}return null!==s?new wv(s):null}template(r,s){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Iv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new Iv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==s;)d=d.parent;return s===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const y=d[p];this.matchTNodeWithReadOption(r,s,eI(s,y)),this.matchTNodeWithReadOption(r,s,bn(s,r,y,!1,!1))}else d===Wy?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,bn(s,r,d,!1,!1))}matchTNodeWithReadOption(r,s,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===jy||p===x_||p===Wy&&4&s.type)this.addMatch(s.index,-2);else{const y=bn(s,r,p,!1,!1);null!==y&&this.addMatch(s.index,y)}else this.addMatch(s.index,d)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function eI(n,r){const s=n.localNames;if(null!==s)for(let d=0;d<s.length;d+=2)if(s[d]===r)return s[d+1];return null}function nI(n,r,s,d){return-1===s?function tI(n,r){return 11&n.type?Ym(n,r):4&n.type?A_(n,r):null}(r,n):-2===s?function rI(n,r,s){return s===jy?Ym(r,n):s===Wy?A_(r,n):s===x_?F0(r,n):void 0}(n,r,d):vr(n,n[1],s,r)}function B0(n,r,s,d){const p=r[19].queries[d];if(null===p.matches){const y=n.data,C=s.matches,x=[];for(let k=0;k<C.length;k+=2){const Z=C[k];x.push(Z<0?null:nI(r,y[Z],C[k+1],s.metadata.read))}p.matches=x}return p.matches}function bv(n,r,s,d){const p=n.queries.getByIndex(s),y=p.matches;if(null!==y){const C=B0(n,r,p,s);for(let x=0;x<y.length;x+=2){const k=y[x];if(k>0)d.push(C[x/2]);else{const Z=y[x+1],ie=r[-k];for(let Ie=10;Ie<ie.length;Ie++){const it=ie[Ie];it[17]===it[3]&&bv(it[1],it,Z,d)}if(null!==ie[9]){const Ie=ie[9];for(let it=0;it<Ie.length;it++){const St=Ie[it];bv(St[1],St,Z,d)}}}}}return d}function V0(n){const r=Y(),s=Tt(),d=vu();Ma(d+1);const p=z0(s,d);if(n.dirty&&dr(r)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const y=p.crossesNgTemplate?bv(s,r,d,[]):B0(s,r,p,d);n.reset(y,Ew),n.notifyOnChanges()}return!0}return!1}function U0(n,r,s){const d=Tt();d.firstCreatePass&&(G0(d,new L0(n,r,s),-1),2==(2&r)&&(d.staticViewQueries=!0)),H0(d,Y(),r)}function $0(n,r,s,d){const p=Tt();if(p.firstCreatePass){const y=E();G0(p,new L0(r,s,d),y.index),function sI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(p,n),2==(2&s)&&(p.staticContentQueries=!0)}H0(p,Y(),s)}function j0(){return function iI(n,r){return n[19].queries[r].queryList}(Y(),vu())}function H0(n,r,s){const d=new yv(4==(4&s));og(n,r,d,d.destroy),null===r[19]&&(r[19]=new Ev),r[19].queries.push(new vv(d))}function G0(n,r,s){null===n.queries&&(n.queries=new wv),n.queries.track(new Iv(r,s))}function z0(n,r){return n.queries.getByIndex(r)}function W0(n,r){return A_(n,r)}function O_(...n){}const uE=new _i("Application Initializer");let xv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=O_,this.reject=O_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const s=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const y=this.appInits[p]();if(u(y))s.push(y);else if(l(y)){const C=new Promise((x,k)=>{y.subscribe({complete:x,error:k})});s.push(C)}}Promise.all(s).then(()=>{d()}).catch(p=>{this.reject(p)}),0===s.length&&d(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(dn(uE,8))},n.\u0275prov=at({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cE=new _i("AppId",{providedIn:"root",factory:function dE(){return`${Mv()}${Mv()}${Mv()}`}});function Mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hE=new _i("Platform Initializer"),fE=new _i("Platform ID"),pE=new _i("appBootstrapListener");let gE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=at({token:n,factory:n.\u0275fac}),n})();const Rv=new _i("LocaleId",{providedIn:"root",factory:()=>$n(Rv,In.Optional|In.SkipSelf)||function II(){return"undefined"!=typeof $localize&&$localize.locale||Hm}()}),bI=new _i("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class CI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let DI=(()=>{class n{compileModuleSync(s){return new gv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const d=this.compileModuleSync(s),y=Uo(Nr(s).declarations).reduce((C,x)=>{const k=Yr(x);return k&&C.push(new pv(k)),C},[]);return new CI(d,y)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=at({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SI=(()=>Promise.resolve(0))();function Ov(n){"undefined"==typeof Zone?SI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Sd{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Eh(!1),this.onMicrotaskEmpty=new Eh(!1),this.onStable=new Eh(!1),this.onError=new Eh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&s,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function AI(){let n=fn.requestAnimationFrame,r=fn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function RI(n){const r=()=>{!function MI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(fn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,kv(n),n.isCheckStableRunning=!0,Pv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),kv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,d,p,y,C,x)=>{try{return mE(n),s.invokeTask(p,y,C,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),yE(n)}},onInvoke:(s,d,p,y,C,x,k)=>{try{return mE(n),s.invoke(p,y,C,x,k)}finally{n.shouldCoalesceRunChangeDetection&&r(),yE(n)}},onHasTask:(s,d,p,y)=>{s.hasTask(p,y),d===p&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,kv(n),Pv(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(s,d,p,y)=>(s.handleError(p,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(p)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Sd.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Sd.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,d){return this._inner.run(r,s,d)}runTask(r,s,d,p){const y=this._inner,C=y.scheduleEventTask("NgZoneEvent: "+p,r,xI,O_,O_);try{return y.runTask(C,s,d)}finally{y.cancelTask(C)}}runGuarded(r,s,d){return this._inner.runGuarded(r,s,d)}runOutsideAngular(r){return this._outer.run(r)}}const xI={};function Pv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function kv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function mE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function yE(n){n._nesting--,Pv(n)}class OI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Eh,this.onMicrotaskEmpty=new Eh,this.onStable=new Eh,this.onError=new Eh}run(r,s,d){return r.apply(s,d)}runGuarded(r,s,d){return r.apply(s,d)}runOutsideAngular(r){return r()}runTask(r,s,d,p){return r.apply(s,d)}}let _E=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Sd.assertNotInAngularZone(),Ov(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ov(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(s)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,d,p){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==y),s(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:s,timeoutId:y,updateCb:p})}whenStable(s,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,d,p){return[]}}return n.\u0275fac=function(s){return new(s||n)(dn(Sd))},n.\u0275prov=at({token:n,factory:n.\u0275fac}),n})(),vE=(()=>{class n{constructor(){this._applications=new Map,Nv.addToWindow(this)}registerApplication(s,d){this._applications.set(s,d)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,d=!0){return Nv.findTestabilityInTree(this,s,d)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=at({token:n,factory:n.\u0275fac}),n})();class PI{addToWindow(r){}findTestabilityInTree(r,s,d){return null}}function kI(n){Nv=n}let Ad,Nv=new PI;const EE=new _i("AllowMultipleToken");class LI{constructor(r,s){this.name=r,this.token=s}}function wE(n,r,s=[]){const d=`Platform: ${r}`,p=new _i(d);return(y=[])=>{let C=IE();if(!C||C.injector.get(EE,!1))if(n)n(s.concat(y).concat({provide:p,useValue:!0}));else{const x=s.concat(y).concat({provide:p,useValue:!0},{provide:gd,useValue:"platform"});!function BI(n){if(Ad&&!Ad.destroyed&&!Ad.injector.get(EE,!1))throw new tt(400,"");Ad=n.get(bE);const r=n.get(hE,null);r&&r.forEach(s=>s())}(Da.create({providers:x,name:d}))}return function VI(n){const r=IE();if(!r)throw new tt(401,"");return r}()}}function IE(){return Ad&&!Ad.destroyed?Ad:null}let bE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,d){const x=function UI(n,r){let s;return s="noop"===n?new OI:("zone.js"===n?void 0:n)||new Sd({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),k=[{provide:Sd,useValue:x}];return x.run(()=>{const Z=Da.create({providers:k,parent:this.injector,name:s.moduleType.name}),ie=s.create(Z),Ie=ie.injector.get(Tl,null);if(!Ie)throw new tt(402,"");return x.runOutsideAngular(()=>{const it=x.onError.subscribe({next:St=>{Ie.handleError(St)}});ie.onDestroy(()=>{Lv(this._modules,ie),it.unsubscribe()})}),function $I(n,r,s){try{const d=s();return u(d)?d.catch(p=>{throw r.runOutsideAngular(()=>n.handleError(p)),p}):d}catch(d){throw r.runOutsideAngular(()=>n.handleError(d)),d}}(Ie,x,()=>{const it=ie.injector.get(xv);return it.runInitializers(),it.donePromise.then(()=>(function E_(n){lt(n,"Expected localeId to be defined"),"string"==typeof n&&(v_=n.toLowerCase().replace(/_/g,"-"))}(ie.injector.get(Rv,Hm)||Hm),this._moduleDoBootstrap(ie),ie))})})}bootstrapModule(s,d=[]){const p=CE({},d);return function NI(n,r,s){const d=new gv(s);return Promise.resolve(d)}(0,0,s).then(y=>this.bootstrapModuleFactory(y,p))}_moduleDoBootstrap(s){const d=s.injector.get(Fv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!s.instance.ngDoBootstrap)throw new tt(403,"");s.instance.ngDoBootstrap(d)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tt(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(dn(Da))},n.\u0275prov=at({token:n,factory:n.\u0275fac}),n})();function CE(n,r){return Array.isArray(r)?r.reduce(CE,n):Object.assign(Object.assign({},n),r)}let Fv=(()=>{class n{constructor(s,d,p,y,C){this._zone=s,this._injector=d,this._exceptionHandler=p,this._componentFactoryResolver=y,this._initStatus=C,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new q.y(Z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Z.next(this._stable),Z.complete()})}),k=new q.y(Z=>{let ie;this._zone.runOutsideAngular(()=>{ie=this._zone.onStable.subscribe(()=>{Sd.assertNotInAngularZone(),Ov(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Z.next(!0))})})});const Ie=this._zone.onUnstable.subscribe(()=>{Sd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Z.next(!1)}))});return()=>{ie.unsubscribe(),Ie.unsubscribe()}});this.isStable=(0,Se.T)(x,k.pipe((0,Ae.B)()))}bootstrap(s,d){if(!this._initStatus.done)throw new tt(405,"");let p;p=s instanceof p0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(p.componentType);const y=function FI(n){return n.isBoundToModule}(p)?void 0:this._injector.get(Zm),x=p.create(Da.NULL,[],d||p.selector,y),k=x.location.nativeElement,Z=x.injector.get(_E,null),ie=Z&&x.injector.get(vE);return Z&&ie&&ie.registerApplication(k,Z),x.onDestroy(()=>{this.detachView(x.hostView),Lv(this.components,x),ie&&ie.unregisterApplication(k)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new tt(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const d=s;this._views.push(d),d.attachToAppRef(this)}detachView(s){const d=s;Lv(this._views,d),d.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(pE,[]).concat(this._bootstrapListeners).forEach(p=>p(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(dn(Sd),dn(Da),dn(Tl),dn(T_),dn(xv))},n.\u0275prov=at({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Lv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let TE=!0,SE=!1;function HI(){return SE=!0,TE}function GI(){if(SE)throw new Error("Cannot enable prod mode after platform setup.");TE=!1}let zI=(()=>{class n{}return n.__NG_ELEMENT_ID__=WI,n})();function WI(n){return function KI(n,r,s){if(Vt(n)&&!s){const d=ir(n.index,r);return new Hy(d,d)}return 47&n.type?new Hy(r[16],r):null}(E(),Y(),16==(16&n))}class RE{constructor(){}supports(r){return Ed(r)}create(r){return new JI(r)}}const QI=(n,r)=>r;class JI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||QI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,d=this._removalsHead,p=0,y=null;for(;s||d;){const C=!d||s&&s.currentIndex<PE(d,p,y)?s:d,x=PE(C,p,y),k=C.currentIndex;if(C===d)p--,d=d._nextRemoved;else if(s=s._next,null==C.previousIndex)p++;else{y||(y=[]);const Z=x-p,ie=k-p;if(Z!=ie){for(let it=0;it<Z;it++){const St=it<y.length?y[it]:y[it]=0,Yt=St+it;ie<=Yt&&Yt<Z&&(y[it]=St+1)}y[C.previousIndex]=ie-Z}}x!==k&&r(C,x,k)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Ed(r))throw new tt(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let p,y,C,s=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)y=r[x],C=this._trackByFn(x,y),null!==s&&Object.is(s.trackById,C)?(d&&(s=this._verifyReinsertion(s,y,C,x)),Object.is(s.item,y)||this._addIdentityChange(s,y)):(s=this._mismatch(s,y,C,x),d=!0),s=s._next}else p=0,function Rg(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[hh()]();let d;for(;!(d=s.next()).done;)r(d.value)}}(r,x=>{C=this._trackByFn(p,x),null!==s&&Object.is(s.trackById,C)?(d&&(s=this._verifyReinsertion(s,x,C,p)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,C,p),d=!0),s=s._next,p++}),this.length=p;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,d,p){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,y,p)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,y,p)):r=this._addAfter(new eb(s,d),y,p),r}_verifyReinsertion(r,s,d,p){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==y?r=this._reinsertAfter(y,r._prev,p):r.currentIndex!=p&&(r.currentIndex=p,this._addToMoves(r,p)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const p=r._prevRemoved,y=r._nextRemoved;return null===p?this._removalsHead=y:p._nextRemoved=y,null===y?this._removalsTail=p:y._prevRemoved=p,this._insertAfter(r,s,d),this._addToMoves(r,d),r}_moveAfter(r,s,d){return this._unlink(r),this._insertAfter(r,s,d),this._addToMoves(r,d),r}_addAfter(r,s,d){return this._insertAfter(r,s,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,d){const p=null===s?this._itHead:s._next;return r._next=p,r._prev=s,null===p?this._itTail=r:p._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new OE),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,d=r._next;return null===s?this._itHead=d:s._next=d,null===d?this._itTail=s:d._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class eb{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tb{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===s||s<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const s=r._prevDup,d=r._nextDup;return null===s?this._head=d:s._nextDup=d,null===d?this._tail=s:d._prevDup=s,null===this._head}}class OE{constructor(){this.map=new Map}put(r){const s=r.trackById;let d=this.map.get(s);d||(d=new tb,this.map.set(s,d)),d.add(r)}get(r,s){const p=this.map.get(r);return p?p.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function PE(n,r,s){const d=n.previousIndex;if(null===d)return d;let p=0;return s&&d<s.length&&(p=s[d]),d+r+p}class kE{constructor(){}supports(r){return r instanceof Map||Og(r)}create(){return new nb}}class nb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Og(r)))throw new tt(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,p)=>{if(s&&s.key===p)this._maybeAddToChanges(s,d),this._appendAfter=s,s=s._next;else{const y=this._getOrCreateRecordForKey(p,d);s=this._insertBeforeOrAppend(s,y)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let d=s;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const d=r._prev;return s._next=r,s._prev=d,r._prev=s,d&&(d._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const p=this._records.get(r);this._maybeAddToChanges(p,s);const y=p._prev,C=p._next;return y&&(y._next=C),C&&(C._prev=y),p._next=null,p._prev=null,p}const d=new rb(r);return this._records.set(r,d),d.currentValue=s,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(d=>s(r[d],d))}}class rb{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function NE(){return new jv([new RE])}let jv=(()=>{class n{constructor(s){this.factories=s}static create(s,d){if(null!=d){const p=d.factories.slice();s=s.concat(p)}return new n(s)}static extend(s){return{provide:n,useFactory:d=>n.create(s,d||NE()),deps:[[n,new Do,new ao]]}}find(s){const d=this.factories.find(p=>p.supports(s));if(null!=d)return d;throw new tt(901,"")}}return n.\u0275prov=at({token:n,providedIn:"root",factory:NE}),n})();function FE(){return new Hv([new kE])}let Hv=(()=>{class n{constructor(s){this.factories=s}static create(s,d){if(d){const p=d.factories.slice();s=s.concat(p)}return new n(s)}static extend(s){return{provide:n,useFactory:d=>n.create(s,d||FE()),deps:[[n,new Do,new ao]]}}find(s){const d=this.factories.find(y=>y.supports(s));if(d)return d;throw new tt(901,"")}}return n.\u0275prov=at({token:n,providedIn:"root",factory:FE}),n})();const ob=wE(null,"core",[{provide:fE,useValue:"unknown"},{provide:bE,deps:[Da]},{provide:vE,deps:[]},{provide:gE,deps:[]}]);let ab=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(dn(Fv))},n.\u0275mod=kr({type:n}),n.\u0275inj=Nt({}),n})()},2382:(Xt,ut,P)=>{"use strict";P.d(ut,{on:()=>qt,u5:()=>Tn,JU:()=>tt,a5:()=>On,JJ:()=>qe,JL:()=>Je,F:()=>_e,On:()=>ci,UX:()=>xs,Q7:()=>ue,_Y:()=>Ii});var c=P(5e3),J=P(9808),q=P(8306),Se=P(4742),Ae=P(8421),Ee=P(7669),be=P(5403),Re=P(3268),ze=P(1810),ye=P(8996),Me=P(4004);let Oe=(()=>{class z{constructor(N,Y){this._renderer=N,this._elementRef=Y,this.onChange=Tt=>{},this.onTouched=()=>{}}setProperty(N,Y){this._renderer.setProperty(this._elementRef.nativeElement,N,Y)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}}return z.\u0275fac=function(N){return new(N||z)(c.Y36(c.Qsj),c.Y36(c.SBq))},z.\u0275dir=c.lG2({type:z}),z})(),Ue=(()=>{class z extends Oe{}return z.\u0275fac=function(){let L;return function(Y){return(L||(L=c.n5z(z)))(Y||z)}}(),z.\u0275dir=c.lG2({type:z,features:[c.qOj]}),z})();const tt=new c.OlP("NgValueAccessor"),ke={provide:tt,useExisting:(0,c.Gpc)(()=>ot),multi:!0},nt=new c.OlP("CompositionEventMode");let ot=(()=>{class z extends Oe{constructor(N,Y,Tt){super(N,Y),this._compositionMode=Tt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ce(){const z=(0,J.q)()?(0,J.q)().getUserAgent():"";return/android (\d+)/.test(z.toLowerCase())}())}writeValue(N){this.setProperty("value",null==N?"":N)}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}}return z.\u0275fac=function(N){return new(N||z)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(nt,8))},z.\u0275dir=c.lG2({type:z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(N,Y){1&N&&c.NdJ("input",function(_n){return Y._handleInput(_n.target.value)})("blur",function(){return Y.onTouched()})("compositionstart",function(){return Y._compositionStart()})("compositionend",function(_n){return Y._compositionEnd(_n.target.value)})},features:[c._Bn([ke]),c.qOj]}),z})();function Ye(z){return null==z||0===z.length}const $e=new c.OlP("NgValidators"),Ke=new c.OlP("NgAsyncValidators"),ee=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function ge(z){return Ye(z.value)?{required:!0}:null}function Xe(z){return Ye(z.value)||ee.test(z.value)?null:{email:!0}}function lt(z){return null}function Ve(z){return null!=z}function It(z){const L=(0,c.QGY)(z)?(0,ye.D)(z):z;return(0,c.CqO)(L),L}function dt(z){let L={};return z.forEach(N=>{L=null!=N?Object.assign(Object.assign({},L),N):L}),0===Object.keys(L).length?null:L}function gt(z,L){return L.map(N=>N(z))}function Gt(z){return z.map(L=>function at(z){return!z.validate}(L)?L:N=>L.validate(N))}function wt(z){return null!=z?function Nt(z){if(!z)return null;const L=z.filter(Ve);return 0==L.length?null:function(N){return dt(gt(N,L))}}(Gt(z)):null}function Sn(z){return null!=z?function kn(z){if(!z)return null;const L=z.filter(Ve);return 0==L.length?null:function(N){return function pe(...z){const L=(0,Ee.jO)(z),{args:N,keys:Y}=(0,Se.D)(z),Tt=new q.y(_n=>{const{length:E}=N;if(!E)return void _n.complete();const G=new Array(E);let w=E,B=E;for(let ce=0;ce<E;ce++){let Pt=!1;(0,Ae.Xf)(N[ce]).subscribe((0,be.x)(_n,an=>{Pt||(Pt=!0,B--),G[ce]=an},()=>w--,void 0,()=>{(!w||!Pt)&&(B||_n.next(Y?(0,ze.n)(Y,G):G),_n.complete())}))}});return L?Tt.pipe((0,Re.Z)(L)):Tt}(gt(N,L).map(It)).pipe((0,Me.U)(dt))}}(Gt(z)):null}function Dn(z,L){return null===z?[L]:Array.isArray(z)?[...z,L]:[z,L]}function Yn(z){return z?Array.isArray(z)?z:[z]:[]}function lr(z,L){return Array.isArray(z)?z.includes(L):z===L}function Hn(z,L){const N=Yn(L);return Yn(z).forEach(Tt=>{lr(N,Tt)||N.push(Tt)}),N}function In(z,L){return Yn(L).filter(N=>!lr(z,N))}class Qn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(L){this._rawValidators=L||[],this._composedValidatorFn=wt(this._rawValidators)}_setAsyncValidators(L){this._rawAsyncValidators=L||[],this._composedAsyncValidatorFn=Sn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(L){this._onDestroyCallbacks.push(L)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(L=>L()),this._onDestroyCallbacks=[]}reset(L){this.control&&this.control.reset(L)}hasError(L,N){return!!this.control&&this.control.hasError(L,N)}getError(L,N){return this.control?this.control.getError(L,N):null}}class On extends Qn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nn extends Qn{get formDirective(){return null}get path(){return null}}class jr{constructor(L){this._cd=L}is(L){var N,Y,Tt;return"submitted"===L?!!(null===(N=this._cd)||void 0===N?void 0:N.submitted):!!(null===(Tt=null===(Y=this._cd)||void 0===Y?void 0:Y.control)||void 0===Tt?void 0:Tt[L])}}let qe=(()=>{class z extends jr{constructor(N){super(N)}}return z.\u0275fac=function(N){return new(N||z)(c.Y36(On,2))},z.\u0275dir=c.lG2({type:z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(N,Y){2&N&&c.ekj("ng-untouched",Y.is("untouched"))("ng-touched",Y.is("touched"))("ng-pristine",Y.is("pristine"))("ng-dirty",Y.is("dirty"))("ng-valid",Y.is("valid"))("ng-invalid",Y.is("invalid"))("ng-pending",Y.is("pending"))},features:[c.qOj]}),z})(),Je=(()=>{class z extends jr{constructor(N){super(N)}}return z.\u0275fac=function(N){return new(N||z)(c.Y36(Nn,10))},z.\u0275dir=c.lG2({type:z,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(N,Y){2&N&&c.ekj("ng-untouched",Y.is("untouched"))("ng-touched",Y.is("touched"))("ng-pristine",Y.is("pristine"))("ng-dirty",Y.is("dirty"))("ng-valid",Y.is("valid"))("ng-invalid",Y.is("invalid"))("ng-pending",Y.is("pending"))("ng-submitted",Y.is("submitted"))},features:[c.qOj]}),z})();function rn(z,L){En(z,L),L.valueAccessor.writeValue(z.value),function kr(z,L){L.valueAccessor.registerOnChange(N=>{z._pendingValue=N,z._pendingChange=!0,z._pendingDirty=!0,"change"===z.updateOn&&Gr(z,L)})}(z,L),function Bn(z,L){const N=(Y,Tt)=>{L.valueAccessor.writeValue(Y),Tt&&L.viewToModelUpdate(Y)};z.registerOnChange(N),L._registerOnDestroy(()=>{z._unregisterOnChange(N)})}(z,L),function Fi(z,L){L.valueAccessor.registerOnTouched(()=>{z._pendingTouched=!0,"blur"===z.updateOn&&z._pendingChange&&Gr(z,L),"submit"!==z.updateOn&&z.markAsTouched()})}(z,L),function wr(z,L){if(L.valueAccessor.setDisabledState){const N=Y=>{L.valueAccessor.setDisabledState(Y)};z.registerOnDisabledChange(N),L._registerOnDestroy(()=>{z._unregisterOnDisabledChange(N)})}}(z,L)}function vn(z,L){z.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(L)})}function En(z,L){const N=function mn(z){return z._rawValidators}(z);null!==L.validator?z.setValidators(Dn(N,L.validator)):"function"==typeof N&&z.setValidators([N]);const Y=function jn(z){return z._rawAsyncValidators}(z);null!==L.asyncValidator?z.setAsyncValidators(Dn(Y,L.asyncValidator)):"function"==typeof Y&&z.setAsyncValidators([Y]);const Tt=()=>z.updateValueAndValidity();vn(L._rawValidators,Tt),vn(L._rawAsyncValidators,Tt)}function Gr(z,L){z._pendingDirty&&z.markAsDirty(),z.setValue(z._pendingValue,{emitModelToViewChange:!1}),L.viewToModelUpdate(z._pendingValue),z._pendingChange=!1}function Br(z,L){const N=z.indexOf(L);N>-1&&z.splice(N,1)}const te="VALID",cn="INVALID",Zn="PENDING",Zr="DISABLED";function ur(z){return(Mr(z)?z.validators:z)||null}function or(z){return Array.isArray(z)?wt(z):z||null}function Ir(z,L){return(Mr(L)?L.asyncValidators:z)||null}function mi(z){return Array.isArray(z)?Sn(z):z||null}function Mr(z){return null!=z&&!Array.isArray(z)&&"object"==typeof z}const Li=z=>z instanceof re;function Zi(z){return(z=>z instanceof Si)(z)?z.value:z.getRawValue()}function li(z,L){const N=Li(z),Y=z.controls;if(!(N?Object.keys(Y):Y).length)throw new c.vHH(1e3,"");if(!Y[L])throw new c.vHH(1001,"")}function Cr(z,L){Li(z),z._forEachChild((Y,Tt)=>{if(void 0===L[Tt])throw new c.vHH(1002,"")})}class ui{constructor(L,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=L,this._rawAsyncValidators=N,this._composedValidatorFn=or(this._rawValidators),this._composedAsyncValidatorFn=mi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(L){this._rawValidators=this._composedValidatorFn=L}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(L){this._rawAsyncValidators=this._composedAsyncValidatorFn=L}get parent(){return this._parent}get valid(){return this.status===te}get invalid(){return this.status===cn}get pending(){return this.status==Zn}get disabled(){return this.status===Zr}get enabled(){return this.status!==Zr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(L){this._rawValidators=L,this._composedValidatorFn=or(L)}setAsyncValidators(L){this._rawAsyncValidators=L,this._composedAsyncValidatorFn=mi(L)}addValidators(L){this.setValidators(Hn(L,this._rawValidators))}addAsyncValidators(L){this.setAsyncValidators(Hn(L,this._rawAsyncValidators))}removeValidators(L){this.setValidators(In(L,this._rawValidators))}removeAsyncValidators(L){this.setAsyncValidators(In(L,this._rawAsyncValidators))}hasValidator(L){return lr(this._rawValidators,L)}hasAsyncValidator(L){return lr(this._rawAsyncValidators,L)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(L={}){this.touched=!0,this._parent&&!L.onlySelf&&this._parent.markAsTouched(L)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(L=>L.markAllAsTouched())}markAsUntouched(L={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}markAsDirty(L={}){this.pristine=!1,this._parent&&!L.onlySelf&&this._parent.markAsDirty(L)}markAsPristine(L={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}markAsPending(L={}){this.status=Zn,!1!==L.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!L.onlySelf&&this._parent.markAsPending(L)}disable(L={}){const N=this._parentMarkedDirty(L.onlySelf);this.status=Zr,this.errors=null,this._forEachChild(Y=>{Y.disable(Object.assign(Object.assign({},L),{onlySelf:!0}))}),this._updateValue(),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},L),{skipPristineCheck:N})),this._onDisabledChange.forEach(Y=>Y(!0))}enable(L={}){const N=this._parentMarkedDirty(L.onlySelf);this.status=te,this._forEachChild(Y=>{Y.enable(Object.assign(Object.assign({},L),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},L),{skipPristineCheck:N})),this._onDisabledChange.forEach(Y=>Y(!1))}_updateAncestors(L){this._parent&&!L.onlySelf&&(this._parent.updateValueAndValidity(L),L.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(L){this._parent=L}updateValueAndValidity(L={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===te||this.status===Zn)&&this._runAsyncValidator(L.emitEvent)),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!L.onlySelf&&this._parent.updateValueAndValidity(L)}_updateTreeValidity(L={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(L)),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zr:te}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(L){if(this.asyncValidator){this.status=Zn,this._hasOwnPendingAsyncValidator=!0;const N=It(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(Y=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Y,{emitEvent:L})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(L,N={}){this.errors=L,this._updateControlsErrors(!1!==N.emitEvent)}get(L){return function ai(z,L,N){if(null==L||(Array.isArray(L)||(L=L.split(N)),Array.isArray(L)&&0===L.length))return null;let Y=z;return L.forEach(Tt=>{Y=Li(Y)?Y.controls.hasOwnProperty(Tt)?Y.controls[Tt]:null:(z=>z instanceof fe)(Y)&&Y.at(Tt)||null}),Y}(this,L,".")}getError(L,N){const Y=N?this.get(N):this;return Y&&Y.errors?Y.errors[L]:null}hasError(L,N){return!!this.getError(L,N)}get root(){let L=this;for(;L._parent;)L=L._parent;return L}_updateControlsErrors(L){this.status=this._calculateStatus(),L&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(L)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Zr:this.errors?cn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zn)?Zn:this._anyControlsHaveStatus(cn)?cn:te}_anyControlsHaveStatus(L){return this._anyControls(N=>N.status===L)}_anyControlsDirty(){return this._anyControls(L=>L.dirty)}_anyControlsTouched(){return this._anyControls(L=>L.touched)}_updatePristine(L={}){this.pristine=!this._anyControlsDirty(),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}_updateTouched(L={}){this.touched=this._anyControlsTouched(),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}_isBoxedValue(L){return"object"==typeof L&&null!==L&&2===Object.keys(L).length&&"value"in L&&"disabled"in L}_registerOnCollectionChange(L){this._onCollectionChange=L}_setUpdateStrategy(L){Mr(L)&&null!=L.updateOn&&(this._updateOn=L.updateOn)}_parentMarkedDirty(L){return!L&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Si extends ui{constructor(L=null,N,Y){super(ur(N),Ir(Y,N)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(L),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mr(N)&&N.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(L)?L.value:L)}setValue(L,N={}){this.value=this._pendingValue=L,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(Y=>Y(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(L,N={}){this.setValue(L,N)}reset(L=this.defaultValue,N={}){this._applyFormState(L),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(L){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(L){this._onChange.push(L)}_unregisterOnChange(L){Br(this._onChange,L)}registerOnDisabledChange(L){this._onDisabledChange.push(L)}_unregisterOnDisabledChange(L){Br(this._onDisabledChange,L)}_forEachChild(L){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(L){this._isBoxedValue(L)?(this.value=this._pendingValue=L.value,L.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=L}}class re extends ui{constructor(L,N,Y){super(ur(N),Ir(Y,N)),this.controls=L,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(L,N){return this.controls[L]?this.controls[L]:(this.controls[L]=N,N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange),N)}addControl(L,N,Y={}){this.registerControl(L,N),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}removeControl(L,N={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}setControl(L,N,Y={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],N&&this.registerControl(L,N),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}contains(L){return this.controls.hasOwnProperty(L)&&this.controls[L].enabled}setValue(L,N={}){Cr(this,L),Object.keys(L).forEach(Y=>{li(this,Y),this.controls[Y].setValue(L[Y],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(L,N={}){null!=L&&(Object.keys(L).forEach(Y=>{this.controls[Y]&&this.controls[Y].patchValue(L[Y],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(L={},N={}){this._forEachChild((Y,Tt)=>{Y.reset(L[Tt],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this._reduceChildren({},(L,N,Y)=>(L[Y]=Zi(N),L))}_syncPendingControls(){let L=this._reduceChildren(!1,(N,Y)=>!!Y._syncPendingControls()||N);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){Object.keys(this.controls).forEach(N=>{const Y=this.controls[N];Y&&L(Y,N)})}_setUpControls(){this._forEachChild(L=>{L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(L){for(const N of Object.keys(this.controls)){const Y=this.controls[N];if(this.contains(N)&&L(Y))return!0}return!1}_reduceValue(){return this._reduceChildren({},(L,N,Y)=>((N.enabled||this.disabled)&&(L[Y]=N.value),L))}_reduceChildren(L,N){let Y=L;return this._forEachChild((Tt,_n)=>{Y=N(Y,Tt,_n)}),Y}_allControlsDisabled(){for(const L of Object.keys(this.controls))if(this.controls[L].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class fe extends ui{constructor(L,N,Y){super(ur(N),Ir(Y,N)),this.controls=L,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(L){return this.controls[L]}push(L,N={}){this.controls.push(L),this._registerControl(L),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}insert(L,N,Y={}){this.controls.splice(L,0,N),this._registerControl(N),this.updateValueAndValidity({emitEvent:Y.emitEvent})}removeAt(L,N={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),this.controls.splice(L,1),this.updateValueAndValidity({emitEvent:N.emitEvent})}setControl(L,N,Y={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),this.controls.splice(L,1),N&&(this.controls.splice(L,0,N),this._registerControl(N)),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(L,N={}){Cr(this,L),L.forEach((Y,Tt)=>{li(this,Tt),this.at(Tt).setValue(Y,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(L,N={}){null!=L&&(L.forEach((Y,Tt)=>{this.at(Tt)&&this.at(Tt).patchValue(Y,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(L=[],N={}){this._forEachChild((Y,Tt)=>{Y.reset(L[Tt],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this.controls.map(L=>Zi(L))}clear(L={}){this.controls.length<1||(this._forEachChild(N=>N._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:L.emitEvent}))}_syncPendingControls(){let L=this.controls.reduce((N,Y)=>!!Y._syncPendingControls()||N,!1);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){this.controls.forEach((N,Y)=>{L(N,Y)})}_updateValue(){this.value=this.controls.filter(L=>L.enabled||this.disabled).map(L=>L.value)}_anyControls(L){return this.controls.some(N=>N.enabled&&L(N))}_setUpControls(){this._forEachChild(L=>this._registerControl(L))}_allControlsDisabled(){for(const L of this.controls)if(L.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(L){L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)}}const et={provide:Nn,useExisting:(0,c.Gpc)(()=>_e)},ft=(()=>Promise.resolve(null))();let _e=(()=>{class z extends Nn{constructor(N,Y){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new re({},wt(N),Sn(Y))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(N){ft.then(()=>{const Y=this._findContainer(N.path);N.control=Y.registerControl(N.name,N.control),rn(N.control,N),N.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(N)})}getControl(N){return this.form.get(N.path)}removeControl(N){ft.then(()=>{const Y=this._findContainer(N.path);Y&&Y.removeControl(N.name),this._directives.delete(N)})}addFormGroup(N){ft.then(()=>{const Y=this._findContainer(N.path),Tt=new re({});(function wi(z,L){En(z,L)})(Tt,N),Y.registerControl(N.name,Tt),Tt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(N){ft.then(()=>{const Y=this._findContainer(N.path);Y&&Y.removeControl(N.name)})}getFormGroup(N){return this.form.get(N.path)}updateModel(N,Y){ft.then(()=>{this.form.get(N.path).setValue(Y)})}setValue(N){this.control.setValue(N)}onSubmit(N){return this.submitted=!0,function yi(z,L){z._syncPendingControls(),L.forEach(N=>{const Y=N.control;"submit"===Y.updateOn&&Y._pendingChange&&(N.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(N),!1}onReset(){this.resetForm()}resetForm(N){this.form.reset(N),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(N){return N.pop(),N.length?this.form.get(N):this.form}}return z.\u0275fac=function(N){return new(N||z)(c.Y36($e,10),c.Y36(Ke,10))},z.\u0275dir=c.lG2({type:z,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(N,Y){1&N&&c.NdJ("submit",function(_n){return Y.onSubmit(_n)})("reset",function(){return Y.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([et]),c.qOj]}),z})();const Xn={provide:On,useExisting:(0,c.Gpc)(()=>ci)},nr=(()=>Promise.resolve(null))();let ci=(()=>{class z extends On{constructor(N,Y,Tt,_n,E){super(),this._changeDetectorRef=E,this.control=new Si,this._registered=!1,this.update=new c.vpe,this._parent=N,this._setValidators(Y),this._setAsyncValidators(Tt),this.valueAccessor=function Sr(z,L){if(!L)return null;let N,Y,Tt;return Array.isArray(L),L.forEach(_n=>{_n.constructor===ot?N=_n:function gi(z){return Object.getPrototypeOf(z.constructor)===Ue}(_n)?Y=_n:Tt=_n}),Tt||Y||N||null}(0,_n)}ngOnChanges(N){if(this._checkForErrors(),!this._registered||"name"in N){if(this._registered&&(this._checkName(),this.formDirective)){const Y=N.name.previousValue;this.formDirective.removeControl({name:Y,path:this._getPath(Y)})}this._setUpControl()}"isDisabled"in N&&this._updateDisabled(N),function fs(z,L){if(!z.hasOwnProperty("model"))return!1;const N=z.model;return!!N.isFirstChange()||!Object.is(L,N.currentValue)}(N,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(N){nr.then(()=>{var Y;this.control.setValue(N,{emitViewToModelChange:!1}),null===(Y=this._changeDetectorRef)||void 0===Y||Y.markForCheck()})}_updateDisabled(N){const Y=N.isDisabled.currentValue,Tt=""===Y||Y&&"false"!==Y;nr.then(()=>{var _n;Tt&&!this.control.disabled?this.control.disable():!Tt&&this.control.disabled&&this.control.enable(),null===(_n=this._changeDetectorRef)||void 0===_n||_n.markForCheck()})}_getPath(N){return this._parent?function zt(z,L){return[...L.path,z]}(N,this._parent):[N]}}return z.\u0275fac=function(N){return new(N||z)(c.Y36(Nn,9),c.Y36($e,10),c.Y36(Ke,10),c.Y36(tt,10),c.Y36(c.sBO,8))},z.\u0275dir=c.lG2({type:z,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([Xn]),c.qOj,c.TTD]}),z})(),Ii=(()=>{class z{}return z.\u0275fac=function(N){return new(N||z)},z.\u0275dir=c.lG2({type:z,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),z})(),Zt=(()=>{class z{}return z.\u0275fac=function(N){return new(N||z)},z.\u0275mod=c.oAB({type:z}),z.\u0275inj=c.cJS({}),z})();const is=new c.OlP("NgModelWithFormControlWarning");let Ji=(()=>{class z{constructor(){this._validator=lt}ngOnChanges(N){if(this.inputName in N){const Y=this.normalizeInput(N[this.inputName].currentValue);this._enabled=this.enabled(Y),this._validator=this._enabled?this.createValidator(Y):lt,this._onChange&&this._onChange()}}validate(N){return this._validator(N)}registerOnValidatorChange(N){this._onChange=N}enabled(N){return null!=N}}return z.\u0275fac=function(N){return new(N||z)},z.\u0275dir=c.lG2({type:z,features:[c.TTD]}),z})();const se={provide:$e,useExisting:(0,c.Gpc)(()=>ue),multi:!0};let ue=(()=>{class z extends Ji{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=N=>function Oo(z){return null!=z&&!1!==z&&"false"!=`${z}`}(N),this.createValidator=N=>ge}enabled(N){return N}}return z.\u0275fac=function(){let L;return function(Y){return(L||(L=c.n5z(z)))(Y||z)}}(),z.\u0275dir=c.lG2({type:z,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(N,Y){2&N&&c.uIk("required",Y._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([se]),c.qOj]}),z})();const kt={provide:$e,useExisting:(0,c.Gpc)(()=>qt),multi:!0};let qt=(()=>{class z extends Ji{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=N=>""===N||!0===N||"true"===N,this.createValidator=N=>Xe}enabled(N){return N}}return z.\u0275fac=function(){let L;return function(Y){return(L||(L=c.n5z(z)))(Y||z)}}(),z.\u0275dir=c.lG2({type:z,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[c._Bn([kt]),c.qOj]}),z})(),es=(()=>{class z{}return z.\u0275fac=function(N){return new(N||z)},z.\u0275mod=c.oAB({type:z}),z.\u0275inj=c.cJS({imports:[[Zt]]}),z})(),Tn=(()=>{class z{}return z.\u0275fac=function(N){return new(N||z)},z.\u0275mod=c.oAB({type:z}),z.\u0275inj=c.cJS({imports:[es]}),z})(),xs=(()=>{class z{static withConfig(N){return{ngModule:z,providers:[{provide:is,useValue:N.warnOnNgModelWithFormControl}]}}}return z.\u0275fac=function(N){return new(N||z)},z.\u0275mod=c.oAB({type:z}),z.\u0275inj=c.cJS({imports:[es]}),z})()},6115:(Xt,ut,P)=>{"use strict";P.d(ut,{gz:()=>et,y6:()=>Xi,OD:()=>Sn,eC:()=>At,wm:()=>nl,wN:()=>ts,F0:()=>us,rH:()=>wo,Bz:()=>bu,Hx:()=>Nr});var c=P(5e3),J=P(8306),q=P(4742),Se=P(8996),Ae=P(4671),Ee=P(3268),be=P(7669),Re=P(1810),ze=P(5403),pe=P(9672);function Oe(M,S,D){M?(0,pe.f)(D,M,S):S()}var Ue=P(8421);function tt(M){return new J.y(S=>{(0,Ue.Xf)(M()).subscribe(S)})}var Le=P(727),De=P(4482);function ke(){return(0,De.e)((M,S)=>{let D=null;M._refCount++;const $=(0,ze.x)(S,void 0,void 0,void 0,()=>{if(!M||M._refCount<=0||0<--M._refCount)return void(D=null);const j=M._connection,W=D;D=null,j&&(!W||j===W)&&j.unsubscribe(),S.unsubscribe()});M.subscribe($),$.closed||(D=M.connect())})}class Ce extends J.y{constructor(S,D){super(),this.source=S,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,De.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,null==S||S.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new Le.w0;const D=this.getSubject();S.add(this.source.subscribe((0,ze.x)(D,void 0,()=>{this._teardown(),D.complete()},$=>{this._teardown(),D.error($)},()=>this._teardown()))),S.closed&&(this._connection=null,S=Le.w0.EMPTY)}return S}refCount(){return ke()(this)}}var nt=P(9646),ot=P(1135),Ye=P(2843),We=P(6805),$e=P(7272),Ke=P(515),ee=P(7579),Qe=P(9300);function he(M){return M<=0?()=>Ke.E:(0,De.e)((S,D)=>{let $=[];S.subscribe((0,ze.x)(D,j=>{$.push(j),M<$.length&&$.shift()},()=>{for(const j of $)D.next(j);D.complete()},void 0,()=>{$=null}))})}var me=P(8068),ge=P(6590),_t=P(4004),xt=P(3900),ct=P(5698),lt=P(8675),Ve=P(5026),It=P(262),dt=P(4351),gt=P(590),at=P(5577),Gt=P(8505),Nt=P(8189),wt=P(9808);class kn{constructor(S,D){this.id=S,this.url=D}}class Sn extends kn{constructor(S,D,$="imperative",j=null){super(S,D),this.navigationTrigger=$,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dn extends kn{constructor(S,D,$){super(S,D),this.urlAfterRedirects=$}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mn extends kn{constructor(S,D,$){super(S,D),this.reason=$}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jn extends kn{constructor(S,D,$){super(S,D),this.error=$}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Yn extends kn{constructor(S,D,$,j){super(S,D),this.urlAfterRedirects=$,this.state=j}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lr extends kn{constructor(S,D,$,j){super(S,D),this.urlAfterRedirects=$,this.state=j}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hn extends kn{constructor(S,D,$,j,W){super(S,D),this.urlAfterRedirects=$,this.state=j,this.shouldActivate=W}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class In extends kn{constructor(S,D,$,j){super(S,D),this.urlAfterRedirects=$,this.state=j}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qn extends kn{constructor(S,D,$,j){super(S,D),this.urlAfterRedirects=$,this.state=j}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class On{constructor(S){this.route=S}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nn{constructor(S){this.route=S}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jr{constructor(S){this.snapshot=S}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fi{constructor(S){this.snapshot=S}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bt{constructor(S){this.snapshot=S}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qe{constructor(S){this.snapshot=S}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Je{constructor(S,D,$){this.routerEvent=S,this.position=D,this.anchor=$}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const At="primary";class Et{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D[0]:D}return null}getAll(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function Kt(M){return new Et(M)}const bt="ngNavigationCancelingError";function Un(M){const S=Error("NavigationCancelingError: "+M);return S[bt]=!0,S}function fn(M,S,D){const $=D.path.split("/");if($.length>M.length||"full"===D.pathMatch&&(S.hasChildren()||$.length<M.length))return null;const j={};for(let W=0;W<$.length;W++){const le=$[W],He=M[W];if(le.startsWith(":"))j[le.substring(1)]=He;else if(le!==He.path)return null}return{consumed:M.slice(0,$.length),posParams:j}}function fr(M,S){const D=M?Object.keys(M):void 0,$=S?Object.keys(S):void 0;if(!D||!$||D.length!=$.length)return!1;let j;for(let W=0;W<D.length;W++)if(j=D[W],!xr(M[j],S[j]))return!1;return!0}function xr(M,S){if(Array.isArray(M)&&Array.isArray(S)){if(M.length!==S.length)return!1;const D=[...M].sort(),$=[...S].sort();return D.every((j,W)=>$[W]===j)}return M===S}function we(M){return Array.prototype.concat.apply([],M)}function je(M){return M.length>0?M[M.length-1]:null}function Mt(M,S){for(const D in M)M.hasOwnProperty(D)&&S(M[D],D)}function Fe(M){return(0,c.CqO)(M)?M:(0,c.QGY)(M)?(0,Se.D)(Promise.resolve(M)):(0,nt.of)(M)}const zt={exact:function wr(M,S,D){if(!Hr(M.segments,S.segments)||!Fi(M.segments,S.segments,D)||M.numberOfChildren!==S.numberOfChildren)return!1;for(const $ in S.children)if(!M.children[$]||!wr(M.children[$],S.children[$],D))return!1;return!0},subset:rr},rn={exact:function vn(M,S){return fr(M,S)},subset:function En(M,S){return Object.keys(S).length<=Object.keys(M).length&&Object.keys(S).every(D=>xr(M[D],S[D]))},ignored:()=>!0};function yn(M,S,D){return zt[D.paths](M.root,S.root,D.matrixParams)&&rn[D.queryParams](M.queryParams,S.queryParams)&&!("exact"===D.fragment&&M.fragment!==S.fragment)}function rr(M,S,D){return kr(M,S,S.segments,D)}function kr(M,S,D,$){if(M.segments.length>D.length){const j=M.segments.slice(0,D.length);return!(!Hr(j,D)||S.hasChildren()||!Fi(j,D,$))}if(M.segments.length===D.length){if(!Hr(M.segments,D)||!Fi(M.segments,D,$))return!1;for(const j in S.children)if(!M.children[j]||!rr(M.children[j],S.children[j],$))return!1;return!0}{const j=D.slice(0,M.segments.length),W=D.slice(M.segments.length);return!!(Hr(M.segments,j)&&Fi(M.segments,j,$)&&M.children[At])&&kr(M.children[At],S,W,$)}}function Fi(M,S,D){return S.every(($,j)=>rn[D](M[j].parameters,$.parameters))}class Gr{constructor(S,D,$){this.root=S,this.queryParams=D,this.fragment=$}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kt(this.queryParams)),this._queryParamMap}toString(){return fs.serialize(this)}}class Bn{constructor(S,D){this.segments=S,this.children=D,this.parent=null,Mt(D,($,j)=>$.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gi(this)}}class wi{constructor(S,D){this.path=S,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=Kt(this.parameters)),this._parameterMap}toString(){return Zn(this)}}function Hr(M,S){return M.length===S.length&&M.every((D,$)=>D.path===S[$].path)}class Nr{}class pi{parse(S){const D=new Li(S);return new Gr(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(S){const D=`/${yi(S.root,!0)}`,$=function ai(M){const S=Object.keys(M).map(D=>{const $=M[D];return Array.isArray($)?$.map(j=>`${Br(D)}=${Br(j)}`).join("&"):`${Br(D)}=${Br($)}`}).filter(D=>!!D);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${D}${$}${"string"==typeof S.fragment?`#${function oi(M){return encodeURI(M)}(S.fragment)}`:""}`}}const fs=new pi;function gi(M){return M.segments.map(S=>Zn(S)).join("/")}function yi(M,S){if(!M.hasChildren())return gi(M);if(S){const D=M.children[At]?yi(M.children[At],!1):"",$=[];return Mt(M.children,(j,W)=>{W!==At&&$.push(`${W}:${yi(j,!1)}`)}),$.length>0?`${D}(${$.join("//")})`:D}{const D=function $i(M,S){let D=[];return Mt(M.children,($,j)=>{j===At&&(D=D.concat(S($,j)))}),Mt(M.children,($,j)=>{j!==At&&(D=D.concat(S($,j)))}),D}(M,($,j)=>j===At?[yi(M.children[At],!1)]:[`${j}:${yi($,!1)}`]);return 1===Object.keys(M.children).length&&null!=M.children[At]?`${gi(M)}/${D[0]}`:`${gi(M)}/(${D.join("//")})`}}function Sr(M){return encodeURIComponent(M).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Br(M){return Sr(M).replace(/%3B/gi,";")}function Gn(M){return Sr(M).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function te(M){return decodeURIComponent(M)}function cn(M){return te(M.replace(/\+/g,"%20"))}function Zn(M){return`${Gn(M.path)}${function Zr(M){return Object.keys(M).map(S=>`;${Gn(S)}=${Gn(M[S])}`).join("")}(M.parameters)}`}const ur=/^[^\/()?;=#]+/;function or(M){const S=M.match(ur);return S?S[0]:""}const Ir=/^[^=?&#]+/,Mr=/^[^&#]+/;class Li{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let $={};return this.peekStartsWith("(")&&($=this.parseParens(!1)),(S.length>0||Object.keys(D).length>0)&&($[At]=new Bn(S,D)),$}parseSegment(){const S=or(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(S),new wi(te(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const D=or(this.remaining);if(!D)return;this.capture(D);let $="";if(this.consumeOptional("=")){const j=or(this.remaining);j&&($=j,this.capture($))}S[te(D)]=te($)}parseQueryParam(S){const D=function mi(M){const S=M.match(Ir);return S?S[0]:""}(this.remaining);if(!D)return;this.capture(D);let $="";if(this.consumeOptional("=")){const le=function zn(M){const S=M.match(Mr);return S?S[0]:""}(this.remaining);le&&($=le,this.capture($))}const j=cn(D),W=cn($);if(S.hasOwnProperty(j)){let le=S[j];Array.isArray(le)||(le=[le],S[j]=le),le.push(W)}else S[j]=W}parseParens(S){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const $=or(this.remaining),j=this.remaining[$.length];if("/"!==j&&")"!==j&&";"!==j)throw new Error(`Cannot parse url '${this.url}'`);let W;$.indexOf(":")>-1?(W=$.substr(0,$.indexOf(":")),this.capture(W),this.capture(":")):S&&(W=At);const le=this.parseChildren();D[W]=1===Object.keys(le).length?le[At]:new Bn([],le),this.consumeOptional("//")}return D}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new Error(`Expected "${S}".`)}}class Oi{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const D=this.pathFromRoot(S);return D.length>1?D[D.length-2]:null}children(S){const D=Zi(S,this._root);return D?D.children.map($=>$.value):[]}firstChild(S){const D=Zi(S,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(S){const D=li(S,this._root);return D.length<2?[]:D[D.length-2].children.map(j=>j.value).filter(j=>j!==S)}pathFromRoot(S){return li(S,this._root).map(D=>D.value)}}function Zi(M,S){if(M===S.value)return S;for(const D of S.children){const $=Zi(M,D);if($)return $}return null}function li(M,S){if(M===S.value)return[S];for(const D of S.children){const $=li(M,D);if($.length)return $.unshift(S),$}return[]}class Cr{constructor(S,D){this.value=S,this.children=D}toString(){return`TreeNode(${this.value})`}}function ui(M){const S={};return M&&M.children.forEach(D=>S[D.value.outlet]=D),S}class Si extends Oi{constructor(S,D){super(S),this.snapshot=D,Vt(this,S)}toString(){return this.snapshot.toString()}}function re(M,S){const D=function fe(M,S){const le=new Te([],{},{},"",{},At,S,null,M.root,-1,{});return new pt("",new Cr(le,[]))}(M,S),$=new ot.X([new wi("",{})]),j=new ot.X({}),W=new ot.X({}),le=new ot.X({}),He=new ot.X(""),Ut=new et($,j,le,He,W,At,S,D.root);return Ut.snapshot=D.root,new Si(new Cr(Ut,[]),D)}class et{constructor(S,D,$,j,W,le,He,Ut){this.url=S,this.params=D,this.queryParams=$,this.fragment=j,this.data=W,this.outlet=le,this.component=He,this._futureSnapshot=Ut}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(S=>Kt(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(S=>Kt(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ft(M,S="emptyOnly"){const D=M.pathFromRoot;let $=0;if("always"!==S)for($=D.length-1;$>=1;){const j=D[$],W=D[$-1];if(j.routeConfig&&""===j.routeConfig.path)$--;else{if(W.component)break;$--}}return function _e(M){return M.reduce((S,D)=>({params:Object.assign(Object.assign({},S.params),D.params),data:Object.assign(Object.assign({},S.data),D.data),resolve:Object.assign(Object.assign({},S.resolve),D._resolvedData)}),{params:{},data:{},resolve:{}})}(D.slice($))}class Te{constructor(S,D,$,j,W,le,He,Ut,bn,vr,Vn){this.url=S,this.params=D,this.queryParams=$,this.fragment=j,this.data=W,this.outlet=le,this.component=He,this.routeConfig=Ut,this._urlSegment=bn,this._lastPathIndex=vr,this._resolve=Vn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map($=>$.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pt extends Oi{constructor(S,D){super(D),this.url=S,Vt(this,D)}toString(){return Rt(this._root)}}function Vt(M,S){S.value._routerState=M,S.children.forEach(D=>Vt(M,D))}function Rt(M){const S=M.children.length>0?` { ${M.children.map(Rt).join(", ")} } `:"";return`${M.value}${S}`}function Ft(M){if(M.snapshot){const S=M.snapshot,D=M._futureSnapshot;M.snapshot=D,fr(S.queryParams,D.queryParams)||M.queryParams.next(D.queryParams),S.fragment!==D.fragment&&M.fragment.next(D.fragment),fr(S.params,D.params)||M.params.next(D.params),function ei(M,S){if(M.length!==S.length)return!1;for(let D=0;D<M.length;++D)if(!fr(M[D],S[D]))return!1;return!0}(S.url,D.url)||M.url.next(D.url),fr(S.data,D.data)||M.data.next(D.data)}else M.snapshot=M._futureSnapshot,M.data.next(M._futureSnapshot.data)}function ln(M,S){const D=fr(M.params,S.params)&&function Yr(M,S){return Hr(M,S)&&M.every((D,$)=>fr(D.parameters,S[$].parameters))}(M.url,S.url);return D&&!(!M.parent!=!S.parent)&&(!M.parent||ln(M.parent,S.parent))}function Xn(M,S,D){if(D&&M.shouldReuseRoute(S.value,D.value.snapshot)){const $=D.value;$._futureSnapshot=S.value;const j=function nr(M,S,D){return S.children.map($=>{for(const j of D.children)if(M.shouldReuseRoute($.value,j.value.snapshot))return Xn(M,$,j);return Xn(M,$)})}(M,S,D);return new Cr($,j)}{if(M.shouldAttach(S.value)){const W=M.retrieve(S.value);if(null!==W){const le=W.route;return le.value._futureSnapshot=S.value,le.children=S.children.map(He=>Xn(M,He)),le}}const $=function ci(M){return new et(new ot.X(M.url),new ot.X(M.params),new ot.X(M.queryParams),new ot.X(M.fragment),new ot.X(M.data),M.outlet,M.component,M)}(S.value),j=S.children.map(W=>Xn(M,W));return new Cr($,j)}}function rt(M){return"object"==typeof M&&null!=M&&!M.outlets&&!M.segmentPath}function Ge(M){return"object"==typeof M&&null!=M&&M.outlets}function Dt(M,S,D,$,j){let W={};if($&&Mt($,(He,Ut)=>{W[Ut]=Array.isArray(He)?He.map(bn=>`${bn}`):`${He}`}),M===S)return new Gr(D,W,j);const le=Wt(M,S,D);return new Gr(le,W,j)}function Wt(M,S,D){const $={};return Mt(M.children,(j,W)=>{$[W]=j===S?D:Wt(j,S,D)}),new Bn(M.segments,$)}class Zt{constructor(S,D,$){if(this.isAbsolute=S,this.numberOfDoubleDots=D,this.commands=$,S&&$.length>0&&rt($[0]))throw new Error("Root segment cannot have matrix parameters");const j=$.find(Ge);if(j&&j!==je($))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cr{constructor(S,D,$){this.segmentGroup=S,this.processChildren=D,this.index=$}}function js(M,S,D){if(M||(M=new Bn([],{})),0===M.segments.length&&M.hasChildren())return Ai(M,S,D);const $=function na(M,S,D){let $=0,j=S;const W={match:!1,pathIndex:0,commandIndex:0};for(;j<M.segments.length;){if($>=D.length)return W;const le=M.segments[j],He=D[$];if(Ge(He))break;const Ut=`${He}`,bn=$<D.length-1?D[$+1]:null;if(j>0&&void 0===Ut)break;if(Ut&&bn&&"object"==typeof bn&&void 0===bn.outlets){if(!Ho(Ut,bn,le))return W;$+=2}else{if(!Ho(Ut,{},le))return W;$++}j++}return{match:!0,pathIndex:j,commandIndex:$}}(M,S,D),j=D.slice($.commandIndex);if($.match&&$.pathIndex<M.segments.length){const W=new Bn(M.segments.slice(0,$.pathIndex),{});return W.children[At]=new Bn(M.segments.slice($.pathIndex),M.children),Ai(W,0,j)}return $.match&&0===j.length?new Bn(M.segments,{}):$.match&&!M.hasChildren()?Es(M,S,D):$.match?Ai(M,0,j):Es(M,S,D)}function Ai(M,S,D){if(0===D.length)return new Bn(M.segments,{});{const $=function is(M){return Ge(M[0])?M[0].outlets:{[At]:M}}(D),j={};return Mt($,(W,le)=>{"string"==typeof W&&(W=[W]),null!==W&&(j[le]=js(M.children[le],S,W))}),Mt(M.children,(W,le)=>{void 0===$[le]&&(j[le]=W)}),new Bn(M.segments,j)}}function Es(M,S,D){const $=M.segments.slice(0,S);let j=0;for(;j<D.length;){const W=D[j];if(Ge(W)){const Ut=Qs(W.outlets);return new Bn($,Ut)}if(0===j&&rt(D[0])){$.push(new wi(M.segments[S].path,fo(D[0]))),j++;continue}const le=Ge(W)?W.outlets[At]:`${W}`,He=j<D.length-1?D[j+1]:null;le&&He&&rt(He)?($.push(new wi(le,fo(He))),j+=2):($.push(new wi(le,{})),j++)}return new Bn($,{})}function Qs(M){const S={};return Mt(M,(D,$)=>{"string"==typeof D&&(D=[D]),null!==D&&(S[$]=Es(new Bn([],{}),0,D))}),S}function fo(M){const S={};return Mt(M,(D,$)=>S[$]=`${D}`),S}function Ho(M,S,D){return M==D.path&&fr(S,D.parameters)}class Jr{constructor(S,D,$,j){this.routeReuseStrategy=S,this.futureState=D,this.currState=$,this.forwardEvent=j}activate(S){const D=this.futureState._root,$=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,$,S),Ft(this.futureState.root),this.activateChildRoutes(D,$,S)}deactivateChildRoutes(S,D,$){const j=ui(D);S.children.forEach(W=>{const le=W.value.outlet;this.deactivateRoutes(W,j[le],$),delete j[le]}),Mt(j,(W,le)=>{this.deactivateRouteAndItsChildren(W,$)})}deactivateRoutes(S,D,$){const j=S.value,W=D?D.value:null;if(j===W)if(j.component){const le=$.getContext(j.outlet);le&&this.deactivateChildRoutes(S,D,le.children)}else this.deactivateChildRoutes(S,D,$);else W&&this.deactivateRouteAndItsChildren(D,$)}deactivateRouteAndItsChildren(S,D){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,D):this.deactivateRouteAndOutlet(S,D)}detachAndStoreRouteSubtree(S,D){const $=D.getContext(S.value.outlet),j=$&&S.value.component?$.children:D,W=ui(S);for(const le of Object.keys(W))this.deactivateRouteAndItsChildren(W[le],j);if($&&$.outlet){const le=$.outlet.detach(),He=$.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:le,route:S,contexts:He})}}deactivateRouteAndOutlet(S,D){const $=D.getContext(S.value.outlet),j=$&&S.value.component?$.children:D,W=ui(S);for(const le of Object.keys(W))this.deactivateRouteAndItsChildren(W[le],j);$&&$.outlet&&($.outlet.deactivate(),$.children.onOutletDeactivated(),$.attachRef=null,$.resolver=null,$.route=null)}activateChildRoutes(S,D,$){const j=ui(D);S.children.forEach(W=>{this.activateRoutes(W,j[W.value.outlet],$),this.forwardEvent(new qe(W.value.snapshot))}),S.children.length&&this.forwardEvent(new fi(S.value.snapshot))}activateRoutes(S,D,$){const j=S.value,W=D?D.value:null;if(Ft(j),j===W)if(j.component){const le=$.getOrCreateContext(j.outlet);this.activateChildRoutes(S,D,le.children)}else this.activateChildRoutes(S,D,$);else if(j.component){const le=$.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const He=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),le.children.onOutletReAttached(He.contexts),le.attachRef=He.componentRef,le.route=He.route.value,le.outlet&&le.outlet.attach(He.componentRef,He.route.value),Ft(He.route.value),this.activateChildRoutes(S,null,le.children)}else{const He=function ss(M){for(let S=M.parent;S;S=S.parent){const D=S.routeConfig;if(D&&D._loadedConfig)return D._loadedConfig;if(D&&D.component)return null}return null}(j.snapshot),Ut=He?He.module.componentFactoryResolver:null;le.attachRef=null,le.route=j,le.resolver=Ut,le.outlet&&le.outlet.activateWith(j,Ut),this.activateChildRoutes(S,null,le.children)}}else this.activateChildRoutes(S,null,$)}}class ws{constructor(S,D){this.routes=S,this.module=D}}function Is(M){return"function"==typeof M}function Hs(M){return M instanceof Gr}const Tr=Symbol("INITIAL_VALUE");function bs(){return(0,xt.w)(M=>function ye(...M){const S=(0,be.yG)(M),D=(0,be.jO)(M),{args:$,keys:j}=(0,q.D)(M);if(0===$.length)return(0,Se.D)([],S);const W=new J.y(function Me(M,S,D=Ae.y){return $=>{Oe(S,()=>{const{length:j}=M,W=new Array(j);let le=j,He=j;for(let Ut=0;Ut<j;Ut++)Oe(S,()=>{const bn=(0,Se.D)(M[Ut],S);let vr=!1;bn.subscribe((0,ze.x)($,Vn=>{W[Ut]=Vn,vr||(vr=!0,He--),He||$.next(D(W.slice()))},()=>{--le||$.complete()}))},$)},$)}}($,S,j?le=>(0,Re.n)(j,le):Ae.y));return D?W.pipe((0,Ee.Z)(D)):W}(M.map(S=>S.pipe((0,ct.q)(1),(0,lt.O)(Tr)))).pipe((0,Ve.R)((S,D)=>{let $=!1;return D.reduce((j,W,le)=>j!==Tr?j:(W===Tr&&($=!0),$||!1!==W&&le!==D.length-1&&!Hs(W)?j:W),S)},Tr),(0,Qe.h)(S=>S!==Tr),(0,_t.U)(S=>Hs(S)?S:!0===S),(0,ct.q)(1)))}class as{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xi,this.attachRef=null}}class Xi{constructor(){this.contexts=new Map}onChildOutletCreated(S,D){const $=this.getOrCreateContext(S);$.outlet=D,this.contexts.set(S,$)}onChildOutletDestroyed(S){const D=this.getContext(S);D&&(D.outlet=null,D.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let D=this.getContext(S);return D||(D=new as,this.contexts.set(S,D)),D}getContext(S){return this.contexts.get(S)||null}}let Qi=(()=>{class M{constructor(D,$,j,W,le){this.parentContexts=D,this.location=$,this.resolver=j,this.changeDetector=le,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=W||At,D.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const D=this.parentContexts.getContext(this.name);D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,$){this.activated=D,this._activatedRoute=$,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,$){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=D;const le=($=$||this.resolver).resolveComponentFactory(D._futureSnapshot.routeConfig.component),He=this.parentContexts.getOrCreateContext(this.name).children,Ut=new Oo(D,He,this.location.injector);this.activated=this.location.createComponent(le,this.location.length,Ut),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return M.\u0275fac=function(D){return new(D||M)(c.Y36(Xi),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},M.\u0275dir=c.lG2({type:M,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),M})();class Oo{constructor(S,D,$){this.route=S,this.childContexts=D,this.parent=$}get(S,D){return S===et?this.route:S===Xi?this.childContexts:this.parent.get(S,D)}}let zr=(()=>{class M{}return M.\u0275fac=function(D){return new(D||M)},M.\u0275cmp=c.Xpm({type:M,selectors:[["ng-component"]],decls:1,vars:0,template:function(D,$){1&D&&c._UZ(0,"router-outlet")},directives:[Qi],encapsulation:2}),M})();function Ji(M,S=""){for(let D=0;D<M.length;D++){const $=M[D];ls($,Cs(S,$))}}function ls(M,S){M.children&&Ji(M.children,S)}function Cs(M,S){return S?M||S.path?M&&!S.path?`${M}/`:!M&&S.path?S.path:`${M}/${S.path}`:"":M}function _r(M){const S=M.children&&M.children.map(_r),D=S?Object.assign(Object.assign({},M),{children:S}):Object.assign({},M);return!D.component&&(S||D.loadChildren)&&D.outlet&&D.outlet!==At&&(D.component=zr),D}function V(M){return M.outlet||At}function se(M,S){const D=M.filter($=>V($)===S);return D.push(...M.filter($=>V($)!==S)),D}const U={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ue(M,S,D){var $;if(""===S.path)return"full"===S.pathMatch&&(M.hasChildren()||D.length>0)?Object.assign({},U):{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const W=(S.matcher||fn)(D,M,S);if(!W)return Object.assign({},U);const le={};Mt(W.posParams,(Ut,bn)=>{le[bn]=Ut.path});const He=W.consumed.length>0?Object.assign(Object.assign({},le),W.consumed[W.consumed.length-1].parameters):le;return{matched:!0,consumedSegments:W.consumed,remainingSegments:D.slice(W.consumed.length),parameters:He,positionalParamSegments:null!==($=W.posParams)&&void 0!==$?$:{}}}function Be(M,S,D,$,j="corrected"){if(D.length>0&&function xn(M,S,D){return D.some($=>Jn(M,S,$)&&V($)!==At)}(M,D,$)){const le=new Bn(S,function qt(M,S,D,$){const j={};j[At]=$,$._sourceSegment=M,$._segmentIndexShift=S.length;for(const W of D)if(""===W.path&&V(W)!==At){const le=new Bn([],{});le._sourceSegment=M,le._segmentIndexShift=S.length,j[V(W)]=le}return j}(M,S,$,new Bn(D,M.children)));return le._sourceSegment=M,le._segmentIndexShift=S.length,{segmentGroup:le,slicedSegments:[]}}if(0===D.length&&function Pn(M,S,D){return D.some($=>Jn(M,S,$))}(M,D,$)){const le=new Bn(M.segments,function kt(M,S,D,$,j,W){const le={};for(const He of $)if(Jn(M,D,He)&&!j[V(He)]){const Ut=new Bn([],{});Ut._sourceSegment=M,Ut._segmentIndexShift="legacy"===W?M.segments.length:S.length,le[V(He)]=Ut}return Object.assign(Object.assign({},j),le)}(M,S,D,$,M.children,j));return le._sourceSegment=M,le._segmentIndexShift=S.length,{segmentGroup:le,slicedSegments:D}}const W=new Bn(M.segments,M.children);return W._sourceSegment=M,W._segmentIndexShift=S.length,{segmentGroup:W,slicedSegments:D}}function Jn(M,S,D){return(!(M.hasChildren()||S.length>0)||"full"!==D.pathMatch)&&""===D.path}function ir(M,S,D,$){return!!(V(M)===$||$!==At&&Jn(S,D,M))&&("**"===M.path||ue(S,M,D).matched)}function dr(M,S,D){return 0===S.length&&!M.children[D]}class di{constructor(S){this.segmentGroup=S||null}}class Vr{constructor(S){this.urlTree=S}}function Ur(M){return(0,Ye._)(new di(M))}function Ns(M){return(0,Ye._)(new Vr(M))}class zo{constructor(S,D,$,j,W){this.configLoader=D,this.urlSerializer=$,this.urlTree=j,this.config=W,this.allowRedirects=!0,this.ngModule=S.get(c.h0i)}apply(){const S=Be(this.urlTree.root,[],[],this.config).segmentGroup,D=new Bn(S.segments,S.children);return this.expandSegmentGroup(this.ngModule,this.config,D,At).pipe((0,_t.U)(W=>this.createUrlTree(Gs(W),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,It.K)(W=>{if(W instanceof Vr)return this.allowRedirects=!1,this.match(W.urlTree);throw W instanceof di?this.noMatchError(W):W}))}match(S){return this.expandSegmentGroup(this.ngModule,this.config,S.root,At).pipe((0,_t.U)(j=>this.createUrlTree(Gs(j),S.queryParams,S.fragment))).pipe((0,It.K)(j=>{throw j instanceof di?this.noMatchError(j):j}))}noMatchError(S){return new Error(`Cannot match any routes. URL Segment: '${S.segmentGroup}'`)}createUrlTree(S,D,$){const j=S.segments.length>0?new Bn([],{[At]:S}):S;return new Gr(j,D,$)}expandSegmentGroup(S,D,$,j){return 0===$.segments.length&&$.hasChildren()?this.expandChildren(S,D,$).pipe((0,_t.U)(W=>new Bn([],W))):this.expandSegment(S,$,D,$.segments,j,!0)}expandChildren(S,D,$){const j=[];for(const W of Object.keys($.children))"primary"===W?j.unshift(W):j.push(W);return(0,Se.D)(j).pipe((0,dt.b)(W=>{const le=$.children[W],He=se(D,W);return this.expandSegmentGroup(S,He,le,W).pipe((0,_t.U)(Ut=>({segment:Ut,outlet:W})))}),(0,Ve.R)((W,le)=>(W[le.outlet]=le.segment,W),{}),function Ne(M,S){const D=arguments.length>=2;return $=>$.pipe(M?(0,Qe.h)((j,W)=>M(j,W,$)):Ae.y,he(1),D?(0,ge.d)(S):(0,me.T)(()=>new We.K))}())}expandSegment(S,D,$,j,W,le){return(0,Se.D)($).pipe((0,dt.b)(He=>this.expandSegmentAgainstRoute(S,D,$,He,j,W,le).pipe((0,It.K)(bn=>{if(bn instanceof di)return(0,nt.of)(null);throw bn}))),(0,gt.P)(He=>!!He),(0,It.K)((He,Ut)=>{if(He instanceof We.K||"EmptyError"===He.name)return dr(D,j,W)?(0,nt.of)(new Bn([],{})):Ur(D);throw He}))}expandSegmentAgainstRoute(S,D,$,j,W,le,He){return ir(j,D,W,le)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(S,D,j,W,le):He&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,D,$,j,W,le):Ur(D):Ur(D)}expandSegmentAgainstRouteUsingRedirect(S,D,$,j,W,le){return"**"===j.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,$,j,le):this.expandRegularSegmentAgainstRouteUsingRedirect(S,D,$,j,W,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,D,$,j){const W=this.applyRedirectCommands([],$.redirectTo,{});return $.redirectTo.startsWith("/")?Ns(W):this.lineralizeSegments($,W).pipe((0,at.z)(le=>{const He=new Bn(le,{});return this.expandSegment(S,He,D,le,j,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,D,$,j,W,le){const{matched:He,consumedSegments:Ut,remainingSegments:bn,positionalParamSegments:vr}=ue(D,j,W);if(!He)return Ur(D);const Vn=this.applyRedirectCommands(Ut,j.redirectTo,vr);return j.redirectTo.startsWith("/")?Ns(Vn):this.lineralizeSegments(j,Vn).pipe((0,at.z)(Wr=>this.expandSegment(S,D,$,Wr.concat(bn),le,!1)))}matchSegmentAgainstRoute(S,D,$,j,W){if("**"===$.path)return $.loadChildren?($._loadedConfig?(0,nt.of)($._loadedConfig):this.configLoader.load(S.injector,$)).pipe((0,_t.U)(Vn=>($._loadedConfig=Vn,new Bn(j,{})))):(0,nt.of)(new Bn(j,{}));const{matched:le,consumedSegments:He,remainingSegments:Ut}=ue(D,$,j);return le?this.getChildConfig(S,$,j).pipe((0,at.z)(vr=>{const Vn=vr.module,Wr=vr.routes,{segmentGroup:Xr,slicedSegments:Fs}=Be(D,He,Ut,Wr),qo=new Bn(Xr.segments,Xr.children);if(0===Fs.length&&qo.hasChildren())return this.expandChildren(Vn,Wr,qo).pipe((0,_t.U)(Lo=>new Bn(He,Lo)));if(0===Wr.length&&0===Fs.length)return(0,nt.of)(new Bn(He,{}));const fl=V($)===W;return this.expandSegment(Vn,qo,Wr,Fs,fl?At:W,!0).pipe((0,_t.U)(Co=>new Bn(He.concat(Co.segments),Co.children)))})):Ur(D)}getChildConfig(S,D,$){return D.children?(0,nt.of)(new ws(D.children,S)):D.loadChildren?void 0!==D._loadedConfig?(0,nt.of)(D._loadedConfig):this.runCanLoadGuards(S.injector,D,$).pipe((0,at.z)(j=>j?this.configLoader.load(S.injector,D).pipe((0,_t.U)(W=>(D._loadedConfig=W,W))):function Tn(M){return(0,Ye._)(Un(`Cannot load children because the guard of the route "path: '${M.path}'" returned false`))}(D))):(0,nt.of)(new ws([],S))}runCanLoadGuards(S,D,$){const j=D.canLoad;if(!j||0===j.length)return(0,nt.of)(!0);const W=j.map(le=>{const He=S.get(le);let Ut;if(function os(M){return M&&Is(M.canLoad)}(He))Ut=He.canLoad(D,$);else{if(!Is(He))throw new Error("Invalid CanLoad guard");Ut=He(D,$)}return Fe(Ut)});return(0,nt.of)(W).pipe(bs(),(0,Gt.b)(le=>{if(!Hs(le))return;const He=Un(`Redirecting to "${this.urlSerializer.serialize(le)}"`);throw He.url=le,He}),(0,_t.U)(le=>!0===le))}lineralizeSegments(S,D){let $=[],j=D.root;for(;;){if($=$.concat(j.segments),0===j.numberOfChildren)return(0,nt.of)($);if(j.numberOfChildren>1||!j.children[At])return(0,Ye._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${S.redirectTo}'`));j=j.children[At]}}applyRedirectCommands(S,D,$){return this.applyRedirectCreatreUrlTree(D,this.urlSerializer.parse(D),S,$)}applyRedirectCreatreUrlTree(S,D,$,j){const W=this.createSegmentGroup(S,D.root,$,j);return new Gr(W,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(S,D){const $={};return Mt(S,(j,W)=>{if("string"==typeof j&&j.startsWith(":")){const He=j.substring(1);$[W]=D[He]}else $[W]=j}),$}createSegmentGroup(S,D,$,j){const W=this.createSegments(S,D.segments,$,j);let le={};return Mt(D.children,(He,Ut)=>{le[Ut]=this.createSegmentGroup(S,He,$,j)}),new Bn(W,le)}createSegments(S,D,$,j){return D.map(W=>W.path.startsWith(":")?this.findPosParam(S,W,j):this.findOrReturn(W,$))}findPosParam(S,D,$){const j=$[D.path.substring(1)];if(!j)throw new Error(`Cannot redirect to '${S}'. Cannot find '${D.path}'.`);return j}findOrReturn(S,D){let $=0;for(const j of D){if(j.path===S.path)return D.splice($),j;$++}return S}}function Gs(M){const S={};for(const $ of Object.keys(M.children)){const W=Gs(M.children[$]);(W.segments.length>0||W.hasChildren())&&(S[$]=W)}return function Po(M){if(1===M.numberOfChildren&&M.children[At]){const S=M.children[At];return new Bn(M.segments.concat(S.segments),S.children)}return M}(new Bn(M.segments,S))}class L{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class N{constructor(S,D){this.component=S,this.route=D}}function Y(M,S,D){const $=M._root;return G($,S?S._root:null,D,[$.value])}function _n(M,S,D){const $=function E(M){if(!M)return null;for(let S=M.parent;S;S=S.parent){const D=S.routeConfig;if(D&&D._loadedConfig)return D._loadedConfig}return null}(S);return($?$.module.injector:D).get(M)}function G(M,S,D,$,j={canDeactivateChecks:[],canActivateChecks:[]}){const W=ui(S);return M.children.forEach(le=>{(function w(M,S,D,$,j={canDeactivateChecks:[],canActivateChecks:[]}){const W=M.value,le=S?S.value:null,He=D?D.getContext(M.value.outlet):null;if(le&&W.routeConfig===le.routeConfig){const Ut=function B(M,S,D){if("function"==typeof D)return D(M,S);switch(D){case"pathParamsChange":return!Hr(M.url,S.url);case"pathParamsOrQueryParamsChange":return!Hr(M.url,S.url)||!fr(M.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ln(M,S)||!fr(M.queryParams,S.queryParams);default:return!ln(M,S)}}(le,W,W.routeConfig.runGuardsAndResolvers);Ut?j.canActivateChecks.push(new L($)):(W.data=le.data,W._resolvedData=le._resolvedData),G(M,S,W.component?He?He.children:null:D,$,j),Ut&&He&&He.outlet&&He.outlet.isActivated&&j.canDeactivateChecks.push(new N(He.outlet.component,le))}else le&&ce(S,He,j),j.canActivateChecks.push(new L($)),G(M,null,W.component?He?He.children:null:D,$,j)})(le,W[le.value.outlet],D,$.concat([le.value]),j),delete W[le.value.outlet]}),Mt(W,(le,He)=>ce(le,D.getContext(He),j)),j}function ce(M,S,D){const $=ui(M),j=M.value;Mt($,(W,le)=>{ce(W,j.component?S?S.children.getContext(le):null:S,D)}),D.canDeactivateChecks.push(new N(j.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,j))}class Wi{}function ji(M){return new J.y(S=>S.error(M))}class ni{constructor(S,D,$,j,W,le){this.rootComponentType=S,this.config=D,this.urlTree=$,this.url=j,this.paramsInheritanceStrategy=W,this.relativeLinkResolution=le}recognize(){const S=Be(this.urlTree.root,[],[],this.config.filter(le=>void 0===le.redirectTo),this.relativeLinkResolution).segmentGroup,D=this.processSegmentGroup(this.config,S,At);if(null===D)return null;const $=new Te([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),j=new Cr($,D),W=new pt(this.url,j);return this.inheritParamsAndData(W._root),W}inheritParamsAndData(S){const D=S.value,$=ft(D,this.paramsInheritanceStrategy);D.params=Object.freeze($.params),D.data=Object.freeze($.data),S.children.forEach(j=>this.inheritParamsAndData(j))}processSegmentGroup(S,D,$){return 0===D.segments.length&&D.hasChildren()?this.processChildren(S,D):this.processSegment(S,D,D.segments,$)}processChildren(S,D){const $=[];for(const W of Object.keys(D.children)){const le=D.children[W],He=se(S,W),Ut=this.processSegmentGroup(He,le,W);if(null===Ut)return null;$.push(...Ut)}const j=Ja($);return function Xa(M){M.sort((S,D)=>S.value.outlet===At?-1:D.value.outlet===At?1:S.value.outlet.localeCompare(D.value.outlet))}(j),j}processSegment(S,D,$,j){for(const W of S){const le=this.processSegmentAgainstRoute(W,D,$,j);if(null!==le)return le}return dr(D,$,j)?[]:null}processSegmentAgainstRoute(S,D,$,j){if(S.redirectTo||!ir(S,D,$,j))return null;let W,le=[],He=[];if("**"===S.path){const Xr=$.length>0?je($).parameters:{};W=new Te($,Xr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fa(S),V(S),S.component,S,Ma(D),Vl(D)+$.length,ko(S))}else{const Xr=ue(D,S,$);if(!Xr.matched)return null;le=Xr.consumedSegments,He=Xr.remainingSegments,W=new Te(le,Xr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fa(S),V(S),S.component,S,Ma(D),Vl(D)+le.length,ko(S))}const Ut=function Bl(M){return M.children?M.children:M.loadChildren?M._loadedConfig.routes:[]}(S),{segmentGroup:bn,slicedSegments:vr}=Be(D,le,He,Ut.filter(Xr=>void 0===Xr.redirectTo),this.relativeLinkResolution);if(0===vr.length&&bn.hasChildren()){const Xr=this.processChildren(Ut,bn);return null===Xr?null:[new Cr(W,Xr)]}if(0===Ut.length&&0===vr.length)return[new Cr(W,[])];const Vn=V(S)===j,Wr=this.processSegment(Ut,bn,vr,Vn?At:j);return null===Wr?null:[new Cr(W,Wr)]}}function Qa(M){const S=M.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function Ja(M){const S=[],D=new Set;for(const $ of M){if(!Qa($)){S.push($);continue}const j=S.find(W=>$.value.routeConfig===W.value.routeConfig);void 0!==j?(j.children.push(...$.children),D.add(j)):S.push($)}for(const $ of D){const j=Ja($.children);S.push(new Cr($.value,j))}return S.filter($=>!D.has($))}function Ma(M){let S=M;for(;S._sourceSegment;)S=S._sourceSegment;return S}function Vl(M){let S=M,D=S._segmentIndexShift?S._segmentIndexShift:0;for(;S._sourceSegment;)S=S._sourceSegment,D+=S._segmentIndexShift?S._segmentIndexShift:0;return D-1}function fa(M){return M.data||{}}function ko(M){return M.resolve||{}}function ra(M){return[...Object.keys(M),...Object.getOwnPropertySymbols(M)]}function Ul(M){return(0,xt.w)(S=>{const D=M(S);return D?(0,Se.D)(D).pipe((0,_t.U)(()=>S)):(0,nt.of)(S)})}class ts{}class Ki extends class No{shouldDetach(S){return!1}store(S,D){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,D){return S.routeConfig===D.routeConfig}}{}const wu=new c.OlP("ROUTES");class ga{constructor(S,D,$,j){this.injector=S,this.compiler=D,this.onLoadStartListener=$,this.onLoadEndListener=j}load(S,D){if(D._loader$)return D._loader$;this.onLoadStartListener&&this.onLoadStartListener(D);const j=this.loadModuleFactory(D.loadChildren).pipe((0,_t.U)(W=>{this.onLoadEndListener&&this.onLoadEndListener(D);const le=W.create(S);return new ws(we(le.injector.get(wu,void 0,c.XFs.Self|c.XFs.Optional)).map(_r),le)}),(0,It.K)(W=>{throw D._loader$=void 0,W}));return D._loader$=new Ce(j,()=>new ee.x).pipe(ke()),D._loader$}loadModuleFactory(S){return Fe(S()).pipe((0,at.z)(D=>D instanceof c.YKP?(0,nt.of)(D):(0,Se.D)(this.compiler.compileModuleAsync(D))))}}class Lc{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,D){return S}}function ma(M){throw M}function Md(M,S,D){return S.parse("/")}function $l(M,S){return(0,nt.of)(null)}const Oa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Eo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let us=(()=>{class M{constructor(D,$,j,W,le,He,Ut){this.rootComponentType=D,this.urlSerializer=$,this.rootContexts=j,this.location=W,this.config=Ut,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ee.x,this.errorHandler=ma,this.malformedUriErrorHandler=Md,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$l,afterPreactivation:$l},this.urlHandlingStrategy=new Lc,this.routeReuseStrategy=new Ki,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=le.get(c.h0i),this.console=le.get(c.c2e);const Vn=le.get(c.R0b);this.isNgZoneEnabled=Vn instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(Ut),this.currentUrlTree=function mt(){return new Gr(new Bn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ga(le,He,Wr=>this.triggerEvent(new On(Wr)),Wr=>this.triggerEvent(new Nn(Wr))),this.routerState=re(this.currentUrlTree,this.rootComponentType),this.transitions=new ot.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var D;return null===(D=this.location.getState())||void 0===D?void 0:D.\u0275routerPageId}setupNavigations(D){const $=this.events;return D.pipe((0,Qe.h)(j=>0!==j.id),(0,_t.U)(j=>Object.assign(Object.assign({},j),{extractedUrl:this.urlHandlingStrategy.extract(j.rawUrl)})),(0,xt.w)(j=>{let W=!1,le=!1;return(0,nt.of)(j).pipe((0,Gt.b)(He=>{this.currentNavigation={id:He.id,initialUrl:He.currentRawUrl,extractedUrl:He.extractedUrl,trigger:He.source,extras:He.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,xt.w)(He=>{const Ut=this.browserUrlTree.toString(),bn=!this.navigated||He.extractedUrl.toString()!==Ut||Ut!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||bn)&&this.urlHandlingStrategy.shouldProcessUrl(He.rawUrl))return jl(He.source)&&(this.browserUrlTree=He.extractedUrl),(0,nt.of)(He).pipe((0,xt.w)(Vn=>{const Wr=this.transitions.getValue();return $.next(new Sn(Vn.id,this.serializeUrl(Vn.extractedUrl),Vn.source,Vn.restoredState)),Wr!==this.transitions.getValue()?Ke.E:Promise.resolve(Vn)}),function z(M,S,D,$){return(0,xt.w)(j=>function xs(M,S,D,$,j){return new zo(M,S,D,$,j).apply()}(M,S,D,j.extractedUrl,$).pipe((0,_t.U)(W=>Object.assign(Object.assign({},j),{urlAfterRedirects:W}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Gt.b)(Vn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Vn.urlAfterRedirects})}),function el(M,S,D,$,j){return(0,at.z)(W=>function to(M,S,D,$,j="emptyOnly",W="legacy"){try{const le=new ni(M,S,D,$,j,W).recognize();return null===le?ji(new Wi):(0,nt.of)(le)}catch(le){return ji(le)}}(M,S,W.urlAfterRedirects,D(W.urlAfterRedirects),$,j).pipe((0,_t.U)(le=>Object.assign(Object.assign({},W),{targetSnapshot:le}))))}(this.rootComponentType,this.config,Vn=>this.serializeUrl(Vn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Gt.b)(Vn=>{if("eager"===this.urlUpdateStrategy){if(!Vn.extras.skipLocationChange){const Xr=this.urlHandlingStrategy.merge(Vn.urlAfterRedirects,Vn.rawUrl);this.setBrowserUrl(Xr,Vn)}this.browserUrlTree=Vn.urlAfterRedirects}const Wr=new Yn(Vn.id,this.serializeUrl(Vn.extractedUrl),this.serializeUrl(Vn.urlAfterRedirects),Vn.targetSnapshot);$.next(Wr)}));if(bn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Wr,extractedUrl:Xr,source:Fs,restoredState:qo,extras:fl}=He,cs=new Sn(Wr,this.serializeUrl(Xr),Fs,qo);$.next(cs);const Co=re(Xr,this.rootComponentType).snapshot;return(0,nt.of)(Object.assign(Object.assign({},He),{targetSnapshot:Co,urlAfterRedirects:Xr,extras:Object.assign(Object.assign({},fl),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=He.rawUrl,He.resolve(null),Ke.E}),Ul(He=>{const{targetSnapshot:Ut,id:bn,extractedUrl:vr,rawUrl:Vn,extras:{skipLocationChange:Wr,replaceUrl:Xr}}=He;return this.hooks.beforePreactivation(Ut,{navigationId:bn,appliedUrlTree:vr,rawUrlTree:Vn,skipLocationChange:!!Wr,replaceUrl:!!Xr})}),(0,Gt.b)(He=>{const Ut=new lr(He.id,this.serializeUrl(He.extractedUrl),this.serializeUrl(He.urlAfterRedirects),He.targetSnapshot);this.triggerEvent(Ut)}),(0,_t.U)(He=>Object.assign(Object.assign({},He),{guards:Y(He.targetSnapshot,He.currentSnapshot,this.rootContexts)})),function Pt(M,S){return(0,at.z)(D=>{const{targetSnapshot:$,currentSnapshot:j,guards:{canActivateChecks:W,canDeactivateChecks:le}}=D;return 0===le.length&&0===W.length?(0,nt.of)(Object.assign(Object.assign({},D),{guardsResult:!0})):function an(M,S,D,$){return(0,Se.D)(M).pipe((0,at.z)(j=>function Ds(M,S,D,$,j){const W=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!W||0===W.length)return(0,nt.of)(!0);const le=W.map(He=>{const Ut=_n(He,S,j);let bn;if(function eo(M){return M&&Is(M.canDeactivate)}(Ut))bn=Fe(Ut.canDeactivate(M,S,D,$));else{if(!Is(Ut))throw new Error("Invalid CanDeactivate guard");bn=Fe(Ut(M,S,D,$))}return bn.pipe((0,gt.P)())});return(0,nt.of)(le).pipe(bs())}(j.component,j.route,D,S,$)),(0,gt.P)(j=>!0!==j,!0))}(le,$,j,M).pipe((0,at.z)(He=>He&&function Go(M){return"boolean"==typeof M}(He)?function Mn(M,S,D,$){return(0,Se.D)(S).pipe((0,dt.b)(j=>(0,$e.z)(function $r(M,S){return null!==M&&S&&S(new jr(M)),(0,nt.of)(!0)}(j.route.parent,$),function er(M,S){return null!==M&&S&&S(new Bt(M)),(0,nt.of)(!0)}(j.route,$),function ti(M,S,D){const $=S[S.length-1],W=S.slice(0,S.length-1).reverse().map(le=>function Tt(M){const S=M.routeConfig?M.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:M,guards:S}:null}(le)).filter(le=>null!==le).map(le=>tt(()=>{const He=le.guards.map(Ut=>{const bn=_n(Ut,le.node,D);let vr;if(function Bi(M){return M&&Is(M.canActivateChild)}(bn))vr=Fe(bn.canActivateChild($,M));else{if(!Is(bn))throw new Error("Invalid CanActivateChild guard");vr=Fe(bn($,M))}return vr.pipe((0,gt.P)())});return(0,nt.of)(He).pipe(bs())}));return(0,nt.of)(W).pipe(bs())}(M,j.path,D),function tr(M,S,D){const $=S.routeConfig?S.routeConfig.canActivate:null;if(!$||0===$.length)return(0,nt.of)(!0);const j=$.map(W=>tt(()=>{const le=_n(W,S,D);let He;if(function Js(M){return M&&Is(M.canActivate)}(le))He=Fe(le.canActivate(S,M));else{if(!Is(le))throw new Error("Invalid CanActivate guard");He=Fe(le(S,M))}return He.pipe((0,gt.P)())}));return(0,nt.of)(j).pipe(bs())}(M,j.route,D))),(0,gt.P)(j=>!0!==j,!0))}($,W,M,S):(0,nt.of)(He)),(0,_t.U)(He=>Object.assign(Object.assign({},D),{guardsResult:He})))})}(this.ngModule.injector,He=>this.triggerEvent(He)),(0,Gt.b)(He=>{if(Hs(He.guardsResult)){const bn=Un(`Redirecting to "${this.serializeUrl(He.guardsResult)}"`);throw bn.url=He.guardsResult,bn}const Ut=new Hn(He.id,this.serializeUrl(He.extractedUrl),this.serializeUrl(He.urlAfterRedirects),He.targetSnapshot,!!He.guardsResult);this.triggerEvent(Ut)}),(0,Qe.h)(He=>!!He.guardsResult||(this.restoreHistory(He),this.cancelNavigationTransition(He,""),!1)),Ul(He=>{if(He.guards.canActivateChecks.length)return(0,nt.of)(He).pipe((0,Gt.b)(Ut=>{const bn=new In(Ut.id,this.serializeUrl(Ut.extractedUrl),this.serializeUrl(Ut.urlAfterRedirects),Ut.targetSnapshot);this.triggerEvent(bn)}),(0,xt.w)(Ut=>{let bn=!1;return(0,nt.of)(Ut).pipe(function Wo(M,S){return(0,at.z)(D=>{const{targetSnapshot:$,guards:{canActivateChecks:j}}=D;if(!j.length)return(0,nt.of)(D);let W=0;return(0,Se.D)(j).pipe((0,dt.b)(le=>function pa(M,S,D,$){return function Eu(M,S,D,$){const j=ra(M);if(0===j.length)return(0,nt.of)({});const W={};return(0,Se.D)(j).pipe((0,at.z)(le=>function Ra(M,S,D,$){const j=_n(M,S,$);return Fe(j.resolve?j.resolve(S,D):j(S,D))}(M[le],S,D,$).pipe((0,Gt.b)(He=>{W[le]=He}))),he(1),(0,at.z)(()=>ra(W).length===j.length?(0,nt.of)(W):Ke.E))}(M._resolve,M,S,$).pipe((0,_t.U)(W=>(M._resolvedData=W,M.data=Object.assign(Object.assign({},M.data),ft(M,D).resolve),null)))}(le.route,$,M,S)),(0,Gt.b)(()=>W++),he(1),(0,at.z)(le=>W===j.length?(0,nt.of)(D):Ke.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Gt.b)({next:()=>bn=!0,complete:()=>{bn||(this.restoreHistory(Ut),this.cancelNavigationTransition(Ut,"At least one route resolver didn't emit any value."))}}))}),(0,Gt.b)(Ut=>{const bn=new Qn(Ut.id,this.serializeUrl(Ut.extractedUrl),this.serializeUrl(Ut.urlAfterRedirects),Ut.targetSnapshot);this.triggerEvent(bn)}))}),Ul(He=>{const{targetSnapshot:Ut,id:bn,extractedUrl:vr,rawUrl:Vn,extras:{skipLocationChange:Wr,replaceUrl:Xr}}=He;return this.hooks.afterPreactivation(Ut,{navigationId:bn,appliedUrlTree:vr,rawUrlTree:Vn,skipLocationChange:!!Wr,replaceUrl:!!Xr})}),(0,_t.U)(He=>{const Ut=function An(M,S,D){const $=Xn(M,S._root,D?D._root:void 0);return new Si($,S)}(this.routeReuseStrategy,He.targetSnapshot,He.currentRouterState);return Object.assign(Object.assign({},He),{targetRouterState:Ut})}),(0,Gt.b)(He=>{this.currentUrlTree=He.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(He.urlAfterRedirects,He.rawUrl),this.routerState=He.targetRouterState,"deferred"===this.urlUpdateStrategy&&(He.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,He),this.browserUrlTree=He.urlAfterRedirects)}),((M,S,D)=>(0,_t.U)($=>(new Jr(S,$.targetRouterState,$.currentRouterState,D).activate(M),$)))(this.rootContexts,this.routeReuseStrategy,He=>this.triggerEvent(He)),(0,Gt.b)({next(){W=!0},complete(){W=!0}}),function Xe(M){return(0,De.e)((S,D)=>{try{S.subscribe(D)}finally{D.add(M)}})}(()=>{var He;W||le||this.cancelNavigationTransition(j,`Navigation ID ${j.id} is not equal to the current navigation id ${this.navigationId}`),(null===(He=this.currentNavigation)||void 0===He?void 0:He.id)===j.id&&(this.currentNavigation=null)}),(0,It.K)(He=>{if(le=!0,function Fn(M){return M&&M[bt]}(He)){const Ut=Hs(He.url);Ut||(this.navigated=!0,this.restoreHistory(j,!0));const bn=new mn(j.id,this.serializeUrl(j.extractedUrl),He.message);$.next(bn),Ut?setTimeout(()=>{const vr=this.urlHandlingStrategy.merge(He.url,this.rawUrlTree),Vn={skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jl(j.source)};this.scheduleNavigation(vr,"imperative",null,Vn,{resolve:j.resolve,reject:j.reject,promise:j.promise})},0):j.resolve(!1)}else{this.restoreHistory(j,!0);const Ut=new jn(j.id,this.serializeUrl(j.extractedUrl),He);$.next(Ut);try{j.resolve(this.errorHandler(He))}catch(bn){j.reject(bn)}}return Ke.E}))}))}resetRootComponentType(D){this.rootComponentType=D,this.routerState.root.component=this.rootComponentType}setTransition(D){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),D))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const $="popstate"===D.type?"popstate":"hashchange";"popstate"===$&&setTimeout(()=>{var j;const W={replaceUrl:!0},le=(null===(j=D.state)||void 0===j?void 0:j.navigationId)?D.state:null;if(le){const Ut=Object.assign({},le);delete Ut.navigationId,delete Ut.\u0275routerPageId,0!==Object.keys(Ut).length&&(W.state=Ut)}const He=this.parseUrl(D.url);this.scheduleNavigation(He,$,le,W)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(D){this.events.next(D)}resetConfig(D){Ji(D),this.config=D.map(_r),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,$={}){const{relativeTo:j,queryParams:W,fragment:le,queryParamsHandling:He,preserveFragment:Ut}=$,bn=j||this.routerState.root,vr=Ut?this.currentUrlTree.fragment:le;let Vn=null;switch(He){case"merge":Vn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),W);break;case"preserve":Vn=this.currentUrlTree.queryParams;break;default:Vn=W||null}return null!==Vn&&(Vn=this.removeEmptyProps(Vn)),function Ii(M,S,D,$,j){if(0===D.length)return Dt(S.root,S.root,S.root,$,j);const W=function pn(M){if("string"==typeof M[0]&&1===M.length&&"/"===M[0])return new Zt(!0,0,M);let S=0,D=!1;const $=M.reduce((j,W,le)=>{if("object"==typeof W&&null!=W){if(W.outlets){const He={};return Mt(W.outlets,(Ut,bn)=>{He[bn]="string"==typeof Ut?Ut.split("/"):Ut}),[...j,{outlets:He}]}if(W.segmentPath)return[...j,W.segmentPath]}return"string"!=typeof W?[...j,W]:0===le?(W.split("/").forEach((He,Ut)=>{0==Ut&&"."===He||(0==Ut&&""===He?D=!0:".."===He?S++:""!=He&&j.push(He))}),j):[...j,W]},[]);return new Zt(D,S,$)}(D);if(W.toRoot())return Dt(S.root,S.root,new Bn([],{}),$,j);const le=function bi(M,S,D){if(M.isAbsolute)return new cr(S.root,!0,0);if(-1===D.snapshot._lastPathIndex){const W=D.snapshot._urlSegment;return new cr(W,W===S.root,0)}const $=rt(M.commands[0])?0:1;return function Dr(M,S,D){let $=M,j=S,W=D;for(;W>j;){if(W-=j,$=$.parent,!$)throw new Error("Invalid number of '../'");j=$.segments.length}return new cr($,!1,j-W)}(D.snapshot._urlSegment,D.snapshot._lastPathIndex+$,M.numberOfDoubleDots)}(W,S,M),He=le.processChildren?Ai(le.segmentGroup,le.index,W.commands):js(le.segmentGroup,le.index,W.commands);return Dt(S.root,le.segmentGroup,He,$,j)}(bn,this.currentUrlTree,D,Vn,null!=vr?vr:null)}navigateByUrl(D,$={skipLocationChange:!1}){const j=Hs(D)?D:this.parseUrl(D),W=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(W,"imperative",null,$)}navigate(D,$={skipLocationChange:!1}){return function ns(M){for(let S=0;S<M.length;S++){const D=M[S];if(null==D)throw new Error(`The requested path contains ${D} segment at index ${S}`)}}(D),this.navigateByUrl(this.createUrlTree(D,$),$)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let $;try{$=this.urlSerializer.parse(D)}catch(j){$=this.malformedUriErrorHandler(j,this.urlSerializer,D)}return $}isActive(D,$){let j;if(j=!0===$?Object.assign({},Oa):!1===$?Object.assign({},Eo):$,Hs(D))return yn(this.currentUrlTree,D,j);const W=this.parseUrl(D);return yn(this.currentUrlTree,W,j)}removeEmptyProps(D){return Object.keys(D).reduce(($,j)=>{const W=D[j];return null!=W&&($[j]=W),$},{})}processNavigations(){this.navigations.subscribe(D=>{this.navigated=!0,this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId,this.events.next(new Dn(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,D.resolve(!0)},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}scheduleNavigation(D,$,j,W,le){var He,Ut;if(this.disposed)return Promise.resolve(!1);let bn,vr,Vn;le?(bn=le.resolve,vr=le.reject,Vn=le.promise):Vn=new Promise((Fs,qo)=>{bn=Fs,vr=qo});const Wr=++this.navigationId;let Xr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(j=this.location.getState()),Xr=j&&j.\u0275routerPageId?j.\u0275routerPageId:W.replaceUrl||W.skipLocationChange?null!==(He=this.browserPageId)&&void 0!==He?He:0:(null!==(Ut=this.browserPageId)&&void 0!==Ut?Ut:0)+1):Xr=0,this.setTransition({id:Wr,targetPageId:Xr,source:$,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:D,extras:W,resolve:bn,reject:vr,promise:Vn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Vn.catch(Fs=>Promise.reject(Fs))}setBrowserUrl(D,$){const j=this.urlSerializer.serialize(D),W=Object.assign(Object.assign({},$.extras.state),this.generateNgRouterState($.id,$.targetPageId));this.location.isCurrentPathEqualTo(j)||$.extras.replaceUrl?this.location.replaceState(j,"",W):this.location.go(j,"",W)}restoreHistory(D,$=!1){var j,W;if("computed"===this.canceledNavigationResolution){const le=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)||0===le?this.currentUrlTree===(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)&&0===le&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(le)}else"replace"===this.canceledNavigationResolution&&($&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(D,$){const j=new mn(D.id,this.serializeUrl(D.extractedUrl),$);this.triggerEvent(j),D.resolve(!1)}generateNgRouterState(D,$){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:$}:{navigationId:D}}}return M.\u0275fac=function(D){c.$Z()},M.\u0275prov=c.Yz7({token:M,factory:M.\u0275fac}),M})();function jl(M){return"imperative"!==M}let wo=(()=>{class M{constructor(D,$,j,W,le){this.router=D,this.route=$,this.tabIndexAttribute=j,this.renderer=W,this.el=le,this.commands=null,this.onChanges=new ee.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(D){if(null!=this.tabIndexAttribute)return;const $=this.renderer,j=this.el.nativeElement;null!==D?$.setAttribute(j,"tabindex",D):$.removeAttribute(j,"tabindex")}ngOnChanges(D){this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const D={skipLocationChange:ia(this.skipLocationChange),replaceUrl:ia(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,D),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ia(this.preserveFragment)})}}return M.\u0275fac=function(D){return new(D||M)(c.Y36(us),c.Y36(et),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},M.\u0275dir=c.lG2({type:M,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(D,$){1&D&&c.NdJ("click",function(){return $.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),M})();function ia(M){return""===M||!!M}class sa{}class nl{preload(S,D){return D().pipe((0,It.K)(()=>(0,nt.of)(null)))}}class go{preload(S,D){return(0,nt.of)(null)}}let Bc=(()=>{class M{constructor(D,$,j,W){this.router=D,this.injector=j,this.preloadingStrategy=W,this.loader=new ga(j,$,Ut=>D.triggerEvent(new On(Ut)),Ut=>D.triggerEvent(new Nn(Ut)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Qe.h)(D=>D instanceof Dn),(0,dt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const D=this.injector.get(c.h0i);return this.processRoutes(D,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,$){const j=[];for(const W of $)if(W.loadChildren&&!W.canLoad&&W._loadedConfig){const le=W._loadedConfig;j.push(this.processRoutes(le.module,le.routes))}else W.loadChildren&&!W.canLoad?j.push(this.preloadConfig(D,W)):W.children&&j.push(this.processRoutes(D,W.children));return(0,Se.D)(j).pipe((0,Nt.J)(),(0,_t.U)(W=>{}))}preloadConfig(D,$){return this.preloadingStrategy.preload($,()=>($._loadedConfig?(0,nt.of)($._loadedConfig):this.loader.load(D.injector,$)).pipe((0,at.z)(W=>($._loadedConfig=W,this.processRoutes(W.module,W.routes)))))}}return M.\u0275fac=function(D){return new(D||M)(c.LFG(us),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(sa))},M.\u0275prov=c.Yz7({token:M,factory:M.\u0275fac}),M})(),Iu=(()=>{class M{constructor(D,$,j={}){this.router=D,this.viewportScroller=$,this.options=j,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},j.scrollPositionRestoration=j.scrollPositionRestoration||"disabled",j.anchorScrolling=j.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Sn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof Dn&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.router.parseUrl(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Je&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,$){this.router.triggerEvent(new Je(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,$))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return M.\u0275fac=function(D){c.$Z()},M.\u0275prov=c.Yz7({token:M,factory:M.\u0275fac}),M})();const no=new c.OlP("ROUTER_CONFIGURATION"),Hl=new c.OlP("ROUTER_FORROOT_GUARD"),ro=[wt.Ye,{provide:Nr,useClass:pi},{provide:us,useFactory:function ya(M,S,D,$,j,W,le={},He,Ut){const bn=new us(null,M,S,D,$,j,we(W));return He&&(bn.urlHandlingStrategy=He),Ut&&(bn.routeReuseStrategy=Ut),function Ts(M,S){M.errorHandler&&(S.errorHandler=M.errorHandler),M.malformedUriErrorHandler&&(S.malformedUriErrorHandler=M.malformedUriErrorHandler),M.onSameUrlNavigation&&(S.onSameUrlNavigation=M.onSameUrlNavigation),M.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=M.paramsInheritanceStrategy),M.relativeLinkResolution&&(S.relativeLinkResolution=M.relativeLinkResolution),M.urlUpdateStrategy&&(S.urlUpdateStrategy=M.urlUpdateStrategy),M.canceledNavigationResolution&&(S.canceledNavigationResolution=M.canceledNavigationResolution)}(le,bn),le.enableTracing&&bn.events.subscribe(vr=>{var Vn,Wr;null===(Vn=console.group)||void 0===Vn||Vn.call(console,`Router Event: ${vr.constructor.name}`),console.log(vr.toString()),console.log(vr),null===(Wr=console.groupEnd)||void 0===Wr||Wr.call(console)}),bn},deps:[Nr,Xi,wt.Ye,c.zs3,c.Sil,wu,no,[class xd{},new c.FiY],[ts,new c.FiY]]},Xi,{provide:et,useFactory:function Ko(M){return M.routerState.root},deps:[us]},Bc,go,nl,{provide:no,useValue:{enableTracing:!1}}];function Fo(){return new c.PXZ("Router",us)}let bu=(()=>{class M{constructor(D,$){}static forRoot(D,$){return{ngModule:M,providers:[ro,rl(D),{provide:Hl,useFactory:Ci,deps:[[us,new c.FiY,new c.tp0]]},{provide:no,useValue:$||{}},{provide:wt.S$,useFactory:Cu,deps:[wt.lw,[new c.tBr(wt.mr),new c.FiY],no]},{provide:Iu,useFactory:Io,deps:[us,wt.EM,no]},{provide:sa,useExisting:$&&$.preloadingStrategy?$.preloadingStrategy:go},{provide:c.PXZ,multi:!0,useFactory:Fo},[bo,{provide:c.ip1,multi:!0,useFactory:Du,deps:[bo]},{provide:Qt,useFactory:Tu,deps:[bo]},{provide:c.tb,multi:!0,useExisting:Qt}]]}}static forChild(D){return{ngModule:M,providers:[rl(D)]}}}return M.\u0275fac=function(D){return new(D||M)(c.LFG(Hl,8),c.LFG(us,8))},M.\u0275mod=c.oAB({type:M}),M.\u0275inj=c.cJS({}),M})();function Io(M,S,D){return D.scrollOffset&&S.setOffset(D.scrollOffset),new Iu(M,S,D)}function Cu(M,S,D={}){return D.useHash?new wt.Do(M,S):new wt.b0(M,S)}function Ci(M){return"guarded"}function rl(M){return[{provide:c.deG,multi:!0,useValue:M},{provide:wu,multi:!0,useValue:M}]}let bo=(()=>{class M{constructor(D){this.injector=D,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ee.x}appInitializer(){return this.injector.get(wt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let $=null;const j=new Promise(He=>$=He),W=this.injector.get(us),le=this.injector.get(no);return"disabled"===le.initialNavigation?(W.setUpLocationChangeListener(),$(!0)):"enabled"===le.initialNavigation||"enabledBlocking"===le.initialNavigation?(W.hooks.afterPreactivation=()=>this.initNavigation?(0,nt.of)(null):(this.initNavigation=!0,$(!0),this.resultOfPreactivationDone),W.initialNavigation()):$(!0),j})}bootstrapListener(D){const $=this.injector.get(no),j=this.injector.get(Bc),W=this.injector.get(Iu),le=this.injector.get(us),He=this.injector.get(c.z2F);D===He.components[0]&&(("enabledNonBlocking"===$.initialNavigation||void 0===$.initialNavigation)&&le.initialNavigation(),j.setUpPreloading(),W.init(),le.resetRootComponentType(He.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return M.\u0275fac=function(D){return new(D||M)(c.LFG(c.zs3))},M.\u0275prov=c.Yz7({token:M,factory:M.\u0275fac}),M})();function Du(M){return M.appInitializer.bind(M)}function Tu(M){return M.bootstrapListener.bind(M)}const Qt=new c.OlP("Router Initializer")},3942:(Xt,ut,P)=>{"use strict";P.d(ut,{Z:()=>tt});var c=P(2090),J=P(4859),q=P(9681),Se=P(1877);class Ae{constructor(De,ke){this._delegate=De,this.firebase=ke,(0,q._addComponent)(De,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=De.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this._delegate.automaticDataCollectionEnabled=De}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(De=>{this._delegate.checkDestroyed(),De()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(De,ke=q._DEFAULT_ENTRY_NAME){var Ce;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(De);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ce=nt.getComponent())||void 0===Ce?void 0:Ce.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:ke})}_removeServiceInstance(De,ke=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(De).clearInstance(ke)}_addComponent(De){(0,q._addComponent)(this._delegate,De)}_addOrOverwriteComponent(De){(0,q._addOrOverwriteComponent)(this._delegate,De)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function ze(){const Le=function Re(Le){const De={},ke={__esModule:!0,initializeApp:function ot(Ke,ee={}){const Qe=q.initializeApp(Ke,ee);if((0,c.r3)(De,Qe.name))return De[Qe.name];const he=new Le(Qe,ke);return De[Qe.name]=he,he},app:nt,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function We(Ke){const ee=Ke.name,Qe=ee.replace("-compat","");if(q._registerComponent(Ke)&&"PUBLIC"===Ke.type){const he=(me=nt())=>{if("function"!=typeof me[Qe])throw be.create("invalid-app-argument",{appName:ee});return me[Qe]()};void 0!==Ke.serviceProps&&(0,c.ZB)(he,Ke.serviceProps),ke[Qe]=he,Le.prototype[Qe]=function(...me){return this._getService.bind(this,ee).apply(this,Ke.multipleInstances?me:[])}}return"PUBLIC"===Ke.type?ke[Qe]:null},removeApp:function Ce(Ke){delete De[Ke]},useAsService:function $e(Ke,ee){return"serverAuth"===ee?null:ee},modularAPIs:q}};function nt(Ke){if(!(0,c.r3)(De,Ke=Ke||q._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:Ke});return De[Ke]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function Ye(){return Object.keys(De).map(Ke=>De[Ke])}}),nt.App=Le,ke}(Ae);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ze,extendNamespace:function De(ke){(0,c.ZB)(Le,ke)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Le}(),ye=new Se.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){ye.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&ye.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const tt=pe;!function Ue(Le){(0,q.registerVersion)("@firebase/app-compat","0.1.26",Le)}()},9681:(Xt,ut,P)=>{"use strict";P.r(ut),P.d(ut,{FirebaseError:()=>Se.ZR,SDK_VERSION:()=>jn,_DEFAULT_ENTRY_NAME:()=>lt,_addComponent:()=>gt,_addOrOverwriteComponent:()=>at,_apps:()=>It,_clearComponents:()=>kn,_components:()=>dt,_getProvider:()=>Nt,_registerComponent:()=>Gt,_removeServiceInstance:()=>wt,deleteApp:()=>In,getApp:()=>lr,getApps:()=>Hn,initializeApp:()=>Yn,onLog:()=>Nn,registerVersion:()=>On,setLogLevel:()=>jr});var c=P(5861),J=P(4859),q=P(1877),Se=P(2090),Ae=P(8766);class Ee{constructor(mt){this.container=mt}getPlatformInfoString(){return this.container.getProviders().map(zt=>{if(function be(Fe){const mt=Fe.getComponent();return"VERSION"===(null==mt?void 0:mt.type)}(zt)){const rn=zt.getImmediate();return`${rn.library}/${rn.version}`}return null}).filter(zt=>zt).join(" ")}}const Re="@firebase/app",pe=new q.Yd("@firebase/app"),lt="[DEFAULT]",Ve={[Re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},It=new Map,dt=new Map;function gt(Fe,mt){try{Fe.container.addComponent(mt)}catch(zt){pe.debug(`Component ${mt.name} failed to register with FirebaseApp ${Fe.name}`,zt)}}function at(Fe,mt){Fe.container.addOrOverwriteComponent(mt)}function Gt(Fe){const mt=Fe.name;if(dt.has(mt))return pe.debug(`There were multiple attempts to register component ${mt}.`),!1;dt.set(mt,Fe);for(const zt of It.values())gt(zt,Fe);return!0}function Nt(Fe,mt){const zt=Fe.container.getProvider("heartbeat").getImmediate({optional:!0});return zt&&zt.triggerHeartbeat(),Fe.container.getProvider(mt)}function wt(Fe,mt,zt=lt){Nt(Fe,mt).clearInstance(zt)}function kn(){dt.clear()}const Dn=new Se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class mn{constructor(mt,zt,rn){this._isDeleted=!1,this._options=Object.assign({},mt),this._config=Object.assign({},zt),this._name=zt.name,this._automaticDataCollectionEnabled=zt.automaticDataCollectionEnabled,this._container=rn,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(mt){this.checkDestroyed(),this._automaticDataCollectionEnabled=mt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(mt){this._isDeleted=mt}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}const jn="9.8.2";function Yn(Fe,mt={}){"object"!=typeof mt&&(mt={name:mt});const zt=Object.assign({name:lt,automaticDataCollectionEnabled:!1},mt),rn=zt.name;if("string"!=typeof rn||!rn)throw Dn.create("bad-app-name",{appName:String(rn)});const yn=It.get(rn);if(yn){if((0,Se.vZ)(Fe,yn.options)&&(0,Se.vZ)(zt,yn.config))return yn;throw Dn.create("duplicate-app",{appName:rn})}const vn=new J.H0(rn);for(const En of dt.values())vn.addComponent(En);const wr=new mn(Fe,zt,vn);return It.set(rn,wr),wr}function lr(Fe=lt){const mt=It.get(Fe);if(!mt)throw Dn.create("no-app",{appName:Fe});return mt}function Hn(){return Array.from(It.values())}function In(Fe){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,c.Z)(function*(Fe){const mt=Fe.name;It.has(mt)&&(It.delete(mt),yield Promise.all(Fe.container.getProviders().map(zt=>zt.delete())),Fe.isDeleted=!0)})).apply(this,arguments)}function On(Fe,mt,zt){var rn;let yn=null!==(rn=Ve[Fe])&&void 0!==rn?rn:Fe;zt&&(yn+=`-${zt}`);const vn=yn.match(/\s|\//),wr=mt.match(/\s|\//);if(vn||wr){const En=[`Unable to register library "${yn}" with version "${mt}":`];return vn&&En.push(`library name "${yn}" contains illegal characters (whitespace or "/")`),vn&&wr&&En.push("and"),wr&&En.push(`version name "${mt}" contains illegal characters (whitespace or "/")`),void pe.warn(En.join(" "))}Gt(new J.wA(`${yn}-version`,()=>({library:yn,version:mt}),"VERSION"))}function Nn(Fe,mt){if(null!==Fe&&"function"!=typeof Fe)throw Dn.create("invalid-log-argument");(0,q.Am)(Fe,mt)}function jr(Fe){(0,q.Ub)(Fe)}const qe="firebase-heartbeat-store";let Je=null;function At(){return Je||(Je=(0,Ae.X3)("firebase-heartbeat-database",1,{upgrade:(Fe,mt)=>{0===mt&&Fe.createObjectStore(qe)}}).catch(Fe=>{throw Dn.create("storage-open",{originalErrorMessage:Fe.message})})),Je}function Kt(){return(Kt=(0,c.Z)(function*(Fe){try{return(yield At()).transaction(qe).objectStore(qe).get(Fn(Fe))}catch(mt){throw Dn.create("storage-get",{originalErrorMessage:mt.message})}})).apply(this,arguments)}function bt(Fe,mt){return Un.apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(Fe,mt){try{const rn=(yield At()).transaction(qe,"readwrite");return yield rn.objectStore(qe).put(mt,Fn(Fe)),rn.done}catch(zt){throw Dn.create("storage-set",{originalErrorMessage:zt.message})}})).apply(this,arguments)}function Fn(Fe){return`${Fe.name}!${Fe.options.appId}`}class fr{constructor(mt){this.container=mt,this._heartbeatsCache=null;const zt=this.container.getProvider("app").getImmediate();this._storage=new je(zt),this._heartbeatsCachePromise=this._storage.read().then(rn=>(this._heartbeatsCache=rn,rn))}triggerHeartbeat(){var mt=this;return(0,c.Z)(function*(){const rn=mt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yn=xr();if(null===mt._heartbeatsCache&&(mt._heartbeatsCache=yield mt._heartbeatsCachePromise),mt._heartbeatsCache.lastSentHeartbeatDate!==yn&&!mt._heartbeatsCache.heartbeats.some(vn=>vn.date===yn))return mt._heartbeatsCache.heartbeats.push({date:yn,agent:rn}),mt._heartbeatsCache.heartbeats=mt._heartbeatsCache.heartbeats.filter(vn=>{const wr=new Date(vn.date).valueOf();return Date.now()-wr<=2592e6}),mt._storage.overwrite(mt._heartbeatsCache)})()}getHeartbeatsHeader(){var mt=this;return(0,c.Z)(function*(){if(null===mt._heartbeatsCache&&(yield mt._heartbeatsCachePromise),null===mt._heartbeatsCache||0===mt._heartbeatsCache.heartbeats.length)return"";const zt=xr(),{heartbeatsToSend:rn,unsentEntries:yn}=function we(Fe,mt=1024){const zt=[];let rn=Fe.slice();for(const yn of Fe){const vn=zt.find(wr=>wr.agent===yn.agent);if(vn){if(vn.dates.push(yn.date),Ze(zt)>mt){vn.dates.pop();break}}else if(zt.push({agent:yn.agent,dates:[yn.date]}),Ze(zt)>mt){zt.pop();break}rn=rn.slice(1)}return{heartbeatsToSend:zt,unsentEntries:rn}}(mt._heartbeatsCache.heartbeats),vn=(0,Se.L)(JSON.stringify({version:2,heartbeats:rn}));return mt._heartbeatsCache.lastSentHeartbeatDate=zt,yn.length>0?(mt._heartbeatsCache.heartbeats=yn,yield mt._storage.overwrite(mt._heartbeatsCache)):(mt._heartbeatsCache.heartbeats=[],mt._storage.overwrite(mt._heartbeatsCache)),vn})()}}function xr(){return(new Date).toISOString().substring(0,10)}class je{constructor(mt){this.app=mt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,Se.hl)()&&(0,Se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var mt=this;return(0,c.Z)(function*(){return(yield mt._canUseIndexedDBPromise)&&(yield function Et(Fe){return Kt.apply(this,arguments)}(mt.app))||{heartbeats:[]}})()}overwrite(mt){var zt=this;return(0,c.Z)(function*(){var rn;if(yield zt._canUseIndexedDBPromise){const vn=yield zt.read();return bt(zt.app,{lastSentHeartbeatDate:null!==(rn=mt.lastSentHeartbeatDate)&&void 0!==rn?rn:vn.lastSentHeartbeatDate,heartbeats:mt.heartbeats})}})()}add(mt){var zt=this;return(0,c.Z)(function*(){var rn;if(yield zt._canUseIndexedDBPromise){const vn=yield zt.read();return bt(zt.app,{lastSentHeartbeatDate:null!==(rn=mt.lastSentHeartbeatDate)&&void 0!==rn?rn:vn.lastSentHeartbeatDate,heartbeats:[...vn.heartbeats,...mt.heartbeats]})}})()}}function Ze(Fe){return(0,Se.L)(JSON.stringify({version:2,heartbeats:Fe})).length}!function Mt(Fe){Gt(new J.wA("platform-logger",mt=>new Ee(mt),"PRIVATE")),Gt(new J.wA("heartbeat",mt=>new fr(mt),"PRIVATE")),On(Re,"0.7.25",Fe),On(Re,"0.7.25","esm2017"),On("fire-js","")}("")},4859:(Xt,ut,P)=>{"use strict";P.d(ut,{wA:()=>q,H0:()=>Re,zt:()=>Ae});var c=P(5861),J=P(2090);class q{constructor(pe,ye,Me){this.name=pe,this.instanceFactory=ye,this.type=Me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const Se="[DEFAULT]";class Ae{constructor(pe,ye){this.name=pe,this.container=ye,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const ye=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(ye)){const Me=new J.BH;if(this.instancesDeferred.set(ye,Me),this.isInitialized(ye)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:ye});Oe&&Me.resolve(Oe)}catch(Oe){}}return this.instancesDeferred.get(ye).promise}getImmediate(pe){var ye;const Me=this.normalizeInstanceIdentifier(null==pe?void 0:pe.identifier),Oe=null!==(ye=null==pe?void 0:pe.optional)&&void 0!==ye&&ye;if(!this.isInitialized(Me)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Me})}catch(Ue){if(Oe)return null;throw Ue}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function be(ze){return"EAGER"===ze.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:Se})}catch(ye){}for(const[ye,Me]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(ye);try{const Ue=this.getOrInitializeService({instanceIdentifier:Oe});Me.resolve(Ue)}catch(Ue){}}}}clearInstance(pe=Se){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,c.Z)(function*(){const ye=Array.from(pe.instances.values());yield Promise.all([...ye.filter(Me=>"INTERNAL"in Me).map(Me=>Me.INTERNAL.delete()),...ye.filter(Me=>"_delete"in Me).map(Me=>Me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=Se){return this.instances.has(pe)}getOptions(pe=Se){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:ye={}}=pe,Me=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Me))throw Error(`${this.name}(${Me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:Me,options:ye});for(const[Ue,tt]of this.instancesDeferred.entries())Me===this.normalizeInstanceIdentifier(Ue)&&tt.resolve(Oe);return Oe}onInit(pe,ye){var Me;const Oe=this.normalizeInstanceIdentifier(ye),Ue=null!==(Me=this.onInitCallbacks.get(Oe))&&void 0!==Me?Me:new Set;Ue.add(pe),this.onInitCallbacks.set(Oe,Ue);const tt=this.instances.get(Oe);return tt&&pe(tt,Oe),()=>{Ue.delete(pe)}}invokeOnInitCallbacks(pe,ye){const Me=this.onInitCallbacks.get(ye);if(Me)for(const Oe of Me)try{Oe(pe,ye)}catch(Ue){}}getOrInitializeService({instanceIdentifier:pe,options:ye={}}){let Me=this.instances.get(pe);if(!Me&&this.component&&(Me=this.component.instanceFactory(this.container,{instanceIdentifier:(ze=pe,ze===Se?void 0:ze),options:ye}),this.instances.set(pe,Me),this.instancesOptions.set(pe,ye),this.invokeOnInitCallbacks(Me,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Me)}catch(Oe){}var ze;return Me||null}normalizeInstanceIdentifier(pe=Se){return this.component?this.component.multipleInstances?pe:Se:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Re{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const ye=this.getProvider(pe.name);if(ye.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);ye.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const ye=new Ae(pe,this);return this.providers.set(pe,ye),ye}getProviders(){return Array.from(this.providers.values())}}},1877:(Xt,ut,P)=>{"use strict";P.d(ut,{in:()=>J,Yd:()=>be,Ub:()=>Re,Am:()=>ze});const c=[];var J=(()=>{return(pe=J||(J={}))[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",J;var pe})();const q={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},Se=J.INFO,Ae={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Ee=(pe,ye,...Me)=>{if(ye<pe.logLevel)return;const Oe=(new Date).toISOString(),Ue=Ae[ye];if(!Ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${ye})`);console[Ue](`[${Oe}]  ${pe.name}:`,...Me)};class be{constructor(ye){this.name=ye,this._logLevel=Se,this._logHandler=Ee,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(ye){if(!(ye in J))throw new TypeError(`Invalid value "${ye}" assigned to \`logLevel\``);this._logLevel=ye}setLogLevel(ye){this._logLevel="string"==typeof ye?q[ye]:ye}get logHandler(){return this._logHandler}set logHandler(ye){if("function"!=typeof ye)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ye}get userLogHandler(){return this._userLogHandler}set userLogHandler(ye){this._userLogHandler=ye}debug(...ye){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...ye),this._logHandler(this,J.DEBUG,...ye)}log(...ye){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...ye),this._logHandler(this,J.VERBOSE,...ye)}info(...ye){this._userLogHandler&&this._userLogHandler(this,J.INFO,...ye),this._logHandler(this,J.INFO,...ye)}warn(...ye){this._userLogHandler&&this._userLogHandler(this,J.WARN,...ye),this._logHandler(this,J.WARN,...ye)}error(...ye){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...ye),this._logHandler(this,J.ERROR,...ye)}}function Re(pe){c.forEach(ye=>{ye.setLogLevel(pe)})}function ze(pe,ye){for(const Me of c){let Oe=null;ye&&ye.level&&(Oe=q[ye.level]),Me.userLogHandler=null===pe?null:(Ue,tt,...Le)=>{const De=Le.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch(Ce){return null}}).filter(ke=>ke).join(" ");tt>=(null!=Oe?Oe:Ue.logLevel)&&pe({level:J[tt].toLowerCase(),message:De,args:Le,type:Ue.name})}}}},8766:(Xt,ut,P)=>{"use strict";P.d(ut,{Lj:()=>ot,X3:()=>nt});var c=P(5861);let q,Se;const be=new WeakMap,Re=new WeakMap,ze=new WeakMap,pe=new WeakMap,ye=new WeakMap;let Ue={get(ee,Qe,he){if(ee instanceof IDBTransaction){if("done"===Qe)return Re.get(ee);if("objectStoreNames"===Qe)return ee.objectStoreNames||ze.get(ee);if("store"===Qe)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return ke(ee[Qe])},set:(ee,Qe,he)=>(ee[Qe]=he,!0),has:(ee,Qe)=>ee instanceof IDBTransaction&&("done"===Qe||"store"===Qe)||Qe in ee};function De(ee){return"function"==typeof ee?function Le(ee){return ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ee)?function(...Qe){return ee.apply(Ce(this),Qe),ke(be.get(this))}:function(...Qe){return ke(ee.apply(Ce(this),Qe))}:function(Qe,...he){const me=ee.call(Ce(this),Qe,...he);return ze.set(me,Qe.sort?Qe.sort():[Qe]),ke(me)}}(ee):(ee instanceof IDBTransaction&&function Oe(ee){if(Re.has(ee))return;const Qe=new Promise((he,me)=>{const ge=()=>{ee.removeEventListener("complete",Ne),ee.removeEventListener("error",Xe),ee.removeEventListener("abort",Xe)},Ne=()=>{he(),ge()},Xe=()=>{me(ee.error||new DOMException("AbortError","AbortError")),ge()};ee.addEventListener("complete",Ne),ee.addEventListener("error",Xe),ee.addEventListener("abort",Xe)});Re.set(ee,Qe)}(ee),((ee,Qe)=>Qe.some(he=>ee instanceof he))(ee,function Ae(){return q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ee,Ue):ee)}function ke(ee){if(ee instanceof IDBRequest)return function Me(ee){const Qe=new Promise((he,me)=>{const ge=()=>{ee.removeEventListener("success",Ne),ee.removeEventListener("error",Xe)},Ne=()=>{he(ke(ee.result)),ge()},Xe=()=>{me(ee.error),ge()};ee.addEventListener("success",Ne),ee.addEventListener("error",Xe)});return Qe.then(he=>{he instanceof IDBCursor&&be.set(he,ee)}).catch(()=>{}),ye.set(Qe,ee),Qe}(ee);if(pe.has(ee))return pe.get(ee);const Qe=De(ee);return Qe!==ee&&(pe.set(ee,Qe),ye.set(Qe,ee)),Qe}const Ce=ee=>ye.get(ee);function nt(ee,Qe,{blocked:he,upgrade:me,blocking:ge,terminated:Ne}={}){const Xe=indexedDB.open(ee,Qe),_t=ke(Xe);return me&&Xe.addEventListener("upgradeneeded",xt=>{me(ke(Xe.result),xt.oldVersion,xt.newVersion,ke(Xe.transaction))}),he&&Xe.addEventListener("blocked",()=>he()),_t.then(xt=>{Ne&&xt.addEventListener("close",()=>Ne()),ge&&xt.addEventListener("versionchange",()=>ge())}).catch(()=>{}),_t}function ot(ee,{blocked:Qe}={}){const he=indexedDB.deleteDatabase(ee);return Qe&&he.addEventListener("blocked",()=>Qe()),ke(he).then(()=>{})}const Ye=["get","getKey","getAll","getAllKeys","count"],We=["put","add","delete","clear"],$e=new Map;function Ke(ee,Qe){if(!(ee instanceof IDBDatabase)||Qe in ee||"string"!=typeof Qe)return;if($e.get(Qe))return $e.get(Qe);const he=Qe.replace(/FromIndex$/,""),me=Qe!==he,ge=We.includes(he);if(!(he in(me?IDBIndex:IDBObjectStore).prototype)||!ge&&!Ye.includes(he))return;const Ne=function(){var Xe=(0,c.Z)(function*(_t,...xt){const ct=this.transaction(_t,ge?"readwrite":"readonly");let lt=ct.store;return me&&(lt=lt.index(xt.shift())),(yield Promise.all([lt[he](...xt),ge&&ct.done]))[0]});return function(xt){return Xe.apply(this,arguments)}}();return $e.set(Qe,Ne),Ne}!function tt(ee){Ue=ee(Ue)}(ee=>UE(VE({},ee),{get:(Qe,he,me)=>Ke(Qe,he)||ee.get(Qe,he,me),has:(Qe,he)=>!!Ke(Qe,he)||ee.has(Qe,he)}))},5861:(Xt,ut,P)=>{"use strict";function c(q,Se,Ae,Ee,be,Re,ze){try{var pe=q[Re](ze),ye=pe.value}catch(Me){return void Ae(Me)}pe.done?Se(ye):Promise.resolve(ye).then(Ee,be)}function J(q){return function(){var Se=this,Ae=arguments;return new Promise(function(Ee,be){var Re=q.apply(Se,Ae);function ze(ye){c(Re,Ee,be,ze,pe,"next",ye)}function pe(ye){c(Re,Ee,be,ze,pe,"throw",ye)}ze(void 0)})}}P.d(ut,{Z:()=>J})}},Xt=>{Xt(Xt.s=2024)}]);