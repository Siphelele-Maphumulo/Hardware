"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1240],{1240:(b,g,l)=>{l.r(g),l.d(g,{ProductsPageModule:()=>w});var a=l(9808),s=l(2382),r=l(8161),m=l(5852),t=l(5e3),p=l(1447),_=l(4206);function h(n,u){if(1&n){const o=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2,"Amount Range"),t.qZA(),t.TgZ(3,"ion-range",19),t.NdJ("ngModelChange",function(c){return t.CHM(o),t.oxw().amountRange=c})("ionChange",function(){return t.CHM(o),t.oxw().filterProducts()}),t.TgZ(4,"ion-label",20),t._uU(5),t.ALo(6,"currency"),t.qZA(),t.TgZ(7,"ion-label",21),t._uU(8),t.ALo(9,"currency"),t.qZA()(),t.TgZ(10,"ion-label"),t._uU(11),t.ALo(12,"currency"),t.ALo(13,"currency"),t.qZA()()}if(2&n){const o=t.oxw();t.xp6(3),t.Q6J("ngModel",o.amountRange)("min",o.minAmount)("max",o.maxAmount)("step",10),t.xp6(2),t.Oqu(t.gM2(6,8,o.minAmount,"ZAR","symbol","1.2-2")),t.xp6(3),t.Oqu(t.gM2(9,13,o.maxAmount,"ZAR","symbol","1.2-2")),t.xp6(3),t.AsE(" ",t.gM2(12,18,o.amountRange.lower,"ZAR","symbol","1.2-2")," - ",t.gM2(13,23,o.amountRange.upper,"ZAR","symbol","1.2-2")," ")}}function P(n,u){if(1&n&&t._UZ(0,"img",24),2&n){const o=t.oxw(2);t.Q6J("src",o.newProduct.image,t.LSH)}}function f(n,u){if(1&n&&(t.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title",22),t._uU(3),t.qZA()(),t.TgZ(4,"ion-card-content")(5,"p"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA(),t.YNc(10,P,1,1,"img",23),t.qZA()()),2&n){const o=t.oxw();t.xp6(3),t.hij(" ",o.newProduct.title," "),t.xp6(3),t.hij("Amount: ",t.gM2(7,4,o.newProduct.amount,"ZAR","symbol","1.2-2"),""),t.xp6(3),t.hij("Category ID: ",o.newProduct.catID,""),t.xp6(1),t.Q6J("ngIf",o.newProduct.image)}}function Z(n,u){if(1&n){const o=t.EpF();t.TgZ(0,"ion-button",25),t.NdJ("click",function(){return t.CHM(o),t.oxw().resetForm()}),t._uU(1," Cancel "),t.qZA()}}function C(n,u){if(1&n){const o=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label")(2,"h2",22),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.qZA()(),t._UZ(13,"img",26),t.TgZ(14,"ion-button",27),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw().updateProduct(i)}),t._uU(15," Edit "),t.qZA(),t.TgZ(16,"ion-button",28),t.NdJ("click",function(){const i=t.CHM(o).$implicit;return t.oxw().deleteProduct(i.id)}),t._uU(17," Delete "),t.qZA()()}if(2&n){const o=u.$implicit;t.xp6(3),t.Oqu(o.title),t.xp6(2),t.hij("ID: ",o.prodID,""),t.xp6(2),t.hij("Amount: ",t.gM2(8,6,o.amount,"ZAR","symbol","1.2-2"),""),t.xp6(3),t.hij("Category: ",o.catID,""),t.xp6(2),t.hij("Quantity: ",o.qty,""),t.xp6(1),t.Q6J("src",o.image,t.LSH)}}function T(n,u){1&n&&(t.TgZ(0,"ion-card")(1,"ion-card-content"),t._uU(2,"No products match your filters."),t.qZA()())}function A(n,u){1&n&&(t.TgZ(0,"ion-card")(1,"ion-card-content"),t._uU(2,"No products available."),t.qZA()())}const M=[{path:"",component:(()=>{class n{constructor(o,e){this.fireService=o,this.firestore=e,this.products=[],this.filteredProducts=[],this.newProduct={prodID:"",image:"",title:"",amount:0,catID:"",qty:0,item_total_amt:0},this.selectedProductId=null,this.searchTerm="",this.filterType="all",this.amountRange={lower:0,upper:1e3},this.minAmount=0,this.maxAmount=1e3}ngOnInit(){this.loadProducts()}loadProducts(){this.fireService.firestore.collection("products").valueChanges({idField:"id"}).subscribe(o=>{this.products=o,this.filteredProducts=[...this.products],this.calculateAmountRange()})}calculateAmountRange(){this.products.length>0&&(this.minAmount=Math.floor(Math.min(...this.products.map(o=>o.amount))),this.maxAmount=Math.ceil(Math.max(...this.products.map(o=>o.amount))),this.amountRange={lower:this.minAmount,upper:this.maxAmount})}filterProducts(){this.filteredProducts=this.products.filter(o=>{var e,c,i;const d=this.searchTerm.toLowerCase();return((null===(e=o.prodID)||void 0===e?void 0:e.toLowerCase().includes(d))||(null===(c=o.title)||void 0===c?void 0:c.toLowerCase().includes(d))||(null===(i=o.catID)||void 0===i?void 0:i.toLowerCase().includes(d)))&&o.amount>=this.amountRange.lower&&o.amount<=this.amountRange.upper})}generateProductId(){return Math.floor(9e9*Math.random()+1e9).toString()}addOrUpdateProduct(){this.newProduct.item_total_amt=this.newProduct.amount*this.newProduct.qty,this.selectedProductId?this.fireService.firestore.collection("products").doc(this.selectedProductId).update(this.newProduct).then(()=>{alert("Product updated successfully!"),this.resetForm(),this.loadProducts()}).catch(o=>{console.error("Error updating product:",o)}):(this.newProduct.prodID=this.generateProductId(),this.fireService.firestore.collection("products").add(this.newProduct).then(()=>{alert("Product added successfully!"),this.resetForm(),this.loadProducts()}).catch(o=>{console.error("Error adding product:",o)}))}deleteProduct(o){this.fireService.firestore.collection("products").doc(o).delete().then(()=>{alert("Product deleted"),this.loadProducts()}).catch(e=>{console.error("Error deleting product:",e)})}updateProduct(o){this.selectedProductId=o.id,this.newProduct=Object.assign({},o),this.content.scrollToTop(300)}resetForm(){this.selectedProductId=null,this.newProduct={prodID:"",image:"",title:"",amount:0,catID:"",qty:0,item_total_amt:0}}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(p.Q),t.Y36(_.ST))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-products"]],viewQuery:function(o,e){if(1&o&&t.Gf(r.W2,5),2&o){let c;t.iGM(c=t.CRH())&&(e.content=c.first)}},decls:56,vars:15,consts:[["color","shade"],["slot","start","color","shade",1,"menu_btn"],["defaultHref","/"],[2,"text-align","center"],["placeholder","Search products","debounce","300",3,"ngModel","ngModelChange","ionChange"],["interface","popover",3,"ngModel","ngModelChange","ionChange"],["value","all"],["value","prodID"],["value","title"],["value","catID"],["value","amount"],[4,"ngIf"],[2,"color","rgb(43, 41, 41)"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],["expand","full",3,"click"],["expand","full","color","medium",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["dualKnobs","true",3,"ngModel","min","max","step","ngModelChange","ionChange"],["slot","start"],["slot","end"],[1,"product-title"],["alt","Preview Image","style","max-width: 100px; height: auto",3,"src",4,"ngIf"],["alt","Preview Image",2,"max-width","100px","height","auto",3,"src"],["expand","full","color","medium",3,"click"],["alt","Product Image",2,"max-width","60px","height","auto","margin-left","10px",3,"src"],["slot","end","fill","clear",3,"click"],["slot","end","color","danger","fill","clear",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5,"Products"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"ion-toolbar")(8,"ion-searchbar",4),t.NdJ("ngModelChange",function(i){return e.searchTerm=i})("ionChange",function(){return e.filterProducts()}),t.qZA(),t.TgZ(9,"ion-item")(10,"ion-label"),t._uU(11,"Filter by:"),t.qZA(),t.TgZ(12,"ion-select",5),t.NdJ("ngModelChange",function(i){return e.filterType=i})("ionChange",function(){return e.filterProducts()}),t.TgZ(13,"ion-select-option",6),t._uU(14,"All Fields"),t.qZA(),t.TgZ(15,"ion-select-option",7),t._uU(16,"Product ID"),t.qZA(),t.TgZ(17,"ion-select-option",8),t._uU(18,"Title"),t.qZA(),t.TgZ(19,"ion-select-option",9),t._uU(20,"Category"),t.qZA(),t.TgZ(21,"ion-select-option",10),t._uU(22,"Amount"),t.qZA()()(),t.YNc(23,h,14,28,"ion-item",11),t.qZA(),t.YNc(24,f,11,9,"ion-card",11),t.TgZ(25,"ion-item",12)(26,"ion-label",13),t._uU(27,"Product ID"),t.qZA(),t.TgZ(28,"ion-input",14),t.NdJ("ngModelChange",function(i){return e.newProduct.prodID=i}),t.qZA()(),t.TgZ(29,"ion-item",12)(30,"ion-label",13),t._uU(31,"Title"),t.qZA(),t.TgZ(32,"ion-input",14),t.NdJ("ngModelChange",function(i){return e.newProduct.title=i}),t.qZA()(),t.TgZ(33,"ion-item",12)(34,"ion-label",13),t._uU(35,"Amount"),t.qZA(),t.TgZ(36,"ion-input",15),t.NdJ("ngModelChange",function(i){return e.newProduct.amount=i}),t.qZA()(),t.TgZ(37,"ion-item",12)(38,"ion-label",13),t._uU(39,"Category ID"),t.qZA(),t.TgZ(40,"ion-input",14),t.NdJ("ngModelChange",function(i){return e.newProduct.catID=i}),t.qZA()(),t.TgZ(41,"ion-item",12)(42,"ion-label",13),t._uU(43,"Quantity"),t.qZA(),t.TgZ(44,"ion-input",15),t.NdJ("ngModelChange",function(i){return e.newProduct.qty=i}),t.qZA()(),t.TgZ(45,"ion-item",12)(46,"ion-label",13),t._uU(47,"Image URL"),t.qZA(),t.TgZ(48,"ion-input",14),t.NdJ("ngModelChange",function(i){return e.newProduct.image=i}),t.qZA()(),t.TgZ(49,"ion-button",16),t.NdJ("click",function(){return e.addOrUpdateProduct()}),t._uU(50),t.qZA(),t.YNc(51,Z,2,0,"ion-button",17),t.TgZ(52,"ion-list"),t.YNc(53,C,18,11,"ion-item",18),t.qZA(),t.YNc(54,T,3,0,"ion-card",11),t.YNc(55,A,3,0,"ion-card",11),t.qZA()),2&o&&(t.xp6(8),t.Q6J("ngModel",e.searchTerm),t.xp6(4),t.Q6J("ngModel",e.filterType),t.xp6(11),t.Q6J("ngIf","amount"===e.filterType),t.xp6(1),t.Q6J("ngIf",e.newProduct.title||e.newProduct.image),t.xp6(4),t.Q6J("ngModel",e.newProduct.prodID),t.xp6(4),t.Q6J("ngModel",e.newProduct.title),t.xp6(4),t.Q6J("ngModel",e.newProduct.amount),t.xp6(4),t.Q6J("ngModel",e.newProduct.catID),t.xp6(4),t.Q6J("ngModel",e.newProduct.qty),t.xp6(4),t.Q6J("ngModel",e.newProduct.image),t.xp6(2),t.hij(" ",e.selectedProductId?"Update Product":"Add Product"," "),t.xp6(1),t.Q6J("ngIf",e.selectedProductId),t.xp6(2),t.Q6J("ngForOf",e.filteredProducts),t.xp6(1),t.Q6J("ngIf",0===e.filteredProducts.length&&e.products.length>0),t.xp6(1),t.Q6J("ngIf",0===e.products.length))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,r.VI,r.j9,s.JJ,s.On,r.Ie,r.Q$,r.t9,r.QI,r.n0,a.O5,r.I_,r.PM,r.Zi,r.Dq,r.FN,r.pK,r.as,r.YG,r.q_,a.sg],pipes:[a.H9],styles:[".product-title[_ngcontent-%COMP%] {\n    color: black;\n    font-weight: bold;\n  }"]}),n})()}];let x=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(M)],m.Bz]}),n})(),w=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,s.u5,r.Pc,x]]}),n})()}}]);