{"version":3,"file":"src_app_products_products_module_ts.js","mappings":"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","sources":["./src/app/products/products-routing.module.ts","./src/app/products/products.module.ts","./src/app/products/products.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ProductsComponent } from './products.page'; // Update to ProductsComponent\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProductsComponent, // Use ProductsComponent here\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProductsPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProductsPageRoutingModule } from './products-routing.module';\r\nimport { ProductsComponent } from './products.page'; // Update to ProductsComponent\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, ProductsPageRoutingModule],\r\n  declarations: [ProductsComponent], // Update to ProductsComponent\r\n})\r\nexport class ProductsPageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Product } from './product.model';\r\nimport { FireserviceService } from '../fireservice.service';\r\nimport { IonContent } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  templateUrl: './products.page.html',\r\n})\r\nexport class ProductsComponent implements OnInit {\r\n  @ViewChild(IonContent, { static: false }) content!: IonContent;\r\n  products: Product[] = [];\r\n  newProduct: Product = {\r\n    prodID: '',\r\n    image: '',\r\n    title: '',\r\n    amount: 0,\r\n    catID: '',\r\n    qty: 0,\r\n    item_total_amt: 0,\r\n  };\r\n\r\n  selectedProductId: string | null = null; // used to track if we're updating\r\n\r\n  constructor(private fireService: FireserviceService) {}\r\n\r\n  ngOnInit() {\r\n    this.loadProducts();\r\n  }\r\n\r\n  loadProducts() {\r\n    this.fireService.firestore\r\n      .collection<Product>('products')\r\n      .valueChanges({ idField: 'id' })\r\n      .subscribe((data) => {\r\n        this.products = data;\r\n      });\r\n  }\r\n\r\n  // Function to generate a 10-digit product ID\r\n  generateProductId(): string {\r\n    return Math.floor(Math.random() * 9000000000 + 1000000000).toString();\r\n  }\r\n\r\n  addOrUpdateProduct() {\r\n    // Calculate total amount\r\n    this.newProduct.item_total_amt =\r\n      this.newProduct.amount * this.newProduct.qty;\r\n\r\n    if (this.selectedProductId) {\r\n      // Update existing product\r\n      this.fireService.firestore\r\n        .collection('products')\r\n        .doc(this.selectedProductId) // Access the document by ID\r\n        .update(this.newProduct)\r\n        .then(() => {\r\n          alert('Product updated successfully!');\r\n          this.resetForm();\r\n          this.loadProducts();\r\n        })\r\n        .catch((err) => {\r\n          console.error('Error updating product:', err);\r\n        });\r\n    } else {\r\n      // Add new product with generated product ID\r\n      this.newProduct.prodID = this.generateProductId(); // Generate a 10-digit product ID\r\n\r\n      // Set the new product in Firestore\r\n      this.fireService.firestore\r\n        .collection('products')\r\n        .add(this.newProduct)\r\n        .then(() => {\r\n          alert('Product added successfully!');\r\n          this.resetForm();\r\n          this.loadProducts();\r\n        })\r\n        .catch((err) => {\r\n          console.error('Error adding product:', err);\r\n        });\r\n    }\r\n  }\r\n\r\n  deleteProduct(docId: string) {\r\n    this.fireService.firestore\r\n      .collection('products')\r\n      .doc(docId)\r\n      .delete()\r\n      .then(() => {\r\n        alert('Product deleted');\r\n        this.loadProducts();\r\n      })\r\n      .catch((err) => {\r\n        console.error('Error deleting product:', err);\r\n      });\r\n  }\r\n  updateProduct(product: Product) {\r\n    // 1) Load the product into the form\r\n    this.selectedProductId = product.id;\r\n    this.newProduct = { ...product };\r\n\r\n    // 2) Scroll up to the top of the ion-content\r\n    this.content.scrollToTop(300); // 300ms animation\r\n  }\r\n\r\n  resetForm() {\r\n    this.selectedProductId = null;\r\n    this.newProduct = {\r\n      prodID: '',\r\n      image: '',\r\n      title: '',\r\n      amount: 0,\r\n      catID: '',\r\n      qty: 0,\r\n      item_total_amt: 0,\r\n    };\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}