"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5213],{5213:(b,_,r)=>{r.r(_),r.d(_,{CartPageModule:()=>O});var g=r(9808),d=r(4182),c=r(4433),u=r(8599),m=r(655),p=r(9839),t=r(5e3),C=r(1447);function x(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"div",10),t._UZ(1,"ion-icon",11),t.TgZ(2,"p"),t._uU(3,"Your cart is empty."),t.qZA(),t.TgZ(4,"ion-button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().browseProducts()}),t._uU(5," Browse Products "),t.qZA()()}}function h(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"ion-card",17)(1,"ion-card-content")(2,"div",18)(3,"ion-thumbnail",19),t.NdJ("click",function(){const i=t.CHM(n).$implicit;return t.oxw(2).openImage(i.image)}),t._UZ(4,"img",20),t.qZA(),t.TgZ(5,"div",21)(6,"h2"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"ion-button",22),t.NdJ("click",function(){const i=t.CHM(n).$implicit;return t.oxw(2).writeReview(i)}),t._UZ(15,"ion-icon",23),t._uU(16," Write Review "),t.qZA()()(),t.TgZ(17,"div",24)(18,"ion-button",25),t.NdJ("click",function(){const i=t.CHM(n).index;return t.oxw(2).decreaseQuantity(i)}),t._UZ(19,"ion-icon",26),t.qZA(),t.TgZ(20,"span",27),t._uU(21),t.qZA(),t.TgZ(22,"ion-button",25),t.NdJ("click",function(){const i=t.CHM(n).index;return t.oxw(2).increaseQuantity(i)}),t._UZ(23,"ion-icon",28),t.qZA(),t.TgZ(24,"ion-button",29),t.NdJ("click",function(){const i=t.CHM(n).index;return t.oxw(2).removeItem(i)}),t._UZ(25,"ion-icon",30),t.qZA()()()()}if(2&e){const n=a.$implicit;t.xp6(4),t.Q6J("src",n.image,t.LSH)("alt",n.name),t.xp6(3),t.Oqu(n.name),t.xp6(2),t.hij("Unit Price: $",t.xi3(10,6,n.price,"1.2-2"),""),t.xp6(3),t.hij(" Subtotal: $",t.xi3(13,9,n.price*n.quantity,"1.2-2")," "),t.xp6(9),t.Oqu(n.quantity)}}function P(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"ion-list"),t.YNc(2,h,26,12,"ion-card",13),t.qZA(),t.TgZ(3,"div",14)(4,"div",15)(5,"p")(6,"strong"),t._uU(7,"Total Items:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Total Price:"),t.qZA(),t._uU(12),t.ALo(13,"number"),t.qZA()(),t.TgZ(14,"ion-button",16),t.NdJ("click",function(){return t.CHM(n),t.oxw().checkout()}),t._uU(15," Proceed to Checkout "),t.qZA()(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.cartItems),t.xp6(6),t.hij(" ",n.totalItems,""),t.xp6(4),t.hij(" $",t.xi3(13,3,n.totalAmount,"1.2-2")," ")}}const f=[{path:"",component:(()=>{class e{constructor(n,o,s,i,l){this.fireService=n,this.location=o,this.router=s,this.loadingController=i,this.modalCtrl=l,this.cartItems=[],this.totalItems=0,this.totalAmount=0}ngOnInit(){this.fireService.getCartObservable().subscribe(n=>{this.cartItems=n,this.recalculateTotals()})}increaseQuantity(n){this.fireService.incCartItem(this.cartItems[n]),this.recalculateTotals()}decreaseQuantity(n){this.fireService.decCartItem(this.cartItems[n]),this.recalculateTotals()}removeItem(n){this.fireService.removeCartItem(this.cartItems[n]),this.recalculateTotals()}recalculateTotals(){this.totalItems=this.cartItems.reduce((n,o)=>n+o.quantity,0),this.totalAmount=this.cartItems.reduce((n,o)=>n+o.quantity*o.price,0)}checkout(){this.router.navigate(["/checkout"],{state:{totalAmount:this.totalAmount,cartItems:this.cartItems}})}goBack(){this.location.back()}writeReview(n){console.log("Navigating to reviews page with product:",n),this.router.navigate(["/reviews"],{state:{product:{prodID:n.id,title:n.name,price:n.price,image:n.image||"assets/default-product.png"}}})}openImage(n){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.modalCtrl.create({component:p.t,componentProps:{imageSrc:n},cssClass:"image-preview-modal"})).present()})}browseProducts(){this.router.navigate(["/order"])}viewPastPurchases(){this.router.navigate(["/orders"])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(C.Q),t.Y36(g.Ye),t.Y36(u.F0),t.Y36(c.HT),t.Y36(c.IN))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cart"]],decls:12,vars:2,consts:[["color","shade"],["slot","start"],["defaultHref","/"],[2,"text-align","center"],["slot","end"],[3,"click"],["name","time-outline"],[1,"ion-padding"],["class","empty-cart",4,"ngIf"],[4,"ngIf"],[1,"empty-cart"],["name","cart-outline","size","large"],["fill","outline",3,"click"],["class","cart-card",4,"ngFor","ngForOf"],[1,"checkout-section"],[1,"total-summary"],["color","dark","expand","full",3,"click"],[1,"cart-card"],[1,"item-top"],["slot","start",3,"click"],[3,"src","alt"],[1,"details"],["fill","clear","size","small",1,"review-btn",2,"background-color","rgba(250, 250, 138, 0.288)",3,"click"],["name","star-outline","slot","start"],[1,"controls"],["fill","outline","size","small",3,"click"],["slot","icon-only","name","remove-outline"],[1,"qty"],["slot","icon-only","name","add-outline"],["fill","clear","color","danger","size","small",3,"click"],["slot","icon-only","name","trash-outline"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5,"Shopping Cart"),t.qZA(),t.TgZ(6,"ion-buttons",4)(7,"ion-button",5),t.NdJ("click",function(){return o.viewPastPurchases()}),t._UZ(8,"ion-icon",6),t.qZA()()()(),t.TgZ(9,"ion-content",7),t.YNc(10,x,6,0,"div",8),t.YNc(11,P,16,6,"ng-container",9),t.qZA()),2&n&&(t.xp6(10),t.Q6J("ngIf",0===o.cartItems.length),t.xp6(1),t.Q6J("ngIf",o.cartItems.length>0))},directives:[c.Gu,c.sr,c.Sm,c.oU,c.cs,c.wd,c.YG,c.gu,c.W2,g.O5,c.q_,g.sg,c.PM,c.FN,c.Bs],pipes:[g.JJ],styles:["[_nghost-%COMP%]{--ion-background-color: #f5f5f5}.empty-cart[_ngcontent-%COMP%]{text-align:center;color:#777;margin-top:50%}.empty-cart[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px;color:#ccc;margin-bottom:12px}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:0}.cart-card[_ngcontent-%COMP%]{margin-bottom:12px;background:#fff;border-radius:8px;box-shadow:0 2px 6px #00000014}.cart-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:12px}.cart-card[_ngcontent-%COMP%]   .item-top[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.cart-card[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:6px;margin-right:12px;overflow:hidden}.cart-card[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}.cart-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;color:#333;line-height:1.2}.cart-card[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0;font-size:14px;color:#555}.cart-card[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start;justify-content:flex-start;gap:8px;margin-top:12px}.cart-card[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%]{min-width:24px;text-align:center;font-weight:500;color:#333}.cart-card[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding: 0;--min-width: 32px;--min-height: 32px}.checkout-section[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;background:#fff;padding:16px;box-shadow:0 -2px 10px #0000001a;z-index:1000}.checkout-section[_ngcontent-%COMP%]   .total-summary[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px;margin-bottom:16px;box-shadow:0 2px 6px #00000014}.checkout-section[_ngcontent-%COMP%]   .total-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:16px;color:#333}.checkout-section[_ngcontent-%COMP%]   .total-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000}.checkout-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}.checkout-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:16px;--padding-top: 10px;--padding-bottom: 10px}.review-btn[_ngcontent-%COMP%]{--padding-start: 0;margin-top:8px}"]}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(f)],u.Bz]}),e})(),O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,d.u5,c.Pc,M]]}),e})()}}]);