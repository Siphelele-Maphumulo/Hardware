{"version":3,"file":"src_app_pages_popup_order_order_module_ts.js","mappings":"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","sources":["./src/app/pages/popup/order/order-routing.module.ts","./src/app/pages/popup/order/order.module.ts","./src/app/pages/popup/order/order.page.ts","./src/app/pages/popup/order/order.page.html","./src/app/services/cart.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { OrderPage } from './order.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OrderPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OrderPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { OrderPageRoutingModule } from './order-routing.module';\r\n\r\nimport { OrderPage } from './order.page';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, OrderPageRoutingModule],\r\n  declarations: [OrderPage],\r\n})\r\nexport class OrderPageModule {}\r\n","import { Component, OnInit, ChangeDetectorRef, OnDestroy } from '@angular/core';\r\nimport {\r\n  LoadingController,\r\n  ModalController,\r\n  AlertController,\r\n} from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { Subscription, Observable } from 'rxjs';\r\n\r\nimport { FireserviceService } from 'src/app/fireservice.service';\r\nimport { CartService } from 'src/app/services/cart.service';\r\n\r\n@Component({\r\n  selector: 'app-order',\r\n  templateUrl: './order.page.html',\r\n  styleUrls: ['./order.page.scss'],\r\n})\r\nexport class OrderPage implements OnInit, OnDestroy {\r\n  amount = 0;\r\n  orders: any[] = [];\r\n  total_amt = 0;\r\n  totalItems = 0;\r\n  notifications = 0;\r\n  orderSummary: Array<{ name: string; quantity: number; price: number }> = [];\r\n\r\n  private cartSub!: Subscription;\r\n\r\n  constructor(\r\n    private loadingController: LoadingController,\r\n    private modalCtrl: ModalController,\r\n    private alertCtrl: AlertController,\r\n    private cdr: ChangeDetectorRef,\r\n    private router: Router,\r\n    private fireService: FireserviceService,\r\n    private cartService: CartService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    // 1) empty out any persisted cart\r\n    this.cartService.clearCart();\r\n    this.total_amt = 0;\r\n    this.totalItems = 0;\r\n    this.orderSummary = [];\r\n\r\n    // 2) now load your products\r\n    this.presentLoading().then(() => {\r\n      this.fireService.getProducts().subscribe((data) => {\r\n        this.orders = data.map((item) => ({\r\n          ...item,\r\n          qty: 0,\r\n          qtyLeft: item.qtyLeft ?? item.stock ?? item.qty,\r\n        }));\r\n        this.loadingController.dismiss();\r\n        // no more immediate updateCartDetails() here\r\n        this.cdr.detectChanges();\r\n      });\r\n    });\r\n\r\n    // 3) still listen for real cart changes later\r\n    this.cartSub = this.cartService.getCartObservable().subscribe(() => {\r\n      this.totalItems = this.cartService.getTotalItems();\r\n      this.total_amt = this.cartService.getTotal();\r\n      this.updateOrderSummary();\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.cartSub?.unsubscribe();\r\n  }\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      message: 'Please wait...',\r\n    });\r\n    await loading.present();\r\n  }\r\n\r\n  goToCart() {\r\n    this.router.navigate(['/cart']);\r\n  }\r\n\r\n  updateCartDetails() {\r\n    const cart = this.cartService.getCart();\r\n\r\n    if (cart.length === 0) {\r\n      // stay at zero until someone adds\r\n      this.total_amt = 0;\r\n      this.totalItems = 0;\r\n      this.orderSummary = [];\r\n      return;\r\n    }\r\n\r\n    // otherwise, do the normal thing\r\n    this.total_amt = this.cartService.getTotal();\r\n    this.totalItems = this.cartService.getTotalItems();\r\n    this.updateOrderSummary();\r\n  }\r\n\r\n  add(index: number) {\r\n    const order = this.orders[index];\r\n    if (order && order.qtyLeft > 0) {\r\n      order.qty++;\r\n      order.qtyLeft--;\r\n\r\n      this.fireService.addToCart({\r\n        id: Number(order.prodID),\r\n        name: order.title,\r\n        price: order.amount,\r\n        quantity: 1,\r\n        image: order.image, // ✅ Include image\r\n      });\r\n\r\n      this.updateOrderSummary();\r\n    }\r\n  }\r\n\r\n  remove(index: number) {\r\n    const order = this.orders[index];\r\n    if (order && order.qty > 0) {\r\n      order.qty--;\r\n      order.qtyLeft++;\r\n\r\n      this.fireService.decreaseCartItemQuantity({\r\n        id: Number(order.prodID),\r\n        name: order.title,\r\n        price: order.amount,\r\n        quantity: 1,\r\n        image: order.image,\r\n      });\r\n\r\n      this.updateOrderSummary();\r\n    }\r\n  }\r\n\r\n  updateOrderSummary() {\r\n    const rawCart = this.fireService.getRawCart();\r\n    this.orderSummary = rawCart.map((item) => ({\r\n      name: item.name,\r\n      quantity: item.quantity,\r\n      price: item.price,\r\n    }));\r\n    this.total_amt = this.fireService.getTotalPrice();\r\n    this.totalItems = this.fireService.getTotalItems();\r\n  }\r\n\r\n  deleteItem(prodID: number) {\r\n    this.orders = this.orders.filter((item) => Number(item.prodID) !== prodID);\r\n    this.updateCartDetails();\r\n  }\r\n\r\n  async checkout() {\r\n    const alert = await this.alertCtrl.create({\r\n      header: 'Thanks for your Order!',\r\n      message: 'Siyeshe Holdings will deliver your Orders as soon as possible',\r\n      buttons: ['OK'],\r\n    });\r\n\r\n    await alert.present();\r\n    this.modalCtrl.dismiss().catch(() => console.warn('No modal to dismiss'));\r\n    this.cartService.clearCart();\r\n  }\r\n\r\n  goBack() {\r\n    this.router.navigate(['/home']);\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar color=\"shade\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"search-chef\" color=\"dark\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title style=\"text-align: center\">Make Orders</ion-title>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button fill=\"clear\">\r\n        <ion-icon name=\"notifications-outline\"></ion-icon>\r\n        <ion-badge color=\"primary\">{{ notifications }}</ion-badge>\r\n      </ion-button>\r\n      <ion-avatar>\r\n        <img src=\"../../../assets/img/Profile.png\" />\r\n      </ion-avatar>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<!-- Floating Cart Button -->\r\n<ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\r\n  <ion-fab-button (click)=\"goToCart()\" [disabled]=\"totalItems === 0\">\r\n    <ion-icon name=\"cart-outline\"></ion-icon>\r\n    <ion-badge color=\"success\">{{ totalItems }}</ion-badge>\r\n  </ion-fab-button>\r\n</ion-fab>\r\n\r\n<ion-content class=\"ion-padding\">\r\n  <ion-list *ngIf=\"orders.length > 0; else noOrders\">\r\n    <ion-card *ngFor=\"let order of orders; let i = index\" class=\"order-card\">\r\n      <ion-item lines=\"none\">\r\n        <ion-thumbnail slot=\"start\">\r\n          <img [src]=\"order.image\" alt=\"{{ order.title }}\" />\r\n        </ion-thumbnail>\r\n        <ion-label class=\"order-info\">\r\n          <h2>{{ order.title }}</h2>\r\n          <p class=\"order-id\">ID: {{ order.prodID }}</p>\r\n          <p class=\"order-amount\">R{{ order.amount | number:'1.2-2' }}</p>\r\n          <p\r\n            class=\"order-status\"\r\n            [ngClass]=\"order.status === 'CONFIRMED' ? 'confirmed' : 'pending'\"\r\n          >\r\n            {{ order.status }}\r\n          </p>\r\n        </ion-label>\r\n      </ion-item>\r\n      <ion-card-content>\r\n        <div class=\"edit-controls\">\r\n          <ion-button fill=\"outline\" size=\"small\" (click)=\"remove(i)\">\r\n            <ion-icon slot=\"icon-only\" name=\"remove-outline\"></ion-icon>\r\n          </ion-button>\r\n          <span class=\"qty\">{{ order.qty }}</span>\r\n          <ion-button fill=\"outline\" size=\"small\" (click)=\"add(i)\">\r\n            <ion-icon slot=\"icon-only\" name=\"add-outline\"></ion-icon>\r\n          </ion-button>\r\n          <ion-button\r\n            fill=\"clear\"\r\n            color=\"danger\"\r\n            size=\"small\"\r\n            (click)=\"deleteItem(order.prodID)\"\r\n          >\r\n            <ion-icon slot=\"icon-only\" name=\"eye-off\"></ion-icon>\r\n          </ion-button>\r\n        </div>\r\n        <p class=\"item-info\">\r\n          Price: R{{ order.amount | number:'1.2-2' }} &bull; Left: {{\r\n          order.qtyLeft }}\r\n        </p>\r\n      </ion-card-content>\r\n    </ion-card>\r\n  </ion-list>\r\n\r\n  <ng-template #noOrders>\r\n    <div class=\"empty-state\">\r\n      <ion-icon name=\"cart-outline\" size=\"large\"></ion-icon>\r\n      <p>No orders to display.</p>\r\n    </div>\r\n  </ng-template>\r\n\r\n  <p class=\"more-items\">No more items</p>\r\n</ion-content>\r\n\r\n<ion-footer>\r\n  <!-- Scrollable summary container -->\r\n  <div class=\"summary-wrapper\">\r\n    <!-- If there are items in the summary, show them -->\r\n    <div class=\"order_summary\" *ngIf=\"orderSummary.length > 0; else noItems\">\r\n      <h3>Order Summary</h3>\r\n      <div class=\"items-list\">\r\n        <div *ngFor=\"let item of orderSummary\" class=\"order-item\">\r\n          {{ item.name }} — Qty: {{ item.quantity }} — R{{ (item.price *\r\n          item.quantity) | number:'1.2-2' }}\r\n        </div>\r\n      </div>\r\n      <div class=\"summary-line\">\r\n        <span>Sub Total:</span>\r\n        <span>R{{ total_amt | number:'1.2-2' }}</span>\r\n      </div>\r\n      <div class=\"summary-line\">\r\n        <span>VAT Included:</span>\r\n        <span>R{{ (total_amt * 15/115) | number:'1.2-2' }}</span>\r\n      </div>\r\n      <div class=\"summary-line\">\r\n        <span>Delivery:</span>\r\n        <span>Free</span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Fallback when there are no items -->\r\n    <ng-template #noItems>\r\n      <div class=\"order_summary empty\">\r\n        <h3>Order Summary</h3>\r\n        <p>No items selected.</p>\r\n      </div>\r\n    </ng-template>\r\n  </div>\r\n\r\n  <!-- Always-visible checkout toolbar -->\r\n  <ion-toolbar color=\"dark\" class=\"checkout-toolbar\">\r\n    <ion-row class=\"ion-align-items-center\">\r\n      <ion-col size=\"7\">\r\n        <ion-text color=\"light\">\r\n          <h4>Total: R{{ total_amt | number:'1.2-2' }}</h4>\r\n        </ion-text>\r\n      </ion-col>\r\n      <ion-col size=\"5\" class=\"ion-text-right\">\r\n        <ion-button\r\n          fill=\"clear\"\r\n          size=\"small\"\r\n          [disabled]=\"total_amt === 0\"\r\n          (click)=\"goToCart()\"\r\n          style=\"\r\n            color: rgb(255, 255, 255);\r\n            padding-right: 30%;\r\n            font-weight: bolder;\r\n          \"\r\n        >\r\n          cart\r\n          <ion-icon slot=\"end\" name=\"arrow-forward-outline\"></ion-icon>\r\n        </ion-button>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-toolbar>\r\n</ion-footer>\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nexport interface CartItem {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  quantity: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CartService {\r\n  private cart: CartItem[] = [];\r\n  private cartObservable = new BehaviorSubject<CartItem[]>([]);\r\n\r\n  constructor() {\r\n    this.loadCart();\r\n  }\r\n\r\n  private loadCart() {\r\n    const storedCart = localStorage.getItem('cart');\r\n    if (storedCart) {\r\n      this.cart = JSON.parse(storedCart);\r\n      this.cartObservable.next(this.cart);\r\n    }\r\n  }\r\n\r\n  private saveCart() {\r\n    localStorage.setItem('cart', JSON.stringify(this.cart));\r\n  }\r\n\r\n  getCart(): CartItem[] {\r\n    return this.cart;\r\n  }\r\n\r\n  getCartObservable() {\r\n    return this.cartObservable.asObservable();\r\n  }\r\n\r\n  getTotal(): number {\r\n    return this.cart.reduce((total, item) => total + item.price * item.quantity, 0);\r\n  }\r\n\r\n  getTotalItems(): number {\r\n    return this.cart.reduce((total, item) => total + item.quantity, 0);\r\n  }\r\n\r\n  addProduct(product: CartItem) {\r\n    const existing = this.cart.find(item => item.id === product.id);\r\n    if (existing) {\r\n      existing.quantity += product.quantity;\r\n    } else {\r\n      this.cart.push(product);\r\n    }\r\n    this.saveCart();\r\n    this.cartObservable.next(this.cart);\r\n  }\r\n\r\n  decreaseProduct(product: CartItem) {\r\n    const index = this.cart.findIndex(item => item.id === product.id);\r\n    if (index > -1) {\r\n      if (this.cart[index].quantity > 1) {\r\n        this.cart[index].quantity--;\r\n      } else {\r\n        this.cart.splice(index, 1);\r\n      }\r\n      this.saveCart();\r\n      this.cartObservable.next(this.cart);\r\n    }\r\n  }\r\n\r\n  removeProduct(product: CartItem) {\r\n    const index = this.cart.findIndex(item => item.id === product.id);\r\n    if (index > -1) {\r\n      this.cart.splice(index, 1);\r\n      this.saveCart();\r\n      this.cartObservable.next(this.cart);\r\n    }\r\n  }\r\n\r\n  clearCart() {\r\n    this.cart = [];\r\n    this.saveCart();\r\n    this.cartObservable.next(this.cart);\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}