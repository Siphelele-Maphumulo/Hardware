{"version":3,"file":"src_app_products_products_module_ts.js","mappings":"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","sources":["./src/app/products/products-routing.module.ts","./src/app/products/products.module.ts","./src/app/products/products.page.ts","./src/app/products/products.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ProductsComponent } from './products.page'; // Update to ProductsComponent\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProductsComponent, // Use ProductsComponent here\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProductsPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProductsPageRoutingModule } from './products-routing.module';\r\nimport { ProductsComponent } from './products.page'; // Update to ProductsComponent\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, ProductsPageRoutingModule],\r\n  declarations: [ProductsComponent], // Update to ProductsComponent\r\n})\r\nexport class ProductsPageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Product } from './product.model';\r\nimport { FireserviceService } from '../fireservice.service';\r\nimport { IonContent } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  templateUrl: './products.page.html',\r\n})\r\nexport class ProductsComponent implements OnInit {\r\n  @ViewChild(IonContent, { static: false }) content!: IonContent;\r\n  products: Product[] = [];\r\n  newProduct: Product = {\r\n    prodID: '',\r\n    image: '',\r\n    title: '',\r\n    amount: 0,\r\n    catID: '',\r\n    qty: 0,\r\n    item_total_amt: 0,\r\n  };\r\n\r\n  selectedProductId: string | null = null; // used to track if we're updating\r\n\r\n  constructor(private fireService: FireserviceService) {}\r\n\r\n  ngOnInit() {\r\n    this.loadProducts();\r\n  }\r\n\r\n  loadProducts() {\r\n    this.fireService.firestore\r\n      .collection<Product>('products')\r\n      .valueChanges({ idField: 'id' })\r\n      .subscribe((data) => {\r\n        this.products = data;\r\n      });\r\n  }\r\n\r\n  // Function to generate a 10-digit product ID\r\n  generateProductId(): string {\r\n    return Math.floor(Math.random() * 9000000000 + 1000000000).toString();\r\n  }\r\n\r\n  addOrUpdateProduct() {\r\n    // Calculate total amount\r\n    this.newProduct.item_total_amt =\r\n      this.newProduct.amount * this.newProduct.qty;\r\n\r\n    if (this.selectedProductId) {\r\n      // Update existing product\r\n      this.fireService.firestore\r\n        .collection('products')\r\n        .doc(this.selectedProductId) // Access the document by ID\r\n        .update(this.newProduct)\r\n        .then(() => {\r\n          alert('Product updated successfully!');\r\n          this.resetForm();\r\n          this.loadProducts();\r\n        })\r\n        .catch((err) => {\r\n          console.error('Error updating product:', err);\r\n        });\r\n    } else {\r\n      // Add new product with generated product ID\r\n      this.newProduct.prodID = this.generateProductId(); // Generate a 10-digit product ID\r\n\r\n      // Set the new product in Firestore\r\n      this.fireService.firestore\r\n        .collection('products')\r\n        .add(this.newProduct)\r\n        .then(() => {\r\n          alert('Product added successfully!');\r\n          this.resetForm();\r\n          this.loadProducts();\r\n        })\r\n        .catch((err) => {\r\n          console.error('Error adding product:', err);\r\n        });\r\n    }\r\n  }\r\n\r\n  deleteProduct(docId: string) {\r\n    this.fireService.firestore\r\n      .collection('products')\r\n      .doc(docId)\r\n      .delete()\r\n      .then(() => {\r\n        alert('Product deleted');\r\n        this.loadProducts();\r\n      })\r\n      .catch((err) => {\r\n        console.error('Error deleting product:', err);\r\n      });\r\n  }\r\n  updateProduct(product: Product) {\r\n    // 1) Load the product into the form\r\n    this.selectedProductId = product.id;\r\n    this.newProduct = { ...product };\r\n\r\n    // 2) Scroll up to the top of the ion-content\r\n    this.content.scrollToTop(300); // 300ms animation\r\n  }\r\n\r\n  resetForm() {\r\n    this.selectedProductId = null;\r\n    this.newProduct = {\r\n      prodID: '',\r\n      image: '',\r\n      title: '',\r\n      amount: 0,\r\n      catID: '',\r\n      qty: 0,\r\n      item_total_amt: 0,\r\n    };\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar color=\"shade\">\r\n    <ion-buttons slot=\"start\" class=\"menu_btn\" color=\"shade\">\r\n      <ion-back-button defaultHref=\"/\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title style=\"text-align: center\">Products</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content>\r\n  <!-- Preview of the product being added/edited -->\r\n  <ion-card *ngIf=\"newProduct.title || newProduct.image\">\r\n    <ion-card-header>\r\n      <ion-card-title class=\"product-title\">\r\n        {{ newProduct.title }}\r\n      </ion-card-title>\r\n    </ion-card-header>\r\n    <ion-card-content>\r\n      <p>Amount: {{ newProduct.amount | currency:'ZAR':'symbol':'1.2-2' }}</p>\r\n      <p>Category ID: {{ newProduct.catID }}</p>\r\n      <img\r\n        *ngIf=\"newProduct.image\"\r\n        [src]=\"newProduct.image\"\r\n        alt=\"Preview Image\"\r\n        style=\"max-width: 100px; height: auto\"\r\n      />\r\n    </ion-card-content>\r\n  </ion-card>\r\n\r\n  <!-- Form Inputs -->\r\n  <ion-item style=\"color: rgb(43, 41, 41)\">\r\n    <ion-label position=\"floating\">Product ID</ion-label>\r\n    <ion-input [(ngModel)]=\"newProduct.prodID\" type=\"text\"></ion-input>\r\n  </ion-item>\r\n\r\n  <ion-item style=\"color: rgb(43, 41, 41)\">\r\n    <ion-label position=\"floating\">Title</ion-label>\r\n    <ion-input [(ngModel)]=\"newProduct.title\" type=\"text\"></ion-input>\r\n  </ion-item>\r\n\r\n  <ion-item style=\"color: rgb(43, 41, 41)\">\r\n    <ion-label position=\"floating\">Amount</ion-label>\r\n    <ion-input [(ngModel)]=\"newProduct.amount\" type=\"number\"></ion-input>\r\n  </ion-item>\r\n\r\n  <ion-item style=\"color: rgb(43, 41, 41)\">\r\n    <ion-label position=\"floating\">Category ID</ion-label>\r\n    <ion-input [(ngModel)]=\"newProduct.catID\" type=\"text\"></ion-input>\r\n  </ion-item>\r\n\r\n  <ion-item style=\"color: rgb(43, 41, 41)\">\r\n    <ion-label position=\"floating\">Quantity</ion-label>\r\n    <ion-input [(ngModel)]=\"newProduct.qty\" type=\"number\"></ion-input>\r\n  </ion-item>\r\n\r\n  <ion-item style=\"color: rgb(43, 41, 41)\">\r\n    <ion-label position=\"floating\">Image URL</ion-label>\r\n    <ion-input [(ngModel)]=\"newProduct.image\" type=\"text\"></ion-input>\r\n  </ion-item>\r\n\r\n  <!-- Action Buttons -->\r\n  <ion-button expand=\"full\" (click)=\"addOrUpdateProduct()\">\r\n    {{ selectedProductId ? 'Update Product' : 'Add Product' }}\r\n  </ion-button>\r\n\r\n  <ion-button\r\n    expand=\"full\"\r\n    color=\"medium\"\r\n    *ngIf=\"selectedProductId\"\r\n    (click)=\"resetForm()\"\r\n  >\r\n    Cancel\r\n  </ion-button>\r\n\r\n  <!-- Display all saved products -->\r\n  <ion-list>\r\n    <ion-item *ngFor=\"let product of products\">\r\n      <ion-label>\r\n        <h2 class=\"product-title\">{{ product.title }}</h2>\r\n        <p>Amount: {{ product.amount | currency:'ZAR':'symbol':'1.2-2' }}</p>\r\n        <p>Category ID: {{ product.catID }}</p>\r\n        <p>Quantity: {{ product.qty }}</p>\r\n      </ion-label>\r\n      <img\r\n        [src]=\"product.image\"\r\n        alt=\"Product Image\"\r\n        style=\"max-width: 60px; height: auto; margin-left: 10px\"\r\n      />\r\n      <ion-button slot=\"end\" fill=\"clear\" (click)=\"updateProduct(product)\">\r\n        Edit\r\n      </ion-button>\r\n      <ion-button\r\n        slot=\"end\"\r\n        color=\"danger\"\r\n        fill=\"clear\"\r\n        (click)=\"deleteProduct(product.id)\"\r\n      >\r\n        Delete\r\n      </ion-button>\r\n    </ion-item>\r\n  </ion-list>\r\n</ion-content>\r\n\r\n<!-- Add custom CSS in the component's style -->\r\n<style>\r\n  .product-title {\r\n    color: black;\r\n    font-weight: bold;\r\n  }\r\n</style>\r\n"],"names":[],"sourceRoot":"webpack:///"}